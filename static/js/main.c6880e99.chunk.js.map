{"version":3,"sources":["data.ts","ui/shared/constants.ts","ui/shared/mixins.ts","ui/shared/shared-styled-components.ts","ui/shared/Tag.tsx","ui/shared/util.ts","ui/EvidenceDetail/detail-styled-components.ts","ui/EvidenceDetail/index.tsx","ui/EvidenceMain/CustomMarker.tsx","ui/EvidenceMain/evidence-results-styled-components.ts","ui/EvidenceMain/EvidenceMap.tsx","ui/EvidenceMain/Result.tsx","ui/EvidenceMain/EvidenceTable.tsx","ui/EvidenceMain/TimelineHelpers.tsx","ui/EvidenceMain/EvidenceTimeline.tsx","ui/FilterBox/filter-box-styled-components.ts","ui/FilterBox/ActiveFilters.tsx","ui/FilterBox/FilterChoiceBox.tsx","ui/FilterBox/KeywordSearch.tsx","ui/FilterBox/Section.tsx","ui/FilterBox/index.tsx","ui/FilterBox/filterUtils.ts","ui/table-styled-components.ts","ui/usePageTitle.ts","ui/EvidenceApp.tsx","ui/shared/Container.tsx","ui/InstructionsPage.tsx","ui/Header.tsx","ui/Row/row-styled-components.ts","ui/Row/Categories.tsx","ui/Row/index.tsx","ui/SuspectsTable.tsx","ui/SuspectsApp.tsx","ui/Routes.tsx","index.tsx"],"names":["toDate","str","Date","toLatLng","location","jitterSeed","rand","randomSeed","create","lat","floatBetween","lng","evidence","evidenceData","map","item","realTimeEnd","undefined","latLng","_id","realTimeStart","colors","shadows","padding","widths","TextButton","css","Pill","styled","span","PillXButton","button","Tag","id","title","className","color","label","onDelete","style","backgroundColor","type","onClick","numberTimeFormatter","d","moment","tz","format","timeFormatter","realTimeRangeFormatter","formattedRealTimeStart","formattedRealTimeEnd","videoTimepointFormatter","timeSec","hhmmss","toISOString","substr","startsWith","slice","BORDER_RADIUS","ModalWrapper","section","Header","header","Buttons","nav","Content","main","videoTimepointRow","videoUrl","formattedRange","startSec","endSec","formattedStart","formattedEnd","videoTimepointRangeFormatter","videoStartTimepoint","videoEndTimepoint","scope","EvidenceDetail","isOpen","onClose","ytVideo","archiveOrgVideo","imageUrl","url","URL","hostname","pathname","searchParams","get","split","onRequestClose","contentLabel","overlay","zIndex","shouldCloseOnOverlayClick","href","src","alt","summary","locationName","target","rel","controls","width","height","frameBorder","allowFullScreen","allow","suspectTags","otherTags","rationale","CustomMarker","children","position","tooltip","tooltipOffset","ref","React","element","setElement","current","Marker","icon","Leaflet","divIcon","html","Tooltip","offset","MapWrapper","div","EVIDENCE_COLORS","TimelineWrapper","HandleShape","svg","Stripe","ResultsTable","table","TagsCell","td","ResultWrapper","tr","ActiveResultWrapper","MapMarkerDot","ActiveMapMarkerDot","capitolLatLng","EvidenceMap","activeResult","setActiveResult","onChange","locatedEvidence","filter","initialBounds","latLngBounds","MapEvents","useMap","useMapEvent","getBounds","MapContainer","bounds","TileLayer","attribution","MapMarker","event","preventDefault","el","document","querySelector","scrollIntoView","behavior","isJan6Eastern","date","toEasternTimeString","forceIncludeDate","m","dateStr","timeStr","Result","data","isActive","activate","history","useHistory","handleOnClick","useCallback","push","alwaysIncludeDate","toRealTimeFieldStr","formattedDuration","Wrapper","toUpperCase","length","EvidenceTable","results","result","RAIL_HEIGHT","railOuterStyle","cursor","railInnerStyle","pointerEvents","SliderRail","getRailProps","Handle","domain","min","max","handle","value","percent","disabled","isRight","getHandleProps","left","transform","WebkitTapHighlightColor","role","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","marginTop","viewBox","points","Track","source","getTrackProps","borderRadius","Tick","tick","display","flexDirection","alignItems","fontSize","EvidenceStripe","stripe","endValue","sliderStyle","DOMAIN_START","UTC","DOMAIN_END","clamp","val","Math","EvidenceTimeline","values","startEndTimes","onChangeTimes","useState","draggingValues","setDraggingValues","getTime","tickValues","range","evidencePoints","endPercent","mode","step","reversed","rootStyle","onUpdate","newValues","handles","right","tracks","ticks","count","Box","BoxHeader","Toggles","SectionHeader","h5","FilterPills","ActiveFilters","filters","choices","keywords","filterChoices","useMemo","Object","keys","forEach","filterKey","sectionFilters","sectionChoices","match","find","search","join","FilterChoiceBox","categoryId","selectedIds","setFilter","toggleSelection","newSelected","Set","has","delete","add","Form","Control","placeholder","e","size","ButtonGroup","toggle","vertical","choice","ToggleButton","variant","checked","classnames","hidden","toLowerCase","includes","KeywordSearch","Section","FilterBox","toggles","onKeywordsChanged","onFilterChanged","onToggleChanged","removeOneFromSection","Switch","includeUntimestamped","evt","params","suspect","applyFilters","rawKeywords","s","some","tag","itemField","keyword","toLocaleLowerCase","indexOf","AppWrapper","TableWrapper","TableStyle","ScrollableTable","TableHead","thead","StickyTH","th","EvidenceResultsWrapper","EvidenceTableWrapper","EvidenceCount","ButtonLink","usePageTitle","previousTitle","FILTER_CHOICES","allLocations","allSuspects","allOtherTags","Array","from","sort","buildFilterChoices","Modal","setAppElement","EvidenceApp","setFilters","setKeywords","setToggles","setStartEndTimes","detailId","useParams","closeModal","mapBounds","setMapBounds","mapResults","contains","useEffect","onKeyUp","key","window","addEventListener","removeEventListener","newContent","oldFilters","newKeywords","newValue","oldToggles","r","InstructionsPage","Container","to","spec","rowNum","cellData","colSpan","rowSpan","top","medText","CrimeCategories","ul","CrimeCategory","li","HashtagCellWrapper","LinksCellWrapper","SummaryCellWrapper","Categories","category","present","name","SuspectPhoto","img","ImageCell","primaryPhotoUrl","regexMatch","photoURL","HashtagLink","hashtag","formattedHashtag","encodeURIComponent","HashtagCell","primaryHashtag","alternateHashtags","LinksCell","links","compositeURL","filesUrl","filesForGroupUrl","tags","isViolent","isVandal","isOrganizer","hasEarpieceOrRadio","hasHelmetOrArmor","TwitterUserLink","username","formattedUsername","ProfileLeadsCell","profileLeads","lead","SummaryCell","sections","body","actionsSummary","appearanceSummary","associations","otherUrls","Row","data-title","lawEnforcementIdentifiers","arrestedOrPubliclyId","reportedToFbiDate","HEADER_SPEC","SuspectsTable","suspects","data-toggle","SuspectsApp","Routes","path","exact","component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c6880e99.chunk.js","sourcesContent":["import randomSeed from 'random-seed';\n\nimport evidenceData from '@jan6evidence/data/evidence.json';\nimport type { Evidence, Location } from '@jan6evidence/types';\n\n// Dates are serailized as strings, so we need to manually deserialize\n// Would be nice to move this deserializaiton to ../data/index.ts but we tried\n// and ran into compile errors, so we're doing it here for now.\nconst toDate = (str: string | undefined): Date | undefined => {\n  if (!str) {\n    return undefined;\n  }\n  try {\n    return new Date(str);\n  } catch {\n    return undefined;\n  }\n};\n\nconst toLatLng = (location: Location, jitterSeed: string): [number, number] => {\n  // jitterSeed with the evidence ID so that it's consistent\n  const rand = randomSeed.create(jitterSeed);\n  return [\n    location.lat + rand.floatBetween(-0.0002, 0.0002),\n    location.lng + rand.floatBetween(-0.0002, 0.0002),\n  ];\n};\n\nconst evidence: Evidence[] = evidenceData\n  // We don't yet have any examples of `realTimeEnd` being populated\n  // in JSON, so this makes TS types from JSON happy. Once we have a\n  // piece of evidence with this key defined, we can remove this.\n  .map((item) => ({\n    realTimeEnd: undefined,\n    ...item,\n  }))\n  // Deserialize/enrich the data\n  .map((item) => ({\n    ...item,\n    // TODO: move this to the data generation step?\n    latLng: item.location ? toLatLng(item.location, item._id) : undefined,\n    realTimeStart: toDate(item.realTimeStart),\n    realTimeEnd: toDate(item.realTimeEnd),\n  }));\n\n// eslint-disable-next-line import/prefer-default-export\nexport { evidence };\n","/* CONSTANTS */\nconst colors = {\n  tableLines: '#999',\n  titleBg: '#99ddbb',\n  headerBg: '#bbffcc',\n  link: '#374',\n  linkHover: '#051',\n  /* tag colors */\n  person: '#bbe',\n  group: '#ffe069',\n  behavior: '#fcb',\n  equipment: '#d0dd99',\n};\n\nconst shadows = {\n  lg: '0px 1px 12px rgba(0, 0, 0, 0.3)',\n  sm: '1px 1px 2px rgba(0, 0, 0, 0.2)',\n};\n\nconst padding = {\n  xs: 3,\n  sm: 6,\n  md: 12,\n  lg: 24,\n  xl: 48,\n  xxl: 72,\n};\n\nconst widths = {\n  filterbox: 240,\n};\n\nexport { colors, shadows, padding, widths };\n","import { css } from 'styled-components';\n\n/* eslint-disable import/prefer-default-export */\nexport const TextButton = css`\n  border: 0;\n  background: none;\n\n  &:hover {\n    background: rgba(0, 0, 0, 0.2);\n  }\n  &:active {\n    background: rgba(0, 0, 0, 0.4);\n    color: white;\n  }\n`;\n/* eslint-enable import/prefer-default-export */\n","import styled from 'styled-components';\n\nimport { padding, shadows } from './constants';\nimport { TextButton } from './mixins';\n\nexport const Pill = styled.span`\n  position: relative;\n  border-radius: ${padding.sm}px;\n  background: #b0adaa;\n  display: inline-block;\n  padding: 1px 4px 1px 4px;\n  margin: 0 3px 3px 0;\n  font-size: 12px;\n\n  box-shadow: ${shadows.sm};\n\n  max-width: 100px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  &.has-delete {\n    padding-right: 16px;\n  }\n`;\n\nexport const PillXButton = styled.button`\n  ${TextButton}\n  height: 100%;\n  padding-right: 4px;\n  position: absolute;\n  top: 0;\n  right: 0;\n`;\n","import React from 'react';\n\nimport { Pill, PillXButton } from './shared-styled-components';\n\ntype Props = {\n  id: string;\n  label: string;\n  className?: string;\n  color?: string;\n  title?: string;\n  onDelete?: () => void;\n};\n\nconst Tag = ({ id, title, className, color, label, onDelete }: Props) => (\n  <Pill\n    key={`tag-${title}-${id}`}\n    style={color ? { backgroundColor: color } : {}}\n    className={`${className}${onDelete ? ' has-delete' : ''}`}\n    title={title || label}\n  >\n    {label}\n    {onDelete && (\n      <PillXButton title=\"Delete\" type=\"button\" onClick={onDelete}>\n        &times;\n      </PillXButton>\n    )}\n  </Pill>\n);\n\nexport default Tag;\n","import moment from 'moment-timezone';\n\nexport const numberTimeFormatter = (d: number) => moment.tz(d, 'America/New_York').format('h:mm A');\n\nexport const timeFormatter = (d: Date | undefined): string | undefined => {\n  if (d) {\n    return moment(d).tz('America/New_York').format('h:mm A');\n  } else {\n    return undefined;\n  }\n};\n\nexport const realTimeRangeFormatter = (realTimeStart?: Date, realTimeEnd?: Date): string => {\n  const formattedRealTimeStart = timeFormatter(realTimeStart) || '??:??';\n  const formattedRealTimeEnd = realTimeEnd ? timeFormatter(realTimeEnd) : undefined;\n  if (formattedRealTimeEnd && formattedRealTimeEnd !== formattedRealTimeStart) {\n    return `${formattedRealTimeStart} - ${formattedRealTimeEnd}`;\n  } else {\n    return formattedRealTimeStart;\n  }\n};\n\nexport const videoTimepointFormatter = (timeSec?: number): string | undefined => {\n  if (timeSec === undefined) {\n    return undefined;\n  }\n  // https://stackoverflow.com/a/1322771\n  // Note that this ignores decimals.\n  const hhmmss = new Date(timeSec * 1000).toISOString().substr(11, 8);\n  if (hhmmss.startsWith('00')) {\n    return hhmmss.slice(1);\n  } else {\n    return hhmmss;\n  }\n};\n\nexport const videoTimepointRangeFormatter = (\n  startSec?: number,\n  endSec?: number\n): string | undefined => {\n  if (startSec === undefined) {\n    return undefined;\n  }\n  const formattedStart = videoTimepointFormatter(startSec) || '??:??';\n  const formattedEnd = endSec ? videoTimepointFormatter(endSec) : undefined;\n  if (formattedEnd && formattedEnd !== formattedStart) {\n    return `${formattedStart} - ${formattedEnd}`;\n  } else {\n    return formattedStart;\n  }\n};\n","import styled from 'styled-components';\n\nimport { colors, shadows, padding } from '../shared/constants';\n\nconst BORDER_RADIUS = padding.md;\n\nexport const ModalWrapper = styled.section`\n  position: absolute;\n  top: 40px;\n  left: 40px;\n  right: 40px;\n  bottom: 40px;\n  background: white;\n  border-radius: ${BORDER_RADIUS}px;\n  border: 2px solid ${colors.titleBg};\n  box-shadow: ${shadows.lg};\n\n  display: flex;\n  flex-direction: column;\n\n  a {\n    color: ${colors.link};\n\n    &:hover {\n      color: ${colors.linkHover};\n    }\n  }\n`;\n\nexport const Header = styled.header`\n  flex: 0;\n  background: ${colors.headerBg};\n  position: relative;\n  border-radius: ${BORDER_RADIUS}px ${BORDER_RADIUS}px 0 0;\n  padding: ${padding.md}px;\n\n  h2 {\n    margin: 0;\n    padding: 0;\n  }\n`;\n\nexport const Buttons = styled.nav`\n  position: absolute;\n  top: 0;\n  right: 0;\n\n  display: flex;\n\n  button {\n    background: 0;\n    border: 0;\n    padding: ${padding.md}px;\n    font-size: 32px;\n    line-height: 32px;\n    color: #555;\n    display: flex;\n    align-items: baseline;\n\n    &:not(:disabled) {\n      color: ${colors.link};\n    }\n\n    &:hover:not(:disabled) {\n      color: ${colors.linkHover};\n\n      background: rgba(255, 255, 255, 0.3);\n    }\n\n    &.close-button {\n      font-size: 36px;\n      line-height: 36px;\n      padding: ${padding.md}px ${padding.lg}px;\n    }\n  }\n`;\n\nexport const Content = styled.main`\n  padding: ${padding.md}px;\n  overflow-y: auto;\n  overflow-x: hidden;\n\n  .media {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    background: #333;\n    margin: ${-padding.md}px ${-padding.md}px 0 ${-padding.md}px;\n    color: ${colors.headerBg};\n\n    &:hover {\n      color: ${colors.titleBg};\n    }\n\n    img {\n      min-height: 300px;\n    }\n    video {\n      min-width: 600px;\n    }\n\n    span {\n      display: block;\n      width: 100%;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      padding: 0 ${padding.md}px;\n      text-align: center;\n    }\n  }\n\n  table {\n    border-collapse: collapse;\n    border-spacing: 0;\n    max-width: 708px;\n    margin: 0 auto;\n\n    th {\n      vertical-align: top;\n    }\n\n    td {\n      padding: 0 0 0 ${padding.md}px;\n    }\n\n    th,\n    td {\n      padding-top: ${padding.md}px;\n    }\n  }\n`;\n","import React from 'react';\nimport Modal from 'react-modal';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport Tag from '../shared/Tag';\nimport { colors } from '../shared/constants';\nimport {\n  realTimeRangeFormatter,\n  timeFormatter,\n  videoTimepointRangeFormatter,\n} from '../shared/util';\n\nimport { ModalWrapper, Header, Content, Buttons } from './detail-styled-components';\n\ntype Props = {\n  isOpen: boolean;\n  evidence: Evidence;\n  onClose: () => void;\n};\n\nconst videoTimepointRow = (evidence: Evidence) => {\n  if (!evidence.videoUrl) {\n    return undefined;\n  }\n  const formattedRange = videoTimepointRangeFormatter(\n    evidence.videoStartTimepoint,\n    evidence.videoEndTimepoint\n  );\n  if (formattedRange) {\n    return (\n      <tr>\n        <th scope=\"row\">Video timepoint</th>\n        <td>{formattedRange}</td>\n      </tr>\n    );\n  } else {\n    return undefined;\n  }\n};\n\nexport default function EvidenceDetail({ isOpen, evidence, onClose }: Props) {\n  let ytVideo = '';\n  let archiveOrgVideo = '';\n  if (evidence && (evidence.videoUrl || evidence.imageUrl)) {\n    const url = new URL(evidence.videoUrl || (evidence.imageUrl as string));\n    /* NOTE so far all our handhacked handlers are for video */\n    if (url.hostname === 'youtu.be') {\n      ytVideo = url.pathname.slice(1);\n    } else if (url.hostname === 'www.youtube.com') {\n      ytVideo = url.searchParams.get('v') || '';\n    } else if (url.hostname === 'archive.org' && evidence.videoUrl) {\n      archiveOrgVideo = url.pathname.split('/')[2] || '';\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onRequestClose={onClose}\n      contentLabel=\"Evidence Details\"\n      style={{ overlay: { zIndex: 1000 } }}\n      className=\"evidence-detail-modal\"\n      shouldCloseOnOverlayClick\n    >\n      {evidence && (\n        <ModalWrapper>\n          <Header>\n            <h2>Evidence Detail</h2>\n            <Buttons>\n              {/* <button title=\"Star\" type=\"button\" disabled>\n                &#9733;\n              </button> */}\n              <button title=\"Close\" type=\"button\" className=\"close-button\" onClick={onClose}>\n                &times;\n              </button>\n            </Buttons>\n          </Header>\n          <Content>\n            {evidence.imageUrl && (\n              <a className=\"media\" href={evidence.imageUrl}>\n                <img\n                  src={evidence.imageUrl}\n                  alt={evidence.summary || evidence.locationName || 'Evidence Image'}\n                />\n                <span>{evidence.imageUrl}</span>\n              </a>\n            )}\n            {evidence.videoUrl && (\n              <a className=\"media\" href={evidence.videoUrl} target=\"_blank\" rel=\"noreferrer\">\n                {evidence.videoUrl && !ytVideo && !archiveOrgVideo && (\n                  <video controls>\n                    <source src={evidence.videoUrl} />\n                  </video>\n                )}\n                {archiveOrgVideo && (\n                  <iframe\n                    title=\"embedded evidence video from archive.org\"\n                    src={`https://archive.org/embed/${archiveOrgVideo}`}\n                    width=\"640\"\n                    height=\"480\"\n                    frameBorder=\"0\"\n                    allowFullScreen\n                  />\n                )}\n                {ytVideo && (\n                  <iframe\n                    title=\"embedded evidence video from youtube\"\n                    width=\"560\"\n                    height=\"315\"\n                    src={`https://www.youtube.com/embed/${ytVideo}`}\n                    frameBorder=\"0\"\n                    allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                    allowFullScreen\n                  />\n                )}\n                <span>{evidence.videoUrl}</span>\n              </a>\n            )}\n            <table>\n              <tbody>\n                <tr>\n                  <th scope=\"row\">Summary</th>\n                  <td>{evidence.summary}</td>\n                </tr>\n                <tr>\n                  <th scope=\"row\">Tags</th>\n                  <td>\n                    {evidence.suspectTags &&\n                      evidence.suspectTags.map((label) => (\n                        <Tag\n                          key={`${evidence._id}-person-${label}`}\n                          id={`${evidence._id}-person-${label}`}\n                          label={label}\n                          color={colors.person}\n                          title={label}\n                        />\n                      ))}\n                    {evidence.otherTags &&\n                      evidence.otherTags.map((label) => (\n                        <Tag\n                          key={`${evidence._id}-other-${label}`}\n                          id={`${evidence._id}-other-${label}`}\n                          label={label}\n                          title={label}\n                        />\n                      ))}\n                  </td>\n                </tr>\n                <tr>\n                  <th scope=\"row\">Time</th>\n                  <td>{realTimeRangeFormatter(evidence.realTimeStart, evidence.realTimeEnd)}</td>\n                </tr>\n                {videoTimepointRow(evidence)}\n                <tr>\n                  <th scope=\"row\">Location</th>\n                  <td>{evidence.locationName}</td>\n                </tr>\n                <tr>\n                  <th scope=\"row\">Rationale</th>\n                  <td>{evidence.rationale}</td>\n                </tr>\n              </tbody>\n            </table>\n          </Content>\n        </ModalWrapper>\n      )}\n    </Modal>\n  );\n}\n","import Leaflet from 'leaflet';\nimport * as React from 'react';\nimport { Marker, Tooltip } from 'react-leaflet';\n\ntype Props = {\n  position: Leaflet.LatLngExpression;\n  children: React.ReactNode;\n  tooltip?: string;\n  tooltipOffset?: [number, number];\n};\n\nconst CustomMarker = ({ children, position, tooltip, tooltipOffset = [0, 0] }: Props) => {\n  const ref = React.useRef<HTMLDivElement | null>(null);\n  const [element, setElement] = React.useState<HTMLDivElement | null>(null);\n\n  React.useEffect(() => {\n    if (ref.current && ref.current !== element) {\n      setElement(ref.current);\n    }\n  });\n\n  return (\n    <>\n      <template>\n        <div ref={ref}>{children}</div>\n      </template>\n      {element ? (\n        <Marker position={position} icon={Leaflet.divIcon({ html: element, className: '' })}>\n          {tooltip != null && tooltip !== '' ? (\n            <Tooltip offset={tooltipOffset}>{tooltip}</Tooltip>\n          ) : null}\n        </Marker>\n      ) : null}\n    </>\n  );\n};\n\nexport default CustomMarker;\n","import styled from 'styled-components';\n\nimport { padding, colors } from '../shared/constants';\n\nexport const MapWrapper = styled.div`\n  flex: 0 0 auto;\n  background-color: #ded;\n  border: 1px solid #9a9;\n  height: 300px;\n  width: 100%;\n`;\n\nconst EVIDENCE_COLORS = {\n  photo: '#6699ff',\n  video: '#cc2266',\n  clip: 'orange',\n};\n\nexport const TimelineWrapper = styled.div`\n  flex: 0 0 auto;\n  height: 120px;\n  padding: ${padding.sm}px ${padding.lg}px;\n\n  overflow-x: hidden;\n\n  background: #111;\n  color: white;\n\n  &:hover .handle {\n    fill: #ffe433;\n  }\n\n  .selected-time {\n    margin-left: -${padding.sm}px;\n    margin-bottom: ${padding.sm}px;\n  }\n\n  .tick {\n    background-color: white;\n  }\n`;\n\nexport const HandleShape = styled.svg`\n  fill: #ffc400;\n\n  &.disabled {\n    fill: #999;\n  }\n`;\n\nexport const Stripe = styled.div`\n  position: absolute;\n  transform: translate(-50%, 0);\n  margin-top: 0;\n  z-index: 2;\n\n  .start {\n    cursor: pointer;\n  }\n\n  .duration {\n    opacity: 0.3;\n    cursor: pointer;\n  }\n\n  &.photo {\n    .start,\n    .duration {\n      background-color: ${EVIDENCE_COLORS.photo};\n    }\n  }\n  &.video {\n    .start,\n    .duration {\n      background-color: ${EVIDENCE_COLORS.video};\n    }\n  }\n\n  &:hover {\n    .start,\n    .duration {\n      background-color: white;\n    }\n  }\n`;\n\nexport const ResultsTable = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n  border-spacing: 0;\n  table-layout: fixed;\n\n  thead {\n    visibility: hidden;\n    height: 0;\n  }\n\n  th {\n    padding: 0;\n    line-height: 1px;\n\n    &.thumbnail {\n      width: 180px;\n    }\n\n    &.summary {\n      width: 360px;\n    }\n\n    &.time {\n      width: 60px;\n    }\n\n    &.location {\n      width: 144px;\n    }\n  }\n\n  tbody tr {\n    border-bottom: 1px solid ${colors.tableLines};\n\n    cursor: pointer;\n\n    &:hover {\n      background: #ffffcc;\n    }\n  }\n\n  td {\n    padding: 3px 6px;\n  }\n\n  img {\n    min-height: 120px;\n    width: 100%;\n    background: #f0f0f0;\n  }\n\n  .thumbnail-wrapper {\n    position: relative;\n    font-size: 13px;\n    color: white;\n\n    img {\n      min-height: 120px;\n      width: 100%;\n      background: #333;\n      border: 3px solid black;\n\n      &.video {\n        border-color: ${EVIDENCE_COLORS.video};\n      }\n      &.clip {\n        border-color: ${EVIDENCE_COLORS.clip};\n      }\n      &.photo {\n        border-color: ${EVIDENCE_COLORS.photo};\n      }\n    }\n\n    .triangle {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      margin: auto;\n      background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDQ4IDQ4IiBmaWxsPSIjZmZmIj48cGF0aCBkPSJNMjQgNEMxMi45NSA0IDQgMTIuOTUgNCAyNHM4Ljk1IDIwIDIwIDIwIDIwLTguOTUgMjAtMjBTMzUuMDUgNCAyNCA0em0tNCAyOVYxNWwxMiA5LTEyIDl6Ii8+PC9zdmc+);\n      color: #fff;\n      background-size: 48px 48px;\n      height: 48px;\n      width: 48px;\n      opacity: 0.8;\n    }\n\n    .duration {\n      position: absolute;\n      bottom: 6px;\n      right: 6px;\n      opacity: 0.8;\n    }\n\n    .type {\n      position: absolute;\n      top: 6px;\n      left: 6px;\n      opacity: 0.8;\n    }\n  }\n\n  /* .summary {\n    height: 100%;\n    max-height: 144px;\n    width: 100%;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n  } */\n`;\n\nexport const TagsCell = styled.td`\n  display: flex;\n  align-items: flex-start;\n  flex-wrap: wrap;\n  font-size: 13px;\n`;\n\nexport const ResultWrapper = styled.tr`\n  border-bottom: 1px solid ${colors.tableLines};\n`;\nexport const ActiveResultWrapper = styled(ResultWrapper)`\n  box-shadow: inset 0 0 0 6px #ff0;\n`;\n\nexport const MapMarkerDot = styled.div`\n  width: 12px;\n  height: 12px;\n  border-radius: 100%;\n  cursor: pointer;\n  background: #e00;\n  &:hover {\n    background: #f90;\n  }\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  position: relative;\n`;\nexport const ActiveMapMarkerDot = styled(MapMarkerDot)`\n  box-shadow: 0 0 0 3px #ff0;\n`;\n","import Leaflet from 'leaflet';\nimport type { LatLngBounds } from 'leaflet';\nimport * as React from 'react';\nimport { MapContainer, TileLayer, useMap, useMapEvent } from 'react-leaflet';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport CustomMarker from './CustomMarker';\n\nimport { MapWrapper, MapMarkerDot, ActiveMapMarkerDot } from './evidence-results-styled-components';\n\nconst capitolLatLng = Leaflet.latLng([38.8899389, -77.0090505]);\n\ntype EvidenceWithLatLng = Evidence & { latLng: [number, number] };\n\ntype Props = {\n  evidence: Array<Evidence>;\n  activeResult: Evidence | null;\n  setActiveResult: (result: Evidence | null) => void;\n  onChange: (bounds: LatLngBounds) => void;\n};\n\nconst EvidenceMap = ({ evidence, activeResult, setActiveResult, onChange }: Props) => {\n  const locatedEvidence = evidence.filter((item): item is EvidenceWithLatLng => !!item.latLng);\n\n  const initialBounds = Leaflet.latLngBounds([\n    // always include the capitol in the map bounds\n    capitolLatLng,\n    // and then the rest of the evidence items\n    ...locatedEvidence.map((item) => item.latLng),\n  ]);\n\n  // react-leaflet is weird\n  const MapEvents = React.memo(() => {\n    const map = useMap();\n    useMapEvent('click', () => {\n      setActiveResult(null);\n    });\n    useMapEvent('moveend', () => {\n      onChange(map.getBounds());\n    });\n    return null;\n  });\n\n  return (\n    <MapWrapper>\n      <MapContainer bounds={initialBounds} style={{ height: '100%' }}>\n        <MapEvents />\n        <TileLayer\n          attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://www.google.com/maps/vt?lyrs=s@189&x={x}&y={y}&z={z}\"\n        />\n        {locatedEvidence.map((item) => {\n          const MapMarker = activeResult === item ? ActiveMapMarkerDot : MapMarkerDot;\n\n          return (\n            <CustomMarker\n              key={item._id}\n              position={item.latLng}\n              tooltip={item.summary}\n              tooltipOffset={[6, 0]}\n            >\n              <MapMarker\n                onClick={(event) => {\n                  event.preventDefault();\n                  setActiveResult(item);\n                  // TODO: move this to a React ref?\n                  const el = document.querySelector(`#evidence\\\\:${item._id}`);\n                  if (el) {\n                    el.scrollIntoView({\n                      behavior: 'smooth',\n                    });\n                  }\n                }}\n              />\n            </CustomMarker>\n          );\n        })}\n      </MapContainer>\n    </MapWrapper>\n  );\n};\n\nexport default EvidenceMap;\n","import { format } from 'date-fns'; // TODO import just 'date-fns/format'\nimport moment from 'moment-timezone';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport Tag from '../shared/Tag';\n\nimport { colors } from '../shared/constants';\n\nimport { ResultWrapper, ActiveResultWrapper, TagsCell } from './evidence-results-styled-components';\n\nconst isJan6Eastern = (date: Date): boolean => {\n  const m = moment(date);\n  return m.tz('America/New_York').format('YYYY-MM-DD') === '2021-01-06';\n};\n\nconst toEasternTimeString = (date: Date, forceIncludeDate: boolean = false): string => {\n  const m = moment(date);\n  const dateStr = m.tz('America/New_York').format('YYYY-MM-DD');\n  const timeStr = m.tz('America/New_York').format('h:mm A');\n  if (isJan6Eastern(date) && !forceIncludeDate) {\n    return timeStr;\n  } else {\n    return `${dateStr} ${timeStr}`;\n  }\n};\n\nconst toRealTimeFieldStr = (\n  realTimeStart: Date | undefined,\n  realTimeEnd: Date | undefined\n): string => {\n  if (!realTimeStart) {\n    return '?';\n  }\n  if (realTimeEnd) {\n    const alwaysIncludeDate = !isJan6Eastern(realTimeStart) || !isJan6Eastern(realTimeEnd);\n    return `${toEasternTimeString(realTimeStart, alwaysIncludeDate)} - ${toEasternTimeString(\n      realTimeEnd,\n      alwaysIncludeDate\n    )}`;\n  } else {\n    return toEasternTimeString(realTimeStart);\n  }\n};\n\ntype Props = {\n  data: Evidence;\n  isActive: boolean;\n  activate: () => void;\n};\n\nconst Result = ({ data, isActive, activate }: Props) => {\n  const history = useHistory();\n  const handleOnClick = React.useCallback(() => {\n    activate();\n    history.push(`/evidence/detail/${data._id}`);\n  }, [history]);\n\n  const summary = data.summary || '';\n  const timeStr = toRealTimeFieldStr(data.realTimeStart, data.realTimeEnd);\n\n  const type = data.videoUrl ? 'video' : 'photo';\n  const formattedDuration =\n    data.videoStartTimepoint && data.videoEndTimepoint\n      ? data.videoEndTimepoint - data.videoStartTimepoint\n      : '?';\n\n  const Wrapper = isActive ? ActiveResultWrapper : ResultWrapper;\n\n  return (\n    <Wrapper onClick={handleOnClick} id={`evidence:${data._id}`}>\n      <td>\n        <div className=\"thumbnail-wrapper\">\n          <img className={type} src={data.imageUrl} alt=\"\" />\n          <span className=\"type\">{type[0].toUpperCase() + type.slice(1)}</span>\n          {type === 'video' && (\n            <>\n              <span className=\"triangle\" />\n              <span className=\"duration\">{formattedDuration}</span>\n            </>\n          )}\n        </div>\n      </td>\n      <td>\n        <div className=\"summary\">{`${summary.slice(0, 225)}${\n          summary.length > 255 ? '...' : ''\n        }`}</div>\n      </td>\n      <TagsCell>\n        {data.suspectTags &&\n          data.suspectTags.map((label) => (\n            <Tag\n              key={`${data._id}-person-${label}`}\n              id={`${data._id}-person-${label}`}\n              label={label}\n              color={colors.person}\n              title={label}\n            />\n          ))}\n        {data.otherTags &&\n          data.otherTags.map((label) => (\n            <Tag\n              key={`${data._id}-other-${label}`}\n              id={`${data._id}-other-${label}`}\n              label={label}\n              title={label}\n            />\n          ))}\n      </TagsCell>\n      <td>{timeStr}</td>\n      <td>{data.locationName || '?'}</td>\n    </Wrapper>\n  );\n};\n\nexport default Result;\n","import React from 'react';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport Result from './Result';\n\nimport { ResultsTable } from './evidence-results-styled-components';\n\ntype Props = {\n  results: Evidence[];\n  activeResult: Evidence | null;\n  setActiveResult: (result: Evidence | null) => void;\n};\n\nconst EvidenceTable = ({ results, activeResult, setActiveResult }: Props) => (\n  <ResultsTable>\n    <thead>\n      <tr>\n        <th className=\"thumbnail\">Thumbnail</th>\n        <th className=\"summary\">Summary</th>\n        <th className=\"tags\">Tags</th>\n        <th className=\"time\">Time</th>\n        <th className=\"location\">Location</th>\n      </tr>\n    </thead>\n    <tbody>\n      {results.map((result) => (\n        <Result\n          key={result._id}\n          data={result}\n          isActive={activeResult === result}\n          activate={() => setActiveResult(result)}\n        />\n      ))}\n    </tbody>\n  </ResultsTable>\n);\n\nexport default EvidenceTable;\n","import React from 'react';\nimport { useHistory } from 'react-router';\n\nimport { numberTimeFormatter } from '../shared/util';\n\nimport { HandleShape, Stripe } from './evidence-results-styled-components';\n\nexport type Range = [number, number];\n\nexport interface RangePoint {\n  id: string;\n  value: number;\n  percent: number;\n}\n\nconst RAIL_HEIGHT = 48;\n\n// *******************************************************\n// RAIL\n// *******************************************************\nconst railOuterStyle: React.CSSProperties = {\n  position: 'absolute',\n  width: '100%',\n  height: RAIL_HEIGHT,\n  cursor: 'pointer',\n};\n\nconst railInnerStyle: React.CSSProperties = {\n  position: 'absolute',\n  width: '100%',\n  height: RAIL_HEIGHT,\n  pointerEvents: 'none',\n  backgroundColor: '#555',\n};\n\ntype SliderRailProps = {\n  getRailProps: () => void;\n};\n\nexport function SliderRail({ getRailProps }: SliderRailProps) {\n  return (\n    <>\n      <div style={railOuterStyle} {...getRailProps()} />\n      <div style={railInnerStyle} />\n    </>\n  );\n}\n\n// *******************************************************\n// HANDLE COMPONENT\n// *******************************************************\ntype HandleProps = {\n  domain: Range;\n  handle: RangePoint;\n  getHandleProps: (id: string) => void;\n  disabled?: boolean;\n  isRight?: boolean;\n};\n\nexport function Handle({\n  domain: [min, max],\n  handle: { id, value, percent },\n  disabled,\n  isRight,\n  getHandleProps,\n}: HandleProps) {\n  return (\n    <>\n      <div\n        style={{\n          left: `${percent}%`,\n          position: 'absolute',\n          transform: 'translate(-50%, 0)',\n          WebkitTapHighlightColor: 'rgba(0,0,0,0)',\n          zIndex: 5,\n          width: 28,\n          height: 42,\n          cursor: 'pointer',\n          backgroundColor: 'none',\n        }}\n        {...getHandleProps(id)}\n      />\n      <div\n        role=\"slider\"\n        aria-label={`Handle at ${value}`}\n        aria-valuemin={min}\n        aria-valuemax={max}\n        aria-valuenow={value}\n        style={{\n          left: `${percent}%`,\n          position: 'absolute',\n          marginTop: -3,\n          transform: 'translate(-50%, -0)',\n          zIndex: 3,\n          width: 12,\n          height: RAIL_HEIGHT,\n        }}\n      >\n        <HandleShape\n          viewBox={`0 0 12 ${RAIL_HEIGHT + 6}`}\n          className={`handle ${id} ${disabled && 'disabled'}`}\n        >\n          {isRight ? (\n            <polygon\n              points={`0,0 12,0 12,${RAIL_HEIGHT + 6} 0,${\n                RAIL_HEIGHT + 6\n              } 0,${RAIL_HEIGHT} 6,${RAIL_HEIGHT} 6,6 0,6`}\n            />\n          ) : (\n            <polygon\n              points={`0,0 0,${RAIL_HEIGHT + 6} 12,${\n                RAIL_HEIGHT + 6\n              } 12,${RAIL_HEIGHT} 6,${RAIL_HEIGHT} 6,6 12,6 12,0`}\n            />\n          )}\n        </HandleShape>\n      </div>\n    </>\n  );\n}\n\n// *******************************************************\n// KEYBOARD HANDLE COMPONENT\n// Uses a button to allow keyboard events\n// *******************************************************\nexport function KeyboardHandle({\n  domain: [min, max],\n  handle: { id, value, percent },\n  disabled,\n  getHandleProps,\n}: HandleProps) {\n  return (\n    <button\n      type=\"button\"\n      role=\"slider\"\n      aria-valuemin={min}\n      aria-valuemax={max}\n      aria-valuenow={value}\n      style={{\n        left: `${percent}%`,\n        position: 'absolute',\n        transform: 'translate(-50%, 0)',\n        zIndex: 2,\n        width: 24,\n        height: RAIL_HEIGHT,\n        borderRadius: '50%',\n        boxShadow: '1px 1px 1px 1px rgba(0, 0, 0, 0.3)',\n        backgroundColor: disabled ? '#999' : '#ffc400',\n      }}\n      {...getHandleProps(id)}\n    />\n  );\n}\n\n// *******************************************************\n// TRACK COMPONENT\n// *******************************************************\ntype TrackProps = {\n  source: RangePoint;\n  target: RangePoint;\n  getTrackProps: () => void;\n  disabled?: boolean;\n};\n\nexport function Track({ source, target, getTrackProps, disabled }: TrackProps) {\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        height: RAIL_HEIGHT,\n        zIndex: 1,\n        backgroundColor: disabled ? '#555' : '#222',\n        borderRadius: 7,\n        cursor: 'pointer',\n        left: `${source.percent}%`,\n        width: `${target.percent - source.percent}%`,\n      }}\n      {...getTrackProps()}\n    />\n  );\n}\n\n// *******************************************************\n// TICK COMPONENT\n// *******************************************************\ntype TickType = {\n  tick: RangePoint;\n  count: number;\n  format?: (value: number) => string;\n};\n\nexport function Tick({ tick }: TickType) {\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        left: `${tick.percent}%`,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        transform: 'translate(-50%, 0px)',\n      }}\n    >\n      <div\n        className=\"tick\"\n        style={{\n          marginTop: RAIL_HEIGHT,\n          width: 1,\n          height: 6,\n        }}\n      />\n      <div\n        style={{\n          fontSize: 10,\n        }}\n      >\n        {numberTimeFormatter(tick.value)}\n      </div>\n    </div>\n  );\n}\n\nexport interface EvidencePoint {\n  id: string;\n  value: number;\n  endValue?: number;\n  percent: number;\n  endPercent?: number;\n  type: string;\n  summary?: string;\n}\n\ntype EvidenceStripeType = {\n  stripe: EvidencePoint;\n};\n\nexport function EvidenceStripe({ stripe }: EvidenceStripeType) {\n  const history = useHistory();\n\n  const title = `${numberTimeFormatter(stripe.value)} ${numberTimeFormatter(\n    stripe.endValue || 0\n  )}: ${stripe.summary || stripe.type}`;\n  return (\n    <Stripe\n      className={stripe.type}\n      style={{\n        height: RAIL_HEIGHT,\n        left: `${stripe.percent}%`,\n      }}\n      onClick={() => history.push(`/evidence/detail/${stripe.id}`)}\n    >\n      <div\n        className=\"start\"\n        title={title}\n        style={{\n          width: 3,\n          height: RAIL_HEIGHT,\n          position: 'relative',\n        }}\n      />\n      {/* <div\n        className=\"duration\"\n        title={title}\n        style={{\n          position: 'absolute',\n          width:\n            stripe.endPercent && stripe.endPercent > stripe.percent\n              ? `calc(3px + ${stripe.endPercent - stripe.percent}%)`\n              : 3,\n          height: RAIL_HEIGHT,\n          top: 0,\n          left: 0,\n        }}\n      /> */}\n    </Stripe>\n  );\n}\n","import React, { useState } from 'react';\nimport { Slider, Rail, Handles, Tracks, Ticks } from 'react-compound-slider';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { numberTimeFormatter } from '../shared/util';\n\nimport {\n  EvidencePoint,\n  Range,\n  SliderRail,\n  Handle,\n  Track,\n  Tick,\n  EvidenceStripe,\n} from './TimelineHelpers';\nimport { TimelineWrapper } from './evidence-results-styled-components';\n\nconst sliderStyle = {\n  position: 'relative',\n  width: '100%',\n};\n\n// DOMAIN_START and DOMAIN_END are the start and end times of the timeline,\n// in milliseconds since the unix epoch.\nconst DOMAIN_START = Date.UTC(2021, 0, 6, 15, 0, 0); // 10AM Eastern\nconst DOMAIN_END = Date.UTC(2021, 0, 7, 1, 0, 0); // 8PM Eastern\n\n// Returns min if (val < min), max if (val > max), and val otherwise.\nfunction clamp(val: number, min: number, max: number): number {\n  return Math.min(Math.max(val, min), max);\n}\n\nfunction buildEvidencePoints(results: Evidence[]): EvidencePoint[] {\n  return results\n    .filter((result) => !!result.realTimeStart)\n    .map((result) => {\n      const value = clamp(result.realTimeStart!.getTime(), DOMAIN_START, DOMAIN_END);\n\n      let endValue: number | undefined;\n      if (result.realTimeEnd) {\n        // we have a specific timestamp for the end of the evidence\n        endValue = clamp(result.realTimeEnd.getTime(), DOMAIN_START, DOMAIN_END);\n      } else if (result.videoEndTimepoint) {\n        // we don't have a timestamp, but we do have how long the video evidence\n        // is -- so we just add that to the start time\n        const evidenceLengthMillis = result.videoEndTimepoint * 1000;\n        endValue = value + evidenceLengthMillis;\n      }\n\n      return {\n        id: result._id,\n        value,\n        endValue,\n        percent: ((value - DOMAIN_START) / (DOMAIN_END - DOMAIN_START)) * 100,\n        endPercent: endValue\n          ? ((endValue - DOMAIN_START) / (DOMAIN_END - DOMAIN_START)) * 100\n          : undefined,\n        type: result.imageUrl ? 'photo' : 'video',\n        summary: result.summary,\n      };\n    });\n}\n\ntype EvidenceTimelineProps = {\n  startEndTimes: [Date, Date] | null;\n  onChangeTimes: (newTimes: [Date, Date] | null) => void;\n  evidence: Evidence[];\n};\n\nexport default function EvidenceTimeline({\n  startEndTimes,\n  onChangeTimes,\n  evidence,\n}: EvidenceTimelineProps) {\n  // The parent component passes in the currently-selected time range. We also\n  // maintain this local state, which has the start/end values as you're dragging\n  // the sliders. Once the user releases the slider, we pass the new values up to\n  // the parent and discard this state.\n  const [draggingValues, setDraggingValues] = useState<[number, number] | null>(null);\n\n  const domain: Range = [DOMAIN_START, DOMAIN_END];\n  let values: Range;\n  if (draggingValues) {\n    values = draggingValues;\n  } else if (startEndTimes) {\n    values = [startEndTimes[0].getTime(), startEndTimes[1].getTime()];\n  } else {\n    values = [DOMAIN_START, DOMAIN_END];\n  }\n\n  function onChange(newValues: readonly number[]) {\n    if (newValues[0] === DOMAIN_START && newValues[1] === DOMAIN_END) {\n      onChangeTimes(null);\n    } else {\n      onChangeTimes([new Date(newValues[0]), new Date(newValues[1])]);\n    }\n  }\n\n  const tickValues = [];\n  let range = DOMAIN_END - DOMAIN_START;\n  while (range >= 0) {\n    tickValues.push(range + DOMAIN_START);\n    range -= 30 * 60 * 1000; // 30 minutes between ticks\n  }\n\n  const evidencePoints = buildEvidencePoints(evidence);\n\n  return (\n    <TimelineWrapper>\n      <div className=\"selected-time\">\n        {`${numberTimeFormatter(values[0])} - ${numberTimeFormatter(values[1])}`}\n      </div>\n      <Slider\n        mode={1}\n        step={5}\n        domain={domain}\n        reversed={false}\n        rootStyle={sliderStyle}\n        onUpdate={(newValues) => setDraggingValues([newValues[0], newValues[1]])}\n        onChange={onChange}\n        values={values}\n      >\n        <Rail>{({ getRailProps }) => <SliderRail getRailProps={getRailProps} />}</Rail>\n        <Handles>\n          {({ handles, getHandleProps }) => (\n            <div className=\"slider-handles\">\n              {handles.map((handle) => (\n                <Handle\n                  key={handle.id}\n                  handle={handle}\n                  domain={domain}\n                  getHandleProps={getHandleProps}\n                  isRight={handle.value > values[0]}\n                />\n              ))}\n            </div>\n          )}\n        </Handles>\n        {evidencePoints.map((item) => (\n          <EvidenceStripe key={`evidence-stripe-${item.id}`} stripe={item} />\n        ))}\n        <Tracks left={false} right={false}>\n          {({ tracks, getTrackProps }) => (\n            <div className=\"slider-tracks\">\n              {tracks.map(({ id, source, target }) => (\n                <Track key={id} source={source} target={target} getTrackProps={getTrackProps} />\n              ))}\n            </div>\n          )}\n        </Tracks>\n        <Ticks values={tickValues}>\n          {({ ticks }) => (\n            <div className=\"slider-ticks\">\n              {ticks.map((tick) => (\n                <Tick key={tick.id} tick={tick} count={ticks.length} />\n              ))}\n            </div>\n          )}\n        </Ticks>\n      </Slider>\n      <div>{`${numberTimeFormatter(values[0])} - ${numberTimeFormatter(values[1])}`}</div>\n    </TimelineWrapper>\n  );\n}\n","import styled from 'styled-components';\n\nimport { colors, shadows, padding, widths } from '../shared/constants';\nimport { TextButton } from '../shared/mixins';\n\nexport const Box = styled.div`\n  width: ${widths.filterbox}px;\n  min-height: 100vh;\n  max-height: 100vh;\n  position: fixed;\n  top: 0;\n  left: 0;\n\n  font-size: 12px;\n  line-height: 18px;\n\n  z-index: 10;\n  box-shadow: ${shadows.lg};\n  background-color: #ddd;\n  border-right: 2px solid ${colors.tableLines};\n\n  display: flex;\n  flex-direction: column;\n\n  h4 {\n    font-size: 18px;\n    line-height: 24px;\n    padding-left: ${padding.sm}px;\n  }\n\n  h5 {\n    font-size: 15px;\n    line-height: 24px;\n  }\n\n  .btn-group-toggle {\n    flex: 1 1 auto;\n    max-height: 25vh;\n    overflow-y: auto;\n    border-top: 1px solid ${colors.tableLines};\n    border-bottom: 1px solid ${colors.tableLines};\n\n    display: block;\n\n    > .btn {\n      font-size: 12px;\n      line-height: 12px;\n      text-align: left;\n      padding: ${padding.sm}px;\n      border-radius: 0;\n\n      color: black;\n      background-color: white;\n      border-color: ${colors.tableLines};\n\n      &:hover {\n        background-color: #bbb;\n      }\n\n      &.active {\n        color: black;\n        background-color: #f0f099;\n\n        &:hover {\n          background-color: #ff0;\n        }\n      }\n\n      &:first-child {\n        border-top: 0;\n      }\n\n      &.hidden {\n        display: none;\n      }\n    }\n  }\n\n  .choice-filter {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    z-index: 1;\n    border-bottom: 0;\n    border-color: ${colors.tableLines};\n    width: calc(100% + 1px);\n  }\n`;\n\nexport const BoxHeader = styled.div`\n  display: flex;\n  align-items: stretch;\n  margin-bottom: ${padding.md}px;\n\n  h4 {\n    flex: 1 1 auto;\n    margin-bottom: 0;\n  }\n\n  button {\n    ${TextButton}\n  }\n`;\n\nexport const Toggles = styled.div`\n  padding: ${padding.md}px ${padding.sm}px ${padding.sm}px ${padding.sm}px;\n`;\n\nexport const SectionHeader = styled.h5`\n  flex: 0 0 auto;\n  width: 100%;\n  text-align: left;\n\n  padding: ${padding.sm}px;\n  padding-bottom: 0;\n\n  display: flex;\n  align-items: center;\n`;\n\nexport const FilterPills = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  padding-left: ${padding.sm}px;\n\n  .time {\n    background: #beb;\n  }\n  .location {\n    background: white;\n  }\n  .suspect {\n    background: ${colors.person};\n  }\n  .type {\n    background: #bbe;\n  }\n`;\n","import React from 'react';\n\nimport type { Filters, FilterChoices, FilterChoice } from '../../types/Filters';\nimport Tag from '../shared/Tag';\n\nimport { FilterPills } from './filter-box-styled-components';\n\ntype Props = {\n  filters: Filters;\n  choices: FilterChoices;\n  keywords: string[];\n  onDelete: (type: 'keywords' | keyof Filters, id: string) => void;\n};\n\nconst ActiveFilters = ({ filters, choices, keywords, onDelete }: Props) => {\n  const filterChoices = React.useMemo(() => {\n    const result: (FilterChoice & { type: keyof Filters })[] = [];\n    (Object.keys(filters) as (keyof Filters)[]).forEach((filterKey) => {\n      const sectionFilters: Set<string> = filters[filterKey];\n      const sectionChoices: FilterChoice[] | undefined = choices[filterKey];\n      if (sectionChoices) {\n        sectionFilters.forEach((id) => {\n          const match = sectionChoices.find((element) => element._id === id);\n          if (match) {\n            result.push({ ...match, type: filterKey });\n          }\n        });\n      }\n    });\n    return result;\n  }, [filters, choices]);\n\n  const search = keywords.join(' ');\n\n  return (\n    <FilterPills>\n      {filterChoices.map(({ _id, type, label }) => (\n        <Tag\n          key={`active-${_id}`}\n          id={_id}\n          className={type}\n          label={label}\n          title={`${type[0].toUpperCase() + type.slice(1)}: ${label}`}\n          onDelete={() => onDelete(type, _id)}\n        />\n      ))}\n      {search.length > 0 && (\n        <Tag\n          key=\"active-keywords\"\n          id=\"search\"\n          label={search}\n          className=\"keywords\"\n          title={`Keywords: ${search}`}\n          onDelete={() => onDelete('keywords', search)}\n        />\n      )}\n    </FilterPills>\n  );\n};\n\nexport default ActiveFilters;\n","import classnames from 'classnames';\nimport React from 'react';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport Form from 'react-bootstrap/Form';\nimport ToggleButton from 'react-bootstrap/ToggleButton';\n\nimport type { FilterChoice } from '../../types/Filters';\n\ntype Props = {\n  categoryId: string;\n  choices: FilterChoice[];\n  selectedIds: Set<string>;\n  onChange: (choiceIds: Set<string>) => void;\n};\n\nconst FilterChoiceBox = ({ categoryId, choices, selectedIds, onChange }: Props) => {\n  const [filter, setFilter] = React.useState<string>('');\n\n  const toggleSelection = (id: string) => {\n    const newSelected = new Set(selectedIds);\n    if (selectedIds.has(id)) {\n      newSelected.delete(id);\n    } else {\n      newSelected.add(id);\n    }\n    onChange(newSelected);\n  };\n\n  return (\n    <>\n      {choices.length > 8 && (\n        <Form.Control\n          type=\"text\"\n          placeholder=\"Filter...\"\n          onChange={(e) => setFilter(e.target.value)}\n          value={filter}\n          size=\"sm\"\n          className=\"choice-filter\"\n        />\n      )}\n      <ButtonGroup toggle vertical>\n        {choices.map((choice) => (\n          <ToggleButton\n            key={`${categoryId}-choice-${choice._id}`}\n            type=\"checkbox\"\n            variant=\"secondary\"\n            checked={selectedIds.has(choice._id)}\n            value=\"1\"\n            onChange={() => toggleSelection(choice._id)}\n            className={classnames({\n              hidden:\n                /* selectedIds.has(choice.id) || // TODO should chosen items disappear or go? */\n                !choice.label.toLowerCase().includes(filter.toLowerCase()),\n            })}\n          >\n            {choice.label}\n          </ToggleButton>\n        ))}\n      </ButtonGroup>\n    </>\n  );\n};\n\nexport default FilterChoiceBox;\n","import React from 'react';\nimport Form from 'react-bootstrap/Form';\n\nimport { SectionHeader } from './filter-box-styled-components';\n\ntype Props = {\n  onChange: (search: string) => void;\n  value: string;\n};\n\nconst KeywordSearch = ({ onChange, value }: Props) => {\n  return (\n    <>\n      <SectionHeader>Keywords</SectionHeader>\n      <Form.Control\n        type=\"text\"\n        placeholder=\"Search\"\n        onChange={(e) => onChange(e.target.value)}\n        value={value}\n        size=\"sm\"\n      />\n    </>\n  );\n};\n\nexport default KeywordSearch;\n","import React from 'react';\n\nimport { SectionHeader } from './filter-box-styled-components';\n\ntype Props = {\n  label?: string;\n  children: React.ReactNode;\n};\n\nconst Section = ({ children, label }: Props) => {\n  return (\n    <>\n      {label && <SectionHeader>{label}</SectionHeader>}\n      {children}\n    </>\n  );\n};\n\nexport default Section;\n","import React from 'react';\nimport Form from 'react-bootstrap/Form';\n\nimport type { Filters, FilterChoices, Toggles } from '../../types/Filters';\n\nimport ActiveFilters from './ActiveFilters';\nimport FilterChoiceBox from './FilterChoiceBox';\n\nimport KeywordSearch from './KeywordSearch';\nimport Section from './Section';\nimport { Box, BoxHeader, Toggles as TogglesContainer } from './filter-box-styled-components';\n\ntype Props = {\n  keywords: string[];\n  filters: Filters;\n  toggles: Toggles;\n  choices: FilterChoices;\n  onKeywordsChanged: (newKeywords: string[]) => void;\n  onFilterChanged: <K extends keyof Filters>(key: K, newValue: Filters[K]) => void;\n  onToggleChanged: <K extends keyof Toggles>(key: K, newValue: Toggles[K]) => void;\n};\n\nconst removeOneFromSection = (section: Set<string>, id: string) => {\n  section.delete(id);\n  return section;\n};\n\nconst FilterBox = ({\n  keywords,\n  filters,\n  toggles,\n  choices,\n  onKeywordsChanged,\n  onFilterChanged,\n  onToggleChanged,\n}: Props) => {\n  const clearAll = () => {\n    onFilterChanged('location', new Set());\n    onFilterChanged('suspect', new Set());\n    onFilterChanged('otherTags', new Set());\n    onKeywordsChanged([]);\n  };\n\n  return (\n    <Box>\n      <BoxHeader>\n        <h4>Filters</h4>\n        <button type=\"button\" onClick={clearAll}>\n          Clear all\n        </button>\n      </BoxHeader>\n      <ActiveFilters\n        filters={filters}\n        choices={choices}\n        keywords={keywords}\n        onDelete={(type: 'keywords' | keyof Filters, id) =>\n          type === 'keywords'\n            ? onKeywordsChanged([])\n            : onFilterChanged(type, removeOneFromSection(filters[type], id))\n        }\n      />\n      <TogglesContainer>\n        <Form.Switch\n          type=\"switch\"\n          id=\"include-untimestamped\"\n          label=\"Include evidence without a time\"\n          checked={toggles.includeUntimestamped}\n          onChange={(evt) => onToggleChanged('includeUntimestamped', evt.target.checked)}\n        />\n      </TogglesContainer>\n      <KeywordSearch\n        onChange={(search) => onKeywordsChanged(search.split(' '))}\n        value={keywords.join(' ')}\n      />\n\n      <Section label=\"Location\">\n        <FilterChoiceBox\n          categoryId=\"location\"\n          choices={choices.location}\n          selectedIds={filters.location}\n          onChange={(params) => onFilterChanged('location', params)}\n        />\n      </Section>\n      <Section label=\"Suspects\">\n        <FilterChoiceBox\n          categoryId=\"suspects\"\n          choices={choices.suspect}\n          selectedIds={filters.suspect}\n          onChange={(params) => onFilterChanged('suspect', params)}\n        />\n      </Section>\n      <Section label=\"Other Tags\">\n        <FilterChoiceBox\n          categoryId=\"otherTags\"\n          choices={choices.otherTags}\n          selectedIds={filters.otherTags}\n          onChange={(params) => onFilterChanged('otherTags', params)}\n        />\n      </Section>\n    </Box>\n  );\n};\n\nexport default FilterBox;\n","import type { Evidence } from '@jan6evidence/types';\n\nimport type { FilterChoices, Filters, Toggles } from '../../types/Filters';\n\nexport function buildFilterChoices(evidence: Evidence[]): FilterChoices {\n  const allLocations = new Set<string>();\n  const allSuspects = new Set<string>();\n  const allOtherTags = new Set<string>();\n  evidence.forEach((item) => {\n    if (item.locationName) {\n      allLocations.add(item.locationName);\n    }\n\n    if (item.suspectTags) {\n      item.suspectTags.forEach((tag) => allSuspects.add(tag));\n    }\n\n    if (item.otherTags) {\n      item.otherTags.forEach((tag) => allOtherTags.add(tag));\n    }\n  });\n\n  return {\n    location: Array.from(allLocations)\n      .sort()\n      .map((s) => ({ _id: s, label: s })),\n    suspect: Array.from(allSuspects)\n      .sort()\n      .map((s) => ({ _id: s, label: s })),\n    otherTags: Array.from(allOtherTags)\n      .sort()\n      .map((s) => ({ _id: s, label: s })),\n  };\n}\n\nexport function applyFilters(\n  evidence: Evidence[],\n  filters: Filters,\n  rawKeywords: string[],\n  toggles: Toggles,\n  startEndTimes: [Date, Date] | null\n): Evidence[] {\n  const keywords = rawKeywords.filter((s) => s);\n\n  return evidence.filter((item) => {\n    if (filters.location.size > 0) {\n      if (!item.locationName) {\n        return false;\n      }\n\n      if (!filters.location.has(item.locationName)) {\n        return false;\n      }\n    }\n\n    if (filters.suspect.size > 0) {\n      if (!item.suspectTags) {\n        return false;\n      }\n\n      if (!item.suspectTags.some((tag) => filters.suspect.has(tag))) {\n        return false;\n      }\n    }\n\n    if (filters.otherTags.size > 0) {\n      if (!item.otherTags) {\n        return false;\n      }\n\n      if (!item.otherTags.some((tag) => filters.otherTags.has(tag))) {\n        return false;\n      }\n    }\n\n    if (keywords.length > 0) {\n      if (\n        ![\n          item.locationName,\n          ...(item.otherTags || []),\n          ...(item.suspectTags || []),\n          item.rationale,\n          item.summary,\n        ].some((itemField) => {\n          if (!itemField) {\n            return false;\n          }\n\n          return keywords.some(\n            (keyword) => itemField.toLocaleLowerCase().indexOf(keyword.toLocaleLowerCase()) >= 0\n          );\n        })\n      ) {\n        return false;\n      }\n    }\n\n    if (!toggles.includeUntimestamped && !item.realTimeStart) {\n      return false;\n    }\n\n    if (startEndTimes && item.realTimeStart) {\n      if (item.realTimeStart < startEndTimes[0] || item.realTimeStart > startEndTimes[1]) {\n        return false;\n      }\n    }\n\n    return true;\n  });\n}\n","import styled from 'styled-components';\n\nimport { colors, widths, padding } from './shared/constants';\n\nexport const AppWrapper = styled.div`\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n\n  h1 {\n    padding: 6px;\n    margin: 0;\n    background: ${colors.titleBg};\n  }\n`;\n\nexport const TableWrapper = styled.div`\n  position: relative;\n  flex: 1 1 auto;\n  background: #fcfcfc;\n\n  overflow: scroll;\n`;\n\nconst TableStyle = styled.table`\n  border-spacing: 0;\n  border-collapse: collapse;\n\n  th,\n  td {\n    margin: 0;\n    padding: 0 6px;\n  }\n\n  tbody tr {\n    border-bottom: 1px solid ${colors.tableLines};\n    &:hover {\n      background: #f9f9f9;\n    }\n  }\n\n  a {\n    color: ${colors.link};\n    &:hover {\n      color: ${colors.linkHover};\n    }\n  }\n`;\n\nexport const ScrollableTable = styled(TableStyle)`\n  width: 100%;\n`;\n\nexport const HeadFloater = styled(TableStyle)`\n  position: absolute;\n  top: 0;\n`;\n\nexport const TableHead = styled.thead`\n  background: white;\n`;\n\nexport const StickyTH = styled.th`\n  background: ${colors.headerBg};\n  position: sticky;\n  z-index: 10;\n\n  .parent-category {\n    border-bottom: 1px solid #051;\n  }\n`;\n\nexport const EvidenceResultsWrapper = styled.div`\n  padding-left: ${widths.filterbox}px;\n  width: 100%;\n  max-height: 100vh;\n  min-height: 100vh;\n\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n`;\n\nexport const EvidenceTableWrapper = styled.div`\n  flex: 1 1 auto;\n  overflow-y: scroll;\n\n  border-top: 1px solid ${colors.tableLines};\n`;\n\nexport const EvidenceCount = styled.div`\n  padding: ${padding.sm}px;\n`;\n\nexport const ButtonLink = styled.button`\n  border: 0;\n  background: transparent;\n  margin: 0;\n  padding: 0;\n  font-size: inherit;\n  line-height: inherit;\n  color: ${colors.link};\n  text-decoration: underline;\n\n  &:hover {\n    color: ${colors.linkHover};\n  }\n`;\n","import * as React from 'react';\n\nconst usePageTitle = (title: string) => {\n  React.useEffect(() => {\n    const previousTitle = document.title;\n    document.title = title;\n    return () => {\n      document.title = previousTitle;\n    };\n  }, [title]);\n};\n\nexport default usePageTitle;\n","import type { LatLngBounds } from 'leaflet';\nimport React from 'react';\nimport Modal from 'react-modal';\nimport { useParams, useHistory } from 'react-router-dom';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { evidence } from '../data';\n\nimport { Filters, Toggles } from '../types/Filters';\n\nimport EvidenceDetail from './EvidenceDetail';\nimport { EvidenceMap, EvidenceTable, EvidenceTimeline } from './EvidenceMain';\nimport FilterBox from './FilterBox';\nimport { applyFilters, buildFilterChoices } from './FilterBox/filterUtils';\nimport {\n  EvidenceResultsWrapper,\n  EvidenceTableWrapper,\n  ButtonLink,\n  EvidenceCount,\n} from './table-styled-components';\nimport usePageTitle from './usePageTitle';\n\nconst FILTER_CHOICES = buildFilterChoices(evidence);\n\nModal.setAppElement('#root');\n\nconst EvidenceApp = () => {\n  usePageTitle('Evidence Explorer');\n\n  const [filters, setFilters] = React.useState<Filters>({\n    location: new Set<string>(),\n    suspect: new Set<string>(),\n    otherTags: new Set<string>(),\n  });\n  const [keywords, setKeywords] = React.useState<string[]>([]);\n  const [toggles, setToggles] = React.useState<Toggles>({\n    includeUntimestamped: true,\n  });\n  const [startEndTimes, setStartEndTimes] = React.useState<[Date, Date] | null>(null);\n  const { detailId } = useParams<{ detailId?: string }>();\n  const history = useHistory();\n  const closeModal = React.useCallback(() => history.push(`/evidence`), [history]);\n\n  const [mapBounds, setMapBounds] = React.useState<LatLngBounds | null>(null);\n\n  const results = applyFilters(evidence, filters, keywords, toggles, startEndTimes);\n  const [activeResult, setActiveResult] = React.useState<Evidence | null>(null);\n\n  const mapResults = results.filter((result) => {\n    if (!mapBounds) return true;\n\n    return result.latLng ? mapBounds.contains(result.latLng) : false;\n  });\n\n  React.useEffect(() => {\n    const onKeyUp = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        setActiveResult(null);\n      }\n    };\n    window.addEventListener('keyup', onKeyUp);\n    return () => window.removeEventListener('keyup', onKeyUp);\n  });\n\n  return (\n    <div>\n      <FilterBox\n        onFilterChanged={(section, newContent) => {\n          setActiveResult(null);\n          setMapBounds(null);\n          setFilters((oldFilters) => ({ ...oldFilters, [section]: newContent }));\n        }}\n        onKeywordsChanged={(newKeywords) => setKeywords(newKeywords)}\n        filters={filters}\n        choices={FILTER_CHOICES}\n        keywords={keywords}\n        toggles={toggles}\n        onToggleChanged={(toggle, newValue) => {\n          setToggles((oldToggles) => ({ ...oldToggles, [toggle]: newValue }));\n        }}\n      />\n      <EvidenceResultsWrapper>\n        <h1>Evidence Database</h1>\n        <EvidenceMap\n          evidence={results}\n          activeResult={activeResult}\n          setActiveResult={setActiveResult}\n          onChange={(bounds) => setMapBounds(bounds)}\n        />\n        <EvidenceTimeline\n          startEndTimes={startEndTimes}\n          onChangeTimes={setStartEndTimes}\n          // We re-filter here, ignoring time time filter, so that we still show\n          // evidence on the timeline that isn't in the selected time range\n          evidence={applyFilters(evidence, filters, keywords, toggles, null)}\n        />\n        <EvidenceCount>\n          {results.length > mapResults.length ? (\n            <>\n              {mapResults.length} bits of mapped evidence (\n              <ButtonLink\n                type=\"button\"\n                onClick={(event) => {\n                  event.preventDefault();\n                  setMapBounds(null);\n                }}\n              >\n                show all {results.length} bits of evidence instead\n              </ButtonLink>\n              )\n            </>\n          ) : (\n            <>{mapResults.length} bits of evidence</>\n          )}\n        </EvidenceCount>\n        <EvidenceTableWrapper>\n          <EvidenceTable\n            results={mapResults}\n            activeResult={activeResult}\n            setActiveResult={setActiveResult}\n          />\n        </EvidenceTableWrapper>\n      </EvidenceResultsWrapper>\n      <EvidenceDetail\n        isOpen={!!detailId}\n        evidence={results.find((r) => r._id === detailId)!}\n        onClose={closeModal}\n      />\n    </div>\n  );\n};\n\nexport default EvidenceApp;\n","import styled from 'styled-components';\n\nexport default styled.div`\n  width: 90%;\n  margin: auto;\n  padding: 20px 0;\n`;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport Container from './shared/Container';\n\nfunction InstructionsPage() {\n  return (\n    <Container>\n      <h1>The Archive</h1>\n      <p>A work in progress.</p>\n      <h2>Suspects</h2>\n      <p>\n        <Link to=\"/suspects\">Table View</Link>\n      </p>\n      <h2>Evidence</h2>\n      <p>\n        <Link to=\"/evidence\">Evidence Explorer</Link>\n      </p>\n    </Container>\n  );\n}\n\nexport default InstructionsPage;\n","import React from 'react';\n\nimport { TableHead, StickyTH } from './table-styled-components';\n\nexport type HeaderCell = {\n  rowSpan?: number;\n  colSpan?: number;\n  title: string;\n  ref?: (instance: HTMLTableHeaderCellElement | null) => void;\n  width?: number;\n};\n\ntype Props = {\n  spec: HeaderCell[][];\n  adjustDimensions?: boolean;\n};\n\nconst Header = ({ spec }: Props) => (\n  <TableHead>\n    {spec.map((tr, rowNum) => (\n      // eslint-disable-next-line react/no-array-index-key\n      <tr key={rowNum}>\n        {tr.map((cellData) => {\n          const colSpan = cellData.colSpan || 1;\n          return (\n            <StickyTH\n              rowSpan={cellData.rowSpan || 1}\n              colSpan={colSpan}\n              style={{ top: `${rowNum * 25}px` }}\n              key={cellData.title}\n            >\n              <div className={`${colSpan > 1 ? 'parent-category' : ''}`}>{cellData.title}</div>\n            </StickyTH>\n          );\n        })}\n      </tr>\n    ))}\n  </TableHead>\n);\n\nexport default Header;\n","import styled from 'styled-components';\n\nimport { padding } from '../shared/constants';\n\nconst xlText = '20px';\nconst medText = '14px';\nconst smallText = '13px';\n\nexport const ROW_HEIGHT = 180;\n\nexport const CrimeCategories = styled.ul`\n  padding: 0;\n`;\n\nexport const CrimeCategory = styled.li`\n  list-style-type: none;\n  background: #eee;\n  padding: ${padding.xs}px ${padding.sm}px;\n  border-radius: ${padding.sm}px;\n  margin-bottom: ${padding.sm}px;\n  mix-blend-mode: darken;\n`;\n\nexport const HashtagCellWrapper = styled.td`\n  font-size: ${xlText};\n  .alternates {\n    font-size: ${smallText};\n    display: flex;\n    flex-wrap: wrap;\n\n    .alternate {\n      margin-right: 6px;\n    }\n  }\n`;\n\nexport const LinksCellWrapper = styled.td`\n  font-size: ${medText};\n`;\n\nexport const SummaryCellWrapper = styled.td`\n  font-size: ${medText};\n  p {\n    padding: 12px 0;\n    margin: 0;\n  }\n\n  p + p {\n    padding-top: 0;\n  }\n`;\n","import React from 'react';\n\nimport { CrimeCategories, CrimeCategory } from './row-styled-components';\n\nexport type CategoryType = {\n  id: string;\n  name: string;\n  color?: string;\n  present?: boolean;\n};\nexport type CategoriesType = CategoryType[];\n\ninterface Props {\n  id: string;\n  data: CategoriesType;\n  // addCategory: (id: string) => null,\n  // removeCategory: (id: string) => null,\n}\n\nconst Categories: React.FunctionComponent<Props> = ({\n  id,\n  data /* addCategory, removeCategory, */,\n}: Props) => {\n  return (\n    <>\n      <CrimeCategories>\n        {data.map((category) => {\n          if (category.present) {\n            return (\n              <CrimeCategory\n                key={`${id}-${category.id}`}\n                style={{ backgroundColor: category.color }}\n              >\n                {category.name}\n              </CrimeCategory>\n            );\n          }\n          return null;\n        })}\n      </CrimeCategories>\n    </>\n  );\n};\n\nexport default Categories;\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport type { Suspect } from '@jan6evidence/types';\n\nimport Categories from './Categories';\n\nimport { LinksCellWrapper, SummaryCellWrapper, HashtagCellWrapper } from './row-styled-components';\n\nconst SuspectPhoto = styled.img`\n  max-width: 100px;\n  max-height: 100px;\n`;\n\ntype Props = {\n  data: Suspect;\n};\n\nconst ImageCell = ({ data }: Props) => {\n  if (!data.primaryPhotoUrl) {\n    return null;\n  }\n\n  const regexMatch = data.primaryPhotoUrl?.match(/https:\\/\\/drive.google.com\\/file\\/d\\/(\\w+)\\//);\n\n  let photoURL = data.primaryPhotoUrl;\n  if (regexMatch) {\n    photoURL = `https://drive.google.com/uc?export=view&id=${regexMatch[1]}`;\n  }\n\n  return (\n    <td>\n      <a href={photoURL} target=\"_blank\" rel=\"noopener noreferrer\">\n        <SuspectPhoto src={photoURL} alt=\"\" />\n      </a>\n    </td>\n  );\n};\n\nconst HashtagLink = ({ hashtag }: { hashtag: string }) => {\n  let formattedHashtag = hashtag;\n  if (!formattedHashtag.startsWith('#')) {\n    formattedHashtag = `#${hashtag}`;\n  }\n\n  return (\n    <a\n      href={`https://twitter.com/search?q=${encodeURIComponent(formattedHashtag)}`}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      {hashtag}\n    </a>\n  );\n};\n\nconst HashtagCell = ({ data }: Props) => (\n  <HashtagCellWrapper>\n    <HashtagLink hashtag={data.primaryHashtag} />\n    {data.alternateHashtags.length > 0 && (\n      <p className=\"alternates\">\n        {data.alternateHashtags.map((hashtag) => (\n          <span className=\"alternate\">\n            <HashtagLink hashtag={hashtag} />\n          </span>\n        ))}\n      </p>\n    )}\n  </HashtagCellWrapper>\n);\n\nconst LinksCell = ({ data }: Props) => {\n  const links = [\n    {\n      label: 'Composites',\n      url: data.compositeURL,\n    },\n    {\n      label: 'Files',\n      url: data.filesUrl,\n    },\n    {\n      label: 'Group Files',\n      url: data.filesForGroupUrl,\n    },\n  ].filter(({ url }) => url);\n\n  return (\n    <LinksCellWrapper>\n      {links.map(({ label, url }) => (\n        <p key={label}>\n          <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n            {label}\n          </a>\n        </p>\n      ))}\n    </LinksCellWrapper>\n  );\n};\n\nconst TagsCell = ({ data }: Props) => {\n  const tags = [\n    {\n      present: !!data.category,\n      id: 'category',\n      name: data.category!,\n      color: '#ccc',\n    },\n    {\n      present: data.isViolent,\n      id: 'violent',\n      name: 'Violence',\n      color: '#dd4b4b',\n    },\n    {\n      present: data.isVandal,\n      id: 'vandalism',\n      name: 'Vandalism',\n      color: '#ffba5f',\n    },\n    {\n      present: data.isOrganizer,\n      id: 'organizer',\n      name: 'Organizer',\n      color: '#ced62a',\n    },\n    {\n      present: data.hasEarpieceOrRadio,\n      id: 'earpiece',\n      name: 'Earpiece / Radio',\n      color: '#bec4ff',\n    },\n    {\n      present: data.hasHelmetOrArmor,\n      id: 'helmet',\n      name: 'Helmet / Armor',\n      color: '#9084ff',\n    },\n  ];\n\n  return (\n    <td>\n      <Categories id={data._id} data={tags} />\n    </td>\n  );\n};\n\nconst TwitterUserLink = ({ username }: { username: string }) => {\n  let formattedUsername = username;\n  if (formattedUsername.startsWith('@')) {\n    formattedUsername = username.slice(1);\n  }\n\n  return (\n    <a\n      href={`https://twitter.com/${encodeURIComponent(formattedUsername)}`}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      {username}\n    </a>\n  );\n};\n\nconst ProfileLeadsCell = ({ data }: Props) => {\n  return (\n    <td>\n      {data.profileLeads.map((lead) => (\n        <p key={lead}>\n          <TwitterUserLink username={lead} />\n        </p>\n      ))}\n    </td>\n  );\n};\n\nconst SummaryCell = ({ data }: Props) => {\n  const sections = [\n    { header: 'Brief summary of observed actions', body: data.actionsSummary },\n    { header: 'Appearance notes', body: data.appearanceSummary },\n    { header: 'Associated with', body: data.associations.join(', ') },\n    {\n      header: 'URLs for additional information / images',\n      body: data.otherUrls,\n    },\n  ].filter(({ body }) => body);\n\n  return (\n    <SummaryCellWrapper>\n      {sections.map(({ header, body }) => (\n        <p key={header}>\n          <strong>{header}</strong>\n          <br />\n          {body}\n        </p>\n      ))}\n    </SummaryCellWrapper>\n  );\n};\n\n// TODO differentiate by cell type based on columnIndex\nconst Row = ({ data }: Props) => (\n  <tr data-title={`suspect-${data._id}`}>\n    <ImageCell data={data} />\n    <HashtagCell data={data} />\n    <LinksCell data={data} />\n    <TagsCell data={data} />\n    <td>{data.lawEnforcementIdentifiers}</td>\n    <td>{data.arrestedOrPubliclyId}</td>\n    <ProfileLeadsCell data={data} />\n    <td>{data.reportedToFbiDate}</td>\n    <SummaryCell data={data} />\n  </tr>\n);\n\nexport default Row;\n","import React from 'react';\n\nimport type { Suspect } from '@jan6evidence/types';\n\nimport Header, { HeaderCell } from './Header';\nimport Row from './Row';\nimport { TableWrapper, ScrollableTable } from './table-styled-components';\n\nconst HEADER_SPEC: HeaderCell[][] = [\n  [\n    { colSpan: 4, title: 'Suspect' },\n    { colSpan: 4, title: 'Law Enforcement' },\n    { rowSpan: 2, title: 'Summary' },\n  ],\n  [\n    { title: 'Image' },\n    { title: 'Hashtag(s)' },\n    { title: 'Links' },\n    { title: 'Tags' },\n    { title: 'Wanted or Arrest #' },\n    { title: \"Arrested or ID'd\" },\n    { title: 'Profile leads' },\n    { title: 'Date profile sent to FBI' },\n  ],\n];\n\nconst SuspectsTable = ({ suspects }: { suspects: Suspect[] }) => {\n  return (\n    <TableWrapper data-toggle=\"table\">\n      <ScrollableTable>\n        <Header spec={HEADER_SPEC} />\n        <tbody>\n          {suspects.map((suspect) => (\n            <Row key={suspect._id} data={suspect} />\n          ))}\n        </tbody>\n      </ScrollableTable>\n    </TableWrapper>\n  );\n};\n\nexport default SuspectsTable;\n","import React from 'react';\n\nimport suspects from '@jan6evidence/data/suspects.json';\n\nimport SuspectsTable from './SuspectsTable';\nimport { AppWrapper } from './table-styled-components';\nimport usePageTitle from './usePageTitle';\n\nconst SuspectsApp = () => {\n  usePageTitle('Suspects Database');\n\n  return (\n    <AppWrapper>\n      <h1>Suspects Database</h1>\n      <SuspectsTable suspects={suspects} />\n    </AppWrapper>\n  );\n};\n\nexport default SuspectsApp;\n","import React from 'react';\nimport { Route, Switch } from 'react-router';\n\nimport EvidenceApp from './EvidenceApp';\nimport InstructionsPage from './InstructionsPage';\nimport SuspectsApp from './SuspectsApp';\n\nfunction Routes() {\n  return (\n    <Switch>\n      <Route path=\"/\" exact component={InstructionsPage} />\n      <Route path=\"/suspects\" component={SuspectsApp} />\n      <Route path=\"/evidence\" exact component={EvidenceApp} />\n      <Route path=\"/evidence/detail/:detailId\" component={EvidenceApp} />\n    </Switch>\n  );\n}\n\nexport default Routes;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\n\nimport './index.css';\nimport Routes from './ui/Routes';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <Routes />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}