{"version":3,"sources":["ui/shared/constants.ts","ui/PageHeaderAndNav.tsx","ui/table-styled-components.ts","ui/AboutPage.tsx","data.ts","ui/Collection/index.tsx","ui/shared/mixins.ts","ui/Collection/collection-styled-components.ts","ui/shared/hooks.ts","ui/CollectionsApp.tsx","ui/shared/shared-styled-components.ts","ui/shared/Tag.tsx","ui/shared/util.ts","ui/EvidenceDetail/detail-styled-components.ts","ui/EvidenceDetail/media-embeds.tsx","ui/EvidenceDetail/index.tsx","ui/EvidenceMain/Result.tsx","ui/EvidenceMain/evidence-results-styled-components.ts","ui/EvidenceMain/EvidenceTable.tsx","ui/EvidenceMain/TimelineHelpers.tsx","ui/shared/contexts.ts","ui/EvidenceMain/timeline/EvidenceStripe.tsx","ui/EvidenceMain/EvidenceTimeline.tsx","ui/EvidenceMain/EvidenceMapbox.tsx","ui/FilterBox/filter-box-styled-components.ts","ui/FilterBox/ActiveFilters.tsx","ui/FilterBox/FilterChoiceBox.tsx","ui/FilterBox/KeywordSearch.tsx","ui/FilterBox/Section.tsx","ui/FilterBox/index.tsx","ui/FilterBox/filterEvidence.ts","ui/EvidenceApp.tsx","ui/shared/Container.tsx","ui/InstructionsPage.tsx","ui/SuspectsGallery.tsx","ui/Header.tsx","ui/Row/row-styled-components.ts","ui/Row/Categories.tsx","ui/Row/index.tsx","ui/SuspectsTable.tsx","ui/SuspectsApp.tsx","ui/Routes.tsx","index.tsx"],"names":["colors","shadows","padding","widths","PageHeaderDiv","styled","div","NavList","ul","PageHeaderAndNav","title","hideExplorerLink","hideGalleryLink","className","to","AppWrapper","TableWrapper","TableStyle","table","ScrollableTable","TableHead","thead","StickyTH","th","EvidenceResultsWrapper","EvidenceTableWrapper","EvidenceCount","AboutDiv","button","AboutPage","href","toDate","str","Date","toLatLng","location","jitterSeed","rand","randomSeed","create","lat","floatBetween","lng","REAL_TIME_START","UTC","REAL_TIME_END","chroma","scale","evidence","evidenceData","map","item","realTimeStart","realTimeEnd","timelineStartPercent","time","Math","max","min","getTime","toTimelinePercent","latLng","_id","undefined","color","floor","length","Collection","items","name","TextButton","css","LeftBox","CollectionsList","usePageTitle","React","useEffect","previousTitle","document","CollectionsApp","useState","isAdding","setIsAdding","newName","setNewName","useLocalStorage","collections","setCollections","query","URLSearchParams","useLocation","search","collectionItems","get","id","useMemo","console","log","itemIds","split","filter","indexOf","history","useHistory","collection","i","type","onClick","push","join","onSubmit","e","preventDefault","htmlFor","value","onChange","target","Pill","span","PillXButton","Tag","label","onDelete","style","backgroundColor","URL_REGEX","markdownPreprocessing","md","trim","replace","_newline","preserveLinebreaksMarkdown","match","autolinkMarkdown","numberTimeFormatter","d","moment","tz","format","timeFormatter","realTimeRangeFormatter","formattedRealTimeStart","formattedRealTimeEnd","videoTimepointFormatter","timeSec","hhmmss","toISOString","substr","startsWith","slice","BORDER_RADIUS","MODAL_SPACING","ModalWrapper","section","Header","header","Buttons","nav","Content","main","buttonBorderWidth","Nav","safeMakeUrl","urlAsString","URL","tweetIdFromUrl","url","hostname","matchResult","pathname","embedTweet","tweetId","options","conversation","embedVideo","videoUrl","youtubeId","searchParams","youtubeIdFromUrl","ytVideoId","videoStartTimepoint","append","toString","width","height","src","frameBorder","allow","allowFullScreen","youtubeIframe","archiveOrgVideoPath","archiveOrgVideoPathFromUrl","archiveOrgVideoIframe","megaVideoId","megaVideoIdFromUrl","urlString","megaVideoIframe","vimeoId","vimeoIdFromUrl","hash","vimeoIframe","controls","bareMp4VideoTag","embedImage","imageUrl","alt","summary","locationName","videoTimepointRow","formattedRange","startSec","endSec","formattedStart","formattedEnd","videoTimepointRangeFormatter","videoEndTimepoint","scope","EvidenceDetail","isOpen","onClose","prev","next","handleOnClick","useCallback","onRequestClose","contentLabel","overlay","zIndex","shouldCloseOnOverlayClick","rel","suspectTags","otherTags","rationale","disabled","isJan6Eastern","date","toEasternTimeString","forceIncludeDate","m","dateStr","timeStr","ResultThumbnail","data","cellData","formattedDuration","toUpperCase","ResultSummary","ResultTags","ResultTime","alwaysIncludeDate","toRealTimeFieldStr","ResultLocation","MapWrapper","EVIDENCE_COLORS","TimelineWrapper","HandleShape","svg","cellDataGetter","rowData","makeCellRenderer","Component","EvidenceTable","results","highlight","onHover","index","headerHeight","rowHeight","rowCount","rowGetter","rowClassName","onRowClick","onRowMouseOver","onRowMouseOut","dataKey","cellRenderer","flexGrow","RAIL_HEIGHT","railOuterStyle","position","cursor","railInnerStyle","pointerEvents","SliderRail","getRailProps","Handle","domain","handle","percent","isRight","getHandleProps","left","transform","WebkitTapHighlightColor","role","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","marginTop","viewBox","points","Track","source","getTrackProps","borderRadius","Tick","tick","display","flexDirection","alignItems","fontSize","HighlightContext","createContext","setHighlight","timelineTitle","start","toLocaleTimeString","end","duration","Boolean","Stripe","Link","EvidenceStripe","Consumer","onMouseOver","onMouseOut","memo","sliderStyle","DOMAIN_START","DOMAIN_END","EvidenceTimeline","values","startEndTimes","onChangeTimes","draggingValues","setDraggingValues","tickValues","range","mode","step","reversed","rootStyle","onUpdate","newValues","handles","right","tracks","ticks","count","capitolLatLng","evidenceLayerStyle","paint","evidenceHoverLayerStyle","Tooltip","EvidenceMapbox","locatedEvidence","sort","a","b","geojson","features","geometry","coordinates","properties","latitude","longitude","zoom","viewport","setViewport","hoveredEvidence","setHoveredEvidence","onMapHover","event","feature","hoveredItem","find","onMapClick","clickedItem","hoverLayerFilter","onViewportChange","mapboxApiAccessToken","mapStyle","interactiveLayerIds","Box","BoxHeader","Toggles","SectionHeader","h5","FilterPills","ActiveFilters","filters","choices","keywords","filterChoices","result","Object","keys","forEach","filterKey","sectionFilters","sectionChoices","element","FilterChoiceBox","categoryId","selectedIds","setFilter","toggleSelection","newSelected","Set","has","delete","add","Form","Control","placeholder","size","ButtonGroup","toggle","vertical","choice","ToggleButton","variant","checked","classnames","hidden","toLowerCase","includes","KeywordSearch","Section","children","FilterBox","toggles","onKeywordsChanged","onFilterChanged","onToggleChanged","removeOneFromSection","Switch","includeUntimestamped","evt","params","suspect","filterEvidence","rawKeywords","filteredEvidence","timelineFilteredEvidence","allLocations","allSuspects","allOtherTags","addFilterChoiceItem","filterChoiceMap","s","some","itemField","keyword","toLocaleLowerCase","doesEvidenceMatchKeywords","matchLocation","matchSuspects","tag","matchTags","matchTimeline","args","itemStart","itemEnd","rangeStart","rangeEnd","isItemInTimeRange","Modal","setAppElement","EvidenceApp","prevEvidence","nextEvidence","setFilters","setKeywords","setToggles","setStartEndTimes","detailId","useParams","closeModal","debouncedHighlight","f","wait","immediate","timeout","later","callNow","clearTimeout","setTimeout","debounce","detailEvidence","r","newContent","oldFilters","newKeywords","newValue","oldToggles","Provider","InstructionsPage","Container","SuspectCardDiv","SuspectThumbnailImg","img","OverviewContainerDiv","SuspectThumbnail","primaryHashtag","thumbnailSrcUrl","detailUrl","twitterSearchUrl","SuspectCard","fbiLink","regexMatch","lawEnforcementIdentifiers","fbiIdentifier","fbiUrl","getFbiLink","data-title","SuspectsGallery","suspects","spec","tr","rowNum","colSpan","rowSpan","top","medText","CrimeCategories","CrimeCategory","li","HashtagCellWrapper","td","LinksCellWrapper","SummaryCellWrapper","Categories","category","present","SuspectPhoto","ImageCell","primaryPhotoUrl","photoURL","HashtagLink","hashtag","formattedHashtag","encodeURIComponent","HashtagCell","alternateHashtags","LinksCell","links","compositeURL","filesUrl","TagsCell","tags","isViolent","isVandal","isOrganizer","hasEarpieceOrRadio","hasHelmetOrArmor","TwitterUserLink","username","formattedUsername","ProfileLeadsCell","profileLeads","lead","SummaryCell","sections","body","actionsSummary","appearanceSummary","associations","otherUrls","Row","arrestedOrPubliclyId","HEADER_SPEC","SuspectsTable","data-toggle","SuspectsTableApp","SuspectsApp","Routes","path","exact","component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9cf507ef.chunk.js","sourcesContent":["/* CONSTANTS */\nconst colors = {\n  tableLines: '#999',\n  titleBg: '#99ddbb',\n  headerBg: '#bbffcc',\n  link: '#374',\n  linkHover: '#051',\n  activeFilter: '#f0f099',\n  activeFilterHover: '#ff0',\n  /* tag colors */\n  person: '#bbe',\n  group: '#ffe069',\n  behavior: '#fcb',\n  equipment: '#d0dd99',\n};\n\nconst shadows = {\n  lg: '0px 1px 12px rgba(0, 0, 0, 0.3)',\n  sm: '1px 1px 2px rgba(0, 0, 0, 0.2)',\n};\n\nconst padding = {\n  xs: 3,\n  sm: 6,\n  md: 12,\n  lg: 24,\n  xl: 48,\n  xxl: 72,\n};\n\nconst widths = {\n  filterbox: 240,\n};\n\nexport { colors, shadows, padding, widths };\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport styled from 'styled-components';\n\nimport { colors, widths, padding } from './shared/constants';\n\nconst PageHeaderDiv = styled.div`\n  padding: 6px 30px;\n  vertical-align: bottom;\n\n  background: ${colors.titleBg};\n\n  .sitename {\n    margin: 0;\n    display: inline-block;\n    font-size: 2rem;\n    margin-right: 40px;\n  }\n`;\n\nconst NavList = styled.ul`\n  display: inline-block;\n  margin: 0px;\n  padding: 0px;\n\n  li {\n    display: inline-block;\n    margin-right: 30px;\n  }\n\n  a {\n    color: ${colors.linkHover};\n  }\n`;\n\ntype Props = {\n  title?: string;\n  hideExplorerLink?: boolean;\n  hideGalleryLink?: boolean;\n};\n\nexport const PageHeaderAndNav = ({ title, hideExplorerLink, hideGalleryLink }: Props) => {\n  return (\n    <PageHeaderDiv>\n      <div className=\"sitename\">{title || 'January 6 Evidence'}</div>\n      <NavList>\n        {!hideExplorerLink && (\n          <li>\n            <Link to=\"/evidence\">Evidence Explorer</Link>\n          </li>\n        )}\n        {!hideGalleryLink && (\n          <li>\n            <Link to=\"/gallery\">Persons-of-Interest Gallery</Link>\n          </li>\n        )}\n        <li>\n          <Link to=\"/about\">About</Link>\n        </li>\n      </NavList>\n    </PageHeaderDiv>\n  );\n};\n\nexport default PageHeaderAndNav;\n","import styled from 'styled-components';\n\nimport { colors, widths, padding } from './shared/constants';\n\nexport const AppWrapper = styled.div`\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n\n  h1 {\n    padding: 6px;\n    margin: 0;\n    background: ${colors.titleBg};\n  }\n`;\n\nexport const TableWrapper = styled.div`\n  position: relative;\n  flex: 1 1 auto;\n  background: #fcfcfc;\n\n  overflow: scroll;\n`;\n\nconst TableStyle = styled.table`\n  border-spacing: 0;\n  border-collapse: collapse;\n\n  th,\n  td {\n    margin: 0;\n    padding: 0 6px;\n  }\n\n  tbody tr {\n    border-bottom: 1px solid ${colors.tableLines};\n    &:hover {\n      background: #f9f9f9;\n    }\n  }\n\n  a {\n    color: ${colors.link};\n    &:hover {\n      color: ${colors.linkHover};\n    }\n  }\n`;\n\nexport const ScrollableTable = styled(TableStyle)`\n  width: 100%;\n`;\n\nexport const HeadFloater = styled(TableStyle)`\n  position: absolute;\n  top: 0;\n`;\n\nexport const TableHead = styled.thead`\n  background: white;\n`;\n\nexport const StickyTH = styled.th`\n  background: ${colors.headerBg};\n  position: sticky;\n  z-index: 10;\n\n  .parent-category {\n    border-bottom: 1px solid #051;\n  }\n`;\n\nexport const EvidenceResultsWrapper = styled.div`\n  padding-left: ${widths.filterbox}px;\n  width: 100%;\n  max-height: 100vh;\n  min-height: 100vh;\n\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n`;\n\nexport const EvidenceTableWrapper = styled.div`\n  flex: 1 1 auto;\n  /* overflow-y: scroll; */\n\n  border-top: 1px solid ${colors.tableLines};\n  display: flex;\n`;\n\nexport const EvidenceCount = styled.div`\n  padding: ${padding.sm}px;\n`;\n\nexport const ButtonLink = styled.button`\n  border: 0;\n  background: transparent;\n  margin: 0;\n  padding: 0;\n  font-size: inherit;\n  line-height: inherit;\n  color: ${colors.link};\n  text-decoration: underline;\n\n  &:hover {\n    color: ${colors.linkHover};\n  }\n`;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport styled from 'styled-components';\n\nimport { PageHeaderAndNav } from './PageHeaderAndNav';\n\nimport Container from './shared/Container';\nimport { AppWrapper } from './table-styled-components';\n\nconst AboutDiv = styled.div`\n  max-width: 600px;\n  padding: 60px 30px;\n`;\n\nfunction AboutPage() {\n  return (\n    <AppWrapper>\n      <PageHeaderAndNav />\n      <AboutDiv>\n        <h2>About</h2>\n        <p>\n          In the weeks since the January 6 attack on the Capitol, thousands have scrutinized photos\n          and videos of the event. They have reviewed thousands of hours of footage, created\n          timelines, identified and tracked persons of interest, synchronized videos, and provided\n          analysis.\n        </p>\n        <p>\n          This site is one of many volunteer efforts to validate and organize this crowdsourced\n          information for media, law enforcement, and other investigators. Contributors include data\n          scientists, academic researchers, software engineers, and military veterans. All are\n          motivated by a desire to understand what happened on January 6 and why. Most contributors\n          wish to remain anonymous.\n        </p>\n        <p>\n          If you find this work helpful in your own work, please credit &ldquo;crowdsourced\n          investigations shared on <a href=\"/\">Jan6evidence.com</a>.&rdquo;\n        </p>\n\n        <h2>Contact</h2>\n        <ul>\n          <li>\n            To help with evidence collection: we&apos;ve posted{' '}\n            <a href=\"https://docs.google.com/document/d/1A7bK0p2k0pV_WOut8x69I6xGyZ3Qw9t4GWxnsGNCAfQ/edit\">\n              instructions\n            </a>\n            !\n          </li>\n          <li>\n            For general inquiries: <a href=\"https://twitter.com/jan6evidence\">@jan6evidence</a>\n          </li>\n        </ul>\n      </AboutDiv>\n    </AppWrapper>\n  );\n}\n\nexport default AboutPage;\n","import chroma from 'chroma-js';\nimport randomSeed from 'random-seed';\n\nimport evidenceData from '@jan6evidence/data/evidence.json';\nimport type { Evidence, Location } from '@jan6evidence/types';\n\n// Dates are serailized as strings, so we need to manually deserialize\n// Would be nice to move this deserializaiton to ../data/index.ts but we tried\n// and ran into compile errors, so we're doing it here for now.\nconst toDate = (str: string | undefined): Date | undefined => {\n  if (!str) {\n    return undefined;\n  }\n  try {\n    return new Date(str);\n  } catch {\n    return undefined;\n  }\n};\n\nconst toLatLng = (location: Location, jitterSeed: string): [number, number] => {\n  // jitterSeed with the evidence ID so that it's consistent\n  const rand = randomSeed.create(jitterSeed);\n  return [\n    location.lat + rand.floatBetween(-0.0001, 0.0001),\n    location.lng + rand.floatBetween(-0.0001, 0.0001),\n  ];\n};\n\nconst REAL_TIME_START = Date.UTC(2021, 0, 6, 15, 0, 0); // 10AM Eastern\nconst REAL_TIME_END = Date.UTC(2021, 0, 7, 1, 0, 0); // 8PM Eastern\n\nconst toTimelinePercent = (time: Date | undefined): number | undefined => {\n  if (!time) {\n    return undefined;\n  }\n  return Math.max(\n    0,\n    Math.min(1, (time.getTime() - REAL_TIME_START) / (REAL_TIME_END - REAL_TIME_START))\n  );\n};\n\nconst colors = chroma.scale(['#f30', '#ff0', '#099', '#09f']).padding(-0.5).colors(40);\n\nconst evidence = evidenceData.map(\n  (item): Evidence => {\n    const realTimeStart = toDate(item.realTimeStart);\n    const realTimeEnd = toDate(item.realTimeEnd);\n    const timelineStartPercent = toTimelinePercent(realTimeStart);\n    return {\n      ...item,\n      realTimeStart,\n      realTimeEnd,\n      // TODO: move this to the data generation step?\n      latLng: item.location ? toLatLng(item.location, item._id) : undefined,\n      timelineStartPercent,\n      color:\n        (timelineStartPercent && colors[Math.floor(colors.length * timelineStartPercent)]) ||\n        '#ccc',\n    };\n  }\n);\n\n// eslint-disable-next-line import/prefer-default-export\nexport { evidence };\n","import React from 'react';\n\nimport { Evidence } from '@jan6evidence/types';\n\ntype Props = {\n  id?: string;\n  name?: string;\n  items: Evidence[];\n};\n\nconst Collection = ({ items, name }: Props) => (\n  <div>\n    hi {name} {items.map((item) => item._id)}\n  </div>\n);\n\nexport default Collection;\n","import { css } from 'styled-components';\n\nimport { padding, widths, colors, shadows } from './constants';\n\nexport const TextButton = css`\n  border: 0;\n  background: none;\n\n  &:hover {\n    background: rgba(0, 0, 0, 0.2);\n  }\n  &:active {\n    background: rgba(0, 0, 0, 0.4);\n    color: white;\n  }\n`;\n\nexport const LeftBox = css`\n  width: ${widths.filterbox}px;\n  min-height: 100vh;\n  max-height: 100vh;\n  position: fixed;\n  top: 0;\n  left: 0;\n\n  z-index: 10;\n  box-shadow: ${shadows.lg};\n  background-color: #ddd;\n  border-right: 2px solid ${colors.tableLines};\n\n  display: flex;\n  flex-direction: column;\n`;\n","import styled from 'styled-components';\n\nimport { colors, padding } from '../shared/constants';\nimport { LeftBox } from '../shared/mixins';\n\nexport const CollectionsList = styled.div`\n  ${LeftBox}\n\n  h4 {\n    margin: ${padding.sm}px ${padding.sm}px ${padding.md}px ${padding.sm}px;\n  }\n\n  .collections-list {\n    flex: 1 1 auto;\n    overflow-x: hidden;\n    overflow-y: auto;\n\n    .collection {\n      width: 100%;\n      border: 0;\n      border-top: 1px solid ${colors.tableLines};\n      padding: ${padding.md}px ${padding.sm}px;\n      text-align: left;\n\n      &:last-child {\n        border-bottom: 1px solid ${colors.tableLines};\n      }\n\n      &:hover {\n        background: ${colors.tableLines};\n      }\n\n      &.active {\n        background: ${colors.activeFilter};\n\n        &:hover {\n          background: ${colors.activeFilterHover};\n        }\n      }\n    }\n  }\n\n  .add-new {\n    flex: 0 0 auto;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: stretch;\n    padding: ${padding.xs}px;\n\n    form {\n      display: flex;\n      flex-direction: column;\n      align-items: stretch;\n\n      label {\n        display: flex;\n        align-items: center;\n\n        input {\n          flex: 1 1 auto;\n          margin-left: ${padding.sm}px;\n        }\n      }\n\n      .buttons {\n        display: flex;\n        justify-content: stretch;\n\n        button {\n          flex: 1 1 50%;\n        }\n\n        button + button {\n          margin-left: ${padding.sm}px;\n        }\n      }\n    }\n  }\n`;\n\nexport default { CollectionsList };\n","import React from 'react';\n\nexport function usePageTitle(title: string) {\n  React.useEffect(() => {\n    const previousTitle = document.title;\n    document.title = title;\n    return () => {\n      document.title = previousTitle;\n    };\n  }, [title]);\n}\n\nexport default {};\n","/* eslint-disable import/no-unresolved, no-console */\n\nimport React, { FormEvent } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { useLocalStorage } from 'react-use';\n\nimport { evidence } from '../data';\n\nimport Collection from './Collection';\nimport { CollectionsList } from './Collection/collection-styled-components';\nimport { usePageTitle } from './shared/hooks';\nimport { EvidenceResultsWrapper } from './table-styled-components';\n\ntype CollectionType = {\n  _id: string;\n  name: string;\n  items: string[];\n};\n\nfunction useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nconst CollectionsApp = () => {\n  usePageTitle('Evidence Collections');\n  const [isAdding, setIsAdding] = React.useState<boolean>(false);\n  const [newName, setNewName] = React.useState<string>('');\n  const [collections, setCollections] = useLocalStorage<CollectionType[]>('collections', []);\n\n  const query = useQuery();\n  const collectionItems = query.get('collectionItems');\n  const name = query.get('name') || undefined;\n  const id = query.get('id') || undefined;\n\n  const items = React.useMemo(() => {\n    console.log('running items', collectionItems, name, id);\n    const itemIds = collectionItems?.split(',');\n    if (itemIds) {\n      return evidence.filter((item) => {\n        return itemIds.indexOf(item._id) > -1;\n      });\n    }\n    return [];\n  }, [id, name, collectionItems]);\n  const history = useHistory();\n\n  const handleSubmit = (e: FormEvent) => {\n    e.preventDefault();\n    setCollections([\n      ...(collections as CollectionType[]),\n      {\n        _id: newName,\n        name: newName,\n        items: [],\n      },\n    ]);\n    setIsAdding(false);\n  };\n\n  return (\n    <div>\n      <EvidenceResultsWrapper>\n        <CollectionsList>\n          <h4>Collections</h4>\n          <div className=\"collections-list\">\n            {(collections as CollectionType[]).map((collection, i) => (\n              <button\n                type=\"button\"\n                className={`collection ${id === collection._id ? 'active' : ''}`}\n                key={`collection-${collection.name}-${collection.items.length}`}\n                onClick={() =>\n                  history.push(\n                    `/evidence/collections?id=${collection._id}&name=${\n                      collection.name\n                    }&collectionItems=${collection.items.join(',')}`\n                  )\n                }\n              >\n                {`${collection.name || `Collection ${i + 1}`} (${collection.items.length})`}\n              </button>\n            ))}\n          </div>\n          <div className=\"add-new\">\n            {!isAdding && (\n              <button\n                type=\"button\"\n                className=\"btn btn-primary btn-sm\"\n                onClick={() => setIsAdding(true)}\n              >\n                + Add New Collection\n              </button>\n            )}\n            {isAdding && (\n              <form onSubmit={handleSubmit}>\n                <label htmlFor=\"newname\" className=\"form-label form-label-sm\">\n                  Name\n                  <input\n                    id=\"newname\"\n                    type=\"text\"\n                    className=\"form-control form-control-sm\"\n                    value={newName}\n                    onChange={(e) => setNewName(e.target.value)}\n                  />\n                </label>\n                <div className=\"buttons\">\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-light btn-sm\"\n                    onClick={() => setIsAdding(false)}\n                  >\n                    Cancel\n                  </button>\n                  <button type=\"submit\" className=\"btn btn-primary btn-sm\">\n                    Add\n                  </button>\n                </div>\n              </form>\n            )}\n          </div>\n        </CollectionsList>\n        <h1>{name}</h1>\n        <Collection id={id} name={name} items={items} />\n      </EvidenceResultsWrapper>\n    </div>\n  );\n};\n\nexport default CollectionsApp;\n","import styled from 'styled-components';\n\nimport { padding, shadows } from './constants';\nimport { TextButton } from './mixins';\n\nexport const Pill = styled.span`\n  position: relative;\n  border-radius: ${padding.sm}px;\n  background: #b0adaa;\n  display: inline-block;\n  padding: 1px 4px 1px 4px;\n  margin: 0 3px 3px 0;\n  font-size: 12px;\n\n  box-shadow: ${shadows.sm};\n\n  max-width: 100px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  &.has-delete {\n    padding-right: 16px;\n  }\n`;\n\nexport const PillXButton = styled.button`\n  ${TextButton}\n  height: 100%;\n  padding-right: 4px;\n  position: absolute;\n  top: 0;\n  right: 0;\n`;\n","import React from 'react';\n\nimport { Pill, PillXButton } from './shared-styled-components';\n\ntype Props = {\n  id: string;\n  label: string;\n  className?: string;\n  color?: string;\n  title?: string;\n  onDelete?: () => void;\n};\n\nconst Tag = ({ id, title, className, color, label, onDelete }: Props) => (\n  <Pill\n    key={`tag-${title}-${id}`}\n    style={color ? { backgroundColor: color } : {}}\n    className={`${className}${onDelete ? ' has-delete' : ''}`}\n    title={title || label}\n  >\n    {label}\n    {onDelete && (\n      <PillXButton title=\"Delete\" type=\"button\" onClick={onDelete}>\n        &times;\n      </PillXButton>\n    )}\n  </Pill>\n);\n\nexport default Tag;\n","import moment from 'moment-timezone';\n\n// This is used to autolink URLs (not already embedded in `<>` or `()`) in markdown, before translation to HTML\n// https://stackoverflow.com/questions/3809401/what-is-a-good-regular-expression-to-match-a-url\nconst URL_REGEX = /(?<![(<])https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)[^.\\s]/g;\n\nexport const autolinkMarkdown = (md: string): string => {\n  return md.replace(URL_REGEX, (match: string): string => {\n    return `<${match}>`;\n  });\n};\n\nexport const preserveLinebreaksMarkdown = (md: string): string => {\n  return md.trim().replace(/\\n/g, (_newline: string) => '  \\n');\n};\n\nexport const markdownPreprocessing = (md: string): string => {\n  return preserveLinebreaksMarkdown(autolinkMarkdown(md));\n};\n\nexport const numberTimeFormatter = (d: number) => moment.tz(d, 'America/New_York').format('h:mm A');\n\nexport const timeFormatter = (d: Date | undefined): string | undefined => {\n  if (d) {\n    return moment(d).tz('America/New_York').format('h:mm A');\n  } else {\n    return undefined;\n  }\n};\n\nexport const realTimeRangeFormatter = (realTimeStart?: Date, realTimeEnd?: Date): string => {\n  const formattedRealTimeStart = timeFormatter(realTimeStart) || '??:??';\n  const formattedRealTimeEnd = realTimeEnd ? timeFormatter(realTimeEnd) : undefined;\n  if (formattedRealTimeEnd && formattedRealTimeEnd !== formattedRealTimeStart) {\n    return `${formattedRealTimeStart} - ${formattedRealTimeEnd}`;\n  } else {\n    return formattedRealTimeStart;\n  }\n};\n\nexport const videoTimepointFormatter = (timeSec?: number): string | undefined => {\n  if (timeSec === undefined) {\n    return undefined;\n  }\n  // https://stackoverflow.com/a/1322771\n  // Note that this ignores decimals.\n  const hhmmss = new Date(timeSec * 1000).toISOString().substr(11, 8);\n  if (hhmmss.startsWith('00')) {\n    return hhmmss.slice(1);\n  } else {\n    return hhmmss;\n  }\n};\n\nexport const videoTimepointRangeFormatter = (\n  startSec?: number,\n  endSec?: number\n): string | undefined => {\n  if (startSec === undefined) {\n    return undefined;\n  }\n  const formattedStart = videoTimepointFormatter(startSec) || '??:??';\n  const formattedEnd = endSec ? videoTimepointFormatter(endSec) : undefined;\n  if (formattedEnd && formattedEnd !== formattedStart) {\n    return `${formattedStart} - ${formattedEnd}`;\n  } else {\n    return formattedStart;\n  }\n};\n\nexport function debounce(f: (...args: any[]) => void, wait: number, immediate?: boolean) {\n  let timeout: NodeJS.Timeout | null;\n  return (...args: any[]) => {\n    const later = () => {\n      timeout = null;\n      if (!immediate) f(...args);\n    };\n    const callNow = immediate && !timeout;\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) f(...args);\n  };\n}\n","import styled from 'styled-components';\n\nimport { colors, shadows, padding } from '../shared/constants';\n\nconst BORDER_RADIUS = padding.md;\nconst MODAL_SPACING = 40;\nconst HEADER_HEIGHT = 64;\n\nexport const ModalWrapper = styled.section`\n  position: absolute;\n  transform: translate(0, 0); // hack to make the prev/next buttons appear properly\n  top: ${MODAL_SPACING}px;\n  left: ${MODAL_SPACING}px;\n  right: ${MODAL_SPACING}px;\n  bottom: ${MODAL_SPACING}px;\n  background: white;\n  border-radius: ${BORDER_RADIUS}px;\n  border: 2px solid ${colors.titleBg};\n  box-shadow: ${shadows.lg};\n\n  display: flex;\n  flex-direction: column;\n\n  a {\n    color: ${colors.link};\n\n    &:hover {\n      color: ${colors.linkHover};\n    }\n  }\n`;\n\nexport const Header = styled.header`\n  flex: 0 0 auto;\n  background: ${colors.headerBg};\n  position: relative;\n  border-radius: ${BORDER_RADIUS}px ${BORDER_RADIUS}px 0 0;\n  padding: ${padding.md}px;\n  height: ${HEADER_HEIGHT}px;\n\n  h2 {\n    margin: 0;\n    padding: 0;\n  }\n`;\n\nexport const Buttons = styled.nav`\n  position: absolute;\n  top: 0;\n  right: 0;\n\n  display: flex;\n\n  button {\n    background: 0;\n    border: 0;\n    padding: ${padding.md}px;\n    font-size: 32px;\n    line-height: 32px;\n    color: #555;\n    display: flex;\n    align-items: baseline;\n\n    &:not(:disabled) {\n      color: ${colors.link};\n    }\n\n    &:hover:not(:disabled) {\n      color: ${colors.linkHover};\n\n      background: rgba(255, 255, 255, 0.3);\n    }\n\n    &.close-button {\n      font-size: 36px;\n      line-height: 36px;\n      padding: ${padding.md}px ${padding.lg}px;\n    }\n  }\n`;\n\nexport const Content = styled.main`\n  flex: 1 1 auto;\n  padding: ${padding.md}px;\n  overflow-y: auto;\n  overflow-x: hidden;\n\n  .media {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    background: #333;\n    margin: ${-padding.md}px ${-padding.md}px 0 ${-padding.md}px;\n\n    a {\n      color: ${colors.headerBg};\n\n      &:hover {\n        color: ${colors.titleBg};\n      }\n    }\n\n    img {\n      max-height: calc(100vh - ${MODAL_SPACING * 2 + HEADER_HEIGHT * 3}px);\n    }\n    video {\n      max-height: calc(100vh - ${MODAL_SPACING * 2 + HEADER_HEIGHT * 5}px);\n    }\n\n    span {\n      display: block;\n      width: 100%;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      padding: 0 ${padding.md}px;\n      text-align: center;\n    }\n  }\n\n  table {\n    border-collapse: collapse;\n    border-spacing: 0;\n    max-width: 708px;\n    margin: 0 auto;\n\n    th {\n      vertical-align: top;\n    }\n\n    td {\n      padding: 0 0 0 ${padding.md}px;\n    }\n\n    th,\n    td {\n      padding-top: ${padding.md}px;\n    }\n  }\n`;\n\nconst buttonBorderWidth = '3px';\n\nexport const Nav = styled.div`\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n\n  display: flex;\n  justify-content: space-between;\n\n  button {\n    height: 72px;\n    width: 60px;\n    font-size: 72px;\n    line-height: 72px;\n    padding-left: 7px;\n    background-color: ${colors.headerBg};\n    color: ${colors.link};\n    cursor: pointer;\n\n    border-top-right-radius: ${BORDER_RADIUS}px;\n    border-bottom-left-radius: ${BORDER_RADIUS}px;\n    border: 0;\n    border: ${buttonBorderWidth} solid ${colors.titleBg};\n    margin-bottom: -${buttonBorderWidth};\n    margin-left: -${buttonBorderWidth};\n\n    &:hover {\n      color: ${colors.linkHover};\n      border-color: ${colors.link};\n    }\n    &:active {\n      background-color: ${colors.titleBg};\n    }\n\n    &:disabled,\n    &:disabled:hover,\n    &:disabled:active {\n      cursor: auto;\n      background-color: #ddd;\n      color: #888;\n      border-color: #aaa;\n    }\n  }\n\n  button + button {\n    margin-left: 0;\n    margin-right: -${buttonBorderWidth};\n    padding-right: 4px;\n    border-radius: 0;\n    border-top-left-radius: ${BORDER_RADIUS}px;\n    border-bottom-right-radius: ${BORDER_RADIUS}px;\n  }\n`;\n","import React from 'react';\nimport { Tweet } from 'react-twitter-widgets';\n\nimport { Evidence } from '@jan6evidence/types';\n\nconst safeMakeUrl = (urlAsString: string | undefined): URL | undefined => {\n  try {\n    return new URL(urlAsString || '');\n  } catch {\n    return undefined;\n  }\n};\n\nconst youtubeIdFromUrl = (urlAsString: string | undefined): string | undefined => {\n  const url = safeMakeUrl(urlAsString);\n  if (url?.hostname === 'youtu.be') {\n    return url?.pathname.slice(1);\n  } else if (url?.hostname === 'www.youtube.com') {\n    return url?.searchParams.get('v') || undefined;\n  } else {\n    return undefined;\n  }\n};\n\nconst youtubeIframe = (evidence: Evidence, ytVideoId: string) => {\n  const url = new URL(`https://www.youtube.com/embed/${ytVideoId}`);\n  if (evidence.videoStartTimepoint) {\n    url.searchParams.append('start', evidence.videoStartTimepoint.toString());\n  }\n  return (\n    <iframe\n      key={evidence.videoUrl}\n      title=\"embedded evidence video from youtube\"\n      width=\"560\"\n      height=\"315\"\n      src={url.href}\n      frameBorder=\"0\"\n      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n      allowFullScreen\n    />\n  );\n};\n\nconst archiveOrgVideoPathFromUrl = (urlAsString: string | undefined): string | undefined => {\n  const url = safeMakeUrl(urlAsString);\n  if (url?.hostname === 'archive.org') {\n    return url.pathname.split('/').slice(2).join('/') || undefined;\n  } else {\n    return undefined;\n  }\n};\n\nconst archiveOrgVideoIframe = (evidence: Evidence, archiveOrgVideoPath: string) => {\n  const url = new URL(`https://archive.org/embed/${archiveOrgVideoPath}`);\n  if (evidence.videoStartTimepoint) {\n    url.searchParams.append('start', evidence.videoStartTimepoint.toString());\n  }\n  return (\n    <iframe\n      key={evidence.videoUrl}\n      title=\"embedded evidence video from archive.org\"\n      src={url.href}\n      width=\"640\"\n      height=\"480\"\n      frameBorder=\"0\"\n      allowFullScreen\n    />\n  );\n};\n\nconst bareMp4VideoTag = (evidence: Evidence) => {\n  const url = safeMakeUrl(evidence.videoUrl);\n  if (!url) {\n    return null;\n  }\n  if (evidence.videoStartTimepoint && (url.hash || '').trim() === '') {\n    url.hash = `t=${evidence.videoStartTimepoint}`;\n  }\n  return (\n    <video controls key={evidence.videoUrl}>\n      <source src={url.href} />\n    </video>\n  );\n};\n\nconst vimeoIdFromUrl = (urlAsString: string | undefined): string | undefined => {\n  const url = safeMakeUrl(urlAsString || '');\n  if (url?.hostname?.match(/vimeo\\.com$/)) {\n    return url.pathname.replace(/^\\//, '');\n  } else {\n    return undefined;\n  }\n};\n\nconst vimeoIframe = (evidence: Evidence, vimeoId: string) => {\n  const url = new URL(`https://player.vimeo.com/video/${vimeoId}`);\n  if (evidence.videoStartTimepoint) {\n    url.hash = `t=${evidence.videoStartTimepoint}s`;\n  }\n  return (\n    <iframe\n      key={evidence.videoUrl}\n      title=\"embedded evidence video from vimeo.com\"\n      src={url.href}\n      width=\"640\"\n      height=\"480\"\n      frameBorder=\"0\"\n      allowFullScreen\n    />\n  );\n};\n\nconst megaVideoIdFromUrl = (urlAsString: string | undefined): string | undefined => {\n  const url = safeMakeUrl(urlAsString || '');\n  if (!url || !url.hostname.match(/mega\\.nz$/)) {\n    return undefined;\n  }\n  const matchResult = url.href.match(/file\\/(.*)/);\n  return (matchResult && matchResult[1]) || undefined;\n};\n\nconst megaVideoIframe = (evidence: Evidence, megaVideoId: string) => {\n  let urlString = `https://mega.nz/embed/${megaVideoId}`;\n  if (evidence.videoStartTimepoint) {\n    urlString += `!${evidence.videoStartTimepoint}s`;\n  }\n  return (\n    <iframe\n      key={evidence.videoUrl}\n      title=\"embedded evidence video from mega.nz\"\n      width=\"560\"\n      height=\"315\"\n      src={urlString}\n      frameBorder=\"0\"\n      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n      allowFullScreen\n    />\n  );\n};\n\nconst tweetIdFromUrl = (urlAsString: string | undefined): string | undefined => {\n  const url = new URL(urlAsString || '');\n  if (!url.hostname.match(/twitter\\.com$/)) {\n    return undefined;\n  }\n  const matchResult = url.pathname.match(/status\\/(\\d+)/);\n  return (matchResult && matchResult[1]) || undefined;\n};\n\nconst embedTweet = (tweetId: string) => {\n  return <Tweet tweetId={tweetId} options={{ conversation: 'none' }} />;\n};\n\nexport const embedVideo = (evidence: Evidence) => {\n  if (!evidence.videoUrl) {\n    return null;\n  }\n\n  const youtubeId = youtubeIdFromUrl(evidence.videoUrl);\n  if (youtubeId) {\n    return youtubeIframe(evidence, youtubeId);\n  }\n\n  const archiveOrgVideoPath = archiveOrgVideoPathFromUrl(evidence.videoUrl);\n  if (archiveOrgVideoPath) {\n    return archiveOrgVideoIframe(evidence, archiveOrgVideoPath);\n  }\n\n  const tweetId = tweetIdFromUrl(evidence.videoUrl);\n  if (tweetId) {\n    return embedTweet(tweetId);\n  }\n\n  const megaVideoId = megaVideoIdFromUrl(evidence.videoUrl);\n  if (megaVideoId) {\n    return megaVideoIframe(evidence, megaVideoId);\n  }\n\n  const vimeoId = vimeoIdFromUrl(evidence.videoUrl);\n  if (vimeoId) {\n    return vimeoIframe(evidence, vimeoId);\n  }\n\n  // default\n  return bareMp4VideoTag(evidence);\n};\n\nexport const embedImage = (evidence: Evidence) => {\n  if (!evidence.imageUrl) {\n    return null;\n  }\n\n  const tweetId = tweetIdFromUrl(evidence.imageUrl);\n  if (tweetId) {\n    return embedTweet(tweetId);\n  }\n\n  return (\n    <img\n      src={evidence.imageUrl}\n      alt={evidence.summary || evidence.locationName || 'Evidence Image'}\n    />\n  );\n};\n","import React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport Modal from 'react-modal';\nimport { useHistory } from 'react-router-dom';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport Tag from '../shared/Tag';\nimport { colors } from '../shared/constants';\nimport {\n  markdownPreprocessing,\n  realTimeRangeFormatter,\n  videoTimepointRangeFormatter,\n} from '../shared/util';\n\nimport { ModalWrapper, Header, Content, Buttons, Nav } from './detail-styled-components';\nimport { embedImage, embedVideo } from './media-embeds';\n\ntype Props = {\n  isOpen: boolean;\n  evidence: Evidence;\n  onClose: () => void;\n  prev?: Evidence;\n  next?: Evidence;\n};\n\nconst videoTimepointRow = (evidence: Evidence) => {\n  if (!evidence.videoUrl) {\n    return undefined;\n  }\n  const formattedRange = videoTimepointRangeFormatter(\n    evidence.videoStartTimepoint,\n    evidence.videoEndTimepoint\n  );\n  if (formattedRange) {\n    return (\n      <tr>\n        <th scope=\"row\">Video timepoint</th>\n        <td>{formattedRange}</td>\n      </tr>\n    );\n  } else {\n    return undefined;\n  }\n};\n\nexport default function EvidenceDetail({ isOpen, evidence, onClose, prev, next }: Props) {\n  const history = useHistory();\n  const handleOnClick = React.useCallback(\n    (item) => {\n      if (item) {\n        history.push(`/evidence/detail/${item._id}`);\n      }\n    },\n    [history]\n  );\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onRequestClose={onClose}\n      contentLabel=\"Evidence Details\"\n      style={{ overlay: { zIndex: 1000 } }}\n      className=\"evidence-detail-modal\"\n      shouldCloseOnOverlayClick\n    >\n      {evidence && (\n        <ModalWrapper>\n          <Header>\n            <h2>Evidence Detail</h2>\n            <Buttons>\n              {/* <button title=\"Star\" type=\"button\" disabled>\n                &#9733;\n              </button> */}\n              <button title=\"Close\" type=\"button\" className=\"close-button\" onClick={onClose}>\n                &times;\n              </button>\n            </Buttons>\n          </Header>\n          <Content>\n            {evidence.imageUrl && (\n              <div className=\"media\">\n                <a href={evidence.imageUrl}>\n                  {embedImage(evidence)}\n                  <span>{evidence.imageUrl}</span>\n                </a>\n              </div>\n            )}\n            {evidence.videoUrl && (\n              <div className=\"media\">\n                {embedVideo(evidence)}\n                <a href={evidence.videoUrl} target=\"_blank\" rel=\"noreferrer\">\n                  {evidence.videoUrl}\n                </a>\n              </div>\n            )}\n            <table>\n              <tbody>\n                <tr>\n                  <th scope=\"row\">Summary</th>\n                  <td>\n                    <ReactMarkdown>{markdownPreprocessing(evidence.summary || '')}</ReactMarkdown>\n                  </td>\n                </tr>\n                <tr>\n                  <th scope=\"row\">Tags</th>\n                  <td>\n                    {evidence.suspectTags &&\n                      evidence.suspectTags.map((label) => (\n                        <Tag\n                          key={`${evidence._id}-person-${label}`}\n                          id={`${evidence._id}-person-${label}`}\n                          label={label}\n                          color={colors.person}\n                          title={label}\n                        />\n                      ))}\n                    {evidence.otherTags &&\n                      evidence.otherTags.map((label) => (\n                        <Tag\n                          key={`${evidence._id}-other-${label}`}\n                          id={`${evidence._id}-other-${label}`}\n                          label={label}\n                          title={label}\n                        />\n                      ))}\n                  </td>\n                </tr>\n                <tr>\n                  <th scope=\"row\">Time</th>\n                  <td>{realTimeRangeFormatter(evidence.realTimeStart, evidence.realTimeEnd)}</td>\n                </tr>\n                {videoTimepointRow(evidence)}\n                <tr>\n                  <th scope=\"row\">Location</th>\n                  <td>{evidence.locationName}</td>\n                </tr>\n                <tr>\n                  <th scope=\"row\">Rationale</th>\n                  <td>\n                    <ReactMarkdown>{markdownPreprocessing(evidence.rationale || '')}</ReactMarkdown>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n            <Nav>\n              <button\n                type=\"button\"\n                disabled={!prev}\n                title=\"Previous\"\n                onClick={() => handleOnClick(prev)}\n              >\n                &laquo;\n              </button>\n              <button\n                type=\"button\"\n                disabled={!next}\n                title=\"Next\"\n                onClick={() => handleOnClick(next)}\n              >\n                &raquo;\n              </button>\n            </Nav>\n          </Content>\n        </ModalWrapper>\n      )}\n    </Modal>\n  );\n}\n","import moment from 'moment-timezone';\nimport React from 'react';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport Tag from '../shared/Tag';\n\nimport { colors } from '../shared/constants';\n\nconst isJan6Eastern = (date: Date): boolean => {\n  const m = moment(date);\n  return m.tz('America/New_York').format('YYYY-MM-DD') === '2021-01-06';\n};\n\nconst toEasternTimeString = (date: Date, forceIncludeDate: boolean = false): string => {\n  const m = moment(date);\n  const dateStr = m.tz('America/New_York').format('YYYY-MM-DD');\n  const timeStr = m.tz('America/New_York').format('h:mm A');\n  if (isJan6Eastern(date) && !forceIncludeDate) {\n    return timeStr;\n  } else {\n    return `${dateStr} ${timeStr}`;\n  }\n};\n\nconst toRealTimeFieldStr = (\n  realTimeStart: Date | undefined,\n  realTimeEnd: Date | undefined\n): string => {\n  if (!realTimeStart) {\n    return '?';\n  }\n  if (realTimeEnd) {\n    const alwaysIncludeDate = !isJan6Eastern(realTimeStart) || !isJan6Eastern(realTimeEnd);\n    return `${toEasternTimeString(realTimeStart, alwaysIncludeDate)} - ${toEasternTimeString(\n      realTimeEnd,\n      alwaysIncludeDate\n    )}`;\n  } else {\n    return toEasternTimeString(realTimeStart);\n  }\n};\n\ntype Props = {\n  data: Evidence;\n  isActive: boolean;\n  activate: () => void;\n};\n\nexport function ResultThumbnail({ cellData: data }: { cellData: Evidence }) {\n  const type = data.videoUrl ? 'video' : 'photo';\n  const formattedDuration =\n    data.videoStartTimepoint && data.videoEndTimepoint\n      ? data.videoEndTimepoint - data.videoStartTimepoint\n      : '?';\n\n  return (\n    <div className=\"thumbnail-wrapper\">\n      <img className={type} src={data.imageUrl} alt=\"\" />\n      <span className=\"type\">{type[0].toUpperCase() + type.slice(1)}</span>\n      {type === 'video' && (\n        <>\n          <span className=\"triangle\" />\n          <span className=\"duration\">{formattedDuration}</span>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport function ResultSummary({ cellData: data }: { cellData: Evidence }) {\n  const summary = data.summary || '';\n\n  return (\n    <div className=\"summary\">{`${summary.slice(0, 225)}${summary.length > 255 ? '...' : ''}`}</div>\n  );\n}\n\nexport function ResultTags({ cellData: data }: { cellData: Evidence }) {\n  return (\n    <div className=\"tags-wrapper\">\n      {data.suspectTags &&\n        data.suspectTags.map((label) => (\n          <Tag\n            key={`${data._id}-person-${label}`}\n            id={`${data._id}-person-${label}`}\n            label={label}\n            color={colors.person}\n            title={label}\n          />\n        ))}\n      {data.otherTags &&\n        data.otherTags.map((label) => (\n          <Tag\n            key={`${data._id}-other-${label}`}\n            id={`${data._id}-other-${label}`}\n            label={label}\n            title={label}\n          />\n        ))}\n    </div>\n  );\n}\n\nexport function ResultTime({ cellData: data }: { cellData: Evidence }) {\n  const timeStr = toRealTimeFieldStr(data.realTimeStart, data.realTimeEnd);\n\n  return <span className=\"time\">{timeStr}</span>;\n}\n\nexport function ResultLocation({ cellData: data }: { cellData: Evidence }) {\n  return <span className=\"location\">{data.locationName || '?'}</span>;\n}\n","import styled from 'styled-components';\n\nimport { padding, colors } from '../shared/constants';\n\nexport const MapWrapper = styled.div`\n  flex: 0 0 auto;\n  background-color: #ded;\n  border: 1px solid #9a9;\n  height: 300px;\n  width: 100%;\n\n  .pointer-events-none {\n    pointer-events: none;\n  }\n`;\n\nconst EVIDENCE_COLORS = {\n  photo: '#6699ff',\n  video: '#cc2266',\n  clip: 'orange',\n};\n\nexport const TimelineWrapper = styled.div`\n  flex: 0 0 auto;\n  height: 120px;\n  padding: ${padding.sm}px ${padding.lg}px;\n\n  overflow-x: hidden;\n\n  background: #111;\n  color: white;\n\n  &:hover .handle {\n    fill: #f0f0f0;\n  }\n\n  .selected-time {\n    margin-left: -${padding.sm}px;\n    margin-bottom: ${padding.sm}px;\n  }\n\n  .tick {\n    background-color: white;\n  }\n`;\n\nexport const HandleShape = styled.svg`\n  fill: #ddd;\n\n  &.disabled {\n    fill: #999;\n  }\n`;\n\nexport const TableWrapper = styled.div`\n  flex: 1;\n\n  .active {\n    box-shadow: inset 0 0 0 6px #ff0;\n  }\n\n  .table-row {\n    border-bottom: 1px solid ${colors.tableLines};\n\n    &.highlighted {\n      background-color: ${colors.activeFilter};\n    }\n  }\n\n  img {\n    min-height: 120px;\n    width: 100%;\n    background: #f0f0f0;\n  }\n\n  .thumbnail-wrapper {\n    position: relative;\n    font-size: 13px;\n    color: white;\n\n    img {\n      min-height: 120px;\n      width: 100%;\n      background: #333;\n      border: 3px solid black;\n\n      &.video {\n        border-color: ${EVIDENCE_COLORS.video};\n      }\n      &.clip {\n        border-color: ${EVIDENCE_COLORS.clip};\n      }\n      &.photo {\n        border-color: ${EVIDENCE_COLORS.photo};\n      }\n    }\n\n    .triangle {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      margin: auto;\n      background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDQ4IDQ4IiBmaWxsPSIjZmZmIj48cGF0aCBkPSJNMjQgNEMxMi45NSA0IDQgMTIuOTUgNCAyNHM4Ljk1IDIwIDIwIDIwIDIwLTguOTUgMjAtMjBTMzUuMDUgNCAyNCA0em0tNCAyOVYxNWwxMiA5LTEyIDl6Ii8+PC9zdmc+);\n      color: #fff;\n      background-size: 48px 48px;\n      height: 48px;\n      width: 48px;\n      opacity: 0.8;\n    }\n\n    .duration {\n      position: absolute;\n      bottom: 6px;\n      right: 6px;\n      opacity: 0.8;\n    }\n\n    .type {\n      position: absolute;\n      top: 6px;\n      left: 6px;\n      opacity: 0.8;\n    }\n  }\n\n  .tags-wrapper {\n    display: flex;\n    align-items: flex-start;\n    flex-wrap: wrap;\n    font-size: 13px;\n  }\n\n  .summary,\n  .time,\n  .location {\n    height: 100px;\n    white-space: normal;\n  }\n`;\n","import React, { ReactElement, useState, useEffect } from 'react';\nimport 'react-virtualized/styles.css';\nimport { useHistory } from 'react-router-dom';\nimport { Column, Table, AutoSizer } from 'react-virtualized';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { ResultLocation, ResultSummary, ResultTags, ResultThumbnail, ResultTime } from './Result';\n\nimport { TableWrapper } from './evidence-results-styled-components';\n\ntype Props = {\n  results: Evidence[];\n  highlight: string;\n  onHover: (id: string) => void;\n};\n\nfunction cellDataGetter({ rowData }: { rowData: any }): any {\n  // Be default, react-virtualized tries to pass the cell's render\n  // function just the data for that cell. To make our cell renderers\n  // simpler, we pass the full row of data (so we can easily have cells\n  // that show multiple fields of data)\n  return rowData;\n}\n\nfunction makeCellRenderer(\n  Component: React.ComponentType<{ cellData: Evidence }>\n): ({ cellData }: { cellData?: Evidence }) => ReactElement {\n  return function inner({ cellData }) {\n    if (!cellData) {\n      return <span />;\n    }\n\n    return <Component cellData={cellData} />;\n  };\n}\n\nconst ROW_HEIGHT = 150;\n\nconst EvidenceTable = ({ results, highlight, onHover }: Props) => {\n  const history = useHistory();\n  const handleOnClick = React.useCallback(\n    ({ index }) => {\n      history.push(`/evidence/detail/${results[index]._id}`);\n    },\n    [history, results]\n  );\n\n  return (\n    <TableWrapper>\n      <AutoSizer>\n        {({ height, width }) => (\n          <Table\n            height={height}\n            width={width}\n            headerHeight={40}\n            rowHeight={ROW_HEIGHT}\n            rowCount={results.length}\n            rowGetter={({ index }) => results[index]}\n            rowClassName={({ index }) =>\n              `table-row ${results[index]?._id === highlight ? 'highlighted' : ''}`\n            }\n            onRowClick={handleOnClick}\n            onRowMouseOver={({ index }) => onHover(results[index]?._id)}\n            onRowMouseOut={() => onHover('')}\n          >\n            <Column\n              label=\"Thumbnail\"\n              dataKey=\"thumbnail\"\n              cellDataGetter={cellDataGetter}\n              cellRenderer={makeCellRenderer(ResultThumbnail)}\n              width={180}\n            />\n            <Column\n              label=\"Summary\"\n              dataKey=\"summary\"\n              cellDataGetter={cellDataGetter}\n              cellRenderer={makeCellRenderer(ResultSummary)}\n              width={360}\n              flexGrow={1}\n            />\n            <Column\n              label=\"Tags\"\n              dataKey=\"tags\"\n              cellDataGetter={cellDataGetter}\n              cellRenderer={makeCellRenderer(ResultTags)}\n              width={100}\n            />\n            <Column\n              label=\"Time\"\n              dataKey=\"time\"\n              cellDataGetter={cellDataGetter}\n              cellRenderer={makeCellRenderer(ResultTime)}\n              width={80}\n            />\n            <Column\n              label=\"Location\"\n              dataKey=\"location\"\n              cellDataGetter={cellDataGetter}\n              cellRenderer={makeCellRenderer(ResultLocation)}\n              width={144}\n            />\n          </Table>\n        )}\n      </AutoSizer>\n    </TableWrapper>\n  );\n};\n\nexport default EvidenceTable;\n","import React from 'react';\n\nimport { numberTimeFormatter } from '../shared/util';\n\nimport { HandleShape } from './evidence-results-styled-components';\n\nexport type Range = [number, number];\n\nexport interface RangePoint {\n  id: string;\n  value: number;\n  percent: number;\n}\n\nexport const RAIL_HEIGHT = 48;\n\n// *******************************************************\n// RAIL\n// *******************************************************\nconst railOuterStyle: React.CSSProperties = {\n  position: 'absolute',\n  width: '100%',\n  height: RAIL_HEIGHT,\n  cursor: 'pointer',\n};\n\nconst railInnerStyle: React.CSSProperties = {\n  position: 'absolute',\n  width: '100%',\n  height: RAIL_HEIGHT,\n  pointerEvents: 'none',\n  backgroundColor: '#555',\n};\n\ntype SliderRailProps = {\n  getRailProps: () => void;\n};\n\nexport function SliderRail({ getRailProps }: SliderRailProps) {\n  return (\n    <>\n      <div style={railOuterStyle} {...getRailProps()} />\n      <div style={railInnerStyle} />\n    </>\n  );\n}\n\n// *******************************************************\n// HANDLE COMPONENT\n// *******************************************************\ntype HandleProps = {\n  domain: Range;\n  handle: RangePoint;\n  getHandleProps: (id: string) => void;\n  disabled?: boolean;\n  isRight?: boolean;\n};\n\nexport function Handle({\n  domain: [min, max],\n  handle: { id, value, percent },\n  disabled,\n  isRight,\n  getHandleProps,\n}: HandleProps) {\n  return (\n    <>\n      <div\n        style={{\n          left: `${percent}%`,\n          position: 'absolute',\n          transform: 'translate(-50%, 0)',\n          WebkitTapHighlightColor: 'rgba(0,0,0,0)',\n          zIndex: 5,\n          width: 28,\n          height: 42,\n          cursor: 'move',\n          backgroundColor: 'none',\n        }}\n        {...getHandleProps(id)}\n      />\n      <div\n        role=\"slider\"\n        aria-label={`Handle at ${value}`}\n        aria-valuemin={min}\n        aria-valuemax={max}\n        aria-valuenow={value}\n        style={{\n          left: `${percent}%`,\n          position: 'absolute',\n          marginTop: -3,\n          transform: 'translate(-50%, -0)',\n          zIndex: 3,\n          width: 12,\n          height: RAIL_HEIGHT,\n        }}\n      >\n        <HandleShape\n          viewBox={`0 0 12 ${RAIL_HEIGHT + 6}`}\n          className={`handle ${id} ${disabled && 'disabled'}`}\n        >\n          {isRight ? (\n            <polygon\n              points={`0,0 12,0 12,${RAIL_HEIGHT + 6} 0,${\n                RAIL_HEIGHT + 6\n              } 0,${RAIL_HEIGHT} 6,${RAIL_HEIGHT} 6,6 0,6`}\n            />\n          ) : (\n            <polygon\n              points={`0,0 0,${RAIL_HEIGHT + 6} 12,${\n                RAIL_HEIGHT + 6\n              } 12,${RAIL_HEIGHT} 6,${RAIL_HEIGHT} 6,6 12,6 12,0`}\n            />\n          )}\n        </HandleShape>\n      </div>\n    </>\n  );\n}\n\n// *******************************************************\n// KEYBOARD HANDLE COMPONENT\n// Uses a button to allow keyboard events\n// *******************************************************\nexport function KeyboardHandle({\n  domain: [min, max],\n  handle: { id, value, percent },\n  disabled,\n  getHandleProps,\n}: HandleProps) {\n  return (\n    <button\n      type=\"button\"\n      role=\"slider\"\n      aria-valuemin={min}\n      aria-valuemax={max}\n      aria-valuenow={value}\n      style={{\n        left: `${percent}%`,\n        position: 'absolute',\n        transform: 'translate(-50%, 0)',\n        zIndex: 2,\n        width: 24,\n        height: RAIL_HEIGHT,\n        borderRadius: '50%',\n        boxShadow: '1px 1px 1px 1px rgba(0, 0, 0, 0.3)',\n        backgroundColor: disabled ? '#999' : '#ffc400',\n      }}\n      {...getHandleProps(id)}\n    />\n  );\n}\n\n// *******************************************************\n// TRACK COMPONENT\n// *******************************************************\ntype TrackProps = {\n  source: RangePoint;\n  target: RangePoint;\n  getTrackProps: () => void;\n  disabled?: boolean;\n};\n\nexport function Track({ source, target, getTrackProps, disabled }: TrackProps) {\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        height: RAIL_HEIGHT,\n        zIndex: 1,\n        backgroundColor: disabled ? '#555' : '#222',\n        borderRadius: 7,\n        left: `${source.percent}%`,\n        width: `${target.percent - source.percent}%`,\n      }}\n      {...getTrackProps()}\n    />\n  );\n}\n\n// *******************************************************\n// TICK COMPONENT\n// *******************************************************\ntype TickType = {\n  tick: RangePoint;\n  count: number;\n  format?: (value: number) => string;\n};\n\nexport function Tick({ tick }: TickType) {\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        left: `${tick.percent}%`,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        transform: 'translate(-50%, 0px)',\n      }}\n    >\n      <div\n        className=\"tick\"\n        style={{\n          marginTop: RAIL_HEIGHT,\n          width: 1,\n          height: 6,\n        }}\n      />\n      <div\n        style={{\n          fontSize: 10,\n        }}\n      >\n        {numberTimeFormatter(tick.value)}\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport const HighlightContext = React.createContext({\n  highlight: '',\n  setHighlight: (id: string) => {\n    id.split(''); // fixes TS error when `id` isn't used :P\n  },\n});\n\nexport default {};\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { HighlightContext } from '../../shared/contexts';\nimport { RAIL_HEIGHT } from '../TimelineHelpers';\n\nconst timelineTitle = (evidence: Evidence) => {\n  const start = evidence.realTimeStart?.toLocaleTimeString();\n  let end = evidence.realTimeEnd?.toLocaleTimeString();\n  if (end === start) {\n    end = undefined;\n  }\n  const duration = [start, end].filter(Boolean).join(' - ');\n  return `${duration ? `[${duration}] ` : ''}${evidence.summary}`;\n};\n\nconst Stripe = styled(Link)`\n  display: block;\n  position: absolute;\n\n  width: 3px;\n  height: ${RAIL_HEIGHT}px;\n\n  transform: translate(-50%, 0);\n  margin-top: 0;\n  z-index: 2;\n\n  cursor: pointer;\n\n  &:hover,\n  &.highlighted {\n    background-color: white !important;\n  }\n`;\n\ntype Props = {\n  evidence: Evidence;\n};\n\nconst EvidenceStripe = ({ evidence }: Props) => (\n  <HighlightContext.Consumer>\n    {({ highlight, setHighlight }) => (\n      <Stripe\n        to={`/evidence/detail/${evidence._id}`}\n        title={timelineTitle(evidence)}\n        style={{\n          left: `${(evidence.timelineStartPercent || 0) * 100}%`,\n          backgroundColor: evidence.color,\n        }}\n        className={highlight === evidence._id ? 'highlighted' : ''}\n        onMouseOver={() => setHighlight(evidence._id)}\n        onMouseOut={() => setHighlight('')}\n      />\n    )}\n  </HighlightContext.Consumer>\n);\n\nexport default React.memo(EvidenceStripe);\n","import React, { useState } from 'react';\nimport { Slider, Rail, Handles, Tracks, Ticks } from 'react-compound-slider';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { numberTimeFormatter } from '../shared/util';\n\nimport { Range, SliderRail, Handle, Track, Tick } from './TimelineHelpers';\nimport { TimelineWrapper } from './evidence-results-styled-components';\nimport EvidenceStripe from './timeline/EvidenceStripe';\n\nconst sliderStyle = {\n  position: 'relative',\n  width: '100%',\n};\n\n// DOMAIN_START and DOMAIN_END are the start and end times of the timeline,\n// in milliseconds since the unix epoch.\nconst DOMAIN_START = Date.UTC(2021, 0, 6, 15, 0, 0); // 10AM Eastern\nconst DOMAIN_END = Date.UTC(2021, 0, 7, 1, 0, 0); // 8PM Eastern\n\n// Returns min if (val < min), max if (val > max), and val otherwise.\nfunction clamp(val: number, min: number, max: number): number {\n  return Math.min(Math.max(val, min), max);\n}\n\ntype EvidenceTimelineProps = {\n  startEndTimes: [Date, Date] | null;\n  onChangeTimes: (newTimes: [Date, Date] | null) => void;\n  evidence: Evidence[];\n};\n\nexport default function EvidenceTimeline({\n  startEndTimes,\n  onChangeTimes,\n  evidence,\n}: EvidenceTimelineProps) {\n  // The parent component passes in the currently-selected time range. We also\n  // maintain this local state, which has the start/end values as you're dragging\n  // the sliders. Once the user releases the slider, we pass the new values up to\n  // the parent and discard this state.\n  const [draggingValues, setDraggingValues] = useState<[number, number] | null>(null);\n\n  const domain: Range = [DOMAIN_START, DOMAIN_END];\n  let values: Range;\n  if (draggingValues) {\n    values = draggingValues;\n  } else if (startEndTimes) {\n    values = [startEndTimes[0].getTime(), startEndTimes[1].getTime()];\n  } else {\n    values = [DOMAIN_START, DOMAIN_END];\n  }\n\n  function onChange(newValues: readonly number[]) {\n    if (newValues[0] === DOMAIN_START && newValues[1] === DOMAIN_END) {\n      onChangeTimes(null);\n    } else {\n      onChangeTimes([new Date(newValues[0]), new Date(newValues[1])]);\n    }\n  }\n\n  const tickValues = [];\n  let range = DOMAIN_END - DOMAIN_START;\n  while (range >= 0) {\n    tickValues.push(range + DOMAIN_START);\n    range -= 30 * 60 * 1000; // 30 minutes between ticks\n  }\n\n  return (\n    <TimelineWrapper>\n      <div className=\"selected-time\">\n        {`${numberTimeFormatter(values[0])} - ${numberTimeFormatter(values[1])}`}\n      </div>\n      <Slider\n        mode={1}\n        step={5}\n        domain={domain}\n        reversed={false}\n        rootStyle={sliderStyle}\n        onUpdate={(newValues) => setDraggingValues([newValues[0], newValues[1]])}\n        onChange={onChange}\n        values={values}\n      >\n        <Rail>{({ getRailProps }) => <SliderRail getRailProps={getRailProps} />}</Rail>\n        <Handles>\n          {({ handles, getHandleProps }) => (\n            <div className=\"slider-handles\">\n              {handles.map((handle) => (\n                <Handle\n                  key={handle.id}\n                  handle={handle}\n                  domain={domain}\n                  getHandleProps={getHandleProps}\n                  isRight={handle.value > values[0]}\n                />\n              ))}\n            </div>\n          )}\n        </Handles>\n        {evidence.map((item) => (\n          <EvidenceStripe key={item._id} evidence={item} />\n        ))}\n        <Tracks left={false} right={false}>\n          {({ tracks, getTrackProps }) => (\n            <div className=\"slider-tracks\">\n              {tracks.map(({ id, source, target }) => (\n                <Track key={id} source={source} target={target} getTrackProps={getTrackProps} />\n              ))}\n            </div>\n          )}\n        </Tracks>\n        <Ticks values={tickValues}>\n          {({ ticks }) => (\n            <div className=\"slider-ticks\">\n              {ticks.map((tick) => (\n                <Tick key={tick.id} tick={tick} count={ticks.length} />\n              ))}\n            </div>\n          )}\n        </Ticks>\n      </Slider>\n      <div>{`${numberTimeFormatter(values[0])} - ${numberTimeFormatter(values[1])}`}</div>\n    </TimelineWrapper>\n  );\n}\n","/* eslint-disable import/no-unresolved */\n\nimport type { FeatureCollection, Point } from 'geojson';\nimport * as React from 'react';\n\nimport InteractiveMap, { Source, Layer, Marker } from 'react-map-gl';\nimport type { LayerProps } from 'react-map-gl';\nimport { useHistory } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { MapWrapper } from './evidence-results-styled-components';\n\nconst capitolLatLng: [number, number] = [38.8899389, -77.0090505];\n\nconst evidenceLayerStyle: LayerProps = {\n  id: 'evidence',\n  type: 'circle',\n  paint: {\n    'circle-radius': 5,\n    'circle-color': ['get', 'color'],\n    'circle-stroke-width': 2,\n    'circle-stroke-color': '#000',\n    'circle-stroke-opacity': 0.3,\n  },\n};\nconst evidenceHoverLayerStyle: LayerProps = {\n  id: 'evidence-hover',\n  source: 'evidence',\n  type: 'circle',\n  paint: {\n    'circle-radius': 5,\n    'circle-color': '#fff',\n    'circle-stroke-width': 2,\n    'circle-stroke-color': '#000',\n    'circle-stroke-opacity': 0.4,\n  },\n};\n\nconst Tooltip = styled.div`\n  background-color: #fff;\n  padding: 4px 8px;\n  border-radius: 3px;\n  box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.4);\n  width: 180px;\n  overflow: hidden;\n  line-height: 1.4;\n  font-size: 12px;\n  margin-top: -5px;\n  margin-left: 10px;\n`;\n\ntype EvidenceWithLatLng = Evidence & { latLng: [number, number] };\n\ntype Props = {\n  evidence: Array<Evidence>;\n  highlight: string;\n  onHover: (id: string) => void;\n};\n\nconst EvidenceMapbox = ({ evidence, highlight, onHover }: Props) => {\n  const history = useHistory();\n  const locatedEvidence = evidence.filter((item): item is EvidenceWithLatLng => !!item.latLng);\n\n  // Sort by start time, so that the gray markers land at the bottom\n  // and the later-in-the-day markers are on top.\n  locatedEvidence.sort((a, b) => +(a.realTimeStart || 0) - +(b.realTimeStart || 0));\n\n  const geojson: FeatureCollection<Point> = {\n    type: 'FeatureCollection',\n    features: locatedEvidence.map((item) => {\n      const [lat, lng] = item.latLng;\n      const coordinates: [number, number] = [lng, lat];\n      return {\n        type: 'Feature',\n        geometry: {\n          type: 'Point',\n          coordinates,\n        },\n        properties: {\n          id: item._id,\n          color: item.color,\n        },\n      };\n    }),\n  };\n\n  // TODO: fit to bounds\n  const [viewport, setViewport] = React.useState({\n    latitude: capitolLatLng[0],\n    longitude: capitolLatLng[1],\n    zoom: 14,\n  });\n\n  const [hoveredEvidence, setHoveredEvidence] = React.useState<Evidence | undefined>();\n  const onMapHover = React.useCallback(\n    (event) => {\n      const feature = event.features && event.features[0];\n      const hoveredItem = evidence.find((item) => item._id === feature?.properties?.id);\n      onHover(hoveredItem?._id || '');\n      setHoveredEvidence(hoveredItem);\n    },\n    [evidence]\n  );\n  const onMapClick = React.useCallback(\n    (event) => {\n      const feature = event.features && event.features[0];\n      const clickedItem = evidence.find((item) => item._id === feature?.properties?.id);\n      if (clickedItem) {\n        history.push(`/evidence/detail/${clickedItem._id}`);\n      }\n    },\n    [evidence]\n  );\n  const hoverLayerFilter = React.useMemo(() => {\n    const id = hoveredEvidence?._id || highlight || '_none_';\n    return ['==', id, ['get', 'id']];\n  }, [hoveredEvidence, highlight]);\n\n  return (\n    <MapWrapper>\n      <InteractiveMap\n        {...viewport}\n        width=\"100%\"\n        height=\"100%\"\n        onViewportChange={setViewport}\n        mapboxApiAccessToken=\"pk.eyJ1IjoibWlzdGFrZW5tdXN0YXJkIiwiYSI6ImNrbGVkbWtkdzFrOXEyenRrejVyb2Zzc20ifQ.LkFY7eWOE8ryEW_6Kj0f_Q\"\n        mapStyle=\"mapbox://styles/mapbox/satellite-v9\"\n        interactiveLayerIds={\n          evidenceLayerStyle.id && evidenceHoverLayerStyle.id\n            ? [evidenceLayerStyle.id, evidenceHoverLayerStyle.id]\n            : undefined\n        }\n        onHover={onMapHover}\n        onClick={onMapClick}\n      >\n        <Source type=\"geojson\" data={geojson}>\n          <Layer {...evidenceLayerStyle} />\n          <Layer {...evidenceHoverLayerStyle} filter={hoverLayerFilter} />\n        </Source>\n        {hoveredEvidence && hoveredEvidence.latLng ? (\n          <Marker\n            latitude={hoveredEvidence.latLng[0]}\n            longitude={hoveredEvidence.latLng[1]}\n            className=\"pointer-events-none\"\n          >\n            {hoveredEvidence.summary ? <Tooltip>{hoveredEvidence.summary}</Tooltip> : null}\n          </Marker>\n        ) : null}\n      </InteractiveMap>\n    </MapWrapper>\n  );\n};\n\nexport default EvidenceMapbox;\n","import styled from 'styled-components';\n\nimport { colors, shadows, padding, widths } from '../shared/constants';\nimport { TextButton, LeftBox } from '../shared/mixins';\n\nexport const Box = styled.div`\n  ${LeftBox}\n\n  font-size: 12px;\n  line-height: 18px;\n\n  h4 {\n    font-size: 18px;\n    line-height: 24px;\n    padding-left: ${padding.sm}px;\n  }\n\n  h5 {\n    font-size: 15px;\n    line-height: 24px;\n  }\n\n  .btn-group-toggle {\n    flex: 1 1 auto;\n    max-height: 25vh;\n    overflow-y: auto;\n    overflow-x: hidden;\n    border-top: 1px solid ${colors.tableLines};\n    border-bottom: 1px solid ${colors.tableLines};\n\n    display: block;\n\n    > .btn {\n      font-size: 12px;\n      line-height: 12px;\n      text-align: left;\n      padding: ${padding.sm}px;\n      border-radius: 0;\n\n      color: black;\n      background-color: white;\n      border-color: ${colors.tableLines};\n\n      display: flex;\n      flex-direction: row;\n\n      &:hover {\n        background-color: #bbb;\n      }\n\n      &.active {\n        color: black;\n        background-color: ${colors.activeFilter};\n\n        &:hover {\n          background-color: ${colors.activeFilterHover};\n        }\n      }\n\n      &:first-child {\n        border-top: 0;\n      }\n\n      &.hidden {\n        display: none;\n      }\n\n      .label {\n        flex: 1;\n      }\n\n      .count {\n        color: gray;\n        font-style: italic;\n        width: 25px;\n      }\n    }\n  }\n\n  .choice-filter {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    z-index: 1;\n    border-bottom: 0;\n    border-color: ${colors.tableLines};\n    width: calc(100% + 1px);\n  }\n`;\n\nexport const BoxHeader = styled.div`\n  display: flex;\n  align-items: stretch;\n  margin-bottom: ${padding.md}px;\n\n  h4 {\n    flex: 1 1 auto;\n    margin-bottom: 0;\n  }\n\n  button {\n    ${TextButton}\n  }\n`;\n\nexport const Toggles = styled.div`\n  padding: ${padding.md}px ${padding.sm}px ${padding.sm}px ${padding.sm}px;\n`;\n\nexport const SectionHeader = styled.h5`\n  flex: 0 0 auto;\n  width: 100%;\n  text-align: left;\n\n  padding: ${padding.sm}px;\n  padding-bottom: 0;\n\n  display: flex;\n  align-items: center;\n`;\n\nexport const FilterPills = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  padding-left: ${padding.sm}px;\n\n  .time {\n    background: #beb;\n  }\n  .location {\n    background: white;\n  }\n  .suspect {\n    background: ${colors.person};\n  }\n  .type {\n    background: #bbe;\n  }\n`;\n","import React from 'react';\n\nimport type { Filters, FilterChoices, FilterChoice } from '../../types/Filters';\nimport Tag from '../shared/Tag';\n\nimport { FilterPills } from './filter-box-styled-components';\n\ntype Props = {\n  filters: Filters;\n  choices: FilterChoices;\n  keywords: string[];\n  onDelete: (type: 'keywords' | keyof Filters, id: string) => void;\n};\n\nconst ActiveFilters = ({ filters, choices, keywords, onDelete }: Props) => {\n  const filterChoices = React.useMemo(() => {\n    const result: (FilterChoice & { type: keyof Filters })[] = [];\n    (Object.keys(filters) as (keyof Filters)[]).forEach((filterKey) => {\n      const sectionFilters: Set<string> = filters[filterKey];\n      const sectionChoices: FilterChoice[] | undefined = choices[filterKey];\n      if (sectionChoices) {\n        sectionFilters.forEach((id) => {\n          const match = sectionChoices.find((element) => element._id === id);\n          if (match) {\n            result.push({ ...match, type: filterKey });\n          }\n        });\n      }\n    });\n    return result;\n  }, [filters, choices]);\n\n  const search = keywords.join(' ');\n\n  return (\n    <FilterPills>\n      {filterChoices.map(({ _id, type, label }) => (\n        <Tag\n          key={`active-${_id}`}\n          id={_id}\n          className={type}\n          label={label}\n          title={`${type[0].toUpperCase() + type.slice(1)}: ${label}`}\n          onDelete={() => onDelete(type, _id)}\n        />\n      ))}\n      {search.length > 0 && (\n        <Tag\n          key=\"active-keywords\"\n          id=\"search\"\n          label={search}\n          className=\"keywords\"\n          title={`Keywords: ${search}`}\n          onDelete={() => onDelete('keywords', search)}\n        />\n      )}\n    </FilterPills>\n  );\n};\n\nexport default ActiveFilters;\n","import classnames from 'classnames';\nimport React from 'react';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport Form from 'react-bootstrap/Form';\nimport ToggleButton from 'react-bootstrap/ToggleButton';\n\nimport type { FilterChoiceWithCount } from '../../types/Filters';\n\ntype Props = {\n  categoryId: string;\n  choices: FilterChoiceWithCount[];\n  selectedIds: Set<string>;\n  onChange: (choiceIds: Set<string>) => void;\n};\n\nconst FilterChoiceBox = ({ categoryId, choices, selectedIds, onChange }: Props) => {\n  const [filter, setFilter] = React.useState<string>('');\n\n  const toggleSelection = (id: string) => {\n    const newSelected = new Set(selectedIds);\n    if (selectedIds.has(id)) {\n      newSelected.delete(id);\n    } else {\n      newSelected.add(id);\n    }\n    onChange(newSelected);\n  };\n\n  return (\n    <>\n      {choices.length > 8 && (\n        <Form.Control\n          type=\"text\"\n          placeholder=\"Filter...\"\n          onChange={(e) => setFilter(e.target.value)}\n          value={filter}\n          size=\"sm\"\n          className=\"choice-filter\"\n        />\n      )}\n      <ButtonGroup toggle vertical>\n        {choices.map((choice) => (\n          <ToggleButton\n            key={`${categoryId}-choice-${choice._id}`}\n            title={choice.label}\n            type=\"checkbox\"\n            variant=\"secondary\"\n            checked={selectedIds.has(choice._id)}\n            value=\"1\"\n            onChange={() => toggleSelection(choice._id)}\n            className={classnames({\n              hidden:\n                /* selectedIds.has(choice.id) || // TODO should chosen items disappear or go? */\n                !choice.label.toLowerCase().includes(filter.toLowerCase()),\n            })}\n          >\n            <div className=\"label\">{choice.label}</div>\n            <div className=\"count\">({choice.count})</div>\n          </ToggleButton>\n        ))}\n      </ButtonGroup>\n    </>\n  );\n};\n\nexport default FilterChoiceBox;\n","import React from 'react';\nimport Form from 'react-bootstrap/Form';\n\nimport { SectionHeader } from './filter-box-styled-components';\n\ntype Props = {\n  onChange: (search: string) => void;\n  value: string;\n};\n\nconst KeywordSearch = ({ onChange, value }: Props) => {\n  return (\n    <>\n      <SectionHeader>Keywords</SectionHeader>\n      <Form.Control\n        type=\"text\"\n        placeholder=\"Search\"\n        onChange={(e) => onChange(e.target.value)}\n        value={value}\n        size=\"sm\"\n      />\n    </>\n  );\n};\n\nexport default KeywordSearch;\n","import React from 'react';\n\nimport { SectionHeader } from './filter-box-styled-components';\n\ntype Props = {\n  label?: string;\n  children: React.ReactNode;\n};\n\nconst Section = ({ children, label }: Props) => {\n  return (\n    <>\n      {label && <SectionHeader>{label}</SectionHeader>}\n      {children}\n    </>\n  );\n};\n\nexport default Section;\n","import React from 'react';\nimport Form from 'react-bootstrap/Form';\n\nimport type { Filters, FilterChoicesWithCount, Toggles } from '../../types/Filters';\n\nimport ActiveFilters from './ActiveFilters';\nimport FilterChoiceBox from './FilterChoiceBox';\n\nimport KeywordSearch from './KeywordSearch';\nimport Section from './Section';\nimport { Box, BoxHeader, Toggles as TogglesContainer } from './filter-box-styled-components';\n\ntype Props = {\n  keywords: string[];\n  filters: Filters;\n  toggles: Toggles;\n  choices: FilterChoicesWithCount;\n  onKeywordsChanged: (newKeywords: string[]) => void;\n  onFilterChanged: <K extends keyof Filters>(key: K, newValue: Filters[K]) => void;\n  onToggleChanged: <K extends keyof Toggles>(key: K, newValue: Toggles[K]) => void;\n};\n\nconst removeOneFromSection = (section: Set<string>, id: string) => {\n  section.delete(id);\n  return section;\n};\n\nconst FilterBox = ({\n  keywords,\n  filters,\n  toggles,\n  choices,\n  onKeywordsChanged,\n  onFilterChanged,\n  onToggleChanged,\n}: Props) => {\n  const clearAll = () => {\n    onFilterChanged('location', new Set());\n    onFilterChanged('suspect', new Set());\n    onFilterChanged('otherTags', new Set());\n    onKeywordsChanged([]);\n  };\n\n  return (\n    <Box>\n      <BoxHeader>\n        <h4>Filters</h4>\n        <button type=\"button\" onClick={clearAll}>\n          Clear all\n        </button>\n      </BoxHeader>\n      <ActiveFilters\n        filters={filters}\n        choices={choices}\n        keywords={keywords}\n        onDelete={(type: 'keywords' | keyof Filters, id) =>\n          type === 'keywords'\n            ? onKeywordsChanged([])\n            : onFilterChanged(type, removeOneFromSection(filters[type], id))\n        }\n      />\n      <TogglesContainer>\n        <Form.Switch\n          type=\"switch\"\n          id=\"include-untimestamped\"\n          label=\"Include evidence without a time\"\n          checked={toggles.includeUntimestamped}\n          onChange={(evt) => onToggleChanged('includeUntimestamped', evt.target.checked)}\n        />\n      </TogglesContainer>\n      <KeywordSearch\n        onChange={(search) => onKeywordsChanged(search.split(' '))}\n        value={keywords.join(' ')}\n      />\n\n      <Section label=\"Location\">\n        <FilterChoiceBox\n          categoryId=\"location\"\n          choices={choices.location}\n          selectedIds={filters.location}\n          onChange={(params) => onFilterChanged('location', params)}\n        />\n      </Section>\n      <Section label=\"Suspects\">\n        <FilterChoiceBox\n          categoryId=\"suspects\"\n          choices={choices.suspect}\n          selectedIds={filters.suspect}\n          onChange={(params) => onFilterChanged('suspect', params)}\n        />\n      </Section>\n      <Section label=\"Other Tags\">\n        <FilterChoiceBox\n          categoryId=\"otherTags\"\n          choices={choices.otherTags}\n          selectedIds={filters.otherTags}\n          onChange={(params) => onFilterChanged('otherTags', params)}\n        />\n      </Section>\n    </Box>\n  );\n};\n\nexport default FilterBox;\n","import type { Evidence } from '@jan6evidence/types';\n\nimport type {\n  FilterChoicesWithCount,\n  FilterChoiceWithCount,\n  Filters,\n  Toggles,\n} from '../../types/Filters';\n\nconst isItemInTimeRange = (args: {\n  itemStart: Date;\n  itemEnd?: Date;\n  rangeStart: Date;\n  rangeEnd: Date;\n}): boolean => {\n  const { itemStart, itemEnd, rangeStart, rangeEnd } = args;\n  // Use itemEnd if provided and after itemStart; otherwise treat item as instantaneous at itemStart.\n  const usableItemEnd = itemEnd && itemEnd > itemStart ? itemEnd : itemStart;\n  // Return true if any portion of the item's duration is in the range\n  return itemStart <= rangeEnd && usableItemEnd >= rangeStart;\n};\n\nconst doesEvidenceMatchKeywords = (evidence: Evidence, keywords: string[]): boolean => {\n  if (keywords.length === 0) {\n    return true;\n  }\n\n  return [\n    evidence.locationName,\n    ...(evidence.otherTags || []),\n    ...(evidence.suspectTags || []),\n    evidence.rationale,\n    evidence.summary,\n  ].some((itemField) => {\n    if (!itemField) {\n      return false;\n    }\n\n    return keywords.some(\n      (keyword) => itemField.toLocaleLowerCase().indexOf(keyword.toLocaleLowerCase()) >= 0\n    );\n  });\n};\n\nexport default function filterEvidence(\n  evidence: Evidence[],\n  filters: Filters,\n  rawKeywords: string[],\n  toggles: Toggles,\n  startEndTimes: [Date, Date] | null\n): {\n  filteredEvidence: Evidence[];\n  timelineFilteredEvidence: Evidence[];\n  filterChoices: FilterChoicesWithCount;\n} {\n  const filteredEvidence: Evidence[] = [];\n  const timelineFilteredEvidence: Evidence[] = [];\n\n  const allLocations: { [label: string]: FilterChoiceWithCount } = {};\n  const allSuspects: { [label: string]: FilterChoiceWithCount } = {};\n  const allOtherTags: { [label: string]: FilterChoiceWithCount } = {};\n\n  // helper for adding items to the filter choices\n  function addFilterChoiceItem(\n    filterChoiceMap: { [label: string]: FilterChoiceWithCount },\n    label: string\n  ) {\n    /* eslint-disable no-param-reassign */\n    if (!filterChoiceMap[label]) {\n      filterChoiceMap[label] = { _id: label, label, count: 0 };\n    }\n\n    filterChoiceMap[label].count += 1;\n    /* eslint-enable no-param-reassign */\n  }\n\n  const keywords = rawKeywords.filter((s) => s);\n\n  evidence.forEach((item) => {\n    // Keywords and toggles affect everything -- so apply those first and short-circuit\n    // if the evidence doesn't match\n    if (!doesEvidenceMatchKeywords(item, keywords)) {\n      return;\n    }\n\n    if (!toggles.includeUntimestamped && !item.realTimeStart) {\n      return;\n    }\n\n    // Compute which filters this item matches\n    let matchLocation = true;\n    if (filters.location.size > 0) {\n      if (!item.locationName) {\n        matchLocation = false;\n      } else if (!filters.location.has(item.locationName)) {\n        matchLocation = false;\n      }\n    }\n\n    let matchSuspects = true;\n    if (filters.suspect.size > 0) {\n      if (!item.suspectTags) {\n        matchSuspects = false;\n      } else if (!item.suspectTags.some((tag) => filters.suspect.has(tag))) {\n        matchSuspects = false;\n      }\n    }\n\n    let matchTags = true;\n    if (filters.otherTags.size > 0) {\n      if (!item.otherTags) {\n        matchTags = false;\n      } else if (!item.otherTags.some((tag) => filters.otherTags.has(tag))) {\n        matchTags = false;\n      }\n    }\n\n    let matchTimeline = true;\n    if (startEndTimes && item.realTimeStart) {\n      if (\n        !isItemInTimeRange({\n          itemStart: item.realTimeStart,\n          itemEnd: item.realTimeEnd,\n          rangeStart: startEndTimes[0],\n          rangeEnd: startEndTimes[1],\n        })\n      ) {\n        matchTimeline = false;\n      }\n    }\n\n    // If it matches all the filters, add it to the filtered evidence\n    if (matchLocation && matchSuspects && matchTags && matchTimeline) {\n      filteredEvidence.push(item);\n    }\n\n    // If it matches all the filters *ignoring timeline*, add it to the evidence\n    // for the timeline (the timeline shows evidence outside the timeline\n    // bounds)\n    if (matchLocation && matchSuspects && matchTags) {\n      timelineFilteredEvidence.push(item);\n    }\n\n    // Now, we need to compute the counts for the filter boxes. These filters\n    // are ORs, not ANDs. So the count for each filter is the number of pieces\n    // of evidence that match that specific filter item, *and* match the active\n    // filters for the other types of filters. For example, the count for the\n    // location filter \"The Ellipse\" is the number of pieces of evidence that\n    // are tagged with \"The Ellipse\", AND match all active suspect and tag\n    // filters.\n\n    if (matchSuspects && matchTags && matchTimeline && item.locationName) {\n      addFilterChoiceItem(allLocations, item.locationName);\n    }\n\n    if (matchLocation && matchTags && matchTimeline && item.suspectTags) {\n      item.suspectTags.forEach((tag) => addFilterChoiceItem(allSuspects, tag));\n    }\n\n    if (matchLocation && matchSuspects && matchTimeline && item.otherTags) {\n      item.otherTags.forEach((tag) => addFilterChoiceItem(allOtherTags, tag));\n    }\n  });\n\n  const filterChoices = {\n    location: Object.values(allLocations).sort((a, b) => (a.label < b.label ? -1 : 1)),\n    suspect: Object.values(allSuspects).sort((a, b) => (a.label < b.label ? -1 : 1)),\n    otherTags: Object.values(allOtherTags).sort((a, b) => (a.label < b.label ? -1 : 1)),\n  };\n\n  return { filterChoices, filteredEvidence, timelineFilteredEvidence };\n}\n","import React from 'react';\nimport Modal from 'react-modal';\nimport { useParams, useHistory } from 'react-router-dom';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { evidence } from '../data';\n\nimport { Filters, Toggles } from '../types/Filters';\n\nimport EvidenceDetail from './EvidenceDetail';\nimport { EvidenceTable, EvidenceTimeline } from './EvidenceMain';\nimport EvidenceMapbox from './EvidenceMain/EvidenceMapbox';\nimport FilterBox from './FilterBox';\nimport filterEvidence from './FilterBox/filterEvidence';\nimport PageHeaderAndNav from './PageHeaderAndNav';\nimport { HighlightContext } from './shared/contexts';\nimport { usePageTitle } from './shared/hooks';\nimport { debounce } from './shared/util';\nimport {\n  EvidenceResultsWrapper,\n  EvidenceTableWrapper,\n  EvidenceCount,\n} from './table-styled-components';\n\nModal.setAppElement('#root');\n\nconst EvidenceApp = () => {\n  usePageTitle('January 6 Evidence Explorer');\n\n  const [filters, setFilters] = React.useState<Filters>({\n    location: new Set<string>(),\n    suspect: new Set<string>(),\n    otherTags: new Set<string>(),\n  });\n  const [keywords, setKeywords] = React.useState<string[]>([]);\n  const [toggles, setToggles] = React.useState<Toggles>({\n    includeUntimestamped: true,\n  });\n  const [highlight, setHighlight] = React.useState<string>('');\n  const [startEndTimes, setStartEndTimes] = React.useState<[Date, Date] | null>(null);\n  const { detailId } = useParams<{ detailId?: string }>();\n  const history = useHistory();\n  const closeModal = React.useCallback(() => history.push(`/evidence`), [history]);\n\n  const { filteredEvidence, timelineFilteredEvidence, filterChoices } = filterEvidence(\n    evidence,\n    filters,\n    keywords,\n    toggles,\n    startEndTimes\n  );\n\n  const debouncedHighlight = React.useCallback(debounce(setHighlight, 100), []);\n\n  let prevEvidence;\n  let nextEvidence;\n  const detailEvidence = detailId\n    ? filteredEvidence.find((r, i) => {\n        if (r._id === detailId) {\n          prevEvidence = filteredEvidence[i - 1];\n          nextEvidence = filteredEvidence[i + 1];\n          return true;\n        }\n        return false;\n      })!\n    : { _id: '' };\n\n  return (\n    <div>\n      <FilterBox\n        onFilterChanged={(section, newContent) => {\n          setFilters((oldFilters) => ({ ...oldFilters, [section]: newContent }));\n        }}\n        onKeywordsChanged={(newKeywords) => setKeywords(newKeywords)}\n        filters={filters}\n        choices={filterChoices}\n        keywords={keywords}\n        toggles={toggles}\n        onToggleChanged={(toggle, newValue) => {\n          setToggles((oldToggles) => ({ ...oldToggles, [toggle]: newValue }));\n        }}\n      />\n      <EvidenceResultsWrapper>\n        <PageHeaderAndNav title=\"January 6 Evidence Explorer\" hideExplorerLink />\n        <HighlightContext.Provider value={{ highlight, setHighlight: debouncedHighlight }}>\n          <EvidenceMapbox\n            evidence={filteredEvidence}\n            onHover={debouncedHighlight}\n            highlight={highlight}\n          />\n          <EvidenceTimeline\n            startEndTimes={startEndTimes}\n            onChangeTimes={setStartEndTimes}\n            // We re-filter here, ignoring time time filter, so that we still show\n            // evidence on the timeline that isn't in the selected time range\n            evidence={timelineFilteredEvidence}\n          />\n          <EvidenceCount>{filteredEvidence.length} bits of evidence</EvidenceCount>\n          <EvidenceTableWrapper>\n            <EvidenceTable\n              results={filteredEvidence}\n              highlight={highlight}\n              onHover={debouncedHighlight}\n            />\n          </EvidenceTableWrapper>\n        </HighlightContext.Provider>\n      </EvidenceResultsWrapper>\n      <EvidenceDetail\n        isOpen={!!detailId}\n        evidence={detailEvidence}\n        onClose={closeModal}\n        prev={prevEvidence}\n        next={nextEvidence}\n      />\n    </div>\n  );\n};\n\nexport default EvidenceApp;\n","import styled from 'styled-components';\n\nexport default styled.div`\n  width: 90%;\n  margin: auto;\n  padding: 20px 0;\n`;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport Container from './shared/Container';\n\nfunction InstructionsPage() {\n  return (\n    <Container>\n      <h1>January 6 Evidence</h1>\n      <p>A work in progress.</p>\n      <ul>\n        <li>\n          <Link to=\"/evidence\">Evidence explorer</Link>\n        </li>\n        <li>\n          <Link to=\"/gallery\">Persons-of-interest gallery</Link>\n        </li>\n        <li>\n          <Link to=\"/poi_table\">Persons-of-interest table</Link>\n        </li>\n        <li>\n          <Link to=\"/about\">About</Link>\n        </li>\n      </ul>\n    </Container>\n  );\n}\n\nexport default InstructionsPage;\n","import React from 'react';\n\nimport styled from 'styled-components';\n\nimport { Suspect } from '@jan6evidence/types';\n\nconst SuspectCardDiv = styled.div`\n  padding: 0.25rem;\n  flex: auto;\n  min-width: 8rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 280px;\n  margin: 10px 5px;\n  vertical-align: top;\n`;\n\nconst SuspectThumbnailImg = styled.img`\n  width: auto;\n  height: 200px;\n  vertical-align: middle;\n  border: solid 1px #eee;\n`;\n\nconst OverviewContainerDiv = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n`;\n\nexport const SuspectThumbnail = ({ primaryHashtag }: { primaryHashtag: string | undefined }) => {\n  if (!primaryHashtag) {\n    return null;\n  }\n  const thumbnailSrcUrl = `https://www.tommycarstensen.com/terrorism/suspects/images/${primaryHashtag}_thumbnail.png`;\n  return <SuspectThumbnailImg src={thumbnailSrcUrl} alt={`${primaryHashtag} thumbnail image`} />;\n};\n\n// For now, point to TommyC's site. Replace with our own detail page once we have it!\nconst detailUrl = (suspect: Suspect): string =>\n  `https://www.tommycarstensen.com/terrorism/suspects/individuals/${suspect.primaryHashtag}.html`;\n\nconst twitterSearchUrl = (suspect: Suspect): string =>\n  `https://twitter.com/search?q=${suspect.primaryHashtag}`;\n\n// This is a total hack on multiple fronts.\nconst getFbiLink = (suspect: Suspect) => {\n  // Hack 1: hope that things come in the right format, match the first instance\n  // of an FBI-like identifier in the free-text lawEnforcementIdentfiers field.\n  const regexMatch = suspect.lawEnforcementIdentifiers?.match(/((\\d+)-(AOM|AFO))/);\n  if (!regexMatch) {\n    return null;\n  }\n  const fbiIdentifier = regexMatch[0];\n  // Hack 2: this is just a guess about the fbi URL. It's not always correct.\n  const fbiUrl = `https://www.fbi.gov/wanted/capitol-violence-images/capitol-${regexMatch[2]}.png/view`;\n  return <a href={fbiUrl}>FBI: {fbiIdentifier}</a>;\n};\n\nconst SuspectCard = ({ suspect }: { suspect: Suspect }) => {\n  if (!suspect.primaryHashtag) {\n    return null;\n  }\n  const fbiLink = getFbiLink(suspect);\n  return (\n    <SuspectCardDiv data-title={`suspect-${suspect._id}`}>\n      <a href={detailUrl(suspect)}>\n        <SuspectThumbnail primaryHashtag={suspect.primaryHashtag} />\n      </a>\n      <a href={twitterSearchUrl(suspect)}>#{suspect.primaryHashtag}</a>\n      {fbiLink || <span>&nbsp;</span>}\n    </SuspectCardDiv>\n  );\n};\n\nconst SuspectsGallery = ({ suspects }: { suspects: Array<Suspect> }) => {\n  return (\n    <OverviewContainerDiv>\n      {suspects.map((suspect) => (\n        <SuspectCard key={suspect._id} suspect={suspect} />\n      ))}\n    </OverviewContainerDiv>\n  );\n};\n\nexport default SuspectsGallery;\n","import React from 'react';\n\nimport { TableHead, StickyTH } from './table-styled-components';\n\nexport type HeaderCell = {\n  rowSpan?: number;\n  colSpan?: number;\n  title: string;\n  ref?: (instance: HTMLTableHeaderCellElement | null) => void;\n  width?: number;\n};\n\ntype Props = {\n  spec: HeaderCell[][];\n  adjustDimensions?: boolean;\n};\n\nconst Header = ({ spec }: Props) => (\n  <TableHead>\n    {spec.map((tr, rowNum) => (\n      // eslint-disable-next-line react/no-array-index-key\n      <tr key={rowNum}>\n        {tr.map((cellData) => {\n          const colSpan = cellData.colSpan || 1;\n          return (\n            <StickyTH\n              rowSpan={cellData.rowSpan || 1}\n              colSpan={colSpan}\n              style={{ top: `${rowNum * 25}px` }}\n              key={cellData.title}\n            >\n              <div className={`${colSpan > 1 ? 'parent-category' : ''}`}>{cellData.title}</div>\n            </StickyTH>\n          );\n        })}\n      </tr>\n    ))}\n  </TableHead>\n);\n\nexport default Header;\n","import styled from 'styled-components';\n\nimport { padding } from '../shared/constants';\n\nconst xlText = '20px';\nconst medText = '14px';\nconst smallText = '13px';\n\nexport const ROW_HEIGHT = 180;\n\nexport const CrimeCategories = styled.ul`\n  padding: 0;\n`;\n\nexport const CrimeCategory = styled.li`\n  list-style-type: none;\n  background: #eee;\n  padding: ${padding.xs}px ${padding.sm}px;\n  border-radius: ${padding.sm}px;\n  margin-bottom: ${padding.sm}px;\n  mix-blend-mode: darken;\n`;\n\nexport const HashtagCellWrapper = styled.td`\n  font-size: ${xlText};\n  .alternates {\n    font-size: ${smallText};\n    display: flex;\n    flex-wrap: wrap;\n\n    .alternate {\n      margin-right: 6px;\n    }\n  }\n`;\n\nexport const LinksCellWrapper = styled.td`\n  font-size: ${medText};\n`;\n\nexport const SummaryCellWrapper = styled.td`\n  font-size: ${medText};\n  p {\n    padding: 12px 0;\n    margin: 0;\n  }\n\n  p + p {\n    padding-top: 0;\n  }\n`;\n","import React from 'react';\n\nimport { CrimeCategories, CrimeCategory } from './row-styled-components';\n\nexport type CategoryType = {\n  id: string;\n  name: string;\n  color?: string;\n  present?: boolean;\n};\nexport type CategoriesType = CategoryType[];\n\ninterface Props {\n  id: string;\n  data: CategoriesType;\n  // addCategory: (id: string) => null,\n  // removeCategory: (id: string) => null,\n}\n\nconst Categories: React.FunctionComponent<Props> = ({\n  id,\n  data /* addCategory, removeCategory, */,\n}: Props) => {\n  return (\n    <>\n      <CrimeCategories>\n        {data.map((category) => {\n          if (category.present) {\n            return (\n              <CrimeCategory\n                key={`${id}-${category.id}`}\n                style={{ backgroundColor: category.color }}\n              >\n                {category.name}\n              </CrimeCategory>\n            );\n          }\n          return null;\n        })}\n      </CrimeCategories>\n    </>\n  );\n};\n\nexport default Categories;\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport type { Suspect } from '@jan6evidence/types';\n\nimport Categories from './Categories';\n\nimport { LinksCellWrapper, SummaryCellWrapper, HashtagCellWrapper } from './row-styled-components';\n\nconst SuspectPhoto = styled.img`\n  max-width: 100px;\n  max-height: 100px;\n`;\n\ntype Props = {\n  data: Suspect;\n};\n\nconst ImageCell = ({ data }: Props) => {\n  if (!data.primaryPhotoUrl) {\n    return <td />;\n  }\n\n  const regexMatch = data.primaryPhotoUrl?.match(/https:\\/\\/drive.google.com\\/file\\/d\\/(\\w+)\\//);\n\n  let photoURL = data.primaryPhotoUrl;\n  if (regexMatch) {\n    photoURL = `https://drive.google.com/uc?export=view&id=${regexMatch[1]}`;\n  }\n\n  return (\n    <td>\n      <a href={photoURL} target=\"_blank\" rel=\"noopener noreferrer\">\n        <SuspectPhoto src={photoURL} alt=\"\" />\n      </a>\n    </td>\n  );\n};\n\nconst HashtagLink = ({ hashtag }: { hashtag: string | undefined }) => {\n  if (!hashtag) {\n    return <span>-</span>;\n  }\n  let formattedHashtag = hashtag;\n  if (!formattedHashtag.startsWith('#')) {\n    formattedHashtag = `#${hashtag}`;\n  }\n\n  return (\n    <a\n      href={`https://twitter.com/search?q=${encodeURIComponent(formattedHashtag)}`}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      {hashtag}\n    </a>\n  );\n};\n\nconst HashtagCell = ({ data }: Props) => (\n  <HashtagCellWrapper>\n    <HashtagLink hashtag={data.primaryHashtag} />\n    {data.alternateHashtags.length > 0 && (\n      <p className=\"alternates\">\n        {data.alternateHashtags.map((hashtag) => (\n          <span className=\"alternate\">\n            <HashtagLink hashtag={hashtag} />\n          </span>\n        ))}\n      </p>\n    )}\n  </HashtagCellWrapper>\n);\n\nconst LinksCell = ({ data }: Props) => {\n  const links = [\n    {\n      label: 'Composites',\n      url: data.compositeURL,\n    },\n    {\n      label: 'Files',\n      url: data.filesUrl,\n    },\n  ].filter(({ url }) => url);\n\n  return (\n    <LinksCellWrapper>\n      {links.map(({ label, url }) => (\n        <p key={label}>\n          <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n            {label}\n          </a>\n        </p>\n      ))}\n    </LinksCellWrapper>\n  );\n};\n\nconst TagsCell = ({ data }: Props) => {\n  const tags = [\n    {\n      present: !!data.category,\n      id: 'category',\n      name: data.category!,\n      color: '#ccc',\n    },\n    {\n      present: data.isViolent,\n      id: 'violent',\n      name: 'Violence',\n      color: '#dd4b4b',\n    },\n    {\n      present: data.isVandal,\n      id: 'vandalism',\n      name: 'Vandalism',\n      color: '#ffba5f',\n    },\n    {\n      present: data.isOrganizer,\n      id: 'organizer',\n      name: 'Organizer',\n      color: '#ced62a',\n    },\n    {\n      present: data.hasEarpieceOrRadio,\n      id: 'earpiece',\n      name: 'Earpiece / Radio',\n      color: '#bec4ff',\n    },\n    {\n      present: data.hasHelmetOrArmor,\n      id: 'helmet',\n      name: 'Helmet / Armor',\n      color: '#9084ff',\n    },\n  ];\n\n  return (\n    <td>\n      <Categories id={data._id} data={tags} />\n    </td>\n  );\n};\n\nconst TwitterUserLink = ({ username }: { username: string }) => {\n  let formattedUsername = username;\n  if (formattedUsername.startsWith('@')) {\n    formattedUsername = username.slice(1);\n  }\n\n  return (\n    <a\n      href={`https://twitter.com/${encodeURIComponent(formattedUsername)}`}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      {username}\n    </a>\n  );\n};\n\nconst ProfileLeadsCell = ({ data }: Props) => {\n  return (\n    <td>\n      {data.profileLeads.map((lead) => (\n        <p key={lead}>\n          <TwitterUserLink username={lead} />\n        </p>\n      ))}\n    </td>\n  );\n};\n\nconst SummaryCell = ({ data }: Props) => {\n  const sections = [\n    { header: 'Brief summary of observed actions', body: data.actionsSummary },\n    { header: 'Appearance notes', body: data.appearanceSummary },\n    { header: 'Associated with', body: data.associations.join(', ') },\n    {\n      header: 'URLs for additional information / images',\n      body: data.otherUrls,\n    },\n  ].filter(({ body }) => body);\n\n  return (\n    <SummaryCellWrapper>\n      {sections.map(({ header, body }) => (\n        <p key={header}>\n          <strong>{header}</strong>\n          <br />\n          {body}\n        </p>\n      ))}\n    </SummaryCellWrapper>\n  );\n};\n\n// TODO differentiate by cell type based on columnIndex\nconst Row = ({ data }: Props) => (\n  <tr data-title={`suspect-${data._id}`}>\n    <ImageCell data={data} />\n    <HashtagCell data={data} />\n    <LinksCell data={data} />\n    <TagsCell data={data} />\n    <td>{data.lawEnforcementIdentifiers}</td>\n    <td>{data.arrestedOrPubliclyId}</td>\n    <ProfileLeadsCell data={data} />\n    <SummaryCell data={data} />\n  </tr>\n);\n\nexport default Row;\n","import React from 'react';\n\nimport type { Suspect } from '@jan6evidence/types';\n\nimport Header, { HeaderCell } from './Header';\nimport Row from './Row';\nimport { TableWrapper, ScrollableTable } from './table-styled-components';\n\nconst HEADER_SPEC: HeaderCell[][] = [\n  [\n    { colSpan: 4, title: 'Suspect' },\n    { colSpan: 3, title: 'Law Enforcement' },\n    { rowSpan: 2, title: 'Summary' },\n  ],\n  [\n    { title: 'Image' },\n    { title: 'Hashtag(s)' },\n    { title: 'Links' },\n    { title: 'Tags' },\n    { title: 'Wanted or Arrest #' },\n    { title: \"Arrested or ID'd\" },\n    { title: 'Profile leads' },\n  ],\n];\n\nconst SuspectsTable = ({ suspects }: { suspects: Suspect[] }) => {\n  return (\n    <TableWrapper data-toggle=\"table\">\n      <ScrollableTable>\n        <Header spec={HEADER_SPEC} />\n        <tbody>\n          {suspects.map((suspect) => (\n            <Row key={suspect._id} data={suspect} />\n          ))}\n        </tbody>\n      </ScrollableTable>\n    </TableWrapper>\n  );\n};\n\nexport default SuspectsTable;\n","import React from 'react';\n\nimport suspects from '@jan6evidence/data/suspects.json';\n\nimport PageHeaderAndNav from './PageHeaderAndNav';\nimport SuspectsGallery from './SuspectsGallery';\nimport SuspectsTable from './SuspectsTable';\nimport { usePageTitle } from './shared/hooks';\nimport { AppWrapper } from './table-styled-components';\n\nconst SuspectsApp = () => {\n  usePageTitle('January 6 Persons of Interest');\n\n  return (\n    <AppWrapper>\n      <PageHeaderAndNav title=\"January 6 Gallery\" hideGalleryLink />\n      <SuspectsGallery suspects={suspects} />\n    </AppWrapper>\n  );\n};\n\nexport const SuspectsTableApp = () => {\n  usePageTitle('January 6 Persons of Interest');\n\n  return (\n    <AppWrapper>\n      <PageHeaderAndNav title=\"January 6 Persons-of-Interest Table\" />\n      <SuspectsTable suspects={suspects} />\n    </AppWrapper>\n  );\n};\n\nexport default SuspectsApp;\n","import React from 'react';\nimport { Route, Switch } from 'react-router';\n\nimport AboutPage from './AboutPage';\nimport CollectionsApp from './CollectionsApp';\nimport EvidenceApp from './EvidenceApp';\nimport InstructionsPage from './InstructionsPage';\nimport SuspectsApp, { SuspectsTableApp } from './SuspectsApp';\n\nfunction Routes() {\n  return (\n    <Switch>\n      <Route path=\"/\" exact component={InstructionsPage} />\n      <Route path=\"/about\" component={AboutPage} />\n      <Route path=\"/gallery\" component={SuspectsApp} />\n      <Route path=\"/poi_table\" component={SuspectsTableApp} />\n      <Route path=\"/evidence\" exact component={EvidenceApp} />\n      <Route path=\"/evidence/detail/:detailId\" component={EvidenceApp} />\n      <Route path=\"/evidence/collections/\" component={CollectionsApp} />\n      <Route\n        path=\"/evidence/collections/?id=:collectionId&name=:name&collectionItems=:collectionItems\"\n        component={CollectionsApp}\n      />\n    </Switch>\n  );\n}\n\nexport default Routes;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\n\nimport './index.css';\nimport Routes from './ui/Routes';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <Routes />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}