{"version":3,"sources":["../../libs/routes/index.ts","../../libs/formatters/index.ts","../../settings/index.ts","ui/shared/constants.ts","ui/PageHeaderAndNav.tsx","ui/table-styled-components.ts","ui/Error404Page.tsx","ui/AboutPage.tsx","ui/StaticAboutPage.tsx","types/LoadState.ts","data-helpers.ts","data.ts","ui/shared/LocationLink.tsx","ui/shared/mixins.ts","ui/shared/shared-styled-components.ts","ui/shared/Tag.tsx","ui/EvidenceDetail/detail-styled-components.ts","ui/EvidenceDetail/evidenceFormUrl.ts","ui/EvidenceDetail/media-embeds.tsx","ui/EvidenceDetail/index.tsx","ui/shared/hooks.ts","ui/EvidenceMain/evidence-results-styled-components.ts","ui/EvidenceMain/EvidenceMapbox.tsx","ui/EvidenceMain/Result.tsx","ui/EvidenceMain/EvidenceTable.tsx","ui/EvidenceMain/TimelineHelpers.tsx","ui/EvidenceMain/timeline/EvidenceStripe.tsx","ui/EvidenceMain/EvidenceTimeline.tsx","ui/EvidenceMain/index.tsx","ui/shared/util.ts","ui/EvidenceMain/EvidenceCopyableExport.tsx","ui/EvidenceMain/EvidenceExportView.tsx","ui/FilterBox/filter-box-styled-components.ts","ui/FilterBox/ActiveFilters.tsx","ui/FilterBox/KeywordSearch.tsx","ui/FilterBox/Section.tsx","ui/FilterBox/TagFilterChoiceBox.tsx","ui/FilterBox/index.tsx","ui/FilterBox/filterEvidence.ts","ui/EvidenceApp.tsx","../../libs/video-urls/util/urlOrNull.ts","ui/EvidenceMain/EvidenceMobileOverlay.tsx","ui/FixedLayout.tsx","ui/StaticEvidencePage.tsx","../../libs/filters/index.ts","../../libs/video-urls/media_url_matcher.ts","../../libs/video-urls/types/archiveOrg.ts","ui/StaticMediaItemsPage.tsx","ui/MediaItemsOverview.tsx","ui/OtherResourcesPage.tsx","ui/StaticOtherResourcesPage.tsx","../../data/fbi_links.ts","../../libs/canonical_tags/index.ts","../../data/index.ts","../../libs/types/Suspect.ts","ui/SuspectsGallery.tsx","ui/SuspectDetail.tsx","ui/SuspectsApp.tsx","ui/StaticSuspectsApp.tsx","ui/Routes.tsx","index.tsx"],"names":["PATHS","localTimeFormatter","d","config","dateObj","Date","DateTime","fromJSDate","zone","toFormat","format","localTimeRangeFormatter","range","formattedRealTimeStart","start","formattedRealTimeEnd","end","undefined","videoTimepointFormatter","timeSec","hhmmss","toISOString","substr","startsWith","slice","videoTimepointRangeFormatter","startSec","endSec","formattedStart","formattedEnd","toNdecimals","x","places","pow10","roundedX","Math","round","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","latLngFormatter","latLng","decimalPlaces","lat","lng","map","latStr","lngStr","meteorSettings","Meteor","settings","rawProjectConfig","public","projectConfig","defaultSettings","localTimeInputZone","localTimeInput","defaultDate","inputType","localTimeInputConfig","formatLocalTime","time","makeFormatLocalTimeFn","dateTimeFromInputValue","value","split","parseInt","year","month","day","fromObject","hour","minute","second","makeDateTimeFromDateInputValueFn","hours","minutes","seconds","getUTCFullYear","getMonth","getUTCDate","makeDateTimeFromTimeInputValueFn","PROJECT_CONFIG","timeline","colors","projectId","colombiaTags","usPoliceViolenceTags","jan6Tags","Error","getTagList","shadows","padding","widths","PageHeaderDiv","styled","div","NavList","ul","UpdateDiv","navLinkOrText","to","text","isLink","Jan6NavList","Jan6Updates","href","className","data-show-count","async","src","charSet","PageHeaderAndNav","explorerTitle","AppWrapper","TableStyle","table","EvidenceResultsWrapper","thead","th","EvidenceTableWrapper","EvidenceCount","Error404Div","button","Error404Page","location","pathname","AboutDiv","AboutPage","download","StaticAboutPage","LoadState","HASH_BUCKETS","BadButFastRng","seed","accum","i","length","charCodeAt","this","min","max","JITTER","toLatLng","jitterSeed","r","randFloatBetween","chroma","scale","makeColor","timelineStartPercent","colorIndex","floor","clampedColorIndex","toDate","str","getStaticEvidence","timelineDomainStart","timelineDomainEnd","evidenceData","item","itemId","otherFields","versionedId","realTimeStart","realTimeEnd","getTime","toTimelinePercent","_id","color","LocationLink","name","googleMapUrl","target","rel","TextButton","css","LeftBox","Pill","span","PillXButton","Tag","id","title","label","onDelete","style","backgroundColor","type","onClick","BORDER_RADIUS","MODAL_SPACING","ModalWrapper","section","Header","header","Buttons","nav","Content","main","buttonBorderWidth","Nav","formatTags","tags","join","evidenceUpdateFormUrl","evidence","formUrl","URL","formFields","usp","imageUrl","videoUrl","videoStartTimepoint","videoEndTimepoint","locationName","replace","suspectTags","otherTags","summary","rationale","Object","entries","forEach","key","trim","searchParams","append","bareMp4VideoTag","url","urlAsString","safeMakeUrl","hash","controls","embedTweet","tweetId","options","conversation","embedVideo","videoDetails","ytVideoId","toString","width","height","frameBorder","allow","allowFullScreen","youtubeIframe","videoId","identifier","filename","archiveOrgVideoIframe","megaVideoId","urlString","megaVideoIframe","vimeoId","vimeoIframe","profileId","embedUrl","border","overflow","scrolling","facebookIframe","_evidence","driveFileId","googleDriveIframe","embedId","rumbleIframe","instagramIframe","embedImage","hostname","match","matchResult","tweetIdFromUrl","ppId","pacificPressId","pacificPressIdFromUrl","alt","videoTimepointRow","formattedRange","scope","EvidenceDetail","detailId","onClose","prevPath","nextPath","timeFormatterConfig","history","useHistory","useLocation","handleOnClick","React","useCallback","push","search","isOpen","onRequestClose","contentLabel","overlay","zIndex","shouldCloseOnOverlayClick","Button","size","variant","disabled","usePageTitle","useEffect","previousTitle","document","useDebouncedValue","delay","useState","debouncedValue","setDebouncedValue","timer","setTimeout","clearTimeout","useDebouncedValueWithWaitingIndicator","isWaiting","setIsWaiting","useQueryState","debounce","replaceState","query","qs","parse","queryState","setQueryState","debouncedQueryState","stringify","nextQuery","update","updater","nextState","MapWrapper","MapSpinner","MapControls","EVIDENCE_COLORS","TimelineWrapper","HandleShape","svg","TableWrapper","NoResults","evidenceLayerStyle","paint","evidenceHoverLayerStyle","source","Tooltip","EvidenceMapbox","highlight","defaultMapViewport","onHover","onChangeBounds","geojson","locatedEvidence","filter","sort","a","b","features","geometry","coordinates","properties","parseFloatString","parseFloat","viewport","latitude","longitude","zoom","drawing","setDrawing","area","LngLatBounds","convert","JSON","anchor","corner","lngLat1","lngLat2","drawingToLngLatBounds","hoveredEvidence","setHoveredEvidence","onMapHover","event","feature","hoveredItem","find","onMapClick","clickedItem","hoverLayerFilter","loading","setLoading","mapRef","current","getMap","bounds","getBounds","serializedBounds","toArray","debouncedBounds","deserializedBounds","onKeyDown","onKeyUp","addEventListener","removeEventListener","onViewportChange","nextViewport","prevQueryState","mapboxApiAccessToken","mapStyle","interactiveLayerIds","onMouseDown","lngLat","onMouseMove","onMouseUp","ref","getCursor","dragPan","data","getNorthWest","getNorthEast","getSouthEast","getSouthWest","ResultThumbnail","cellData","formattedDuration","thumbnailUrl","toUpperCase","ResultSummary","memo","ResultTags","ResultTime","timeStr","ResultLocation","cellDataGetter","rowData","makeCellRenderer","Component","EvidenceTable","results","getDetailPath","index","headerHeight","rowHeight","rowCount","rowGetter","rowClassName","onRowClick","onRowMouseOver","onRowMouseOut","noRowsRenderer","dataKey","cellRenderer","flexGrow","RAIL_HEIGHT","railOuterStyle","position","cursor","railInnerStyle","pointerEvents","SliderRail","getRailProps","Handle","domain","handle","percent","isRight","getHandleProps","left","transform","WebkitTapHighlightColor","role","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","marginTop","viewBox","points","Track","getTrackProps","borderRadius","Tick","tick","formatterFn","display","flexDirection","alignItems","fontSize","whiteSpace","textOverflow","timelineTitle","Stripe","Link","EvidenceStripe","highlighted","setHighlight","onMouseOver","onMouseOut","sliderStyle","EvidenceTimeline","values","startEndTimes","onChangeTimes","domainStart","domainEnd","tickIntervalMsec","draggingValues","setDraggingValues","onChange","newValues","tickValues","evidenceStripes","useMemo","mode","step","reversed","rootStyle","onUpdate","handles","right","tracks","ticks","count","t","Modal","setAppElement","EvidenceViewer","prevEvidence","nextEvidence","timedEvidence","setStartEndTimes","rootPath","setBounds","collectionsFC","loadState","loadError","useParams","closeModal","debouncedHighlight","f","wait","immediate","timeout","args","later","callNow","detailEvidence","status","INIT","LOADING","ERROR","tickIntervalHours","timeFormat","ExportEvidenceItem","detailUrl","allTags","concat","ExportEvidenceTable","maybetwoColumnRow","EvidenceCopyableExport","ev","condition","content","ExportDiv","EvidenceExportView","tagFilters","keywords","toggles","borderTop","suspect","Array","from","getSouth","getNorth","getWest","getEast","includeUnlocated","includeUntimestamped","Box","props","btnGroupToggleMaxHeight","BoxHeader","Toggles","SectionHeader","h5","FilterPills","ActiveFilters","choices","tagFilterChoices","result","keys","filterKey","sectionFilters","sectionChoices","element","KeywordSearch","Form","Control","placeholder","e","Section","children","TagFilterChoiceBox","categoryId","choicesFilter","setChoicesFilter","selectedIds","toggleSelection","newSelected","Set","has","delete","add","ButtonGroup","toggle","vertical","choice","ToggleButton","checked","classnames","hidden","toLowerCase","includes","borderRight","FilterBox","onKeywordsChanged","onTagFilterChanged","onToggleChanged","showSuspectFilters","suspectTagChoicesFilter","setSuspectTagChoicesFilter","otherTagChoicesFilter","setOtherTagChoicesFilter","removeOneFromSection","Switch","evt","params","filterEvidence","rawKeywords","filteredEvidence","timelineFilteredEvidence","allSuspects","allOtherTags","addTagFilterChoiceItem","tagFilterChoiceMap","s","mediaItemId","some","itemField","keyword","toLocaleLowerCase","indexOf","doesEvidenceMatchKeywords","matchSuspects","tag","matchTags","matchTimeline","itemStart","itemEnd","rangeStart","rangeEnd","isItemInTimeRange","matchBounds","contains","isEvidenceInBounds","UrlConstructor","PageContentWrapper","isArray","EvidenceApp","other_tags","QUERY_TRUE","booleanFromQueryParam","param","defaultValue","parsedStartEndTimes","start_end_times","newTimes","prevState","exportView","setExportView","newValue","queryKey","nextKeywords","toggleName","setToggles","showSuspectFilter","hideExplorerLink","MobileOverlay","open","setOpen","background","preventDefault","margin","FixedLayout","StaticEvidencePage","LOADED","keywordFilterFromTextInput","includeKeywords","excludeKeywords","kw","cleanedKw","parsed","isKeywordFilterMatch","inputStringGroup","keywordFilter","cleanedInputGroup","every","isYesNoFilterMatch","MediaUrlMatcher","getIdsFromUrl","window","nodeUrl","urlOrNull","opts","message","logErrors","console","error","endsWith","urlHasDomain","ArchiveOrgUrlMatcher","getMetadata","metadata","originalFilesMetadata","files","mp4s","mkvs","warn","startTimeParam","get","startTime","canonicalUrl","mediaType","fetch","json","FilterControlsDiv","ResultsSummaryDiv","ItemsContainerDiv","ItemDiv","maybeLink","ItemAttr","displayIf","ArchiveLink","arch","archiveOrgIdentifier","archiveUrl","formatDate","notArchivedInfo","sourceUnavailableReason","sourceUnavailableAt","dateStr","Item","annotationLinkPath","archive","archives","sourceUrl","sourceTitle","sourceAttribution","sourceAttributionUrl","sourceDuration","md5","additionalKeywords","annotationCount","csvHeader","LinkForCsvDownload","items","initiated","setInitiated","itemsForCsv","archivedAt","archiveWidth","archiveHeight","archiveMd5","additionalTerms","itemAsCsvRow","headers","matchesFilters","filters","matchesMediaType","isArchived","matchesIsArchived","itemFields","field","itemMatchesKeywordFilter","FilterControls","setFilters","setWaitingForDebounce","keywordInputVal","setKeywordInputVal","debouncedKeywordInputVal","isWaitingDebounce","flex","htmlFor","FilteredItems","waitingForDebounce","itemsForDisplay","itemCount","itemSize","itemHeight","MediaItemsOverview","ready","justifyContent","Spinner","animation","pathToEvidenceFromItem","StaticMediaItemsPage","setLoadState","setLoadError","setData","then","response","body","enrichedItems","sourceCreatedAt","catch","log","ResourcesDiv","ResourcesColumn","ResourcesPage","StaticOtherResourcesPage","fbiLinksByFbiNumber","FBI_POI_LINKS","link","regexMatch","num","getFbiLinksByFbiNumber","CanonicalTags","declarations","lookupTable","warnings","dec","addToStore","mainTag","alternateTags","altTag","msg","cleanedKey","cleanLookupKey","currentValue","lookup","suspects","suspectData","arrestDate","flatMap","primaryHashtag","alternateHashtags","logWarningsToConsole","getCanonicalSuspectTags","SuspectCardDiv","SuspectThumbnailImg","img","OverviewContainerDiv","SuspectThumbnail","hashtag","lookupKey","lookupResult","POI_THUMBNAIL_DATA_CACHE","thumbnailFilename","thumbnailSrcUrl","twitterSearchUrl","SuspectCard","onDetailClick","fbiLink","fbiIdentifier","fbiNumberMatch","caption","fbiUrl","getFbiLink","data-title","applyFilters","hasBeenChargedFilter","chargingDocUrl","suspectMatchesChargedFilter","hasBeenCharged","fbiFilter","suspectMatchesFbiFilter","hasFbiIdentifier","realName","suspectMatchesKeywordFilter","countMessage","filteredCount","totalCount","updateFilters","SuspectOverview","filteredSuspects","isPartialRender","setIsPartialRender","MemoizedSuspectOverview","queryStateFilterParams","charged","fbi","SuspectsGallery","setPrevSuspectFilters","updateQueryState","filtersFromQueryState","newFilters","queryStateUpdateFromNewFilters","sanitizedInput","maxWidth","marginBottom","SuspectProfileDiv","SuspectAttrDiv","SuspectAttr","galleryLinkTo","components","k","v","OtherTags","tagsByType","reduce","acc","tagType","ArrestedAttrs","dateFormatter","caseIdentifier","arrestState","OtherSuspectLink","SuspectProfile","marginLeft","isMpdSuspect","caseStatus","idStatus","actionsSummary","appearanceSummary","associates","SuspectDetailGallery","galleryItems","gItem","SuspectDetail","prevSuspectFilters","detailItemsInventory","suspectTag","SuspectsApp","useRouteMatch","setDetailItemsLoadState","setDetailItemsLoadError","setDetailItemsInventory","res","path","StaticSuspectsApp","Routes","exact","component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b3dc257b.chunk.js","sourcesContent":["/* eslint-disable import/prefer-default-export */\nexport const PATHS = {\n  evidence: '/e',\n  collections: '/c',\n  suspects: '/gallery',\n  suspectsTable: '/poi_table',\n  about: '/about',\n  resources: '/resources',\n  mediaItems: '/media-items',\n};\n","import { DateTime } from 'luxon';\n\nimport type { Location as LatLng } from '../types/Location';\n\nexport type TimeFormatterConfig = {\n  format: string; // e.g. 'h:mm a' see https://github.com/moment/luxon/blob/master/docs/formatting.md#table-of-tokens\n  zone: string; // e.g. 'America/New_York'\n};\n\nexport const localTimeFormatter = (\n  d: Date | number | string | undefined,\n  config: TimeFormatterConfig\n): string | undefined => {\n  const dateObj = typeof d === 'number' || typeof d === 'string' ? new Date(d) : d;\n  if (dateObj) {\n    return DateTime.fromJSDate(dateObj, { zone: config.zone }).toFormat(config.format);\n  } else {\n    return undefined;\n  }\n};\n\nexport const localTimeRangeFormatter = (\n  range: { start?: Date | number; end?: Date | number },\n  config: TimeFormatterConfig\n): string => {\n  const formattedRealTimeStart = localTimeFormatter(range.start, config) || '??:??';\n  const formattedRealTimeEnd = range.end ? localTimeFormatter(range.end, config) : undefined;\n  if (formattedRealTimeEnd && formattedRealTimeEnd !== formattedRealTimeStart) {\n    return `${formattedRealTimeStart} - ${formattedRealTimeEnd}`;\n  } else {\n    return formattedRealTimeStart;\n  }\n};\n\nexport const videoTimepointFormatter = (timeSec?: number): string | undefined => {\n  if (timeSec === undefined) {\n    return undefined;\n  }\n  // https://stackoverflow.com/a/1322771\n  // Note that this ignores decimals.\n  const hhmmss = new Date(timeSec * 1000).toISOString().substr(11, 8);\n  if (hhmmss.startsWith('00')) {\n    return hhmmss.slice(1);\n  } else {\n    return hhmmss;\n  }\n};\n\nexport const videoTimepointRangeFormatter = (\n  startSec?: number,\n  endSec?: number\n): string | undefined => {\n  if (startSec === undefined) {\n    return undefined;\n  }\n  const formattedStart = videoTimepointFormatter(startSec) || '??:??';\n  const formattedEnd = endSec ? videoTimepointFormatter(endSec) : undefined;\n  if (formattedEnd && formattedEnd !== formattedStart) {\n    return `${formattedStart} - ${formattedEnd}`;\n  } else {\n    return formattedStart;\n  }\n};\n\nexport const toNdecimals = (x: number, places: number): string => {\n  const pow10 = 10 ** places;\n  const roundedX = Math.round(x * pow10) / pow10;\n  const formatter = new Intl.NumberFormat('en-US', {\n    minimumFractionDigits: places,\n    maximumFractionDigits: places,\n  });\n  return formatter.format(roundedX);\n};\n\nconst LAT_LONG_DECIMAL_PLACES = 4;\n\nexport const latLngFormatter = (\n  latLng: LatLng | undefined,\n  decimalPlaces: number = LAT_LONG_DECIMAL_PLACES\n): string | undefined => {\n  if (latLng) {\n    const [latStr, lngStr] = [latLng.lat, latLng.lng].map((x) => toNdecimals(x, decimalPlaces));\n    return `${latStr}, ${lngStr}`;\n  } else {\n    return undefined;\n  }\n};\n","import { DateTime } from 'luxon';\n\nimport { localTimeFormatter } from '@jan6evidence/formatters';\n\nimport colombiaTags from './colombia-tags.json';\nimport jan6Tags from './jan6-tags.json';\nimport defaultSettings from './jan6_settings.json';\nimport usPoliceViolenceTags from './us_police_violence-tags.json';\n\ndeclare let Meteor: any;\nconst meteorSettings = typeof Meteor !== 'undefined' ? Meteor.settings : undefined;\n\nconst rawProjectConfig =\n  meteorSettings?.public?.projectConfig || defaultSettings?.public?.projectConfig;\n\n/// ///////////\n\nexport type LocalTimeInputConfig = {\n  inputType: 'date' | 'time';\n  defaultDate?: Date;\n  labelText: string;\n  showInputPrecision: boolean;\n  zone: string; // e.g. 'America/New_York'\n  formatLocalTime: (time: Date | null) => string;\n  dateTimeFromInputValue: (value: any) => DateTime;\n};\n\nconst makeFormatLocalTimeFn = ({ zone, format }: { zone: string; format: string }) => {\n  const fn = (time: Date | null): string =>\n    time ? localTimeFormatter(time, { zone, format })! : '';\n  return fn;\n};\n\nconst makeDateTimeFromTimeInputValueFn = ({\n  zone,\n  defaultDate,\n}: {\n  zone: string;\n  defaultDate: Date;\n}) => {\n  return (value: any): DateTime => {\n    const [hours, minutes, seconds] = value.split(':');\n    return DateTime.fromObject(\n      {\n        year: defaultDate!.getUTCFullYear(),\n        month: defaultDate!.getMonth() + 1,\n        day: defaultDate!.getUTCDate(),\n        hour: hours,\n        minute: minutes,\n        second: seconds || 0,\n      },\n      // @ts-ignore the upstream type signatures for DateTime.fromObject are wrong :(\n      { zone }\n    );\n  };\n};\n\nconst makeDateTimeFromDateInputValueFn = ({ zone }: { zone: string }) => {\n  return (value: any): DateTime => {\n    const [year, month, day] = value\n      .split('-')\n      .map((x: string | undefined) => x && parseInt(x, 10));\n    const dt = DateTime.fromObject(\n      {\n        year,\n        month,\n        day,\n        hour: 0,\n        minute: 0,\n        second: 0,\n      },\n      // @ts-ignore the upstream type signatures for DateTime.fromObject are wrong :(\n      { zone }\n    );\n    return dt;\n  };\n};\n\nconst localTimeInputZone = rawProjectConfig.localTimeInput.zone as string;\nconst defaultDate = rawProjectConfig.localTimeInput.defaultDate\n  ? new Date(rawProjectConfig.localTimeInput.defaultDate)\n  : undefined;\nconst format = rawProjectConfig.localTimeInput.inputType === 'date' ? 'yyyy-MM-dd' : 'HH:mm:ss';\n\nconst localTimeInputConfig = {\n  ...rawProjectConfig.localTimeInput,\n  formatLocalTime: makeFormatLocalTimeFn({ zone: localTimeInputZone, format }),\n  dateTimeFromInputValue:\n    rawProjectConfig.localTimeInput.inputType === 'date'\n      ? makeDateTimeFromDateInputValueFn({ zone: localTimeInputZone })\n      : makeDateTimeFromTimeInputValueFn({ zone: localTimeInputZone, defaultDate: defaultDate! }),\n};\n\n/// ///////////////\n\nexport type ProjectConfig = {\n  projectId: 'jan6' | 'colombia' | 'us_police_violence';\n  explorerTitle: string;\n  defaultMapViewport: {\n    latitude: number;\n    longitude: number;\n    zoom: number;\n  };\n  timeline: {\n    start: Date;\n    end: Date;\n    tickIntervalHours: number;\n  };\n  timeFormat: {\n    zone: string; // e.g. 'America/New_York'\n    format: string; // e.g. 'h:mm a' see https://github.com/moment/luxon/blob/master/docs/formatting.md#table-of-tokens\n  };\n  defaultAnnotatorUrl: string;\n  showSuspectFilter: boolean;\n  // for the video annotator\n  localTimeInput: LocalTimeInputConfig;\n};\n\nexport const PROJECT_CONFIG: ProjectConfig = {\n  ...rawProjectConfig,\n  timeline: {\n    ...rawProjectConfig.timeline,\n    start: new Date(rawProjectConfig.timeline.start),\n    end: new Date(rawProjectConfig.timeline.end),\n  },\n  localTimeInput: localTimeInputConfig,\n};\n\ntype TopicTagType = {\n  topicName: string;\n  topicType: string;\n};\n\nconst getTagList = (): Array<TopicTagType> => {\n  switch (PROJECT_CONFIG.projectId) {\n    case 'colombia':\n      return colombiaTags;\n    case 'us_police_violence':\n      return usPoliceViolenceTags;\n    case 'jan6':\n      return jan6Tags;\n    default:\n      throw new Error(`Unexpected projectId=${PROJECT_CONFIG.projectId}`);\n  }\n};\n\nexport const tagList = getTagList();\n","/* CONSTANTS */\nconst colors = {\n  tableLines: '#999',\n  titleBg: '#99ddbb',\n  headerBg: '#bbffcc',\n  link: '#374',\n  linkHover: '#051',\n  activeFilter: '#f0f099',\n  activeFilterHover: '#ff0',\n  /* tag colors */\n  person: '#bbe',\n  group: '#ffe069',\n  behavior: '#fcb',\n  equipment: '#d0dd99',\n};\n\nconst shadows = {\n  lg: '0px 1px 12px rgba(0, 0, 0, 0.3)',\n  sm: '1px 1px 2px rgba(0, 0, 0, 0.2)',\n};\n\nconst padding = {\n  xs: 3,\n  sm: 6,\n  md: 12,\n  lg: 24,\n  xl: 48,\n  xxl: 72,\n};\n\nconst heights = {\n  navbar: 55,\n};\n\nconst widths = {\n  filterbox: 240,\n};\n\nexport { colors, shadows, padding, heights, widths };\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Follow } from 'react-twitter-widgets';\n\nimport styled from 'styled-components';\n\nimport { PATHS } from '@jan6evidence/routes';\n\nimport { ProjectConfig } from '@jan6evidence/settings';\n\nimport { colors, widths, padding } from './shared/constants';\n\nexport const PageHeaderDiv = styled.div`\n  padding: ${padding.sm}px ${padding.lg}px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n\n  background: ${colors.titleBg};\n\n  .sitename {\n    margin: 0;\n    display: inline-block;\n    font-size: 1.8rem;\n    margin-right: ${padding.xl}px;\n    position: relative;\n    white-space: nowrap;\n\n    a {\n      color: #000;\n    }\n\n    a: hover {\n      text-decoration: none;\n    }\n  }\n\n  .sitename .beta {\n    position: absolute;\n    top: 0rem;\n    right: -1rem;\n    background: #003399;\n    color: #ffffff;\n    font-size: 0.6rem;\n    font-weight: bold;\n    padding: 0px 3px;\n    transform: rotate(10deg);\n  }\n`;\n\nconst NavList = styled.ul`\n  margin: 0px;\n  padding: 0px;\n  white-space: nowrap;\n\n  li {\n    display: inline-block;\n    margin-right: ${padding.lg}px;\n    margin-bottom: 0px;\n  }\n\n  a {\n    color: ${colors.linkHover};\n  }\n`;\n\nconst UpdateDiv = styled.div`\n  display: inline-block;\n  margin-left: auto;\n  font-size: 0.8rem;\n  text-align: center;\n  white-space: nowrap;\n  color: ${colors.linkHover};\n`;\n\nconst mostRecentUpdateStr = () => {\n  return 'FIXME ';\n};\n\nconst navLinkOrText = ({ to, text, isLink }: { to: string; text: string; isLink: boolean }) => {\n  if (isLink) {\n    return (\n      <li>\n        <Link to={to}>{text}</Link>\n      </li>\n    );\n  } else {\n    return <li>{text}</li>;\n  }\n};\n\nconst Jan6NavList = () => (\n  <NavList>\n    {navLinkOrText({ to: PATHS.evidence, text: 'Explorer', isLink: true })}\n    {navLinkOrText({ to: PATHS.suspects, text: 'Persons of Interest', isLink: true })}\n    {navLinkOrText({ to: PATHS.mediaItems, text: 'Media', isLink: true })}\n    {navLinkOrText({ to: PATHS.about, text: 'About', isLink: true })}\n    {navLinkOrText({ to: PATHS.resources, text: 'Resources', isLink: true })}\n  </NavList>\n);\n\nconst Jan6Updates = () => (\n  <UpdateDiv>\n    {/*\n    // uncomment when mostRecentUpdateStr is working\n   (\n    <span>\n      Updated {mostRecentUpdateStr()} <br />\n    </span>\n   )\n  */}\n    <span>\n      For updates and feedback: <br />\n    </span>\n    <a\n      href=\"https://twitter.com/jan6evidence\"\n      className=\"twitter-follow-button\"\n      data-show-count=\"false\"\n    >\n      Follow @jan6evidence\n    </a>\n    <script async src=\"https://platform.twitter.com/widgets.js\" charSet=\"utf-8\" />\n  </UpdateDiv>\n);\n\nexport const PageHeaderAndNav = ({ projectConfig }: { projectConfig: ProjectConfig }) => {\n  return (\n    <PageHeaderDiv>\n      <div className=\"sitename\">\n        {projectConfig.projectId === 'jan6' ? <div className=\"beta\">VERY BETA</div> : null}\n        <Link to=\"/\">{projectConfig.explorerTitle}</Link>\n      </div>\n      {projectConfig.projectId === 'jan6' ? <Jan6NavList /> : null}\n      {projectConfig.projectId === 'jan6' ? <Jan6Updates /> : null}\n    </PageHeaderDiv>\n  );\n};\n\nexport default PageHeaderAndNav;\n","import styled from 'styled-components';\n\nimport { colors, widths, padding } from './shared/constants';\n\nexport const AppWrapper = styled.div`\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n\n  h1 {\n    padding: 6px;\n    margin: 0;\n    background: ${colors.titleBg};\n  }\n`;\n\nexport const TableWrapper = styled.div`\n  position: relative;\n  flex: 1 1 auto;\n  background: #fcfcfc;\n\n  overflow: scroll;\n`;\n\nconst TableStyle = styled.table`\n  border-spacing: 0;\n  border-collapse: collapse;\n\n  th,\n  td {\n    margin: 0;\n    padding: 0 6px;\n  }\n\n  tbody tr {\n    border-bottom: 1px solid ${colors.tableLines};\n    &:hover {\n      background: #f9f9f9;\n    }\n  }\n\n  a {\n    color: ${colors.link};\n    &:hover {\n      color: ${colors.linkHover};\n    }\n  }\n`;\n\nexport const ScrollableTable = styled(TableStyle)`\n  width: 100%;\n`;\n\nexport const HeadFloater = styled(TableStyle)`\n  position: absolute;\n  top: 0;\n`;\n\nexport const TableHead = styled.thead`\n  background: white;\n`;\n\nexport const StickyTH = styled.th`\n  background: ${colors.headerBg};\n  position: sticky;\n  z-index: 10;\n\n  .parent-category {\n    border-bottom: 1px solid #051;\n  }\n`;\n\nexport const EvidenceResultsWrapper = styled.div`\n  flex: 1 1 auto;\n\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n`;\n\nexport const EvidenceTableWrapper = styled.div`\n  flex: 1 1 auto;\n\n  border-top: 1px solid ${colors.tableLines};\n  display: flex;\n`;\n\nexport const EvidenceCount = styled.div`\n  padding: ${padding.sm}px;\n`;\n\nexport const ButtonLink = styled.button`\n  border: 0;\n  background: transparent;\n  margin: 0;\n  padding: 0;\n  font-size: inherit;\n  line-height: inherit;\n  color: ${colors.link};\n  text-decoration: underline;\n\n  &:hover {\n    color: ${colors.linkHover};\n  }\n`;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Tweet } from 'react-twitter-widgets';\n\nimport styled from 'styled-components';\n\nimport { PATHS } from '@jan6evidence/routes';\n\nimport { PROJECT_CONFIG } from '@jan6evidence/settings';\n\nimport { PageHeaderAndNav } from './PageHeaderAndNav';\n\nimport Container from './shared/Container';\nimport { AppWrapper } from './table-styled-components';\n\nconst Error404Div = styled.div`\n  width: 800px;\n  padding: 30px;\n  margin-left: auto;\n  margin-right: auto;\n\n  /* Fixes a safari-specific issue where the header gets squashed on longer pages\n     See https://github.com/jan6evidence/static-website/pull/177 */\n  min-height: -webkit-fill-available;\n\n  * + h2 {\n    margin-top: 2rem;\n  }\n`;\n\nfunction Error404Page({ location }: { location: any }) {\n  return (\n    <AppWrapper>\n      <PageHeaderAndNav projectConfig={PROJECT_CONFIG} />\n      <Error404Div>\n        <h2>404: Not found</h2>\n        <p>{location.pathname}</p>\n      </Error404Div>\n    </AppWrapper>\n  );\n}\n\nexport default Error404Page;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport styled from 'styled-components';\n\nimport { PATHS } from '@jan6evidence/routes';\n\nconst AboutDiv = styled.div`\n  max-width: 800px;\n  padding: 30px;\n  margin-left: auto;\n  margin-right: auto;\n\n  /* Fixes a safari-specific issue where the header gets squashed on longer pages\n     See https://github.com/jan6evidence/static-website/pull/177 */\n  min-height: -webkit-fill-available;\n\n  * + h2 {\n    margin-top: 2rem;\n  }\n`;\n\nfunction AboutPage() {\n  return (\n    <AboutDiv>\n      <h2>About</h2>\n      <p>\n        Since the January 6 attack on the Capitol, hundreds of volunteers have scrutinized photos\n        and video of the event. They have reviewed thousands of hours of footage, created timelines,\n        identified and tracked persons of interest, synchronized videos, and provided analysis.\n      </p>\n      <p>\n        This site is an effort to help organize and visualize this crowdsourced information.\n        Contributors include data scientists, academic researchers, software engineers, and many\n        others. All are motivated by a desire to understand what happened on January 6 and why. Most\n        wish to remain anonymous.\n      </p>\n      <p>\n        If you find this site helpful in your own work, please credit &ldquo;crowdsourced\n        investigations shared on <a href=\"/\">Jan6evidence.com</a>.&rdquo;\n      </p>\n\n      <h2>Evidence</h2>\n      <p>\n        The evidence available in the <Link to={PATHS.evidence}>explorer</Link> currently comes from\n        two sources:{' '}\n        <a href=\"https://docs.google.com/spreadsheets/d/1x5h4BasakKqXdtLGrf-bZqVCZ_JEPPWvjKMzmhp5n4w\">\n          this google sheet\n        </a>{' '}\n        assembled by volunteers, and the{' '}\n        <a href=\"https://projects.propublica.org/parler-capitol-videos/\">\n          ProPublica-hosted Parler videos\n        </a>{' '}\n        . We also use the{' '}\n        <a href=\"https://docs.google.com/spreadsheets/d/18NzncPJ-5oaYrDfq_VnjaSTLyY_vKaoSTgc6lznl9GU\">\n          Capitol Suspects Database\n        </a>{' '}\n        to identify persons of interest, and gathered latitude/longitudes and timing metadata for\n        Parler videos from <a href=\"https://jan6attack.com/videos.htm\">Jan6Attack.com</a> and\n        <a href=\"https://gist.github.com/kylemcdonald/8fdabd6526924012c1f5afe538d7dc09\">\n          @kcimc&apos;s dataset\n        </a>\n        .\n      </p>\n      <p>\n        This site is in beta, and the current set is just a small fraction of the crowdsourced data\n        assembled online. Volunteers are continuously updating the data available in the explorer,\n        and we&rsquo;ll streamline the process in the future. Here&rsquo;s how you can help:\n      </p>\n      <ul>\n        <li>\n          <a href=\"https://docs.google.com/document/d/1A7bK0p2k0pV_WOut8x69I6xGyZ3Qw9t4GWxnsGNCAfQ/edit\">\n            Sign up to review videos and log evidence\n          </a>\n          .\n        </li>\n        <li>\n          You can also use those same{' '}\n          <a href=\"https://docs.google.com/document/d/1A7bK0p2k0pV_WOut8x69I6xGyZ3Qw9t4GWxnsGNCAfQ/edit\">\n            instructions\n          </a>{' '}\n          to send us evidence logs from other videos as well.\n        </li>\n        <li>\n          When looking at a piece of evidence on this site, you&rsquo;ll see an{' '}\n          <b>Update Evidence</b> button. Use it to suggest a specific update.\n        </li>\n      </ul>\n      <p>\n        The evidence dataset is available for{' '}\n        <a href=\"/data/evidence.json\" download=\"evidence.json\">\n          download in JSON format\n        </a>\n        . Please note that the schema of this file may change at any time. We recommend downloading\n        a copy for yourself rather than automating retrieval from this site in a manner that assumes\n        a specific data structure.\n      </p>\n      <h2>Thanks</h2>\n      <p>This site builds on the work of many others. It would not be possible without...</p>\n      <ul>\n        <li>\n          <a href=\"https://twitter.com/donk_enby\">@donk_enby</a>, who provided the{' '}\n          <a href=\"https://twitter.com/donk_enby/status/1360064918742007809\">\n            largest source of evidence\n          </a>{' '}\n          from the attack.\n        </li>\n        <li>\n          The dedicated teams building the{' '}\n          <a href=\"https://docs.google.com/spreadsheets/d/18NzncPJ-5oaYrDfq_VnjaSTLyY_vKaoSTgc6lznl9GU/edit#gid=0\">\n            Capitol Suspects Database\n          </a>{' '}\n          and <a href=\"https://jan6attack.com/\">Jan6Attack.com</a>.\n        </li>\n        <li>\n          <i>More coming soon&hellip;</i>\n        </li>\n      </ul>\n      <h2>Contact</h2>\n      <ul>\n        <li>\n          Twitter: <a href=\"https://twitter.com/jan6evidence\">@jan6evidence</a>\n        </li>\n        <li>\n          Email: <a href=\"mailto:jan6evidence@gmail.com\">jan6evidence@gmail.com</a>\n        </li>\n      </ul>\n    </AboutDiv>\n  );\n}\n\nexport default AboutPage;\n","import React from 'react';\n\nimport { PROJECT_CONFIG } from '@jan6evidence/settings';\n\nimport AboutPage from './AboutPage';\nimport { PageHeaderAndNav } from './PageHeaderAndNav';\nimport { AppWrapper } from './table-styled-components';\n\nfunction StaticAboutPage() {\n  return (\n    <AppWrapper>\n      <PageHeaderAndNav projectConfig={PROJECT_CONFIG} />\n      <AboutPage />\n    </AppWrapper>\n  );\n}\n\nexport default StaticAboutPage;\n","enum LoadState {\n  INIT = 'init',\n  LOADING = 'loading',\n  LOADED = 'loaded',\n  ERROR = 'error',\n}\n\nexport default LoadState;\n","import chroma from 'chroma-js';\n\nimport type { Evidence, Location, Suspect } from '@jan6evidence/types';\n\n// Dates are serailized as strings, so we need to manually deserialize\n// Would be nice to move this deserializaiton to ../data/index.ts but we tried\n// and ran into compile errors, so we're doing it here for now.\nconst toDate = (str: string | undefined): Date | undefined => {\n  if (!str) {\n    return undefined;\n  }\n  try {\n    return new Date(str);\n  } catch {\n    return undefined;\n  }\n};\n\nconst HASH_BUCKETS = 65521;\nconst A_SMALL_PRIME = 257;\nclass BadButFastRng {\n  private accum: number;\n\n  constructor(seed: string) {\n    let accum = 1;\n    for (let i = 0; i < seed.length; i++) {\n      accum = (accum * A_SMALL_PRIME + seed.charCodeAt(i)) % HASH_BUCKETS;\n    }\n    this.accum = accum;\n  }\n\n  randFloatBetween(min: number, max: number): number {\n    this.accum = (this.accum * A_SMALL_PRIME) % HASH_BUCKETS;\n    return min + ((max - min) * this.accum) / HASH_BUCKETS;\n  }\n}\n\nconst JITTER = { lat: 0.00003, lng: 0.00003 };\n\nconst toLatLng = (location: Location, jitterSeed: string): [number, number] => {\n  // jitterSeed with the evidence ID so that it's consistent from one render to another\n  const r = new BadButFastRng(jitterSeed);\n  return [\n    location.lat + r.randFloatBetween(-JITTER.lat, JITTER.lat),\n    location.lng + r.randFloatBetween(-JITTER.lng, JITTER.lng),\n  ];\n};\n\nconst toTimelinePercent = (\n  time: Date | undefined,\n  timelineDomainStart: number,\n  timelineDomainEnd: number\n): number | undefined => {\n  if (!time) {\n    return undefined;\n  }\n  return Math.max(\n    0,\n    Math.min(1, (time.getTime() - timelineDomainStart) / (timelineDomainEnd - timelineDomainStart))\n  );\n};\n\n// 8am 10am 12pm 2pm 4pm 6pm\n\nconst colors = chroma.scale(['#f30', '#ff0', '#099', '#09f']).padding([-0.8, 0]).colors(40);\n\nconst makeColor = (timelineStartPercent: number | undefined): string => {\n  if (timelineStartPercent === undefined) {\n    return '#ccc';\n  }\n  const colorIndex = Math.floor(timelineStartPercent * colors.length);\n  const clampedColorIndex = Math.min(Math.max(colorIndex, 0), colors.length - 1);\n  return colors[clampedColorIndex];\n};\n\n// eslint-disable-next-line import/prefer-default-export\nexport { makeColor, toLatLng, toTimelinePercent };\n","import evidenceData from '@jan6evidence/data/evidence-snapshot.json';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { makeColor, toLatLng, toTimelinePercent } from './data-helpers';\n\n// Dates are serailized as strings, so we need to manually deserialize\n// Would be nice to move this deserializaiton to ../data/index.ts but we tried\n// and ran into compile errors, so we're doing it here for now.\nconst toDate = (str: string | undefined): Date | undefined => {\n  if (!str) {\n    return undefined;\n  }\n  try {\n    return new Date(str);\n  } catch {\n    return undefined;\n  }\n};\n\nconst getStaticEvidence = (timelineDomainStart: number, timelineDomainEnd: number): Evidence[] =>\n  evidenceData.map(\n    (item: any): Evidence => {\n      const { itemId, versionedId, ...otherFields } = item;\n      const realTimeStart = toDate(item.realTimeStart);\n      const realTimeEnd = toDate(item.realTimeEnd);\n      const timelineStartPercent = toTimelinePercent(\n        realTimeStart,\n        timelineDomainStart,\n        timelineDomainEnd\n      );\n      return {\n        ...otherFields,\n        _id: itemId,\n        realTimeStart,\n        realTimeEnd,\n        // TODO: move this to the data generation step?\n        latLng: item.location ? toLatLng(item.location, itemId) : undefined,\n        timelineStartPercent,\n        color: makeColor(timelineStartPercent),\n      } as Evidence;\n    }\n  );\n\n// eslint-disable-next-line import/prefer-default-export\nexport { getStaticEvidence };\n","import React from 'react';\n\nimport { latLngFormatter } from '@jan6evidence/formatters';\nimport { Location as LatLng } from '@jan6evidence/types';\n\nexport const LocationLink = ({ latLng, name }: { latLng?: LatLng; name?: string }) => {\n  if (latLng) {\n    const googleMapUrl = `https://maps.google.com/?q=${latLng.lat},${latLng.lng}`;\n    return (\n      <span className=\"location\">\n        <a href={googleMapUrl} target=\"_blank\" rel=\"noreferrer\">\n          {name || latLngFormatter(latLng)}\n        </a>\n      </span>\n    );\n  } else {\n    return <span className=\"location\">?</span>;\n  }\n};\n\nexport default LocationLink;\n","import { css } from 'styled-components';\n\nimport { padding, widths, colors, shadows } from './constants';\n\nexport const TextButton = css`\n  border: 0;\n  background: none;\n\n  &:hover {\n    background: rgba(0, 0, 0, 0.2);\n  }\n  &:active {\n    background: rgba(0, 0, 0, 0.4);\n    color: white;\n  }\n`;\n\nexport const LeftBox = css`\n  flex: 0 0 ${widths.filterbox}px;\n  width: ${widths.filterbox}px;\n  min-height: 100%;\n  max-height: 100%;\n\n  // box-shadow: ${shadows.lg};\n  background-color: #ddd;\n  border-right: 1px solid ${colors.tableLines};\n\n  display: flex;\n  flex-direction: column;\n`;\n","import styled from 'styled-components';\n\nimport { padding, shadows } from './constants';\nimport { TextButton } from './mixins';\n\nexport const Pill = styled.span`\n  position: relative;\n  border-radius: ${padding.sm}px;\n  background: #b0adaa;\n  display: inline-block;\n  padding: 1px 4px 1px 4px;\n  margin: 0 3px 3px 0;\n  font-size: 12px;\n\n  box-shadow: ${shadows.sm};\n\n  max-width: 100px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  &.has-delete {\n    padding-right: 16px;\n  }\n`;\n\nexport const PillXButton = styled.button`\n  ${TextButton}\n  height: 100%;\n  padding-right: 4px;\n  position: absolute;\n  top: 0;\n  right: 0;\n`;\n","import React from 'react';\n\nimport { Pill, PillXButton } from './shared-styled-components';\n\ntype Props = {\n  id: string;\n  label: string;\n  className?: string;\n  color?: string;\n  title?: string;\n  onDelete?: () => void;\n};\n\nconst Tag = ({ id, title, className, color, label, onDelete }: Props) => (\n  <Pill\n    key={`tag-${title}-${id}`}\n    style={color ? { backgroundColor: color } : {}}\n    className={`${className}${onDelete ? ' has-delete' : ''}`}\n    title={title || label}\n  >\n    {label}\n    {onDelete && (\n      <PillXButton title=\"Delete\" type=\"button\" onClick={onDelete}>\n        &times;\n      </PillXButton>\n    )}\n  </Pill>\n);\n\nexport default Tag;\n","import styled from 'styled-components';\n\nimport { colors, shadows, padding } from '../shared/constants';\n\nconst BORDER_RADIUS = padding.md;\nconst MODAL_SPACING = 40;\nconst HEADER_HEIGHT = 64;\n\nexport const ModalWrapper = styled.section`\n  position: absolute;\n  transform: translate(0, 0); // hack to make the prev/next buttons appear properly\n  top: ${MODAL_SPACING}px;\n  left: ${MODAL_SPACING}px;\n  right: ${MODAL_SPACING}px;\n  bottom: ${MODAL_SPACING}px;\n  background: white;\n  border-radius: ${BORDER_RADIUS}px;\n  border: 2px solid ${colors.titleBg};\n  box-shadow: ${shadows.lg};\n\n  display: flex;\n  flex-direction: column;\n\n  a {\n    color: ${colors.link};\n\n    &:hover {\n      color: ${colors.linkHover};\n    }\n  }\n`;\n\nexport const Header = styled.header`\n  flex: 0 0 auto;\n  background: ${colors.headerBg};\n  position: relative;\n  border-radius: ${BORDER_RADIUS}px ${BORDER_RADIUS}px 0 0;\n  padding: ${padding.md}px;\n  height: ${HEADER_HEIGHT}px;\n\n  h2 {\n    margin: 0;\n    padding: 0;\n  }\n`;\n\nexport const Buttons = styled.nav`\n  position: absolute;\n  top: 0;\n  right: 0;\n\n  display: flex;\n  align-items: center;\n  height: ${HEADER_HEIGHT}px;\n\n  button {\n    &.close-button {\n      background: 0;\n      border: 0;\n      font-size: 32px;\n      line-height: 32px;\n      color: #555;\n      display: flex;\n      align-items: baseline;\n\n      font-size: 36px;\n      line-height: 36px;\n      padding: ${padding.md}px ${padding.lg}px;\n\n      &:not(:disabled) {\n        color: ${colors.link};\n      }\n\n      &:hover:not(:disabled) {\n        color: ${colors.linkHover};\n\n        background: rgba(255, 255, 255, 0.3);\n      }\n    }\n  }\n`;\n\nexport const Content = styled.main`\n  flex: 1 1 auto;\n  padding: ${padding.md}px;\n  overflow-y: auto;\n  overflow-x: hidden;\n\n  .media {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    background: #333;\n    margin: ${-padding.md}px ${-padding.md}px 0 ${-padding.md}px;\n\n    a {\n      color: ${colors.headerBg};\n\n      &:hover {\n        color: ${colors.titleBg};\n      }\n    }\n\n    img {\n      max-height: calc(100vh - ${MODAL_SPACING * 2 + HEADER_HEIGHT * 3}px);\n    }\n    video {\n      max-height: calc(100vh - ${MODAL_SPACING * 2 + HEADER_HEIGHT * 5}px);\n    }\n\n    span {\n      display: block;\n      width: 100%;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      padding: 0 ${padding.md}px;\n      text-align: center;\n    }\n  }\n\n  .media + .media {\n    margin-top: 0px;\n  }\n\n  table {\n    border-collapse: collapse;\n    border-spacing: 0;\n    max-width: 708px;\n    margin: 0 auto;\n\n    th {\n      vertical-align: top;\n    }\n\n    td {\n      padding: 0 0 0 ${padding.md}px;\n    }\n\n    th,\n    td {\n      padding-top: ${padding.md}px;\n    }\n  }\n`;\n\nconst buttonBorderWidth = '3px';\n\nexport const Nav = styled.div`\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n\n  display: flex;\n  justify-content: space-between;\n\n  button {\n    height: 72px;\n    width: 60px;\n    font-size: 72px;\n    line-height: 72px;\n    padding-left: 7px;\n    background-color: ${colors.headerBg};\n    color: ${colors.link};\n    cursor: pointer;\n\n    border-top-right-radius: ${BORDER_RADIUS}px;\n    border-bottom-left-radius: ${BORDER_RADIUS}px;\n    border: 0;\n    border: ${buttonBorderWidth} solid ${colors.titleBg};\n    margin-bottom: -${buttonBorderWidth};\n    margin-left: -${buttonBorderWidth};\n\n    &:hover {\n      color: ${colors.linkHover};\n      border-color: ${colors.link};\n    }\n    &:active {\n      background-color: ${colors.titleBg};\n    }\n\n    &:disabled,\n    &:disabled:hover,\n    &:disabled:active {\n      cursor: auto;\n      background-color: #ddd;\n      color: #888;\n      border-color: #aaa;\n    }\n  }\n\n  button + button {\n    margin-left: 0;\n    margin-right: -${buttonBorderWidth};\n    padding-right: 4px;\n    border-radius: 0;\n    border-top-left-radius: ${BORDER_RADIUS}px;\n    border-bottom-right-radius: ${BORDER_RADIUS}px;\n  }\n`;\n","import { url } from 'inspector';\n\nimport { latLngFormatter, videoTimepointFormatter } from '@jan6evidence/formatters';\nimport { Evidence } from '@jan6evidence/types';\n\ntype FormData = {};\n\nconst formatTags = (tags: Array<string> | undefined): string | undefined => {\n  if (tags && tags.length > 0) {\n    return tags.join(', ');\n  } else {\n    return undefined;\n  }\n};\n\nconst evidenceUpdateFormUrl = (evidence: Evidence): string => {\n  const formUrl = new URL(\n    'https://docs.google.com/forms/d/e/1FAIpQLScCg7u21sUuCbO6lBKdTqxoSH4j2NiLGrWi5cliwCRra8O5UQ/viewform'\n  );\n  const formFields = {\n    usp: 'pp_url', // some standard google thing\n    'entry.1011702585': 'Modify an entry',\n    'entry.1623428240': evidence._id,\n    'entry.789172520': evidence.imageUrl,\n    'entry.523480783': evidence.videoUrl,\n    'entry.1776265168': videoTimepointFormatter(evidence.videoStartTimepoint),\n    'entry.1043855916': videoTimepointFormatter(evidence.videoEndTimepoint),\n    'entry.1394213472': evidence.locationName?.replace(/\\n {2}/, ' '),\n    'entry.807096470': latLngFormatter(evidence.location),\n    'entry.1510850464': formatTags(evidence.suspectTags),\n    'entry.161204806': formatTags(evidence.otherTags),\n    'entry.1939650052': evidence.summary,\n    // Date and time not working yet\n    //   'entry.325605150': evidence.realTimeStart?.toLocaleDateString()\n    //   'entry.325605150': timeFormatter(evidence.realTimeStart, 'HH:mm'),\n    'entry.129842460': evidence.rationale,\n  };\n  Object.entries(formFields).forEach(([key, value]) => {\n    if (value && value.trim() !== '') {\n      formUrl.searchParams.append(key, value);\n    }\n  });\n  return formUrl.href;\n};\n\nexport default evidenceUpdateFormUrl;\n","import React from 'react';\nimport { Tweet } from 'react-twitter-widgets';\n\nimport { Evidence, VideoDetailsArchiveOrg } from '@jan6evidence/types';\n\nconst safeMakeUrl = (urlAsString: string | undefined): URL | undefined => {\n  try {\n    return new URL(urlAsString || '');\n  } catch {\n    return undefined;\n  }\n};\n\nconst tweetIdFromUrl = (urlAsString: string | undefined): string | undefined => {\n  const url = new URL(urlAsString || '');\n  if (!url.hostname.match(/twitter\\.com$/)) {\n    return undefined;\n  }\n  const matchResult = url.pathname.match(/status\\/(\\d+)/);\n  return (matchResult && matchResult[1]) || undefined;\n};\n\nconst youtubeIframe = (evidence: Evidence, ytVideoId: string) => {\n  const url = new URL(`https://www.youtube.com/embed/${ytVideoId}`);\n  if (evidence.videoStartTimepoint) {\n    url.searchParams.append('start', evidence.videoStartTimepoint.toString());\n  }\n  return (\n    <iframe\n      key={evidence.videoUrl}\n      title=\"embedded evidence video from youtube\"\n      width=\"560\"\n      height=\"315\"\n      src={url.href}\n      frameBorder=\"0\"\n      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n      allowFullScreen\n    />\n  );\n};\n\nconst archiveOrgVideoIframe = (evidence: Evidence) => {\n  const videoDetails = evidence.videoDetails as VideoDetailsArchiveOrg;\n  const url = new URL(\n    `https://archive.org/embed/${videoDetails.identifier}/${videoDetails.filename}`\n  );\n  if (evidence.videoStartTimepoint) {\n    url.searchParams.append('start', evidence.videoStartTimepoint.toString());\n  }\n  return (\n    <iframe\n      key={evidence.videoUrl}\n      title=\"embedded evidence video from archive.org\"\n      src={url.href}\n      width=\"640\"\n      height=\"480\"\n      frameBorder=\"0\"\n      allowFullScreen\n    />\n  );\n};\n\nconst bareMp4VideoTag = (evidence: Evidence) => {\n  const url = safeMakeUrl(evidence.videoUrl);\n  if (!url) {\n    return null;\n  }\n  if (evidence.videoStartTimepoint && (url.hash || '').trim() === '') {\n    url.hash = `t=${evidence.videoStartTimepoint}`;\n  }\n  return (\n    <video controls key={evidence.videoUrl}>\n      <source src={url.href} />\n    </video>\n  );\n};\n\nconst vimeoIframe = (evidence: Evidence, vimeoId: string) => {\n  const url = new URL(`https://player.vimeo.com/video/${vimeoId}`);\n  if (evidence.videoStartTimepoint) {\n    url.hash = `t=${evidence.videoStartTimepoint}s`;\n  }\n  return (\n    <iframe\n      key={evidence.videoUrl}\n      title=\"embedded evidence video from vimeo.com\"\n      src={url.href}\n      width=\"640\"\n      height=\"480\"\n      frameBorder=\"0\"\n      allowFullScreen\n    />\n  );\n};\n\nconst facebookIframe = (evidence: Evidence, profileId: string, videoId: string) => {\n  const videoUrl = new URL(`https://facebook.com/${profileId}/videos/${videoId}`);\n  // start time doesn't seem to be respected...\n  if (evidence.videoStartTimepoint) {\n    videoUrl.searchParams.append('t', `${evidence.videoStartTimepoint}s`);\n  }\n  const embedUrl = new URL('https://www.facebook.com/plugins/video.php');\n  embedUrl.searchParams.append('href', videoUrl.href);\n  embedUrl.searchParams.append('show_text', 'false');\n  return (\n    <iframe\n      key={evidence.videoUrl}\n      title=\"embedded evidence video from facebook.com\"\n      src={embedUrl.href}\n      width=\"476\"\n      height=\"476\"\n      style={{ border: 'none', overflow: 'hidden' }}\n      scrolling=\"no\"\n      frameBorder=\"0\"\n      allow=\"autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share\"\n      allowFullScreen\n    />\n  );\n};\n\nconst megaVideoIframe = (evidence: Evidence, megaVideoId: string) => {\n  let urlString = `https://mega.nz/embed/${megaVideoId}`;\n  if (evidence.videoStartTimepoint) {\n    urlString += `!${evidence.videoStartTimepoint}s`;\n  }\n  return (\n    <iframe\n      key={evidence.videoUrl}\n      title=\"embedded evidence video from mega.nz\"\n      width=\"560\"\n      height=\"315\"\n      src={urlString}\n      frameBorder=\"0\"\n      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n      allowFullScreen\n    />\n  );\n};\n\nconst googleDriveIframe = (_evidence: Evidence, driveFileId: string) => {\n  const urlString = `https://drive.google.com/file/d/${driveFileId}/preview`;\n  // adding t=${startTimeInSeconds} seems to start the video in the right place\n  // but results in the video not playing correctly, so skip for now\n  return (\n    <iframe\n      title=\"embedded evidence video from google drive\"\n      src={urlString}\n      width=\"640\"\n      height=\"480\"\n      frameBorder=\"0\"\n      allowFullScreen\n    />\n  );\n};\n\nconst rumbleIframe = (_evidence: Evidence, embedId: string) => {\n  const urlString = `https://rumble.com/embed/${embedId}`;\n  return (\n    <iframe\n      title=\"embedded evidence video from rumble\"\n      src={urlString}\n      width=\"640\"\n      height=\"360\"\n      frameBorder=\"0\"\n      allowFullScreen\n    />\n  );\n};\n\nconst instagramIframe = (_evidence: Evidence, videoId: string) => {\n  const urlString = `https://www.instagram.com/tv/${videoId}/embed`;\n  return (\n    <iframe\n      title=\"embedded evidence video from rumble\"\n      src={urlString}\n      width=\"400\"\n      height=\"480\"\n      frameBorder=\"0\"\n      scrolling=\"no\"\n      // width=\"640\"\n      // height=\"360\"\n      // frameBorder=\"0\"\n      // allowFullScreen\n    />\n  );\n};\n\nconst embedTweet = (tweetId: string) => {\n  return <Tweet tweetId={tweetId} options={{ conversation: 'none' }} />;\n};\n\nexport const embedVideo = (evidence: Evidence) => {\n  if (!evidence.videoDetails) {\n    return null;\n  }\n\n  switch (evidence.videoDetails.type) {\n    case 'youtube':\n      return youtubeIframe(evidence, evidence.videoDetails.videoId);\n    case 'archiveOrg':\n      return archiveOrgVideoIframe(evidence);\n    case 'tweet':\n      return embedTweet(evidence.videoDetails.tweetId);\n    case 'megavideo':\n      return megaVideoIframe(evidence, evidence.videoDetails.videoId);\n    case 'vimeo':\n      return vimeoIframe(evidence, evidence.videoDetails.videoId);\n    case 'facebook':\n      return facebookIframe(\n        evidence,\n        evidence.videoDetails.profileId,\n        evidence.videoDetails.videoId\n      );\n    case 'googleDrive':\n      return googleDriveIframe(evidence, evidence.videoDetails.driveFileId);\n    case 'rumble':\n      return rumbleIframe(evidence, evidence.videoDetails.embedId || '');\n    case 'directLink':\n      return bareMp4VideoTag(evidence);\n    case 'instagram':\n      return instagramIframe(evidence, evidence.videoDetails.videoId);\n    default:\n      return null;\n  }\n};\n\nconst pacificPressIdFromUrl = (urlAsString: string | undefined): string | undefined => {\n  const url = new URL(urlAsString || '');\n  if (!url.hostname.match(/(^|\\.)pacificpressagency\\.com$/)) {\n    return undefined;\n  }\n  const matchResult = url.pathname.match(/preview\\/(\\d+)/);\n  return (matchResult && matchResult[1]) || undefined;\n};\n\nconst embedPacificPressImage = (ppId: string) => {\n  return (\n    <img\n      src={`https://www.pacificpressagency.com/assetpreview/get/${ppId}`}\n      alt=\"embedded evidence from Pacific Press Agency\"\n    />\n  );\n};\n\nexport const embedImage = (evidence: Evidence) => {\n  if (!evidence.imageUrl) {\n    return null;\n  }\n\n  const tweetId = tweetIdFromUrl(evidence.imageUrl);\n  if (tweetId) {\n    return embedTweet(tweetId);\n  }\n\n  const pacificPressId = pacificPressIdFromUrl(evidence.imageUrl);\n  if (pacificPressId) {\n    return embedPacificPressImage(pacificPressId);\n  }\n\n  return (\n    <img\n      src={evidence.imageUrl}\n      alt={evidence.summary || evidence.locationName || 'Evidence Image'}\n    />\n  );\n};\n","import React from 'react';\nimport Button from 'react-bootstrap/Button';\nimport ReactMarkdown from 'react-markdown';\nimport Modal from 'react-modal';\nimport { useHistory, useLocation } from 'react-router-dom';\n\nimport {\n  localTimeRangeFormatter,\n  TimeFormatterConfig,\n  videoTimepointRangeFormatter,\n} from '@jan6evidence/formatters';\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { LocationLink } from '../shared/LocationLink';\nimport Tag from '../shared/Tag';\nimport { colors } from '../shared/constants';\n\nimport { ModalWrapper, Header, Content, Buttons, Nav } from './detail-styled-components';\nimport evidenceUpdateFormUrl from './evidenceFormUrl';\nimport { embedImage, embedVideo } from './media-embeds';\n\ntype Props = {\n  detailId?: string;\n  evidence: Evidence;\n  onClose: () => void;\n  prevPath: string;\n  nextPath: string;\n  collectionsFC?: (props: { id?: string; location?: string }) => React.ReactNode;\n  timeFormatterConfig: TimeFormatterConfig;\n};\n\nconst videoTimepointRow = (evidence: Evidence) => {\n  if (!evidence.videoUrl) {\n    return undefined;\n  }\n  const formattedRange = videoTimepointRangeFormatter(\n    evidence.videoStartTimepoint,\n    evidence.videoEndTimepoint\n  );\n  if (formattedRange) {\n    return (\n      <tr>\n        <th scope=\"row\">Video timepoint</th>\n        <td>{formattedRange}</td>\n      </tr>\n    );\n  } else {\n    return undefined;\n  }\n};\n\nexport default function EvidenceDetail({\n  detailId,\n  evidence,\n  onClose,\n  prevPath,\n  nextPath,\n  // collectionsFC,\n  timeFormatterConfig,\n}: Props) {\n  const history = useHistory();\n  const location = useLocation();\n  const handleOnClick = React.useCallback(\n    (pathname: string) => {\n      if (pathname) {\n        history.push({ pathname, search: location.search });\n      }\n    },\n    [history, location]\n  );\n\n  return (\n    <Modal\n      isOpen={!!detailId}\n      onRequestClose={onClose}\n      contentLabel=\"Evidence Details\"\n      style={{ overlay: { zIndex: 1000 } }}\n      className=\"evidence-detail-modal\"\n      shouldCloseOnOverlayClick\n    >\n      {evidence ? (\n        <ModalWrapper>\n          <Header>\n            <h2>Evidence Detail</h2>\n            {/* // Hide collections for now\n              <Buttons>\n              {collectionsFC && collectionsFC({ id: evidence._id })}\n              <button title=\"Close\" type=\"button\" className=\"close-button\" onClick={onClose}>\n                &times;\n              </button>\n            </Buttons> */}\n          </Header>\n          <Content>\n            {evidence.imageUrl && (\n              <div className=\"media\">\n                <a href={evidence.imageUrl}>\n                  {embedImage(evidence)}\n                  <span>{evidence.imageUrl}</span>\n                </a>\n              </div>\n            )}\n            {evidence.videoUrl && (\n              <div className=\"media\">\n                {embedVideo(evidence)}\n                <a href={evidence.videoUrl} target=\"_blank\" rel=\"noreferrer\">\n                  {evidence.videoUrl}\n                </a>\n              </div>\n            )}\n            <table>\n              <tbody>\n                <tr>\n                  <th scope=\"row\"> </th>\n                  <td>\n                    <Button\n                      href={evidenceUpdateFormUrl(evidence)}\n                      target=\"_blank\"\n                      size=\"sm\"\n                      variant=\"outline-success\"\n                    >\n                      Update Evidence\n                    </Button>\n                  </td>\n                </tr>\n                <tr>\n                  <th scope=\"row\">Summary</th>\n                  <td>\n                    <ReactMarkdown>{evidence.summary || ''}</ReactMarkdown>\n                  </td>\n                </tr>\n                <tr>\n                  <th scope=\"row\">Tags</th>\n                  <td>\n                    {evidence.suspectTags &&\n                      evidence.suspectTags.map((label) => (\n                        <Tag\n                          key={`${evidence._id}-person-${label}`}\n                          id={`${evidence._id}-person-${label}`}\n                          label={label}\n                          color={colors.person}\n                          title={label}\n                        />\n                      ))}\n                    {evidence.otherTags &&\n                      evidence.otherTags.map((label) => (\n                        <Tag\n                          key={`${evidence._id}-other-${label}`}\n                          id={`${evidence._id}-other-${label}`}\n                          label={label}\n                          title={label}\n                        />\n                      ))}\n                  </td>\n                </tr>\n                <tr>\n                  <th scope=\"row\">Time</th>\n                  <td>\n                    {localTimeRangeFormatter(\n                      {\n                        start: evidence.realTimeStart,\n                        end: evidence.realTimeEnd,\n                      },\n                      timeFormatterConfig\n                    )}\n                  </td>\n                </tr>\n                {videoTimepointRow(evidence)}\n                <tr>\n                  <th scope=\"row\">Location</th>\n                  <td>\n                    <LocationLink latLng={evidence.location} name={evidence.locationName} />\n                  </td>\n                </tr>\n                <tr>\n                  <th scope=\"row\">Rationale</th>\n                  <td>\n                    <ReactMarkdown>{evidence.rationale || ''}</ReactMarkdown>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n            <Nav>\n              <button\n                type=\"button\"\n                disabled={!prevPath}\n                title=\"Previous\"\n                onClick={() => handleOnClick(prevPath)}\n              >\n                &laquo;\n              </button>\n              <button\n                type=\"button\"\n                disabled={!nextPath}\n                title=\"Next\"\n                onClick={() => handleOnClick(nextPath)}\n              >\n                &raquo;\n              </button>\n            </Nav>\n          </Content>\n        </ModalWrapper>\n      ) : (\n        <ModalWrapper>\n          <Header>\n            <h2>Evidence &apos;{detailId}&apos; not found</h2>\n            <Buttons>\n              <button title=\"Close\" type=\"button\" className=\"close-button\" onClick={onClose}>\n                &times;\n              </button>\n            </Buttons>\n          </Header>\n        </ModalWrapper>\n      )}\n    </Modal>\n  );\n}\n","import qs from 'query-string';\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\n\nexport function usePageTitle(title: string) {\n  React.useEffect(() => {\n    const previousTitle = document.title;\n    document.title = title;\n    return () => {\n      document.title = previousTitle;\n    };\n  }, [title]);\n}\n\nexport function useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nexport const useDebouncedValue = (delay: number, value: any) => {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n};\n\nexport const useDebouncedValueWithWaitingIndicator = <T>(delay: number, value: T): [T, boolean] => {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  const [isWaiting, setIsWaiting] = useState<boolean>(false);\n\n  useEffect(() => {\n    setIsWaiting(true);\n    const timer = setTimeout(() => {\n      setDebouncedValue(value);\n      setIsWaiting(false);\n    }, delay);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [value, delay]);\n\n  return [debouncedValue, isWaiting];\n};\n\nexport type QueryState = Record<string, string | string[] | null | undefined>;\ntype QueryStateUpdater = (prevState: QueryState) => QueryState;\nexport const useQueryState = (\n  debounce: boolean = true,\n  replaceState: boolean = false\n): [QueryState, (updater: QueryStateUpdater) => void] => {\n  const history = useHistory();\n  const location = useLocation();\n\n  const query: QueryState = qs.parse(location.search);\n  const [queryState, setQueryState] = useState<QueryState>(query);\n\n  const debouncedQueryState = debounce ? useDebouncedValue(300, queryState) : queryState;\n  useEffect(() => {\n    if (replaceState) {\n      history.replace({ search: qs.stringify(debouncedQueryState) });\n    } else {\n      history.push({ search: qs.stringify(debouncedQueryState) });\n    }\n  }, [debouncedQueryState, replaceState]);\n\n  useEffect(() => {\n    const incomingQuery = location.search.replace(/^\\?/, '');\n    const expectedQuery = qs.stringify(debouncedQueryState);\n    // Detect external query string changes and update our state accordingly\n    if (incomingQuery !== expectedQuery) {\n      const nextQuery: QueryState = qs.parse(location.search);\n      setQueryState(nextQuery);\n    }\n  }, [location]);\n\n  const update = (updater: QueryStateUpdater) => {\n    const nextState = updater(queryState);\n    setQueryState(nextState);\n  };\n\n  return [queryState, update];\n};\n","import styled from 'styled-components';\n\nimport { padding, colors } from '../shared/constants';\n\nexport const MapWrapper = styled.div`\n  flex: 0 0 auto;\n  background-color: #ded;\n  border: 1px solid #9a9;\n  height: 300px;\n  width: 100%;\n  position: relative;\n\n  .pointer-events-none {\n    pointer-events: none;\n  }\n`;\n\nexport const MapSpinner = styled.div`\n  background: rgba(255, 255, 255, 0.8);\n  color: #000;\n  position: absolute;\n  top: 5px;\n  left: 5px;\n  padding: 5px 10px;\n  font-size: 0.9em;\n`;\n\nexport const MapControls = styled.div`\n  background: rgba(255, 255, 255, 0.8);\n  color: #000;\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  padding: 10px;\n  font-size: 0.9em;\n`;\n\nconst EVIDENCE_COLORS = {\n  photo: '#6699ff',\n  video: '#cc2266',\n  clip: 'orange',\n};\n\nexport const TimelineWrapper = styled.div`\n  flex: 0 0 auto;\n  height: 120px;\n  padding: ${padding.sm}px ${padding.lg}px;\n\n  overflow-x: hidden;\n\n  background: #111;\n  color: white;\n\n  &:hover .handle {\n    fill: #f0f0f0;\n  }\n\n  .selected-time {\n    margin-left: -${padding.sm}px;\n    margin-bottom: ${padding.sm}px;\n  }\n\n  .tick {\n    background-color: white;\n  }\n`;\n\nexport const HandleShape = styled.svg`\n  fill: #ddd;\n\n  &.disabled {\n    fill: #999;\n  }\n`;\n\nexport const TableWrapper = styled.div`\n  flex: 1;\n\n  .active {\n    box-shadow: inset 0 0 0 6px #ff0;\n  }\n\n  .table-row {\n    border-bottom: 1px solid ${colors.tableLines};\n\n    &.highlighted {\n      background-color: ${colors.activeFilter};\n    }\n  }\n\n  img {\n    min-height: 120px;\n    width: 100%;\n    background: #f0f0f0;\n  }\n\n  .thumbnail-wrapper {\n    position: relative;\n    font-size: 13px;\n    color: white;\n\n    img {\n      min-height: 120px;\n      width: 100%;\n      background: #333;\n      border: 3px solid black;\n\n      &.video {\n        border-color: ${EVIDENCE_COLORS.video};\n      }\n      &.clip {\n        border-color: ${EVIDENCE_COLORS.clip};\n      }\n      &.photo {\n        border-color: ${EVIDENCE_COLORS.photo};\n      }\n    }\n\n    .triangle {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      margin: auto;\n      background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDQ4IDQ4IiBmaWxsPSIjZmZmIj48cGF0aCBkPSJNMjQgNEMxMi45NSA0IDQgMTIuOTUgNCAyNHM4Ljk1IDIwIDIwIDIwIDIwLTguOTUgMjAtMjBTMzUuMDUgNCAyNCA0em0tNCAyOVYxNWwxMiA5LTEyIDl6Ii8+PC9zdmc+);\n      color: #fff;\n      background-size: 48px 48px;\n      height: 48px;\n      width: 48px;\n      opacity: 0.8;\n    }\n\n    .duration {\n      position: absolute;\n      bottom: 6px;\n      right: 6px;\n      opacity: 0.8;\n    }\n\n    .type {\n      position: absolute;\n      top: 6px;\n      left: 6px;\n      opacity: 0.8;\n    }\n  }\n\n  .tags-wrapper {\n    display: flex;\n    align-items: flex-start;\n    flex-wrap: wrap;\n    font-size: 13px;\n  }\n\n  .summary,\n  .time,\n  .location {\n    height: 100px;\n    white-space: normal;\n  }\n`;\n\nexport const NoResults = styled.div`\n  text-align: center;\n  padding: ${padding.lg}px;\n`;\n","/* eslint-disable import/no-unresolved */\n\nimport type { FeatureCollection, Point } from 'geojson';\nimport { LngLatBounds, LngLat } from 'mapbox-gl';\nimport * as React from 'react';\n\nimport InteractiveMap, { Source, Layer, Marker, MapRef } from 'react-map-gl';\nimport type { LayerProps, MapEvent } from 'react-map-gl';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport { PATHS } from '@jan6evidence/routes';\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { useQueryState, useDebouncedValue } from '../shared/hooks';\n\nimport { MapWrapper, MapSpinner, MapControls } from './evidence-results-styled-components';\n\nconst evidenceLayerStyle: LayerProps = {\n  id: 'evidence',\n  type: 'circle',\n  paint: {\n    'circle-radius': 5,\n    'circle-color': ['get', 'color'],\n    'circle-stroke-width': 2,\n    'circle-stroke-color': '#000',\n    'circle-stroke-opacity': 0.3,\n  },\n};\nconst evidenceHoverLayerStyle: LayerProps = {\n  id: 'evidence-hover',\n  source: 'evidence',\n  type: 'circle',\n  paint: {\n    'circle-radius': 5,\n    'circle-color': '#fff',\n    'circle-stroke-width': 2,\n    'circle-stroke-color': '#000',\n    'circle-stroke-opacity': 0.4,\n  },\n};\n\nconst Tooltip = styled.div`\n  background-color: #fff;\n  padding: 4px 8px;\n  border-radius: 3px;\n  box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.4);\n  width: 180px;\n  overflow: hidden;\n  line-height: 1.4;\n  font-size: 12px;\n  margin-top: -5px;\n  margin-left: 10px;\n`;\n\ntype EvidenceWithLatLng = Evidence & { latLng: [number, number] };\n\n// https://visgl.github.io/react-map-gl/docs/api-reference/interactive-map#onviewportchange\nexport type MapViewport = {\n  latitude: number;\n  longitude: number;\n  zoom: number;\n};\n\ntype Drawing = {\n  anchor: number[] | null;\n  corner: number[] | null;\n} | null;\n\ntype Props = {\n  evidence: Array<Evidence>;\n  highlight: string;\n  defaultMapViewport: MapViewport;\n  onHover: (id: string) => void;\n  onChangeBounds?: (bounds: LngLatBounds | null) => void;\n};\n\nconst EvidenceMapbox = ({\n  evidence,\n  highlight,\n  defaultMapViewport,\n  onHover,\n  onChangeBounds,\n}: Props) => {\n  const history = useHistory();\n  const location = useLocation();\n\n  const geojson: FeatureCollection<Point> = React.useMemo(() => {\n    // Only consider evidence with locations.\n    const locatedEvidence = evidence.filter((item): item is EvidenceWithLatLng => !!item.latLng);\n    // Sort by start time, so that the gray markers land at the bottom\n    // and the later-in-the-day markers are on top.\n    locatedEvidence.sort((a, b) => +(a.realTimeStart || 0) - +(b.realTimeStart || 0));\n    return {\n      type: 'FeatureCollection',\n      features: locatedEvidence.map((item) => {\n        const [lat, lng] = item.latLng;\n        const coordinates: [number, number] = [lng, lat];\n        return {\n          type: 'Feature',\n          geometry: {\n            type: 'Point',\n            coordinates,\n          },\n          properties: {\n            id: item._id,\n            color: item.color,\n          },\n        };\n      }),\n    };\n  }, [evidence]);\n\n  const [queryState, setQueryState] = useQueryState();\n\n  const parseFloatString = (value: string | string[] | null | undefined) =>\n    typeof value === 'string' ? parseFloat(value) : undefined;\n\n  const viewport: MapViewport = {\n    latitude: parseFloatString(queryState.latitude) ?? defaultMapViewport.latitude,\n    longitude: parseFloatString(queryState.longitude) ?? defaultMapViewport.longitude,\n    zoom: parseFloatString(queryState.zoom) ?? defaultMapViewport.zoom,\n  };\n\n  const setViewport = (nextViewport: MapViewport) => {\n    setQueryState((prevQueryState) => ({\n      ...prevQueryState,\n      latitude: nextViewport.latitude.toString(),\n      longitude: nextViewport.longitude.toString(),\n      zoom: nextViewport.zoom.toString(),\n    }));\n  };\n\n  // LngLatBounds expects an array of coordinate pairs, with the first coordinate pair referring to\n  // the southwestern corner of the box (the minimum longitude and latitude) and the second\n  // referring to the northeastern corner of the box (the maximum longitude and latitude).\n  const toLngLatBounds = (lngLat1: number[], lngLat2: number[]) => {\n    return new LngLatBounds(\n      [Math.min(lngLat1[0], lngLat2[0]), Math.min(lngLat1[1], lngLat2[1])],\n      [Math.max(lngLat1[0], lngLat2[0]), Math.max(lngLat1[1], lngLat2[1])]\n    );\n  };\n\n  const drawingToLngLatBounds = (drawing: Drawing): LngLatBounds | null => {\n    return drawing && drawing.anchor && drawing.corner\n      ? toLngLatBounds(drawing.anchor, drawing.corner)\n      : null;\n  };\n\n  const [drawing, setDrawing] = React.useState<Drawing>(null);\n  const area: LngLatBounds | null = queryState.area\n    ? LngLatBounds.convert(JSON.parse(queryState.area as string))\n    : drawingToLngLatBounds(drawing);\n\n  const [hoveredEvidence, setHoveredEvidence] = React.useState<Evidence | undefined>();\n  const onMapHover = React.useCallback(\n    (event) => {\n      if (drawing) return;\n      const feature = event.features && event.features[0];\n      const hoveredItem = evidence.find((item) => item._id === feature?.properties?.id);\n      onHover(hoveredItem?._id || '');\n      setHoveredEvidence(hoveredItem);\n    },\n    [evidence, drawing]\n  );\n  const onMapClick = React.useCallback(\n    (event) => {\n      if (drawing) return;\n      const feature = event.features && event.features[0];\n      const clickedItem = evidence.find((item) => item._id === feature?.properties?.id);\n      if (clickedItem) {\n        history.push({ pathname: `${PATHS.evidence}/${clickedItem._id}`, search: location.search });\n      }\n    },\n    [evidence, drawing]\n  );\n  const hoverLayerFilter = React.useMemo(() => {\n    const id = hoveredEvidence?._id || highlight || '_none_';\n    return ['==', id, ['get', 'id']];\n  }, [hoveredEvidence, highlight]);\n\n  const [loading, setLoading] = React.useState<boolean>(false);\n  const mapRef = React.useRef<MapRef>(null);\n  const map = mapRef.current?.getMap();\n  const bounds = map?.getBounds();\n  const serializedBounds = JSON.stringify(area && !drawing ? area.toArray() : bounds?.toArray()); // For useEffect dependency\n  const debouncedBounds = useDebouncedValue(300, serializedBounds);\n  React.useEffect(() => setLoading(true), [serializedBounds]);\n  React.useEffect(() => {\n    if (onChangeBounds && debouncedBounds) {\n      const deserializedBounds = LngLatBounds.convert(JSON.parse(debouncedBounds));\n      onChangeBounds(deserializedBounds);\n    }\n    return () => setLoading(false);\n  }, [debouncedBounds]);\n\n  const onMapMouseDown = (event: MapEvent) => {\n    if (drawing) {\n      setDrawing({ anchor: event.lngLat, corner: null });\n    }\n  };\n  const onMapMouseMove = (event: MapEvent) => {\n    if (drawing && drawing.anchor) {\n      setDrawing({ ...drawing, corner: event.lngLat });\n    }\n  };\n  const onMapMouseUp = () => {\n    if (drawing && drawing.anchor && drawing.corner) {\n      setQueryState((prevQueryState) => ({\n        ...prevQueryState,\n        area: JSON.stringify(area!.toArray()),\n      }));\n      setDrawing(null);\n      onChangeBounds!(area);\n    }\n  };\n  const onKeyDown = (event: KeyboardEvent) => {\n    if (event.key === 'Escape') {\n      setQueryState(({ area: _, ...restPrevQueryState }) => restPrevQueryState);\n      setDrawing(null);\n      onChangeBounds!(bounds);\n    } else if (event.key === 'Shift') {\n      setQueryState(({ area: _, ...restPrevQueryState }) => restPrevQueryState);\n      setDrawing({ anchor: null, corner: null });\n    }\n  };\n  const onKeyUp = (event: KeyboardEvent) => {\n    if (event.key === 'Shift') {\n      if (drawing && !drawing.anchor) {\n        setDrawing(null);\n      }\n    }\n  };\n  React.useEffect(() => {\n    document.addEventListener('keydown', onKeyDown);\n    document.addEventListener('keyup', onKeyUp);\n    return () => {\n      document.removeEventListener('keydown', onKeyDown);\n      document.removeEventListener('keyup', onKeyUp);\n    };\n  }, [onKeyDown, onKeyUp]);\n\n  return (\n    <MapWrapper>\n      <InteractiveMap\n        {...viewport}\n        width=\"100%\"\n        height=\"100%\"\n        onViewportChange={setViewport}\n        mapboxApiAccessToken=\"pk.eyJ1IjoibWlzdGFrZW5tdXN0YXJkIiwiYSI6ImNrbGVkbWtkdzFrOXEyenRrejVyb2Zzc20ifQ.LkFY7eWOE8ryEW_6Kj0f_Q\"\n        mapStyle=\"mapbox://styles/mapbox/satellite-v9\"\n        interactiveLayerIds={\n          evidenceLayerStyle.id && evidenceHoverLayerStyle.id\n            ? [evidenceLayerStyle.id, evidenceHoverLayerStyle.id]\n            : undefined\n        }\n        onHover={onMapHover}\n        onClick={onMapClick}\n        onMouseDown={onMapMouseDown}\n        onMouseMove={onMapMouseMove}\n        onMouseUp={onMapMouseUp}\n        ref={mapRef}\n        getCursor={() => (drawing ? 'crosshair' : 'grab')}\n        dragPan={!drawing}\n      >\n        <Source type=\"geojson\" data={geojson}>\n          <Layer {...evidenceLayerStyle} />\n          <Layer {...evidenceHoverLayerStyle} filter={hoverLayerFilter} />\n        </Source>\n        {hoveredEvidence && hoveredEvidence.latLng ? (\n          <Marker\n            latitude={hoveredEvidence.latLng[0]}\n            longitude={hoveredEvidence.latLng[1]}\n            className=\"pointer-events-none\"\n          >\n            {hoveredEvidence.summary ? <Tooltip>{hoveredEvidence.summary}</Tooltip> : null}\n          </Marker>\n        ) : null}\n        {area && (\n          <Source\n            id=\"box\"\n            type=\"geojson\"\n            data={{\n              type: 'Feature',\n              geometry: {\n                type: 'Polygon',\n                coordinates: [\n                  [\n                    area.getNorthWest().toArray(),\n                    area.getNorthEast().toArray(),\n                    area.getSouthEast().toArray(),\n                    area.getSouthWest().toArray(),\n                    area.getNorthWest().toArray(),\n                  ],\n                ],\n              },\n              properties: {},\n            }}\n          >\n            <Layer\n              id=\"box\"\n              source=\"box\"\n              type=\"fill\"\n              paint={{ 'fill-color': 'rgba(255, 255, 255, 0.8)', 'fill-opacity': 0.5 }}\n            />\n          </Source>\n        )}\n      </InteractiveMap>\n      {loading && <MapSpinner>Updating...</MapSpinner>}\n      <MapControls>\n        {drawing || !area ? (\n          <button\n            onClick={() => {\n              if (drawing) {\n                setDrawing(null);\n              } else {\n                setQueryState(({ area: _, ...restPrevQueryState }) => restPrevQueryState);\n                setDrawing({ anchor: null, corner: null });\n              }\n            }}\n            style={{ color: drawing ? '#007bff' : '' }}\n            type=\"button\"\n          >\n            Draw\n          </button>\n        ) : (\n          <button\n            onClick={() => {\n              setQueryState(({ area: _, ...restPrevQueryState }) => restPrevQueryState);\n              setDrawing(null);\n              onChangeBounds!(bounds);\n            }}\n            style={{ color: drawing ? '#007bff' : '' }}\n            type=\"button\"\n          >\n            Clear\n          </button>\n        )}\n      </MapControls>\n    </MapWrapper>\n  );\n};\n\nexport default EvidenceMapbox;\n","/* eslint-ignore import/no-extraneous-dependencies */\n\nimport { DateTime } from 'luxon';\nimport React from 'react';\nimport ReactMarkdown from 'react-markdown';\n\nimport { localTimeRangeFormatter, TimeFormatterConfig } from '@jan6evidence/formatters';\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { LocationLink } from '../shared/LocationLink';\nimport Tag from '../shared/Tag';\n\nimport { colors } from '../shared/constants';\n\ntype Props = {\n  data: Evidence;\n  isActive: boolean;\n  activate: () => void;\n};\n\nexport function ResultThumbnail({ cellData: data }: { cellData: Evidence }) {\n  const type = data.videoUrl ? 'video' : 'photo';\n  const formattedDuration =\n    data.videoStartTimepoint && data.videoEndTimepoint\n      ? data.videoEndTimepoint - data.videoStartTimepoint\n      : '?';\n\n  return (\n    <div className=\"thumbnail-wrapper\">\n      <img className={type} src={data.imageUrl || data.videoDetails?.thumbnailUrl} alt=\"\" />\n      <span className=\"type\">{type[0].toUpperCase() + type.slice(1)}</span>\n      {type === 'video' && (\n        <>\n          <span className=\"triangle\" />\n          <span className=\"duration\">{formattedDuration}</span>\n        </>\n      )}\n    </div>\n  );\n}\n\n// ReactMarkdown is slow enough that we want to memoize this table cell when possible.\nexport const ResultSummary = React.memo(({ cellData: data }: { cellData: Evidence }) => {\n  const summary = data.summary || '';\n\n  return (\n    <div className=\"summary\">\n      <ReactMarkdown>{summary}</ReactMarkdown>\n    </div>\n  );\n});\n\nexport function ResultTags({ cellData: data }: { cellData: Evidence }) {\n  return (\n    <div className=\"tags-wrapper\">\n      {data.suspectTags &&\n        data.suspectTags.map((label) => (\n          <Tag\n            key={`${data._id}-person-${label}`}\n            id={`${data._id}-person-${label}`}\n            label={label}\n            color={colors.person}\n            title={label}\n          />\n        ))}\n      {data.otherTags &&\n        data.otherTags.map((label) => (\n          <Tag\n            key={`${data._id}-other-${label}`}\n            id={`${data._id}-other-${label}`}\n            label={label}\n            title={label}\n          />\n        ))}\n    </div>\n  );\n}\n\nexport function ResultTime({\n  cellData: data,\n  timeFormatterConfig,\n}: {\n  cellData: Evidence;\n  timeFormatterConfig: TimeFormatterConfig;\n}) {\n  const timeStr = localTimeRangeFormatter(\n    { start: data.realTimeStart, end: data.realTimeEnd },\n    timeFormatterConfig\n  );\n\n  return <span className=\"time\">{timeStr}</span>;\n}\n\nexport function ResultLocation({ cellData: data }: { cellData: Evidence }) {\n  if (data.location) {\n    return <LocationLink latLng={data.location} name={data.locationName} />;\n  } else {\n    return <span className=\"location\">?</span>;\n  }\n}\n","import React, { ReactElement } from 'react';\nimport 'react-virtualized/styles.css';\n\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { Column, Table, AutoSizer } from 'react-virtualized';\n\nimport { TimeFormatterConfig } from '@jan6evidence/formatters';\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { ResultLocation, ResultSummary, ResultTags, ResultThumbnail, ResultTime } from './Result';\n\nimport { TableWrapper, NoResults } from './evidence-results-styled-components';\n\ntype Props = {\n  results: Evidence[];\n  highlight: string;\n  onHover: (id: string) => void;\n  getDetailPath: (id: string) => string;\n  timeFormatterConfig: TimeFormatterConfig;\n};\n\nfunction cellDataGetter({ rowData }: { rowData: any }): any {\n  // Be default, react-virtualized tries to pass the cell's render\n  // function just the data for that cell. To make our cell renderers\n  // simpler, we pass the full row of data (so we can easily have cells\n  // that show multiple fields of data)\n  return rowData;\n}\n\nfunction makeCellRenderer(\n  Component: React.ComponentType<{ cellData: Evidence }>\n): ({ cellData }: { cellData?: Evidence }) => ReactElement {\n  return function inner({ cellData }) {\n    if (!cellData) {\n      return <span />;\n    }\n\n    return <Component cellData={cellData} />;\n  };\n}\n\nconst ROW_HEIGHT = 150;\n\nconst EvidenceTable = ({\n  results,\n  highlight,\n  onHover,\n  getDetailPath,\n  timeFormatterConfig,\n}: Props) => {\n  const history = useHistory();\n  const location = useLocation();\n  const handleOnClick = React.useCallback(\n    ({ index }) => {\n      history.push({ pathname: getDetailPath(results[index]._id), search: location.search });\n    },\n    [history, location, results]\n  );\n\n  return (\n    <TableWrapper>\n      <AutoSizer>\n        {({ height, width }) => (\n          <Table\n            height={height}\n            width={width}\n            headerHeight={40}\n            rowHeight={ROW_HEIGHT}\n            rowCount={results.length}\n            rowGetter={({ index }) => results[index]}\n            rowClassName={({ index }) =>\n              `table-row ${results[index]?._id === highlight ? 'highlighted' : ''}`\n            }\n            onRowClick={handleOnClick}\n            onRowMouseOver={({ index }) => onHover(results[index]?._id)}\n            onRowMouseOut={() => onHover('')}\n            noRowsRenderer={() => <NoResults>No results found.</NoResults>}\n          >\n            <Column\n              label=\"Thumbnail\"\n              dataKey=\"thumbnail\"\n              cellDataGetter={cellDataGetter}\n              cellRenderer={makeCellRenderer(ResultThumbnail)}\n              width={180}\n            />\n            <Column\n              label=\"Summary\"\n              dataKey=\"summary\"\n              cellDataGetter={cellDataGetter}\n              cellRenderer={makeCellRenderer(ResultSummary)}\n              width={360}\n              flexGrow={1}\n            />\n            <Column\n              label=\"Tags\"\n              dataKey=\"tags\"\n              cellDataGetter={cellDataGetter}\n              cellRenderer={makeCellRenderer(ResultTags)}\n              width={100}\n            />\n            <Column\n              label=\"Time\"\n              dataKey=\"time\"\n              cellDataGetter={cellDataGetter}\n              cellRenderer={({ cellData }) => {\n                if (!cellData) {\n                  return <span />;\n                }\n                return <ResultTime cellData={cellData} timeFormatterConfig={timeFormatterConfig} />;\n              }}\n              width={80}\n            />\n            <Column\n              label=\"Location\"\n              dataKey=\"location\"\n              cellDataGetter={cellDataGetter}\n              cellRenderer={makeCellRenderer(ResultLocation)}\n              width={144}\n            />\n          </Table>\n        )}\n      </AutoSizer>\n    </TableWrapper>\n  );\n};\n\nexport default EvidenceTable;\n","import React from 'react';\n\nimport { HandleShape } from './evidence-results-styled-components';\n\nexport type Range = [number, number];\n\nexport interface RangePoint {\n  id: string;\n  value: number;\n  percent: number;\n}\n\nexport const RAIL_HEIGHT = 48;\n\n// *******************************************************\n// RAIL\n// *******************************************************\nconst railOuterStyle: React.CSSProperties = {\n  position: 'absolute',\n  width: '100%',\n  height: RAIL_HEIGHT,\n  cursor: 'pointer',\n};\n\nconst railInnerStyle: React.CSSProperties = {\n  position: 'absolute',\n  width: '100%',\n  height: RAIL_HEIGHT,\n  pointerEvents: 'none',\n  backgroundColor: '#555',\n};\n\ntype SliderRailProps = {\n  getRailProps: () => void;\n};\n\nexport function SliderRail({ getRailProps }: SliderRailProps) {\n  return (\n    <>\n      <div style={railOuterStyle} {...getRailProps()} />\n      <div style={railInnerStyle} />\n    </>\n  );\n}\n\n// *******************************************************\n// HANDLE COMPONENT\n// *******************************************************\ntype HandleProps = {\n  domain: Range;\n  handle: RangePoint;\n  getHandleProps: (id: string) => void;\n  disabled?: boolean;\n  isRight?: boolean;\n};\n\nexport function Handle({\n  domain: [min, max],\n  handle: { id, value, percent },\n  disabled,\n  isRight,\n  getHandleProps,\n}: HandleProps) {\n  return (\n    <>\n      <div\n        style={{\n          left: `${percent}%`,\n          position: 'absolute',\n          transform: 'translate(-50%, 0)',\n          WebkitTapHighlightColor: 'rgba(0,0,0,0)',\n          zIndex: 5,\n          width: 28,\n          height: 42,\n          cursor: 'move',\n          backgroundColor: 'none',\n        }}\n        {...getHandleProps(id)}\n      />\n      <div\n        role=\"slider\"\n        aria-label={`Handle at ${value}`}\n        aria-valuemin={min}\n        aria-valuemax={max}\n        aria-valuenow={value}\n        style={{\n          left: `${percent}%`,\n          position: 'absolute',\n          marginTop: -3,\n          transform: 'translate(-50%, -0)',\n          zIndex: 3,\n          width: 12,\n          height: RAIL_HEIGHT,\n        }}\n      >\n        <HandleShape\n          viewBox={`0 0 12 ${RAIL_HEIGHT + 6}`}\n          className={`handle ${id} ${disabled && 'disabled'}`}\n        >\n          {isRight ? (\n            <polygon\n              points={`0,0 12,0 12,${RAIL_HEIGHT + 6} 0,${\n                RAIL_HEIGHT + 6\n              } 0,${RAIL_HEIGHT} 6,${RAIL_HEIGHT} 6,6 0,6`}\n            />\n          ) : (\n            <polygon\n              points={`0,0 0,${RAIL_HEIGHT + 6} 12,${\n                RAIL_HEIGHT + 6\n              } 12,${RAIL_HEIGHT} 6,${RAIL_HEIGHT} 6,6 12,6 12,0`}\n            />\n          )}\n        </HandleShape>\n      </div>\n    </>\n  );\n}\n\n// *******************************************************\n// KEYBOARD HANDLE COMPONENT\n// Uses a button to allow keyboard events\n// *******************************************************\nexport function KeyboardHandle({\n  domain: [min, max],\n  handle: { id, value, percent },\n  disabled,\n  getHandleProps,\n}: HandleProps) {\n  return (\n    <button\n      type=\"button\"\n      role=\"slider\"\n      aria-valuemin={min}\n      aria-valuemax={max}\n      aria-valuenow={value}\n      style={{\n        left: `${percent}%`,\n        position: 'absolute',\n        transform: 'translate(-50%, 0)',\n        zIndex: 2,\n        width: 24,\n        height: RAIL_HEIGHT,\n        borderRadius: '50%',\n        boxShadow: '1px 1px 1px 1px rgba(0, 0, 0, 0.3)',\n        backgroundColor: disabled ? '#999' : '#ffc400',\n      }}\n      {...getHandleProps(id)}\n    />\n  );\n}\n\n// *******************************************************\n// TRACK COMPONENT\n// *******************************************************\ntype TrackProps = {\n  source: RangePoint;\n  target: RangePoint;\n  getTrackProps: () => void;\n  disabled?: boolean;\n};\n\nexport function Track({ source, target, getTrackProps, disabled }: TrackProps) {\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        height: RAIL_HEIGHT,\n        zIndex: 1,\n        backgroundColor: disabled ? '#555' : '#222',\n        borderRadius: 7,\n        left: `${source.percent}%`,\n        width: `${target.percent - source.percent}%`,\n      }}\n      {...getTrackProps()}\n    />\n  );\n}\n\n// *******************************************************\n// TICK COMPONENT\n// *******************************************************\ntype TickType = {\n  tick: RangePoint;\n  count: number;\n  formatterFn: (value: number | undefined) => string | undefined;\n};\n\nexport function Tick({ tick, formatterFn }: TickType) {\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        left: `${tick.percent}%`,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        transform: 'translate(-50%, 0px)',\n      }}\n    >\n      <div\n        className=\"tick\"\n        style={{\n          marginTop: RAIL_HEIGHT,\n          width: 1,\n          height: 6,\n        }}\n      />\n      <div\n        style={{\n          fontSize: 10,\n          whiteSpace: 'nowrap',\n          overflow: 'hidden',\n          textOverflow: 'ellipsis',\n        }}\n      >\n        {formatterFn(tick.value)}\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport { localTimeRangeFormatter, TimeFormatterConfig } from '@jan6evidence/formatters';\nimport { PATHS } from '@jan6evidence/routes';\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { HighlightContext } from '../../shared/contexts';\nimport { RAIL_HEIGHT } from '../TimelineHelpers';\n\nconst timelineTitle = (evidence: Evidence, timeFormatterConfig: TimeFormatterConfig) => {\n  return `[${localTimeRangeFormatter(\n    { start: evidence.realTimeStart, end: evidence.realTimeEnd },\n    timeFormatterConfig\n  )}] ${evidence.summary}`;\n};\n\nconst Stripe = React.memo(styled(Link)`\n  display: block;\n  position: absolute;\n\n  width: 2px;\n  height: ${RAIL_HEIGHT}px;\n\n  transform: translate(-50%, 0);\n  margin-top: 0;\n  z-index: 2;\n\n  cursor: pointer;\n\n  &:hover,\n  &.highlighted {\n    background-color: white !important;\n    z-index: 3;\n  }\n`);\n\ntype Props = {\n  evidence: Evidence;\n  highlighted: boolean;\n  setHighlight: (id: string) => void;\n  timeFormatterConfig: TimeFormatterConfig;\n};\n\nconst EvidenceStripe = ({ evidence, highlighted, setHighlight, timeFormatterConfig }: Props) => {\n  const location = useLocation();\n\n  return (\n    <Stripe\n      to={{ pathname: `${PATHS.evidence}/${evidence._id}`, search: location.search }}\n      title={highlighted ? timelineTitle(evidence, timeFormatterConfig) : ''}\n      style={{\n        left: `${(evidence.timelineStartPercent || 0) * 100}%`,\n        backgroundColor: evidence.color,\n      }}\n      className={highlighted ? 'highlighted' : ''}\n      onMouseOver={() => setHighlight(evidence._id)}\n      onMouseOut={() => setHighlight('')}\n    />\n  );\n};\n\nexport default React.memo(EvidenceStripe);\n","import React, { useCallback, useState } from 'react';\nimport { Slider, Rail, Handles, Tracks, Ticks } from 'react-compound-slider';\n\nimport {\n  localTimeFormatter,\n  localTimeRangeFormatter,\n  TimeFormatterConfig,\n} from '@jan6evidence/formatters';\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { Range, SliderRail, Handle, Track, Tick } from './TimelineHelpers';\nimport { TimelineWrapper } from './evidence-results-styled-components';\nimport EvidenceStripe from './timeline/EvidenceStripe';\n\nconst sliderStyle = {\n  position: 'relative',\n  width: '100%',\n};\n\n// Returns min if (val < min), max if (val > max), and val otherwise.\nfunction clamp(val: number, min: number, max: number): number {\n  return Math.min(Math.max(val, min), max);\n}\n\ntype EvidenceTimelineProps = {\n  highlight: string;\n  setHighlight: (id: string) => void;\n  startEndTimes?: [Date, Date] | null;\n  onChangeTimes?: (newTimes: [Date, Date] | null) => void; // if none, timeline is stripes only\n  evidence: Evidence[];\n  domainStart: number;\n  domainEnd: number;\n  tickIntervalMsec: number;\n  timeFormatterConfig: TimeFormatterConfig;\n};\n\nexport default function EvidenceTimeline({\n  highlight,\n  setHighlight,\n  startEndTimes,\n  onChangeTimes,\n  evidence,\n  domainStart,\n  domainEnd,\n  tickIntervalMsec,\n  timeFormatterConfig,\n}: EvidenceTimelineProps) {\n  // The parent component passes in the currently-selected time range. We also\n  // maintain this local state, which has the start/end values as you're dragging\n  // the sliders. Once the user releases the slider, we pass the new values up to\n  // the parent and discard this state.\n  const [draggingValues, setDraggingValues] = useState<[number, number] | null>(null);\n\n  const domain: Range = [domainStart, domainEnd];\n  let values: Range;\n  if (draggingValues) {\n    values = draggingValues;\n  } else if (startEndTimes) {\n    values = [startEndTimes[0].getTime(), startEndTimes[1].getTime()];\n  } else {\n    values = [domainStart, domainEnd];\n  }\n\n  const onChange = useCallback(\n    (newValues: readonly number[]) => {\n      if (onChangeTimes) {\n        if (newValues[0] === domainStart && newValues[1] === domainEnd) {\n          onChangeTimes(null);\n        } else {\n          onChangeTimes([new Date(newValues[0]), new Date(newValues[1])]);\n        }\n      }\n    },\n    [domainStart, domainEnd, onChangeTimes]\n  );\n\n  const tickValues = [];\n  let range = domainEnd - domainStart;\n  while (range >= 0) {\n    tickValues.push(range + domainStart);\n    range -= tickIntervalMsec;\n  }\n\n  const evidenceStripes = React.useMemo(() => {\n    return evidence.map((item) => (\n      <EvidenceStripe\n        key={item._id}\n        evidence={item}\n        highlighted={item._id === highlight}\n        setHighlight={setHighlight}\n        timeFormatterConfig={timeFormatterConfig}\n      />\n    ));\n  }, [evidence, highlight, setHighlight, timeFormatterConfig]);\n\n  return (\n    <TimelineWrapper>\n      <div className=\"selected-time\">\n        {localTimeRangeFormatter(\n          {\n            start: values[0],\n            end: values[1],\n          },\n          timeFormatterConfig\n        )}\n      </div>\n      <Slider\n        mode={1}\n        step={5}\n        domain={domain}\n        reversed={false}\n        rootStyle={sliderStyle}\n        onUpdate={(newValues) => setDraggingValues([newValues[0], newValues[1]])}\n        onChange={onChange}\n        values={values}\n      >\n        <Rail>{({ getRailProps }) => <SliderRail getRailProps={getRailProps} />}</Rail>\n        {onChangeTimes && (\n          <Handles>\n            {({ handles, getHandleProps }) => (\n              <div className=\"slider-handles\">\n                {handles.map((handle) => (\n                  <Handle\n                    key={handle.id}\n                    handle={handle}\n                    domain={domain}\n                    getHandleProps={getHandleProps}\n                    isRight={handle.value > values[0]}\n                  />\n                ))}\n              </div>\n            )}\n          </Handles>\n        )}\n        {evidenceStripes}\n        {onChangeTimes && (\n          <Tracks left={false} right={false}>\n            {({ tracks, getTrackProps }) => (\n              <div className=\"slider-tracks\">\n                {tracks.map(({ id, source, target }) => (\n                  <Track key={id} source={source} target={target} getTrackProps={getTrackProps} />\n                ))}\n              </div>\n            )}\n          </Tracks>\n        )}\n        <Ticks values={tickValues}>\n          {({ ticks }) => (\n            <div className=\"slider-ticks\">\n              {ticks.map((tick) => (\n                <Tick\n                  key={tick.id}\n                  tick={tick}\n                  count={ticks.length}\n                  formatterFn={(t) => localTimeFormatter(t, timeFormatterConfig)}\n                />\n              ))}\n            </div>\n          )}\n        </Ticks>\n      </Slider>\n      <div>\n        {localTimeRangeFormatter({ start: values[0], end: values[1] }, timeFormatterConfig)}\n      </div>\n    </TimelineWrapper>\n  );\n}\n","import type { LngLatBounds } from 'mapbox-gl';\nimport React, { useMemo } from 'react';\nimport Modal from 'react-modal';\nimport { useParams, useHistory, useLocation, useRouteMatch } from 'react-router-dom';\n\nimport { ProjectConfig } from '@jan6evidence/settings';\nimport { Evidence } from '@jan6evidence/types';\n\nimport LoadState from '../../types/LoadState';\nimport EvidenceDetail from '../EvidenceDetail';\nimport { HighlightContext } from '../shared/contexts';\nimport { debounce } from '../shared/util';\nimport {\n  EvidenceResultsWrapper,\n  EvidenceTableWrapper,\n  EvidenceCount,\n} from '../table-styled-components';\n\nimport EvidenceMapbox, { MapViewport } from './EvidenceMapbox';\nimport EvidenceTable from './EvidenceTable';\nimport EvidenceTimeline from './EvidenceTimeline';\n\nModal.setAppElement('#root');\n\nexport { EvidenceTable, EvidenceTimeline, EvidenceMapbox };\n\ntype StartEndTimes = [Date, Date] | null;\n\ntype Props = {\n  evidence: Evidence[];\n  timedEvidence: Evidence[];\n  projectConfig: ProjectConfig;\n  startEndTimes?: StartEndTimes;\n  setStartEndTimes?: (se: StartEndTimes) => void;\n  hideExplorerLink?: boolean;\n  rootPath: string;\n  getDetailPath: (id: string) => string;\n  setBounds?: (bounds: LngLatBounds | null) => void;\n  setExportView: (show: boolean) => void;\n  collectionsFC?: (props: { id?: string; location?: string }) => React.ReactNode;\n  loadState: LoadState;\n  loadError?: string;\n};\n\nconst EvidenceViewer = ({\n  evidence,\n  timedEvidence,\n  projectConfig,\n  startEndTimes,\n  setStartEndTimes,\n  rootPath,\n  getDetailPath,\n  // setExportView,\n  setBounds,\n  collectionsFC,\n  loadState,\n  loadError,\n}: Props) => {\n  const [highlight, setHighlight] = React.useState<string>('');\n  const { detailId } = useParams<{ detailId?: string }>();\n  const history = useHistory();\n  const location = useLocation();\n\n  const closeModal = React.useCallback(() => {\n    history.push({ pathname: rootPath, search: location.search });\n  }, [history, location]);\n\n  const debouncedHighlight = React.useCallback(debounce(setHighlight, 16), []);\n\n  let prevEvidence: Evidence | undefined;\n  let nextEvidence: Evidence | undefined;\n  const detailEvidence = detailId\n    ? evidence.find((r, i) => {\n        if (r._id === detailId) {\n          prevEvidence = evidence[i - 1];\n          nextEvidence = evidence[i + 1];\n          return true;\n        }\n        return false;\n      })!\n    : { _id: '' };\n\n  const status = useMemo(() => {\n    if (loadState === LoadState.INIT || loadState === LoadState.LOADING) {\n      return 'loading...';\n    }\n    if (loadState === LoadState.ERROR) {\n      return loadError || 'Error loading data';\n    }\n    // LoadState.LOADED\n    return `${evidence.length} bit${evidence.length === 1 ? '' : 's'} of evidence`;\n  }, [loadState, loadError, evidence.length]);\n\n  return (\n    <EvidenceResultsWrapper>\n      <EvidenceMapbox\n        evidence={evidence}\n        onHover={debouncedHighlight}\n        highlight={highlight}\n        onChangeBounds={setBounds}\n        defaultMapViewport={projectConfig.defaultMapViewport}\n      />\n      <EvidenceTimeline\n        highlight={highlight}\n        setHighlight={debouncedHighlight}\n        startEndTimes={startEndTimes}\n        onChangeTimes={setStartEndTimes}\n        // We re-filter here, ignoring time time filter, so that we still show\n        // evidence on the timeline that isn't in the selected time range\n        evidence={timedEvidence}\n        tickIntervalMsec={projectConfig.timeline.tickIntervalHours * 60 * 60 * 1000}\n        domainStart={projectConfig.timeline.start.getTime()}\n        domainEnd={projectConfig.timeline.end.getTime()}\n        timeFormatterConfig={projectConfig.timeFormat}\n      />\n      <EvidenceCount>\n        {status}\n        {/*\n        <a\n          href=\"export\"\n          onClick={(e) => {\n            e.preventDefault();\n            setExportView(true);\n          }}\n        >\n          Export\n        </a>\n        */}\n      </EvidenceCount>\n      <EvidenceTableWrapper>\n        <EvidenceTable\n          results={evidence}\n          highlight={highlight}\n          onHover={debouncedHighlight}\n          getDetailPath={getDetailPath}\n          timeFormatterConfig={projectConfig.timeFormat}\n        />\n      </EvidenceTableWrapper>\n      <EvidenceDetail\n        collectionsFC={collectionsFC}\n        detailId={detailId}\n        evidence={detailEvidence}\n        onClose={closeModal}\n        prevPath={prevEvidence ? getDetailPath(prevEvidence?._id) : ''}\n        nextPath={nextEvidence ? getDetailPath(nextEvidence?._id) : ''}\n        timeFormatterConfig={projectConfig.timeFormat}\n      />\n    </EvidenceResultsWrapper>\n  );\n};\n\nexport default EvidenceViewer;\n","/* eslint-disable import/prefer-default-export */\nexport function debounce(f: (...args: any[]) => void, wait: number, immediate?: boolean) {\n  let timeout: NodeJS.Timeout | null;\n  return (...args: any[]) => {\n    const later = () => {\n      timeout = null;\n      if (!immediate) f(...args);\n    };\n    const callNow = immediate && !timeout;\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) f(...args);\n  };\n}\n","import React, { ReactElement } from 'react';\nimport 'react-virtualized/styles.css';\nimport ReactMarkdown from 'react-markdown';\nimport { Link } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport {\n  localTimeRangeFormatter,\n  TimeFormatterConfig,\n  videoTimepointRangeFormatter,\n} from '@jan6evidence/formatters';\nimport { PATHS } from '@jan6evidence/routes';\nimport type { Evidence } from '@jan6evidence/types';\n\nimport LocationLink from '../shared/LocationLink';\n\nimport { ExportEvidenceTable, maybetwoColumnRow } from './EvidenceExportView';\n\nconst ExportEvidenceItem = ({\n  item,\n  timeFormatterConfig,\n}: {\n  item: Evidence;\n  timeFormatterConfig: TimeFormatterConfig;\n}) => {\n  const detailUrl = `${PATHS.evidence}/${item._id}`;\n  const allTags = (item.suspectTags || []).concat(item.otherTags || []);\n  return (\n    <ExportEvidenceTable>\n      {maybetwoColumnRow(true, 'Evidence ID', <Link to={detailUrl}>{item._id}</Link>)}\n      {maybetwoColumnRow(!!item.imageUrl, 'Image URL', <a href={item.imageUrl}>{item.imageUrl}</a>)}\n      {maybetwoColumnRow(!!item.videoUrl, 'Video URL', <a href={item.videoUrl}>{item.videoUrl}</a>)}\n      {maybetwoColumnRow(\n        item.videoStartTimepoint !== undefined,\n        'Video timepoint',\n        videoTimepointRangeFormatter(item.videoStartTimepoint, item.videoEndTimepoint)\n      )}\n      {maybetwoColumnRow(\n        !!item.realTimeStart,\n        'Local time',\n        localTimeRangeFormatter(\n          { start: item.realTimeStart, end: item.realTimeEnd },\n          timeFormatterConfig\n        )\n      )}\n      {maybetwoColumnRow(\n        !!(item.location || item.locationName),\n        'Location',\n        <LocationLink latLng={item.location} name={item.locationName} />\n      )}\n      {maybetwoColumnRow(allTags.length > 0, 'Tags', allTags.join(', '))}\n      {maybetwoColumnRow(\n        !!item.summary,\n        'Summary',\n        <ReactMarkdown>{item.summary || ''}</ReactMarkdown>\n      )}\n      {maybetwoColumnRow(\n        !!item.rationale,\n        'Rationale',\n        <ReactMarkdown>{item.rationale || ''}</ReactMarkdown>\n      )}\n    </ExportEvidenceTable>\n  );\n};\n\nconst EvidenceCopyableExport = ({\n  evidence,\n  timeFormatterConfig,\n}: {\n  evidence: Evidence[];\n  timeFormatterConfig: TimeFormatterConfig;\n}) => {\n  return (\n    <div>\n      {evidence.map((ev) => (\n        <ExportEvidenceItem item={ev} timeFormatterConfig={timeFormatterConfig} />\n      ))}\n    </div>\n  );\n};\n\nexport default EvidenceCopyableExport;\n","import type { LngLatBounds } from 'mapbox-gl';\nimport React from 'react';\n\nimport styled from 'styled-components';\n\nimport { localTimeRangeFormatter } from '@jan6evidence/formatters';\nimport { ProjectConfig } from '@jan6evidence/settings';\nimport { Evidence } from '@jan6evidence/types';\n\nimport { TagFilters, Toggles } from '../../types/TagFilters';\nimport PageHeaderAndNav from '../PageHeaderAndNav';\nimport { AppWrapper } from '../table-styled-components';\n\nimport EvidenceCopyableExport from './EvidenceCopyableExport';\n\ntype Props = {\n  evidence: Evidence[];\n  tagFilters?: TagFilters;\n  keywords?: string[];\n  toggles: Toggles;\n  startEndTimes?: [Date, Date];\n  bounds?: LngLatBounds;\n  setExportView: (exportView: boolean) => void;\n  projectConfig: ProjectConfig;\n};\n\nexport const maybetwoColumnRow = (condition: boolean, label: string, content: any) =>\n  condition ? (\n    <tr>\n      <th scope=\"row\">{label}</th>\n      <td>{content}</td>\n    </tr>\n  ) : null;\n\nexport const ExportDiv = styled.div`\n  width: 1100px;\n  padding: 30px;\n  margin-left: auto;\n  margin-right: auto;\n`;\n\nexport const ExportEvidenceTable = styled.table`\n  margin-bottom: 2em;\n  border-top: solid 1px #ccc;\n  font-size: 0.9em;\n  td,\n  th {\n    padding-top: 3px;\n    vertical-align: top;\n    text-overflow: ellipsis;\n  }\n  th {\n    text-align: right;\n    width: 200px;\n    padding-right: 1em;\n  }\n  td {\n    width: 800px;\n  }\n  p {\n    padding: 0px;\n    margin: 0px;\n  }\n`;\n\nconst EvidenceExportView = ({\n  evidence,\n  tagFilters,\n  keywords,\n  toggles,\n  startEndTimes,\n  //  setExportView,\n  bounds,\n  projectConfig,\n}: Props) => {\n  return (\n    <AppWrapper>\n      <PageHeaderAndNav projectConfig={projectConfig} />\n      <ExportDiv>\n        <h2>Export Parameters</h2>\n        <ExportEvidenceTable style={{ borderTop: 'none' }}>\n          {maybetwoColumnRow(true, 'Exported at', new Date().toISOString())}\n          {maybetwoColumnRow(\n            (tagFilters?.suspect?.size || 0) > 0,\n            'Suspect tag filters',\n            Array.from(tagFilters?.suspect || []).join(', ')\n          )}\n          {maybetwoColumnRow(\n            (tagFilters?.otherTags?.size || 0) > 0,\n            'Other tag filters',\n            Array.from(tagFilters?.otherTags || []).join(', ')\n          )}\n          {maybetwoColumnRow(\n            (keywords?.length || 0) > 0 || false,\n            'Keywords',\n            keywords ? keywords.join(',') : null\n          )}\n          {maybetwoColumnRow(\n            !!startEndTimes,\n            'Time bounds',\n            startEndTimes\n              ? localTimeRangeFormatter(\n                  { start: startEndTimes[0], end: startEndTimes[1] },\n                  projectConfig.timeFormat\n                )\n              : null\n          )}\n          {maybetwoColumnRow(\n            !!bounds,\n            'Latitude',\n            bounds ? `${bounds.getSouth()} to ${bounds.getNorth()}` : null\n          )}\n          {maybetwoColumnRow(\n            !!bounds,\n            'Longitude',\n            bounds ? `${bounds.getWest()} to ${bounds.getEast()}` : null\n          )}\n          {maybetwoColumnRow(\n            !!toggles?.includeUnlocated,\n            '',\n            'Including evidence without location'\n          )}\n          {maybetwoColumnRow(\n            !!toggles?.includeUntimestamped,\n            '',\n            'Including evidence without time'\n          )}\n        </ExportEvidenceTable>\n        <h2>\n          {evidence.length} bit{evidence.length === 1 ? '' : 's'} of evidence\n        </h2>\n        <EvidenceCopyableExport\n          evidence={evidence}\n          timeFormatterConfig={projectConfig.timeFormat}\n        />\n      </ExportDiv>\n    </AppWrapper>\n  );\n};\n\nexport default EvidenceExportView;\n","import styled from 'styled-components';\n\nimport { colors, shadows, padding, widths } from '../shared/constants';\nimport { TextButton, LeftBox } from '../shared/mixins';\n\nexport const Box = styled.div`\n  ${LeftBox}\n\n  font-size: 12px;\n  line-height: 18px;\n\n  h4 {\n    font-size: 18px;\n    line-height: 24px;\n    padding-left: ${padding.sm}px;\n  }\n\n  h5 {\n    font-size: 15px;\n    line-height: 24px;\n  }\n\n  .btn-group-toggle {\n    flex: 1 1 auto;\n    max-height: ${(props: any) => props.btnGroupToggleMaxHeight || '25vh'};\n    overflow-y: auto;\n    overflow-x: hidden;\n    border-top: 1px solid ${colors.tableLines};\n    border-bottom: 1px solid ${colors.tableLines};\n\n    display: block;\n\n    > .btn {\n      font-size: 12px;\n      line-height: 12px;\n      text-align: left;\n      padding: ${padding.sm}px;\n      border-radius: 0;\n\n      color: black;\n      background-color: white;\n      border-color: ${colors.tableLines};\n\n      display: flex;\n      flex-direction: row;\n\n      &:hover {\n        background-color: #bbb;\n      }\n\n      &.active {\n        color: black;\n        background-color: ${colors.activeFilter};\n\n        &:hover {\n          background-color: ${colors.activeFilterHover};\n        }\n      }\n\n      &:first-child {\n        border-top: 0;\n      }\n\n      &.hidden {\n        display: none;\n      }\n\n      .label {\n        flex: 1;\n      }\n\n      .count {\n        color: gray;\n        font-style: italic;\n        width: 25px;\n      }\n    }\n  }\n\n  .choice-filter {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    z-index: 1;\n    border-bottom: 0;\n    border-color: ${colors.tableLines};\n    width: calc(100% + 1px);\n  }\n`;\n\nexport const BoxHeader = styled.div`\n  display: flex;\n  align-items: stretch;\n  margin-bottom: ${padding.md}px;\n\n  h4 {\n    flex: 1 1 auto;\n    margin-bottom: 0;\n  }\n\n  button {\n    ${TextButton}\n  }\n`;\n\nexport const Toggles = styled.div`\n  padding: ${padding.md}px ${padding.sm}px ${padding.sm}px ${padding.sm}px;\n`;\n\nexport const SectionHeader = styled.h5`\n  flex: 0 0 auto;\n  width: 100%;\n  text-align: left;\n\n  padding: ${padding.sm}px;\n  padding-bottom: 0;\n\n  display: flex;\n  align-items: center;\n`;\n\nexport const FilterPills = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  padding-left: ${padding.sm}px;\n\n  .time {\n    background: #beb;\n  }\n  .location {\n    background: white;\n  }\n  .suspect {\n    background: ${colors.person};\n  }\n  .type {\n    background: #bbe;\n  }\n`;\n","import React from 'react';\n\nimport type { TagFilters, TagFilterChoices, TagFilterChoice } from '../../types/TagFilters';\nimport Tag from '../shared/Tag';\n\nimport { FilterPills } from './filter-box-styled-components';\n\ntype Props = {\n  tagFilters: TagFilters;\n  choices: TagFilterChoices;\n  keywords: string[];\n  onDelete: (type: 'keywords' | keyof TagFilters, id: string) => void;\n};\n\nconst ActiveFilters = ({ tagFilters, choices, keywords, onDelete }: Props) => {\n  const tagFilterChoices = React.useMemo(() => {\n    const result: (TagFilterChoice & { type: keyof TagFilters })[] = [];\n    (Object.keys(tagFilters) as (keyof TagFilters)[]).forEach((filterKey) => {\n      const sectionFilters: Set<string> = tagFilters[filterKey];\n      const sectionChoices: TagFilterChoice[] | undefined = choices[filterKey];\n      if (sectionChoices) {\n        sectionFilters.forEach((id) => {\n          const match = sectionChoices.find((element) => element._id === id);\n          if (match) {\n            result.push({ ...match, type: filterKey });\n          }\n        });\n      }\n    });\n    return result;\n  }, [tagFilters, choices]);\n\n  const search = keywords.join(' ');\n\n  return (\n    <FilterPills>\n      {tagFilterChoices.map(({ _id, type, label }) => (\n        <Tag\n          key={`active-${_id}`}\n          id={_id}\n          className={type}\n          label={label}\n          title={`${type[0].toUpperCase() + type.slice(1)}: ${label}`}\n          onDelete={() => onDelete(type, _id)}\n        />\n      ))}\n      {search.length > 0 && (\n        <Tag\n          key=\"active-keywords\"\n          id=\"search\"\n          label={search}\n          className=\"keywords\"\n          title={`Keywords: ${search}`}\n          onDelete={() => onDelete('keywords', search)}\n        />\n      )}\n    </FilterPills>\n  );\n};\n\nexport default ActiveFilters;\n","import React from 'react';\nimport Form from 'react-bootstrap/Form';\n\nimport { SectionHeader } from './filter-box-styled-components';\n\ntype Props = {\n  onChange: (search: string) => void;\n  value: string;\n};\n\nconst KeywordSearch = ({ onChange, value }: Props) => {\n  return (\n    <>\n      <SectionHeader>Keywords</SectionHeader>\n      <Form.Control\n        type=\"text\"\n        placeholder=\"Search\"\n        onChange={(e) => onChange(e.target.value)}\n        value={value}\n        size=\"sm\"\n      />\n    </>\n  );\n};\n\nexport default KeywordSearch;\n","import React from 'react';\n\nimport { SectionHeader } from './filter-box-styled-components';\n\ntype Props = {\n  label?: string;\n  children: React.ReactNode;\n};\n\nconst Section = ({ children, label }: Props) => {\n  return (\n    <>\n      {label && <SectionHeader>{label}</SectionHeader>}\n      {children}\n    </>\n  );\n};\n\nexport default Section;\n","import classnames from 'classnames';\nimport React from 'react';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport Form from 'react-bootstrap/Form';\nimport ToggleButton from 'react-bootstrap/ToggleButton';\n\nimport type { TagFilterChoiceWithCount } from '../../types/TagFilters';\n\ntype Props = {\n  categoryId: string;\n  choices: TagFilterChoiceWithCount[];\n  choicesFilter: string;\n  setChoicesFilter: (str: string) => void;\n  selectedIds: Set<string>;\n  onChange: (choiceIds: Set<string>) => void;\n};\n\nconst TagFilterChoiceBox = ({\n  categoryId,\n  choices,\n  choicesFilter,\n  setChoicesFilter,\n  selectedIds,\n  onChange,\n}: Props) => {\n  const toggleSelection = (id: string) => {\n    const newSelected = new Set(selectedIds);\n    if (selectedIds.has(id)) {\n      newSelected.delete(id);\n    } else {\n      newSelected.add(id);\n    }\n    onChange(newSelected);\n  };\n\n  return (\n    <>\n      {choices.length > 8 && (\n        <Form.Control\n          type=\"text\"\n          placeholder=\"Filter...\"\n          onChange={(e) => setChoicesFilter(e.target.value)}\n          value={choicesFilter}\n          size=\"sm\"\n          className=\"choice-filter\"\n        />\n      )}\n      <ButtonGroup toggle vertical>\n        {choices.map((choice) => (\n          <ToggleButton\n            key={`${categoryId}-choice-${choice._id}`}\n            title={choice.label}\n            type=\"checkbox\"\n            variant=\"secondary\"\n            checked={selectedIds.has(choice._id)}\n            value=\"1\"\n            onChange={() => toggleSelection(choice._id)}\n            className={classnames({\n              hidden:\n                /* selectedIds.has(choice.id) || // TODO should chosen items disappear or go? */\n                !choice.label.toLowerCase().includes(choicesFilter.toLowerCase()),\n            })}\n            style={{ borderRight: 'none' }}\n          >\n            <div className=\"label\">{choice.label}</div>\n            <div className=\"count\">({choice.count})</div>\n          </ToggleButton>\n        ))}\n      </ButtonGroup>\n    </>\n  );\n};\n\nexport default TagFilterChoiceBox;\n","import React from 'react';\nimport Form from 'react-bootstrap/Form';\nimport { useHistory } from 'react-router-dom';\n\nimport type { TagFilters, TagFilterChoicesWithCount, Toggles } from '../../types/TagFilters';\n\nimport ActiveFilters from './ActiveFilters';\n\nimport KeywordSearch from './KeywordSearch';\nimport Section from './Section';\nimport TagFilterChoiceBox from './TagFilterChoiceBox';\nimport { Box, BoxHeader, Toggles as TogglesContainer } from './filter-box-styled-components';\n\ntype Props = {\n  keywords: string[];\n  tagFilters: TagFilters;\n  toggles: Toggles;\n  choices: TagFilterChoicesWithCount;\n  onKeywordsChanged: (newKeywords: string[]) => void;\n  onTagFilterChanged: <K extends keyof TagFilters>(key: K, newValue: TagFilters[K]) => void;\n  onToggleChanged: <K extends keyof Toggles>(key: K, newValue: Toggles[K]) => void;\n  showSuspectFilters: boolean;\n};\n\nconst removeOneFromSection = (section: Set<string>, id: string) => {\n  section.delete(id);\n  return section;\n};\n\nconst FilterBox = ({\n  keywords,\n  tagFilters,\n  toggles,\n  choices,\n  onKeywordsChanged,\n  onTagFilterChanged,\n  onToggleChanged,\n  showSuspectFilters,\n}: Props) => {\n  const history = useHistory();\n\n  const [suspectTagChoicesFilter, setSuspectTagChoicesFilter] = React.useState<string>('');\n  const [otherTagChoicesFilter, setOtherTagChoicesFilter] = React.useState<string>('');\n\n  const clearAll = () => {\n    setSuspectTagChoicesFilter('');\n    setOtherTagChoicesFilter('');\n    onTagFilterChanged('suspect', new Set());\n    onTagFilterChanged('otherTags', new Set());\n    onKeywordsChanged([]);\n\n    // The above should be sufficient to clear filters, but because successive\n    // query param updates are using stale query params, it will not clear\n    // correctly. Need to access a fresh copy of `useLocation` in `setValue`,\n    // but hooks cannot be calling inside.\n    history.push({ search: '' });\n  };\n\n  return (\n    // @ts-ignore\n    <Box btnGroupToggleMaxHeight={showSuspectFilters ? '25vh' : '50vh'}>\n      <BoxHeader>\n        <h4>Filters</h4>\n        <button type=\"button\" onClick={clearAll}>\n          Clear all\n        </button>\n      </BoxHeader>\n      <ActiveFilters\n        tagFilters={tagFilters}\n        choices={choices}\n        keywords={keywords}\n        onDelete={(type: 'keywords' | keyof TagFilters, id) =>\n          type === 'keywords'\n            ? onKeywordsChanged([])\n            : onTagFilterChanged(type, removeOneFromSection(tagFilters[type], id))\n        }\n      />\n      <TogglesContainer>\n        <Form.Switch\n          type=\"switch\"\n          id=\"include-untimestamped\"\n          label=\"Include evidence without a time\"\n          checked={toggles.includeUntimestamped}\n          onChange={(evt) => onToggleChanged('includeUntimestamped', evt.target.checked)}\n        />\n        <Form.Switch\n          type=\"switch\"\n          id=\"include-unlocated\"\n          label=\"Include evidence without a location\"\n          checked={toggles.includeUnlocated}\n          onChange={(evt) => onToggleChanged('includeUnlocated', evt.target.checked)}\n        />\n      </TogglesContainer>\n      <KeywordSearch\n        onChange={(search) => onKeywordsChanged(search.split(' '))}\n        value={keywords.join(' ')}\n      />\n\n      {showSuspectFilters ? (\n        <Section label=\"Suspects\">\n          <TagFilterChoiceBox\n            categoryId=\"suspects\"\n            choices={choices.suspect}\n            choicesFilter={suspectTagChoicesFilter}\n            setChoicesFilter={setSuspectTagChoicesFilter}\n            selectedIds={tagFilters.suspect}\n            onChange={(params) => onTagFilterChanged('suspect', params)}\n          />\n        </Section>\n      ) : null}\n      <Section label={showSuspectFilters ? 'Other Tags' : 'Tags'}>\n        <TagFilterChoiceBox\n          categoryId=\"otherTags\"\n          choices={choices.otherTags}\n          choicesFilter={otherTagChoicesFilter}\n          setChoicesFilter={setOtherTagChoicesFilter}\n          selectedIds={tagFilters.otherTags}\n          onChange={(params) => onTagFilterChanged('otherTags', params)}\n        />\n      </Section>\n    </Box>\n  );\n};\n\nexport default FilterBox;\n","import type { LngLatBounds } from 'mapbox-gl';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport type {\n  TagFilterChoicesWithCount,\n  TagFilterChoiceWithCount,\n  TagFilters,\n  Toggles,\n} from '../../types/TagFilters';\n\nconst isItemInTimeRange = (args: {\n  itemStart: Date;\n  itemEnd?: Date;\n  rangeStart: Date;\n  rangeEnd: Date;\n}): boolean => {\n  const { itemStart, itemEnd, rangeStart, rangeEnd } = args;\n  // Use itemEnd if provided and after itemStart; otherwise treat item as instantaneous at itemStart.\n  const usableItemEnd = itemEnd && itemEnd > itemStart ? itemEnd : itemStart;\n  // Return true if any portion of the item's duration is in the range\n  return itemStart <= rangeEnd && usableItemEnd >= rangeStart;\n};\n\nconst doesEvidenceMatchKeywords = (evidence: Evidence, keywords: string[]): boolean => {\n  if (keywords.length === 0) {\n    return true;\n  }\n\n  return [\n    evidence.locationName,\n    ...(evidence.otherTags || []),\n    ...(evidence.suspectTags || []),\n    evidence.rationale,\n    evidence.summary,\n    evidence.mediaItemId,\n    evidence.videoUrl,\n    evidence.imageUrl,\n  ].some((itemField) => {\n    if (!itemField) {\n      return false;\n    }\n\n    return keywords.some(\n      (keyword) => itemField.toLocaleLowerCase().indexOf(keyword.toLocaleLowerCase()) >= 0\n    );\n  });\n};\n\nconst isEvidenceInBounds = (evidence: Evidence, bounds: LngLatBounds): boolean => {\n  return bounds.contains(evidence.location!);\n};\n\nexport default function filterEvidence(\n  evidence: Evidence[],\n  tagFilters: TagFilters,\n  rawKeywords: string[],\n  toggles: Toggles,\n  startEndTimes: [Date, Date] | null,\n  bounds: LngLatBounds | null\n): {\n  filteredEvidence: Evidence[];\n  timelineFilteredEvidence: Evidence[];\n  tagFilterChoices: TagFilterChoicesWithCount;\n} {\n  const filteredEvidence: Evidence[] = [];\n  const timelineFilteredEvidence: Evidence[] = [];\n\n  const allSuspects: { [label: string]: TagFilterChoiceWithCount } = {};\n  const allOtherTags: { [label: string]: TagFilterChoiceWithCount } = {};\n\n  // helper for adding items to the filter choices\n  function addTagFilterChoiceItem(\n    tagFilterChoiceMap: { [label: string]: TagFilterChoiceWithCount },\n    label: string\n  ) {\n    /* eslint-disable no-param-reassign */\n    if (!tagFilterChoiceMap[label]) {\n      tagFilterChoiceMap[label] = { _id: label, label, count: 0 };\n    }\n\n    tagFilterChoiceMap[label].count += 1;\n    /* eslint-enable no-param-reassign */\n  }\n\n  const keywords = rawKeywords.filter((s) => s);\n\n  evidence.forEach((item) => {\n    // Keywords and toggles affect everything -- so apply those first and short-circuit\n    // if the evidence doesn't match\n    if (!doesEvidenceMatchKeywords(item, keywords)) {\n      return;\n    }\n\n    if (!toggles.includeUntimestamped && !item.realTimeStart) {\n      return;\n    }\n\n    if (!toggles.includeUnlocated && !item.location) {\n      return;\n    }\n\n    // Compute which filters this item matches\n    let matchSuspects = true;\n    if (tagFilters.suspect.size > 0) {\n      if (!item.suspectTags) {\n        matchSuspects = false;\n      } else if (!item.suspectTags.some((tag) => tagFilters.suspect.has(tag))) {\n        matchSuspects = false;\n      }\n    }\n\n    let matchTags = true;\n    if (tagFilters.otherTags.size > 0) {\n      if (!item.otherTags) {\n        matchTags = false;\n      } else if (!item.otherTags.some((tag) => tagFilters.otherTags.has(tag))) {\n        matchTags = false;\n      }\n    }\n\n    let matchTimeline = true;\n    if (startEndTimes && item.realTimeStart) {\n      if (\n        !isItemInTimeRange({\n          itemStart: item.realTimeStart,\n          itemEnd: item.realTimeEnd,\n          rangeStart: startEndTimes[0],\n          rangeEnd: startEndTimes[1],\n        })\n      ) {\n        matchTimeline = false;\n      }\n    }\n\n    let matchBounds = true;\n    if (bounds && item.location) {\n      if (!isEvidenceInBounds(item, bounds)) {\n        matchBounds = false;\n      }\n    }\n\n    // If it matches all the filters, add it to the filtered evidence\n    if (matchSuspects && matchTags && matchTimeline && matchBounds) {\n      filteredEvidence.push(item);\n    }\n\n    // If it matches all the filters *ignoring timeline*, add it to the evidence\n    // for the timeline (the timeline shows evidence outside the timeline\n    // bounds)\n    if (matchSuspects && matchTags && matchBounds) {\n      timelineFilteredEvidence.push(item);\n    }\n\n    // Now, we need to compute the counts for the filter boxes. These filters\n    // are ORs, not ANDs. So the count for each filter is the number of pieces\n    // of evidence that match that specific filter item, *and* match the active\n    // filters for the other types of filters. For example, the count for the\n    // location filter \"The Ellipse\" is the number of pieces of evidence that\n    // are tagged with \"The Ellipse\", AND match all active suspect and tag\n    // filters.\n\n    if (matchTags && matchTimeline && matchBounds && item.suspectTags) {\n      item.suspectTags.forEach((tag) => addTagFilterChoiceItem(allSuspects, tag));\n    }\n\n    if (matchSuspects && matchTimeline && matchBounds && item.otherTags) {\n      item.otherTags.forEach((tag) => addTagFilterChoiceItem(allOtherTags, tag));\n    }\n  });\n\n  const tagFilterChoices = {\n    suspect: Object.values(allSuspects).sort((a, b) => (a.label < b.label ? -1 : 1)),\n    otherTags: Object.values(allOtherTags).sort((a, b) => (a.label < b.label ? -1 : 1)),\n  };\n\n  return { tagFilterChoices, filteredEvidence, timelineFilteredEvidence };\n}\n","import type { LngLatBounds } from 'mapbox-gl';\nimport React from 'react';\nimport styled from 'styled-components';\n\nimport { PATHS } from '@jan6evidence/routes';\nimport { ProjectConfig, PROJECT_CONFIG } from '@jan6evidence/settings';\nimport type { Evidence } from '@jan6evidence/types';\n\nimport type LoadState from '../types/LoadState';\nimport type { TagFilters, Toggles } from '../types/TagFilters';\n\nimport EvidenceViewer from './EvidenceMain';\nimport EvidenceExportView from './EvidenceMain/EvidenceExportView';\nimport MobileOverlay from './EvidenceMain/EvidenceMobileOverlay';\nimport FilterBox from './FilterBox';\nimport filterEvidence from './FilterBox/filterEvidence';\nimport FixedLayout from './FixedLayout';\nimport PageHeaderAndNav from './PageHeaderAndNav';\nimport { usePageTitle, useQueryState } from './shared/hooks';\n\nconst PageContentWrapper = styled.div`\n  height: 100%;\n  min-height: 100%;\n  max-height: 100%;\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  justify-content: stretch;\n`;\n\nconst toArray = (value: string | string[] | null | undefined): string[] => {\n  if (Array.isArray(value)) {\n    return value;\n  }\n  if (value == null) {\n    return [];\n  }\n  return [value];\n};\n\ninterface EvidenceAppProps {\n  evidence: Evidence[];\n  loadState: LoadState;\n  loadError?: string;\n  projectConfig: ProjectConfig;\n  collectionsFC?: (props: { id?: string; location?: string }) => React.ReactNode;\n}\n\nconst EvidenceApp = (props: EvidenceAppProps) => {\n  usePageTitle(props.projectConfig.explorerTitle);\n\n  const [queryState, setQueryState] = useQueryState();\n\n  const tagFilters = React.useMemo(\n    () => ({\n      suspect: new Set<string>(toArray(queryState.suspect)),\n      otherTags: new Set<string>(toArray(queryState.other_tags)),\n    }),\n    [queryState.suspect, queryState.other_tags]\n  );\n  const setTagFilters = <K extends keyof TagFilters>(key: K, newValue: TagFilters[K]): void => {\n    setQueryState((prevState) => {\n      const queryKey = key === 'otherTags' ? 'other_tags' : key;\n      return {\n        ...prevState,\n        [queryKey]: Array.from(newValue),\n      };\n    });\n  };\n\n  const keywords = React.useMemo(() => toArray(queryState.keywords), [queryState.keywords]);\n  const setKeywords = (nextKeywords: string[]) => {\n    setQueryState((prevState) => ({\n      ...prevState,\n      keywords: nextKeywords,\n    }));\n  };\n\n  const QUERY_TRUE = 'true';\n  const QUERY_FALSE = 'false;';\n  const booleanFromQueryParam = (param: any, defaultValue: boolean): boolean =>\n    param ? param === QUERY_TRUE : defaultValue;\n\n  const toggles: Toggles = React.useMemo(\n    () => ({\n      // default to true if no value set in query states\n      includeUntimestamped: booleanFromQueryParam(queryState.includeUntimestamped, true),\n      includeUnlocated: booleanFromQueryParam(queryState.includeUnlocated, true),\n    }),\n    [queryState.includeUntimestamped, queryState.includeUnlocated]\n  );\n  const setToggles = <K extends keyof Toggles>(toggleName: K, newValue: boolean): void => {\n    setQueryState((prevState) => ({\n      ...prevState,\n      [toggleName]: newValue ? QUERY_TRUE : QUERY_FALSE,\n    }));\n  };\n\n  const parsedStartEndTimes =\n    typeof queryState.start_end_times === 'string' ? queryState.start_end_times.split(',') : null;\n  const startEndTimes: [Date, Date] | null = React.useMemo(\n    () =>\n      parsedStartEndTimes\n        ? [\n            new Date(parseInt(parsedStartEndTimes[0], 10)),\n            new Date(parseInt(parsedStartEndTimes[1], 10)),\n          ]\n        : null,\n    [parsedStartEndTimes]\n  );\n\n  const setStartEndTimes = React.useCallback((newTimes: [Date, Date] | null) => {\n    // eslint-disable-next-line camelcase\n    setQueryState(({ start_end_times, ...prevState }) => ({\n      ...prevState,\n      ...(newTimes\n        ? { start_end_times: [newTimes[0].getTime(), newTimes[1].getTime()].join(',') }\n        : {}),\n    }));\n  }, []);\n\n  const [bounds, setBounds] = React.useState<LngLatBounds | null>(null);\n\n  const exportView: boolean = booleanFromQueryParam(queryState.exportView, false);\n  const setExportView = (newValue: boolean): void => {\n    setQueryState((prevState) => ({\n      ...prevState,\n      exportView: newValue ? QUERY_TRUE : undefined,\n    }));\n  };\n\n  const { filteredEvidence, timelineFilteredEvidence, tagFilterChoices } = React.useMemo(\n    () => filterEvidence(props.evidence, tagFilters, keywords, toggles, startEndTimes, bounds),\n    [props.evidence, tagFilters, keywords, toggles, startEndTimes, bounds]\n  );\n\n  return exportView ? (\n    <EvidenceExportView\n      evidence={filteredEvidence}\n      tagFilters={tagFilters}\n      keywords={keywords}\n      toggles={toggles}\n      startEndTimes={startEndTimes || undefined}\n      bounds={bounds || undefined}\n      setExportView={setExportView}\n      projectConfig={props.projectConfig}\n    />\n  ) : (\n    <PageContentWrapper>\n      <FilterBox\n        onTagFilterChanged={setTagFilters}\n        onKeywordsChanged={setKeywords}\n        tagFilters={tagFilters}\n        choices={tagFilterChoices}\n        keywords={keywords}\n        toggles={toggles}\n        onToggleChanged={(toggleName, newValue) => {\n          setToggles(toggleName, newValue);\n        }}\n        showSuspectFilters={PROJECT_CONFIG.showSuspectFilter}\n      />\n      <EvidenceViewer\n        projectConfig={props.projectConfig}\n        evidence={filteredEvidence}\n        timedEvidence={timelineFilteredEvidence}\n        startEndTimes={startEndTimes}\n        setStartEndTimes={setStartEndTimes}\n        hideExplorerLink\n        rootPath={PATHS.evidence}\n        getDetailPath={(detailId) => `${PATHS.evidence}/${detailId}`}\n        setBounds={setBounds}\n        setExportView={setExportView}\n        collectionsFC={props.collectionsFC}\n        loadState={props.loadState}\n        loadError={props.loadError}\n      />\n    </PageContentWrapper>\n  );\n};\n\nexport default EvidenceApp;\n","/* eslint-disable no-console */\n\nimport { URL } from 'url';\n\nimport * as nodeUrl from 'url';\n\ndeclare let window: any;\nlet UrlConstructor: any;\nif (typeof window !== 'undefined') {\n  UrlConstructor = window.URL;\n} else {\n  UrlConstructor = nodeUrl.URL;\n}\n\nexport const urlHasDomain = (url: URL, domain: string): boolean =>\n  url.hostname === domain || url.hostname.endsWith(`.${domain}`);\n\nexport default function urlOrNull(\n  urlAsString: string | undefined,\n  opts?: { domain?: string; logErrors?: boolean }\n): URL | null {\n  let url;\n  try {\n    url = new UrlConstructor(urlAsString || '');\n  } catch (e) {\n    if (!e.message.match('Invalid URL')) {\n      throw e;\n    }\n    if (opts?.logErrors) {\n      console.error(e);\n    }\n    return null;\n  }\n  if (opts?.domain && !urlHasDomain(url, opts.domain)) {\n    return null;\n  } else {\n    return url;\n  }\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { PATHS } from '@jan6evidence/routes';\n\nconst MobileOverlay = () => {\n  const [open, setOpen] = React.useState(true);\n\n  return (\n    (open && (\n      <div\n        style={{\n          zIndex: 100,\n          position: 'absolute',\n          width: '100%',\n          height: '100vh',\n          background: 'rgba(255, 255, 255, 0.95)',\n          padding: '30px',\n        }}\n        className=\"d-sm-none\"\n      >\n        <h2>January 6 Evidence</h2>\n        <p>\n          You&rsquo;ll probably find the evidence explorer easier to use on a larger device or in a\n          bigger window.\n        </p>\n        <ul>\n          <li>\n            <Link\n              to={PATHS.evidence}\n              onClick={(event) => {\n                event.preventDefault();\n                setOpen(false);\n                return false;\n              }}\n            >\n              Take me to the evidence anyway\n            </Link>\n          </li>\n          <li>\n            <Link to={PATHS.suspects}>Persons of Interest</Link>\n          </li>\n          <li>\n            <Link to={PATHS.about}>About</Link>\n          </li>\n          <li>\n            <Link to={PATHS.resources}>Resources for investigators of the Capitol Attack</Link>\n          </li>\n        </ul>\n        <img\n          src=\"/documentation/explorer-overview.jpg\"\n          style={{ width: '100%', margin: '0px auto' }}\n          alt=\"Example explorer view\"\n        />\n      </div>\n    )) ||\n    null\n  );\n};\n\nexport default MobileOverlay;\n","import styled from 'styled-components';\n\nimport { heights } from './shared/constants';\n\nconst FixedLayout = styled.div`\n  position: fixed;\n  top: ${heights.navbar}px;\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  border-top: solid 1px #ccc;\n`;\n\nexport default FixedLayout;\n","import React from 'react';\n\nimport { PROJECT_CONFIG } from '@jan6evidence/settings';\n\nimport { getStaticEvidence } from '../data';\n\nimport LoadState from '../types/LoadState';\n\nimport EvidenceApp from './EvidenceApp';\nimport MobileOverlay from './EvidenceMain/EvidenceMobileOverlay';\nimport FixedLayout from './FixedLayout';\nimport PageHeaderAndNav from './PageHeaderAndNav';\n\nconst StaticEvidencePage = () => {\n  return (\n    <div>\n      <MobileOverlay />\n      <PageHeaderAndNav projectConfig={PROJECT_CONFIG} />\n      <FixedLayout>\n        <EvidenceApp\n          evidence={getStaticEvidence(\n            PROJECT_CONFIG.timeline.start.getTime(),\n            PROJECT_CONFIG.timeline.end.getTime()\n          )}\n          loadState={LoadState.LOADED}\n          projectConfig={PROJECT_CONFIG}\n        />\n      </FixedLayout>\n    </div>\n  );\n};\n\nexport default StaticEvidencePage;\n","/* eslint-disable camelcase, spaced-comment, no-console */\n\n////////////////////////\n// Keyword filters\n////////////////////////\n\ntype ParsedKeywordFilter = {\n  includeKeywords: string[];\n  excludeKeywords: string[];\n};\n\nexport type KeywordFilter = {\n  text: string;\n  parsed: ParsedKeywordFilter;\n};\n\nexport const keywordFilterFromTextInput = (text: string): KeywordFilter => {\n  const includeKeywords: string[] = [];\n  const excludeKeywords: string[] = [];\n\n  text.split(' ').forEach((kw: string) => {\n    const cleanedKw = kw.trim().toLocaleLowerCase();\n    if (cleanedKw[0] === '-') {\n      // exclude\n      if (cleanedKw.length > 1) {\n        excludeKeywords.push(cleanedKw.slice(1));\n      }\n    } else if (cleanedKw.length > 0) {\n      includeKeywords.push(cleanedKw);\n    }\n  });\n\n  return { text, parsed: { includeKeywords, excludeKeywords } };\n};\n\n// assumes keywords have already been cleaned (trimmed, lowercased,\n// blanks removed)\n\nexport const isKeywordFilterMatch = (\n  inputStringGroup: string[],\n  keywordFilter: ParsedKeywordFilter\n): boolean => {\n  const cleanedInputGroup = inputStringGroup\n    .map((s) => s.toLocaleLowerCase().trim())\n    .filter((s) => s);\n  const { includeKeywords, excludeKeywords } = keywordFilter;\n\n  return (\n    includeKeywords.every((kw) => cleanedInputGroup.some((s) => s && s.indexOf(kw) >= 0)) &&\n    excludeKeywords.every((kw) => cleanedInputGroup.every((s) => !s || s.indexOf(kw) === -1))\n  );\n};\n\nexport type YesNoEitherFilter = 'yes' | 'no' | '';\nexport const isYesNoFilterMatch = (value: boolean, filter: YesNoEitherFilter): boolean =>\n  filter === '' || (filter === 'yes' && value) || (filter === 'no' && !value);\n","import { VideoDetails } from '@jan6evidence/types';\n\nexport type MediaUrlMatch<T extends VideoDetails> = {\n  canonicalUrl: string;\n  mediaType: 'video' | 'photo';\n  videoDetails?: T;\n};\n\nexport abstract class MediaUrlMatcher<T extends VideoDetails> {\n  isMatch(url: string): boolean {\n    return !!this.getIdsFromUrl(url);\n  }\n\n  // Returns a promise because sometimes getting the canonical match requires\n  // fetching data from the URL.\n  abstract makeCanonical(url: string): Promise<MediaUrlMatch<T> | undefined>;\n\n  abstract getIdsFromUrl(url: string): any;\n}\n","/* eslint-disable import/prefer-default-export */\n\nimport fetch from 'isomorphic-fetch';\n\nimport { VideoDetailsArchiveOrg } from '@jan6evidence/types';\n\nimport { MediaUrlMatcher, MediaUrlMatch } from '../media_url_matcher';\nimport urlOrNull from '../util/urlOrNull';\n\nexport class ArchiveOrgUrlMatcher extends MediaUrlMatcher<VideoDetailsArchiveOrg> {\n  async makeCanonical(\n    urlAsString: string\n  ): Promise<MediaUrlMatch<VideoDetailsArchiveOrg> | undefined> {\n    // eslint-disable-next-line prefer-const\n    let { identifier, filename } = this.getIdsFromUrl(urlAsString) || {};\n    if (!identifier) {\n      return undefined;\n    }\n\n    if (!filename) {\n      const metadata = await this.getMetadata(identifier);\n      const originalFilesMetadata = metadata.files?.filter((f: any) => f.source === 'original');\n      const mp4s = originalFilesMetadata.filter((f: any) => f.format === 'MPEG4');\n      const mkvs = originalFilesMetadata.filter((f: any) => f.format === 'Matroska');\n      // choose the first mp4, or if there is none, the first mkv\n      filename = mp4s[0]?.name || mkvs[0]?.name;\n      if (!filename) {\n        // no videos available, give up\n        // eslint-disable-next-line no-console\n        console.warn(\n          `Unable to uniquely identify filename for archive.org item ${urlAsString}, ignoring`\n        );\n        return undefined;\n      }\n    }\n\n    const startTimeParam = urlOrNull(urlAsString)?.searchParams?.get('start') || '';\n    const startTime = parseInt(startTimeParam, 10) || undefined;\n\n    return {\n      canonicalUrl: `https://archive.org/download/${identifier}/${filename}`,\n      mediaType: 'video',\n      videoDetails: {\n        type: 'archiveOrg',\n        startTime,\n        identifier,\n        filename,\n      },\n    };\n  }\n\n  async getMetadata(identifier: string): Promise<any> {\n    return (await fetch(`https://archive.org/metadata/${identifier}`)).json();\n  }\n\n  getIdsFromUrl(urlAsString: string): { identifier?: string; filename?: string } | undefined {\n    const url = urlOrNull(urlAsString, { domain: 'archive.org' });\n    if (!url) {\n      return undefined;\n    }\n\n    // urls will be of the form\n    // https://archive.org/<linktype>/<identifier> or\n    // https://archive.org/<linktype>/<identifier>/filename\n    //\n    // where linktype = details, embed, download, ...\n    const [identifier, ...filenameparts] = url.pathname.split('/').slice(2);\n    const filename = filenameparts.join('/').replace(/\\+/g, '%20') || undefined;\n    if (identifier) {\n      return { identifier, filename };\n    } else {\n      return undefined;\n    }\n  }\n}\n","/* eslint-disable no-console */\n\nimport React, { useEffect, useState } from 'react';\n\nimport { PROJECT_CONFIG } from '@jan6evidence/settings';\nimport { ArchiveForEnrichedMediaItem, EnrichedMediaItem } from '@jan6evidence/types';\n\nimport FixedLayout from './FixedLayout';\nimport MediaItemsOverview from './MediaItemsOverview';\nimport PageHeaderAndNav from './PageHeaderAndNav';\nimport { usePageTitle } from './shared/hooks';\n\nenum LoadState {\n  INIT = 'init',\n  GET_SINGLE_USE_TOKEN = 'get_single_use_token',\n  FETCH = 'fetch',\n  LOADED = 'loaded',\n  ERROR = 'error',\n}\n\nconst toDate = (str: string | undefined): Date | undefined => (str ? new Date(str) : undefined);\n\nexport const getItemsFromRawData = (items: any[]): EnrichedMediaItem[] =>\n  items.map((item) => {\n    const sourceCreatedAt = toDate(item.sourceCreatedAt);\n    const sourceUnavailableAt = toDate(item.sourceUnavailableAt);\n    const archives = item.archives.map((a: any) => ({\n      ...a,\n      archivedAt: toDate(a.archivedAt),\n    }));\n    return {\n      ...item,\n      sourceCreatedAt,\n      sourceUnavailableAt,\n      archives,\n    } as EnrichedMediaItem;\n  });\n\nconst pathToEvidenceFromItem = (item: EnrichedMediaItem): string => `e?keywords=${item._id}`;\n\nconst StaticMediaItemsPage = () => {\n  const [loadState, setLoadState] = useState<LoadState>(LoadState.INIT);\n  const [loadError, setLoadError] = useState<string>('');\n  const [data, setData] = useState<Array<EnrichedMediaItem>>([]);\n\n  useEffect(() => {\n    if (loadState === LoadState.INIT) {\n      fetch('/data/enriched-media-items.json')\n        .then((response) => response.text())\n        .then((body) => {\n          const enrichedItems = getItemsFromRawData(JSON.parse(body));\n          setData(enrichedItems);\n          setLoadState(LoadState.LOADED);\n        })\n        .catch((error) => {\n          console.log(error.message);\n          setLoadError(error.message);\n          setLoadState(LoadState.ERROR);\n        });\n    }\n  });\n\n  usePageTitle('Media Items');\n\n  return (\n    <div>\n      <PageHeaderAndNav projectConfig={PROJECT_CONFIG} />\n      <FixedLayout>\n        <MediaItemsOverview\n          ready={loadState === LoadState.LOADED}\n          items={data}\n          annotationLinkPath={pathToEvidenceFromItem}\n        />\n      </FixedLayout>\n    </div>\n  );\n};\n\nexport default StaticMediaItemsPage;\n","import React, { FunctionComponent, useEffect, useState } from 'react';\nimport { Button, Spinner } from 'react-bootstrap';\nimport { CSVDownload } from 'react-csv';\nimport { Link } from 'react-router-dom';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport { VariableSizeList as List } from 'react-window';\nimport styled from 'styled-components';\n\nimport {\n  keywordFilterFromTextInput,\n  isKeywordFilterMatch,\n  KeywordFilter,\n} from '@jan6evidence/filters';\nimport { videoTimepointFormatter } from '@jan6evidence/formatters';\n\nimport { EnrichedMediaItem, ArchiveForEnrichedMediaItem } from '@jan6evidence/types';\nimport { ArchiveOrgUrlMatcher } from '@jan6evidence/video-urls/types/archiveOrg';\n\nimport { useDebouncedValueWithWaitingIndicator } from './shared/hooks';\n\nconst FilterControlsDiv = styled.div`\n  flex: 0 0 5.5rem;\n  font-size: 0.8rem;\n  padding: 0.8rem;\n  display: flex;\n`;\n\nconst ResultsSummaryDiv = styled.div`\n  flex: 0 0 1rem;\n  width: 100vw;\n  font-size: 0.8rem;\n  padding: 0 1.6rem 0.8rem;\n  display: flex;\n`;\n\nconst ItemsContainerDiv = styled.div`\n  flex: 1 1 auto;\n  width: 100vw;\n  border-top: solid 1px #ccc;\n`;\n\n// This is the body default, we just want to be explicit because react-window needs the math\nconst itemDivLineHeight = 1.5;\nconst itemDivFontSizeRem = 0.8;\n\nconst ItemDiv = styled.div`\n  font-size: ${itemDivFontSizeRem}rem;\n  padding: ${itemDivFontSizeRem}rem;\n  border-bottom: solid 1px #ccc;\n  line-height: ${itemDivLineHeight};\n\n  .item-attr {\n    display: flex;\n    .label {\n      flex: 0 0 8rem;\n      display: inline-block;\n      color: #aaa;\n      text-align: right;\n      padding-right: 0.8rem;\n    }\n\n    .content {\n      flex: 1 0 0;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n    }\n  }\n`;\n\nconst maybeLink = ({ text, href }: { text: string; href?: string }) => {\n  if (href) {\n    return <a href={href}>{text}</a>;\n  } else {\n    return <span>{text}</span>;\n  }\n};\n\nconst ItemAttr: FunctionComponent<{ displayIf: any; label: string }> = ({\n  displayIf,\n  label,\n  children,\n}) => {\n  if (displayIf) {\n    return (\n      <div className=\"item-attr\">\n        <div className=\"label\">{label}</div>\n        <div className=\"content\">{children}</div>\n      </div>\n    );\n  } else {\n    return null;\n  }\n};\n\nconst ArchiveLink = ({ arch }: { arch: ArchiveForEnrichedMediaItem }) => {\n  let str = 'Archive';\n  if (arch.width && arch.height) {\n    str += ` (${arch.width} x ${arch.height})`;\n  }\n  const { identifier: archiveOrgIdentifier } =\n    new ArchiveOrgUrlMatcher().getIdsFromUrl(arch.archiveUrl) || {};\n\n  const url = archiveOrgIdentifier\n    ? `https://archive.org/details/${archiveOrgIdentifier}`\n    : arch.archiveUrl;\n  return (\n    <a href={url} target=\"_blank\" rel=\"noreferrer\">\n      {str}\n    </a>\n  );\n};\n\nconst formatDate = (d: Date | undefined): string | undefined => {\n  try {\n    return d ? d.toISOString() : undefined;\n  } catch {\n    return undefined;\n  }\n};\n\nconst notArchivedInfo = (item: EnrichedMediaItem) => {\n  if (item.sourceUnavailableReason && item.sourceUnavailableAt) {\n    const dateStr = formatDate(item.sourceUnavailableAt);\n    return `Couldn't archive at ${dateStr}: ${item.sourceUnavailableReason}`;\n  } else {\n    return 'Not archived';\n  }\n};\n\nconst itemHeight = (item: EnrichedMediaItem) => {\n  // should exactly match all the displayIf's in the ItemAttrs of Item\n  const attrCount = [\n    true,\n    item.sourceUrl,\n    item.sourceTitle,\n    item.sourceAttribution,\n    item.sourceDuration,\n    item.archives[0],\n    item.archives[0]?.md5,\n    item.additionalKeywords.length > 0,\n    !item.archives[0],\n    item.mediaType === 'video',\n  ].filter((x) => !!x).length;\n\n  const heightInRem = (2 + attrCount * itemDivLineHeight) * itemDivFontSizeRem;\n\n  // 16px is the default rem. Seems to work great, even when you zoom.\n  // Add one for the border.\n  return heightInRem * 16 + 1;\n};\n\nconst Item = ({\n  item,\n  annotationLinkPath,\n  style,\n}: {\n  item: EnrichedMediaItem;\n  annotationLinkPath: AnnotationLinkPathFn;\n  style?: React.CSSProperties;\n}) => {\n  const archive = item.archives[0];\n  return (\n    <ItemDiv id={item._id} style={style}>\n      <ItemAttr displayIf label=\"Media Item ID\">\n        {item._id}\n      </ItemAttr>\n      <ItemAttr displayIf={item.sourceUrl} label=\"Source URL\">\n        <a href={item.sourceUrl} target=\"_blank\" rel=\"noreferrer\">\n          {item.sourceUrl}\n        </a>\n      </ItemAttr>\n      <ItemAttr displayIf={item.sourceTitle} label=\"Title\">\n        {item.sourceTitle}\n      </ItemAttr>\n      <ItemAttr displayIf={item.sourceAttribution} label=\"by\">\n        {maybeLink({ text: item.sourceAttribution!, href: item.sourceAttributionUrl })}\n      </ItemAttr>\n      <ItemAttr displayIf={item.sourceDuration} label=\"Duration\">\n        {videoTimepointFormatter(item.sourceDuration)}\n      </ItemAttr>\n      <ItemAttr displayIf={archive} label=\"Archive\">\n        <ArchiveLink arch={archive} />\n      </ItemAttr>\n      <ItemAttr displayIf={archive?.md5} label=\"Archive md5\">\n        {archive?.md5}\n      </ItemAttr>\n      <ItemAttr displayIf={item.additionalKeywords.length > 0} label=\"Additional Terms\">\n        {item.additionalKeywords\n          .sort()\n          .map((str) => `\"${str}\"`)\n          .join(', ')}\n      </ItemAttr>\n      <ItemAttr displayIf={!archive} label=\"Archive\">\n        {notArchivedInfo(item)}\n      </ItemAttr>\n      {\n        // TODO: update this when annotator can handle image case...\n      }\n      <ItemAttr displayIf={item.mediaType === 'video'} label=\"Annotations\">\n        <Link to={annotationLinkPath(item)}>{item.annotationCount || '0'}</Link>\n      </ItemAttr>\n    </ItemDiv>\n  );\n};\n\nconst csvHeader = [\n  'id',\n  'sourceUrl',\n  'sourceTitle',\n  'sourceAttribution',\n  'sourceAttributionUrl',\n  'sourceDuration',\n  'archiveUrl',\n  'archivedAt',\n  'archiveWidth',\n  'archiveHeight',\n  'archiveMd5',\n  'additionalTerms',\n  'sourceUnavailableAt',\n  'sourceUnavailableReason',\n  'annotationCount',\n];\n\nconst itemAsCsvRow = (item: EnrichedMediaItem): { [k: string]: string | number | undefined } => {\n  const archive = item.archives[0];\n  return {\n    id: item._id,\n    sourceUrl: item.sourceUrl,\n    sourceTitle: item.sourceTitle,\n    sourceAttribution: item.sourceAttribution,\n    sourceAttributionUrl: item.sourceAttributionUrl,\n    sourceDuration: videoTimepointFormatter(item.sourceDuration),\n    archiveUrl: archive?.archiveUrl,\n    archivedAt: formatDate(archive?.archivedAt),\n    archiveWidth: archive?.width,\n    archiveHeight: archive?.height,\n    archiveMd5: archive?.md5,\n    additionalTerms: `${item.additionalKeywords.sort().join(', ')}`,\n    sourceUnavailableAt: formatDate(item.sourceUnavailableAt),\n    sourceUnavailableReason: item.sourceUnavailableReason,\n    annotationCount: item.annotationCount,\n  };\n};\n\n// Workaround b/c react-csv's claimed lazy-loading of data doesn't work...\n// https://github.com/react-csv/react-csv/issues/72#issuecomment-1018081533\nconst LinkForCsvDownload = ({\n  items,\n  disabled,\n}: {\n  items: EnrichedMediaItem[];\n  disabled: boolean;\n}) => {\n  const [initiated, setInitiated] = useState<boolean>(false);\n  const itemsForCsv = items.map((i) => itemAsCsvRow(i));\n\n  useEffect(() => {\n    if (initiated) {\n      setInitiated(false);\n    }\n  }, [initiated]);\n\n  return (\n    <>\n      <Button\n        className=\"btn btn-link btn-sm\"\n        style={{ fontSize: '0.8rem', padding: '0 0 0.8rem 0' }}\n        variant=\"link\"\n        onClick={(e) => {\n          e.preventDefault();\n          setInitiated(true);\n        }}\n        disabled={disabled}\n      >\n        Download as CSV\n      </Button>\n      {initiated ? <CSVDownload data={itemsForCsv} headers={csvHeader} target=\"_blank\" /> : null}\n    </>\n  );\n\n  // return\n};\n\ntype AnnotationLinkPathFn = (item: EnrichedMediaItem) => string;\n\ntype Props = {\n  ready: boolean;\n  items: EnrichedMediaItem[];\n  annotationLinkPath: AnnotationLinkPathFn;\n};\n\ntype MediaTypeFilter = 'video' | 'photo' | '';\ntype IsArchivedFilter = 'yes' | 'no' | '';\n\ntype Filters = {\n  mediaType: MediaTypeFilter;\n  keywordFilter: KeywordFilter;\n  isArchived: IsArchivedFilter;\n};\n\nconst matchesMediaType = (item: EnrichedMediaItem, mediaType: MediaTypeFilter): boolean =>\n  mediaType === '' || item.mediaType === mediaType;\n\nconst itemMatchesKeywordFilter = (\n  item: EnrichedMediaItem,\n  keywordFilter: KeywordFilter\n): boolean => {\n  const itemFields = [\n    item._id,\n    item.sourceTitle,\n    item.sourceUrl,\n    item.sourceAttribution,\n    item.sourceAttributionUrl,\n    ...item.archives.map((arch) => arch.archiveUrl),\n    ...item.additionalKeywords,\n  ].filter((field) => field) as string[];\n\n  return isKeywordFilterMatch(itemFields, keywordFilter.parsed);\n};\n\nconst matchesIsArchived = (item: EnrichedMediaItem, isArchived: IsArchivedFilter): boolean => {\n  if (isArchived === 'yes' && item.archives.length === 0) {\n    return false;\n  }\n  if (isArchived === 'no' && item.archives.length !== 0) {\n    return false;\n  }\n  return true;\n};\n\nconst matchesFilters = (item: EnrichedMediaItem, filters: Filters): boolean =>\n  matchesMediaType(item, filters.mediaType) &&\n  matchesIsArchived(item, filters.isArchived) &&\n  itemMatchesKeywordFilter(item, filters.keywordFilter);\n\nconst FilterControls = ({\n  filters,\n  setFilters,\n  setWaitingForDebounce,\n}: {\n  filters: Filters;\n  setFilters: (f: Filters) => void;\n  setWaitingForDebounce: (v: boolean) => void;\n}) => {\n  const [keywordInputVal, setKeywordInputVal] = useState<string>('');\n  const [debouncedKeywordInputVal, isWaitingDebounce] = useDebouncedValueWithWaitingIndicator(\n    200,\n    keywordInputVal\n  );\n\n  useEffect(() => {\n    setFilters({\n      ...filters,\n      keywordFilter: keywordFilterFromTextInput(debouncedKeywordInputVal),\n    });\n  }, [debouncedKeywordInputVal]);\n\n  useEffect(() => {\n    setWaitingForDebounce(isWaitingDebounce);\n  }, [isWaitingDebounce]);\n\n  return (\n    <FilterControlsDiv>\n      <div className=\"form-group col\" style={{ flex: '0 0 10rem' }}>\n        <label htmlFor=\"mediaType-filter\" className=\"mb-0\">\n          Media Type\n          <select\n            className=\"form-control form-control-sm\"\n            name=\"mediaType-filter\"\n            id=\"mediaType-filter\"\n            value={filters.mediaType}\n            onChange={(e) =>\n              setFilters({ ...filters, mediaType: e.target.value as MediaTypeFilter })\n            }\n          >\n            {\n              // enable Any and Photo options when ready\n            }\n            <option value=\"\" disabled>\n              Any\n            </option>\n            <option value=\"video\">Video</option>\n            <option value=\"photo\" disabled>\n              Photo\n            </option>\n          </select>\n        </label>\n      </div>\n      <div className=\"form-group col\" style={{ flex: '0 0 20rem' }}>\n        <label htmlFor=\"keywords\" className=\"mb-0\">\n          Keywords\n          <input\n            className=\"form-control form-control-sm\"\n            name=\"keywords\"\n            id=\"keywords\"\n            type=\"text\"\n            value={keywordInputVal}\n            onChange={(e) => {\n              setKeywordInputVal(e.target.value);\n            }}\n          />\n        </label>\n        <small className=\"form-text text-muted\">\n          To exclude terms, precede those terms with &quot;<b>-</b>&quot;\n        </small>\n      </div>\n      <div className=\"form-group col\" style={{ flex: '0 0 10rem' }}>\n        <label htmlFor=\"isArchived\" className=\"mb-0\">\n          Archive status\n          <select\n            className=\"form-control form-control-sm\"\n            name=\"isArchived\"\n            value={filters.isArchived}\n            onChange={(e) =>\n              setFilters({ ...filters, isArchived: e.target.value as IsArchivedFilter })\n            }\n          >\n            <option value=\"\">Any</option>\n            <option value=\"yes\">Archived</option>\n            <option value=\"no\">Not archived</option>\n          </select>\n        </label>\n      </div>\n    </FilterControlsDiv>\n  );\n};\n\nconst FilteredItems = ({\n  items,\n  filters,\n  annotationLinkPath,\n  waitingForDebounce,\n}: {\n  items: EnrichedMediaItem[];\n  filters: Filters;\n  annotationLinkPath: AnnotationLinkPathFn;\n  waitingForDebounce: boolean;\n}) => {\n  const itemsForDisplay = items.filter((item) => matchesFilters(item, filters));\n  return (\n    <>\n      <ResultsSummaryDiv>\n        {waitingForDebounce ? (\n          'Updating...'\n        ) : (\n          <>\n            {itemsForDisplay.length} items{' '}\n            {itemsForDisplay.length !== items.length ? `of ${items.length} ` : null}\n          </>\n        )}\n        &bull;&nbsp;\n        <LinkForCsvDownload items={itemsForDisplay} disabled={waitingForDebounce} />\n      </ResultsSummaryDiv>\n\n      <ItemsContainerDiv>\n        {itemsForDisplay.length > 0 ? (\n          <AutoSizer>\n            {({ height, width }) => (\n              <List\n                height={height}\n                itemCount={itemsForDisplay.length}\n                itemSize={(index) => itemHeight(itemsForDisplay[index])}\n                width={width}\n              >\n                {({ index, style }: { index: number; style: React.CSSProperties }) => (\n                  <Item\n                    item={itemsForDisplay[index]}\n                    style={style}\n                    annotationLinkPath={annotationLinkPath}\n                  />\n                )}\n              </List>\n            )}\n          </AutoSizer>\n        ) : (\n          <ItemDiv>\n            <div className=\"item-attr\">\n              <div className=\"label\" />\n              <div className=\"content\">No matches</div>\n            </div>\n          </ItemDiv>\n        )}\n      </ItemsContainerDiv>\n    </>\n  );\n};\n\nconst MediaItemsOverview = ({ ready, items, annotationLinkPath }: Props) => {\n  const [filters, setFilters] = useState<Filters>({\n    keywordFilter: keywordFilterFromTextInput(''),\n    isArchived: '',\n    mediaType: 'video',\n  });\n  const [waitingForDebounce, setWaitingForDebounce] = useState<boolean>(false);\n\n  if (!ready) {\n    return (\n      <div style={{ padding: '1.6rem' }}>\n        <p>Loading (please be patient)...</p>\n        <br />\n        <Spinner animation=\"border\" role=\"status\" variant=\"secondary\">\n          <span className=\"sr-only\">Loading</span>\n        </Spinner>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      style={{\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        height: 'calc(100vh - 1px)', // the -1px prevents apperance of unnecessary scrollbars\n        alignItems: 'stretch',\n        justifyContent: 'flex-start',\n      }}\n    >\n      <h1 style={{ flex: '0 0 3rem', padding: '0.4rem 0 0 1.6rem' }}>Media Items</h1>\n      <FilterControls\n        filters={filters}\n        setFilters={setFilters}\n        setWaitingForDebounce={setWaitingForDebounce}\n      />\n      <FilteredItems\n        items={items}\n        filters={filters}\n        annotationLinkPath={annotationLinkPath}\n        waitingForDebounce={waitingForDebounce}\n      />\n    </div>\n  );\n};\n\nexport default MediaItemsOverview;\n","import React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { Link } from 'react-router-dom';\nimport { Tweet } from 'react-twitter-widgets';\n\nimport styled from 'styled-components';\n\nimport { PROJECT_CONFIG } from '@jan6evidence/settings';\n\nimport { PageHeaderAndNav } from './PageHeaderAndNav';\n\nimport Container from './shared/Container';\nimport { AppWrapper } from './table-styled-components';\n\nconst ResourcesDiv = styled.div`\n  display: flex;\n  margin-left: auto;\n  margin-right: auto;\n  max-width: 800px;\n`;\n\nconst ResourcesColumn = styled.div`\n  padding: 30px;\n  * + h2 {\n    margin-top: 2rem;\n  }\n`;\n\nfunction ResourcesPage() {\n  return (\n    <ResourcesDiv>\n      <ResourcesColumn>\n        <h2>Resources for investigators of the Capitol Attack</h2>\n        <p>\n          <b>Read this first</b>\n        </p>\n        <ul>\n          <li>\n            <a href=\"https://www.technologyreview.com/2021/01/14/1015931/how-to-be-an-ethical-online-investigator-activist/\">\n              How to be an ethical online investigator\n            </a>\n          </li>\n        </ul>\n        <p>\n          <b>Locations</b>\n        </p>\n        <ul>\n          <li>\n            US Capitol Map:{' '}\n            <a href=\"https://drive.google.com/file/d/1aQFDTYoTsYLRJ3qbPS7-4uMKEWtM6iRQ/view?usp=sharing\">\n              Grounds\n            </a>\n            ,{' '}\n            <a href=\"https://drive.google.com/file/d/1DhIuY_lp3UW3FhmJcZuT0fmYLwOZAvfQ/view?usp=sharing\">\n              First Floor\n            </a>\n            ,{' '}\n            <a href=\"https://drive.google.com/file/d/1NSQLNzefv9sowlu_pcQjHQC6he6ba5vr/view?usp=sharing\">\n              Second Floor\n            </a>\n            ,{' '}\n            <a href=\"https://drive.google.com/file/d/1--4oBRMUlYBaTRmB9YhvCXROuzvsO7JR/view?usp=sharing\">\n              Third Floor\n            </a>\n          </li>\n          <li>\n            Guide to recognizing US Capitol locations:{' '}\n            <a href=\"https://docs.google.com/document/d/1mC7V-FqjB4PzmAgzYlURG7AnGA_pdDnVsEh-7fFRToM/edit#heading=h.56y0ktk4a1f8\">\n              Exterior\n            </a>\n            ,{' '}\n            <a href=\"https://docs.google.com/document/d/1hxXJrKhtDyf-1anm6g-wgp9DNNiy0dJp4KJKiNlXyAU/edit#\">\n              Interior\n            </a>\n          </li>\n        </ul>\n        <p>\n          <b>Timing</b>\n        </p>\n        <ul>\n          <li>\n            <a href=\"https://docs.google.com/document/d/1uzKC6f9pPFQfBJM_jO-iNeFXQlZIP4ad_J4vizClENI/edit\">\n              Capitol Siege Timeline\n            </a>\n          </li>\n          <li>\n            <a href=\"https://docs.google.com/document/d/1aoUBFlERClHrNOoufBMiC7p0M15PrvyjM371sIG02Jw/edit\">\n              Visual Clues for Timing Capitol Siege Footage\n            </a>\n          </li>\n        </ul>\n        <p>\n          <b>Persons of Interest</b>\n        </p>\n        <ul>\n          <li>\n            <a href=\"https://jan6attack.com/individuals.htm\">Jan6Attack.com: Individuals</a>\n          </li>\n          <li>\n            <a href=\"https://docs.google.com/spreadsheets/d/18NzncPJ-5oaYrDfq_VnjaSTLyY_vKaoSTgc6lznl9GU\">\n              Capitol Suspects Database\n            </a>\n          </li>\n          <li>\n            <a href=\"https://seditionhunters.org/perpsheet/\">Sedition Hunters: Perp Sheet</a>\n          </li>\n          <li>\n            <a href=\"https://www.fbi.gov/wanted/capitol-violence\">\n              FBI Most Wanted: Capitol Violence\n            </a>\n          </li>\n          <li>\n            <a href=\"https://mpdc.dc.gov/page/may-2020-february-2021-unrest-related-arrests-and-persons-interest\">\n              Metro Police Department: Persons of Interest\n            </a>\n          </li>\n          <li>\n            <a href=\"https://www.justice.gov/usao-dc/capitol-breach-cases\">\n              Department of Justice Cases\n            </a>\n          </li>\n        </ul>\n        <p>\n          <b>Other Tools</b>\n        </p>\n        <ul>\n          <li>\n            <a href=\"http://bit.ly/bcattools\">Bellingcat&rsquo;s Online Investigation Toolkit</a>\n          </li>\n          <li>\n            <a href=\"https://www.detrumpify.org/pb_j6_marchers.php\">Detrumpify.org</a>\n          </li>\n          <li>\n            <a href=\"https://facesoftheriot.com/\">Faces of the Riot</a>\n          </li>\n          <li>\n            <a href=\"https://jan6attack.com\">Jan6Attack.com</a>\n          </li>\n          <li>\n            <a href=\"https://jan6archive.com\">Jan6Archive.com</a>\n          </li>\n          <li>\n            <a href=\"https://ne0ndistraction.github.io/posts/\">ne0ndistraction: Parler Posts</a>\n          </li>\n          <li>\n            <a href=\"http://capitolmap.com/faces\">Patr10tic: Facial Recognition Tools</a>\n          </li>\n          <li>\n            <a href=\"https://projects.propublica.org/parler-capitol-videos/\">\n              ProPublica: What Parler Saw\n            </a>\n          </li>\n          <li>\n            <a href=\"https://seditionhunters.org\">SeditionHunters.org</a>\n          </li>\n        </ul>\n      </ResourcesColumn>\n    </ResourcesDiv>\n  );\n}\n\nexport default ResourcesPage;\n","import React from 'react';\n\nimport { PROJECT_CONFIG } from '@jan6evidence/settings';\n\nimport OtherResources from './OtherResourcesPage';\nimport { PageHeaderAndNav } from './PageHeaderAndNav';\n\nimport { AppWrapper } from './table-styled-components';\n\nfunction StaticOtherResourcesPage() {\n  return (\n    <AppWrapper>\n      <PageHeaderAndNav projectConfig={PROJECT_CONFIG} />\n      <OtherResources />\n    </AppWrapper>\n  );\n}\n\nexport default StaticOtherResourcesPage;\n","// scraped from https://www.fbi.gov/wanted/capitol-violence\nimport FBI_POI_LINKS from './fbi_poi_links.json';\n\ntype numToStrObj = { [k: number]: string };\n\nconst getFbiLinksByFbiNumber = (): numToStrObj => {\n  let result: numToStrObj = {};\n  FBI_POI_LINKS.forEach((link: string) => {\n    const regexMatch = link.match(/\\d+/);\n    if (regexMatch && regexMatch[0]) {\n      const num = parseInt(regexMatch[0], 10);\n      if (num && !result[num]) {\n        result[num] = link;\n      }\n    }\n  });\n  return result;\n};\n\nexport const fbiLinksByFbiNumber = getFbiLinksByFbiNumber();\n","export type TagDeclaration = {\n  mainTag: string;\n  alternateTags?: Array<string>;\n};\n\nexport class CanonicalTags {\n  private lookupTable: { [k: string]: string } = {};\n\n  warnings: Array<string> = [];\n\n  constructor(declarations: Array<TagDeclaration>) {\n    // loop through main tags first\n    declarations.forEach((dec) => this.addToStore(dec.mainTag, dec.mainTag));\n    // then loop through again to add the alternates\n    declarations.forEach((dec) =>\n      (dec.alternateTags || []).forEach((altTag) => this.addToStore(altTag, dec.mainTag))\n    );\n  }\n\n  logWarningsToConsole() {\n    /* eslint-disable-next-line no-console */\n    this.warnings.forEach((msg) => console.warn(msg));\n  }\n\n  lookup(key: string): string | undefined {\n    const cleanedKey = this.cleanLookupKey(key);\n    return this.lookupTable[cleanedKey];\n  }\n\n  allCanonicalTags(): Set<string> {\n    return new Set(Object.values(this.lookupTable));\n  }\n\n  private addToStore(key: string, mainTag: string) {\n    const currentValue = this.lookup(key);\n    if (currentValue && currentValue === mainTag) {\n      this.warnings.push(\n        `Already stored ${currentValue} as canonical form of ${key}, ignoring duplicate`\n      );\n      return;\n    }\n    if (currentValue && currentValue !== mainTag) {\n      this.warnings.push(\n        `Already stored ${currentValue} as canonical form of ${key}, ignoring new value ${mainTag}`\n      );\n      return;\n    }\n    const cleanedKey = this.cleanLookupKey(key);\n    // use canonical form of mainTag if one already exists\n    this.lookupTable[cleanedKey] = this.lookup(mainTag) || mainTag.trim();\n  }\n\n  private cleanLookupKey(key: string): string {\n    return key.trim().toLowerCase();\n  }\n}\n","export { fbiLinksByFbiNumber } from './fbi_links';\n\nimport suspectData from './suspects.json';\nimport nonSuspectHashtagData from './non-suspect-hashtags.json';\nimport { CanonicalTags } from '@jan6evidence/canonical_tags';\nimport { Suspect, getSuspectsFromRawData } from '@jan6evidence/types';\n\nexport const suspects = getSuspectsFromRawData(suspectData);\n\n// most callers will just want to use `canonicalSuspectTags`, but the suspect import script needs\n// to call the getCanonicalSuspectTags function directly.\nexport const getCanonicalSuspectTags = (suspects: Array<Suspect>): CanonicalTags => {\n  const tags = new CanonicalTags(\n    suspects.flatMap((s) =>\n      // ignore suspects without hashtags\n      s.primaryHashtag ? [{ mainTag: s.primaryHashtag, alternateTags: s.alternateHashtags }] : []\n    )\n  );\n  tags.logWarningsToConsole();\n  return tags;\n};\n\nexport const canonicalSuspectTags = getCanonicalSuspectTags(suspects);\n\nexport const nonSuspectHashtags = nonSuspectHashtagData;\n\nexport const getCanonicalNonsuspectHashtag = (\n  str: string\n): { topicName: string; topicType: string } | undefined => {\n  for (let i = 0; i < nonSuspectHashtags.length; i++) {\n    if (nonSuspectHashtags[i].topicName.toLowerCase() === str.toLowerCase().trim()) {\n      return nonSuspectHashtags[i];\n    }\n  }\n  return undefined;\n};\n","export type SuspectTag = {\n  type: string; // should be 'group' | 'equipment' | 'behavior' but running into problems...\n  name: string;\n};\n\nexport type Suspect = {\n  _id: string;\n  primaryHashtag?: string; // can be missing for arrested individuals who were not previously hashtagged\n  compositeURL?: string;\n  filesUrl?: string;\n  alternateHashtags: Array<string>;\n  fbiIdentifier?: string;\n  isMpdSuspect?: boolean;\n  idStatus?: string;\n  caseStatus?: string;\n  profileLeads: Array<string>;\n  actionsSummary?: string;\n  appearanceSummary?: string;\n  associates: Array<string>; // tags of other individuals\n  otherTags: Array<SuspectTag>;\n\n  // The following should only be populated if there is a charging document\n  chargingDocUrl?: string;\n  realName?: string; // Only if arrested or charged.  No DOXXING!\n  arrestDate?: Date;\n  arrestState?: string; // Only if arrested or charged.  No DOXXING!\n  caseIdentifier?: string;\n  militaryBranchAffiliation?: string;\n  isLawEnforcement?: boolean;\n};\n\nconst toDate = (str: string | undefined): Date | undefined => {\n  if (!str) {\n    return undefined;\n  }\n  try {\n    return new Date(str);\n  } catch {\n    return undefined;\n  }\n};\n\nexport const getSuspectsFromRawData = (items: any[]): Suspect[] =>\n  items.map((item) => {\n    const arrestDate = toDate(item.arrestDate);\n    return {\n      ...item,\n      arrestDate,\n    } as Suspect;\n  });\n","/* eslint-disable no-console */\n\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport styled from 'styled-components';\n\nimport { fbiLinksByFbiNumber } from '@jan6evidence/data/fbi_links';\nimport POI_THUMBNAIL_DATA_CACHE from '@jan6evidence/data/poi_thumbnail_data_cache.json';\nimport {\n  KeywordFilter,\n  keywordFilterFromTextInput,\n  isKeywordFilterMatch,\n  YesNoEitherFilter,\n  isYesNoFilterMatch,\n} from '@jan6evidence/filters';\nimport { Suspect } from '@jan6evidence/types';\n\nimport LoadState from '../types/LoadState';\n\nimport { QueryState, useDebouncedValueWithWaitingIndicator, useQueryState } from './shared/hooks';\n\nexport const SuspectCardDiv = styled.div`\n  padding: 0.25rem;\n  flex: auto;\n  min-width: 8rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 280px;\n  margin: 10px 5px;\n  vertical-align: top;\n`;\n\nexport const SuspectThumbnailImg = styled.img`\n  width: auto;\n  height: 200px;\n  vertical-align: middle;\n  border: solid 1px #eee;\n`;\n\nexport const OverviewContainerDiv = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  border-top: solid 1px #ccc;\n`;\n\nconst FilterControlsDiv = styled.div`\n  flex: 0 0 5.5rem;\n  font-size: 0.8rem;\n  padding: 0.8rem 15px;\n  display: flex;\n`;\n\nconst thumbnailFilename = (hashtag: string | undefined): string => {\n  const lookupKey: string = hashtag?.toLowerCase() || 'no_such_key';\n  // @ts-ignore\n  const lookupResult: any = POI_THUMBNAIL_DATA_CACHE[lookupKey];\n  return lookupResult?.thumbnailFilename || 'not_found.png';\n};\n\nexport const SuspectThumbnail = ({ primaryHashtag }: { primaryHashtag: string | undefined }) => {\n  const filename = thumbnailFilename(primaryHashtag);\n  const thumbnailSrcUrl = `/poi_thumbnails/${filename}`;\n  return <SuspectThumbnailImg src={thumbnailSrcUrl} alt={`${primaryHashtag} thumbnail image`} />;\n};\n\n// For now, point to TommyC's site. Replace with our own detail page once we have it!\nconst detailUrl = (suspect: Suspect): string => `gallery/${suspect.primaryHashtag}`;\n\nconst twitterSearchUrl = (suspect: Suspect): string =>\n  `https://twitter.com/search?q=${suspect.primaryHashtag}`;\n\nconst getFbiLink = (suspect: Suspect) => {\n  if (!suspect.fbiIdentifier) {\n    return null;\n  }\n  const fbiNumberMatch = suspect.fbiIdentifier.match(/\\d+/);\n  if (!fbiNumberMatch) {\n    return null;\n  }\n  const caption = `FBI: ${suspect.fbiIdentifier}`;\n  const fbiUrl = fbiLinksByFbiNumber[parseInt(fbiNumberMatch[0], 10)];\n  if (fbiUrl) {\n    return <a href={fbiUrl}>{caption}</a>;\n  } else {\n    return <span>{caption}</span>;\n  }\n};\n\nconst SuspectCard = ({\n  suspect,\n  onDetailClick,\n}: {\n  suspect: Suspect;\n  onDetailClick: () => void;\n}) => {\n  if (!suspect.primaryHashtag) {\n    return null;\n  }\n  const fbiLink = getFbiLink(suspect);\n  return (\n    <SuspectCardDiv data-title={`suspect-${suspect._id}`}>\n      <Link to={detailUrl(suspect)} onClick={onDetailClick}>\n        <SuspectThumbnail primaryHashtag={suspect.primaryHashtag} />\n      </Link>\n      <a href={twitterSearchUrl(suspect)}>#{suspect.primaryHashtag}</a>\n      {fbiLink || <span>&nbsp;</span>}\n    </SuspectCardDiv>\n  );\n};\n\n/// ///////\n// Filters\n/// ///////\n\nexport type SuspectFilters = {\n  keyword: KeywordFilter;\n  hasFbiIdentifier: YesNoEitherFilter;\n  hasBeenCharged: YesNoEitherFilter;\n};\n\nconst suspectMatchesKeywordFilter = (s: Suspect, keywordFilter: KeywordFilter): boolean => {\n  const itemFields = [\n    s.primaryHashtag,\n    ...s.alternateHashtags,\n    s.fbiIdentifier,\n    s.realName,\n    ...s.otherTags.map((t) => t.name),\n  ].filter((field) => field) as string[];\n\n  return isKeywordFilterMatch(itemFields, keywordFilter.parsed);\n};\n\nconst suspectMatchesFbiFilter = (s: Suspect, fbiFilter: YesNoEitherFilter): boolean =>\n  isYesNoFilterMatch(!!s.fbiIdentifier, fbiFilter);\n\nconst suspectMatchesChargedFilter = (\n  s: Suspect,\n  hasBeenChargedFilter: YesNoEitherFilter\n): boolean => isYesNoFilterMatch(!!s.chargingDocUrl, hasBeenChargedFilter);\n\nconst applyFilters = (filters: SuspectFilters, suspects: Suspect[]): Suspect[] =>\n  suspects.filter(\n    (s) =>\n      suspectMatchesChargedFilter(s, filters.hasBeenCharged) &&\n      suspectMatchesFbiFilter(s, filters.hasFbiIdentifier) &&\n      suspectMatchesKeywordFilter(s, filters.keyword)\n  );\n\nconst countMessage = (filteredCount: number, totalCount: number): string =>\n  [\n    filteredCount,\n    filteredCount === 1 ? 'person' : 'persons',\n    totalCount !== filteredCount ? `of ${totalCount}` : '',\n  ]\n    .join(' ')\n    .trim();\n\nconst FilterControls = ({\n  filters,\n  updateFilters,\n  totalCount,\n  filteredCount,\n  keywordInputVal,\n  setKeywordInputVal,\n  isWaitingDebounce,\n}: {\n  filters: SuspectFilters;\n  updateFilters: (f: Partial<SuspectFilters>) => void;\n  totalCount: number;\n  filteredCount: number;\n  keywordInputVal: string;\n  setKeywordInputVal: (val: string) => void;\n  isWaitingDebounce: boolean;\n}) => {\n  return (\n    <FilterControlsDiv>\n      <div className=\"form-group col\" style={{ flex: '0 0 16rem' }}>\n        <label htmlFor=\"keywords\" className=\"mb-0\">\n          Keywords and Tags\n          <input\n            className=\"form-control form-control-sm\"\n            name=\"keywords\"\n            id=\"keywords\"\n            type=\"text\"\n            value={keywordInputVal}\n            onChange={(e) => setKeywordInputVal(e.target.value)}\n            style={{ width: '15rem' }}\n          />\n        </label>\n        <small className=\"form-text text-muted\">\n          Exclude terms with with &quot;<b>-</b>&quot;\n        </small>\n      </div>\n      <div className=\"form-group col\" style={{ flex: '0 0 9rem' }}>\n        <label htmlFor=\"hasFbiIdentifier\" className=\"mb-0\">\n          Has FBI Identifier?\n          <select\n            className=\"form-control form-control-sm\"\n            name=\"hasFbiIdentifier\"\n            value={filters.hasFbiIdentifier}\n            onChange={(e) => {\n              updateFilters({ hasFbiIdentifier: e.target.value as YesNoEitherFilter });\n            }}\n          >\n            <option value=\"\"> </option>\n            <option value=\"yes\">Yes</option>\n            <option value=\"no\">No</option>\n          </select>\n        </label>\n      </div>\n      <div className=\"form-group col\" style={{ flex: '0 0 10rem' }}>\n        <label htmlFor=\"hasBeenCharged\" className=\"mb-0\">\n          Has been charged?\n          <select\n            className=\"form-control form-control-sm\"\n            name=\"hasBeenCharged\"\n            value={filters.hasBeenCharged}\n            onChange={(e) => {\n              updateFilters({ hasBeenCharged: e.target.value as YesNoEitherFilter });\n            }}\n          >\n            <option value=\"\"> </option>\n            <option value=\"yes\">Yes</option>\n            <option value=\"no\">No</option>\n          </select>\n        </label>\n      </div>\n      <div className=\"form-group col\" style={{ flex: '0 0 12rem', fontSize: '0.9rem' }}>\n        <br />\n        {isWaitingDebounce ? 'Updating...' : countMessage(filteredCount, totalCount)}\n      </div>\n    </FilterControlsDiv>\n  );\n};\n\nconst SuspectOverview = ({\n  filteredSuspects,\n  loadState,\n  loadError,\n  onDetailClick,\n}: {\n  filteredSuspects: Array<Suspect>;\n  loadState: LoadState;\n  loadError?: string;\n  onDetailClick: () => void;\n}) => {\n  // For a more responsive UI, render the first 20 suspects first, then add the rest.\n  const PARTIAL_RENDER_LENGTH = 20;\n  const [isPartialRender, setIsPartialRender] = useState<boolean>(true);\n  useEffect(() => {\n    setIsPartialRender(true);\n  }, [filteredSuspects]);\n  useEffect(() => {\n    // after a partial render, re-render with the full list\n    if (isPartialRender) {\n      setIsPartialRender(false);\n    }\n  });\n\n  return (\n    <OverviewContainerDiv>\n      {loadState === LoadState.LOADING ? <SuspectCardDiv>Loading...</SuspectCardDiv> : null}\n      {loadState === LoadState.ERROR ? <SuspectCardDiv>Error: {loadError}</SuspectCardDiv> : null}\n      {(isPartialRender ? filteredSuspects.slice(0, PARTIAL_RENDER_LENGTH) : filteredSuspects).map(\n        (suspect) => (\n          <SuspectCard key={suspect._id} suspect={suspect} onDetailClick={onDetailClick} />\n        )\n      )}\n    </OverviewContainerDiv>\n  );\n};\n\nconst MemoizedSuspectOverview = React.memo(SuspectOverview);\n\nconst filtersFromQueryState = (queryState: QueryState): SuspectFilters => ({\n  keyword: keywordFilterFromTextInput(typeof queryState.kw === 'string' ? queryState.kw : ''),\n  hasBeenCharged: (typeof queryState.charged === 'string' &&\n  ['yes', 'no'].includes(queryState.charged)\n    ? queryState.charged\n    : '') as YesNoEitherFilter,\n  hasFbiIdentifier: (typeof queryState.fbi === 'string' && ['yes', 'no'].includes(queryState.fbi)\n    ? queryState.fbi\n    : '') as YesNoEitherFilter,\n});\n\nconst queryStateUpdateFromNewFilters = (newFilters: Partial<SuspectFilters>) => {\n  const result: any = {};\n  if ('keyword' in newFilters) {\n    result.kw = newFilters.keyword?.text || undefined;\n  }\n  if ('hasBeenCharged' in newFilters) {\n    result.charged = newFilters.hasBeenCharged || undefined;\n  }\n  if ('hasFbiIdentifier' in newFilters) {\n    result.fbi = newFilters.hasFbiIdentifier || undefined;\n  }\n  return result;\n};\n\nconst queryStateFilterParams = (queryState: QueryState): string[] => [\n  queryState.kw as string,\n  queryState.charged as string,\n  queryState.fbi as string,\n];\n\nconst SuspectsGallery = ({\n  suspects,\n  loadState,\n  loadError,\n  setPrevSuspectFilters,\n}: {\n  suspects: Array<Suspect>;\n  loadState: LoadState;\n  loadError?: string;\n  setPrevSuspectFilters: (sf: SuspectFilters | undefined) => void;\n}) => {\n  const [queryState, updateQueryState] = useQueryState(false, true);\n  const filters = filtersFromQueryState(queryState);\n\n  const filteredSuspects = useMemo(() => {\n    return applyFilters(filters, suspects);\n  }, [...queryStateFilterParams(queryState), suspects]);\n\n  const onDetailClick = useCallback(() => {\n    setPrevSuspectFilters(filters);\n  }, [...queryStateFilterParams(queryState)]);\n\n  const updateFilters = (newFilters: Partial<SuspectFilters>) => {\n    updateQueryState((prevState) => ({\n      ...prevState,\n      ...queryStateUpdateFromNewFilters(newFilters),\n    }));\n  };\n\n  const [keywordInputVal, setKeywordInputVal] = useState(filters.keyword.text);\n\n  const [debouncedKeywordInputVal, isWaitingDebounce] = useDebouncedValueWithWaitingIndicator(\n    200,\n    keywordInputVal\n  );\n\n  useEffect(() => {\n    const sanitizedInput = debouncedKeywordInputVal.replace(/#/, '');\n    updateFilters({\n      keyword: keywordFilterFromTextInput(sanitizedInput),\n    });\n  }, [debouncedKeywordInputVal]);\n\n  return (\n    <div>\n      <div style={{ margin: '30px 30px 0px', maxWidth: '800px' }}>\n        <h2>Persons-of-Interest Gallery</h2>\n        <p style={{ fontSize: '0.9rem', marginBottom: '0px' }}>\n          Data from the{' '}\n          <a href=\"https://docs.google.com/spreadsheets/d/18NzncPJ-5oaYrDfq_VnjaSTLyY_vKaoSTgc6lznl9GU/edit#gid=0\">\n            Capitol Suspects Database\n          </a>\n          .\n        </p>\n      </div>\n      <FilterControls\n        filters={filters}\n        updateFilters={updateFilters}\n        totalCount={suspects.length}\n        filteredCount={filteredSuspects.length}\n        keywordInputVal={keywordInputVal}\n        setKeywordInputVal={setKeywordInputVal}\n        isWaitingDebounce={isWaitingDebounce}\n      />\n      <MemoizedSuspectOverview\n        filteredSuspects={filteredSuspects}\n        loadState={loadState}\n        loadError={loadError}\n        onDetailClick={onDetailClick}\n      />\n    </div>\n  );\n};\n\nexport default SuspectsGallery;\n","/* eslint-disable no-console */\n\nimport React, { FunctionComponent, useEffect, useState } from 'react';\n\nimport { useParams } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport { keywordFilterFromTextInput } from '@jan6evidence/filters';\nimport { Suspect, SuspectTag } from '@jan6evidence/types';\n\nimport LoadState from '../types/LoadState';\n\nimport { GalleryItem, GalleryItemsInventory } from './SuspectsApp';\nimport {\n  OverviewContainerDiv,\n  SuspectCardDiv,\n  SuspectFilters,\n  SuspectThumbnail,\n  SuspectThumbnailImg,\n} from './SuspectsGallery';\n\nconst SuspectProfileDiv = styled.div`\n  display: flex;\n  width: 40rem;\n`;\n\nconst SuspectAttrDiv = styled.div`\n  font-size: 0.8rem;\n  padding-bottom: 0.8rem;\n  // border-bottom: solid 1px #ccc;\n  line-height: 1.5;\n\n  display: flex;\n\n  .label {\n    flex: 0 0 10rem;\n    display: inline-block;\n    color: #aaa;\n    text-align: right;\n    padding-right: 0.8rem;\n    whitespace: nowrap;\n  }\n\n  .content {\n    flex: 1 0 0;\n    width: 30rem;\n    // overflow: hidden;\n    // white-space: nowrap;\n    // text-overflow: ellipsis;\n  }\n`;\n\nconst SuspectAttr: FunctionComponent<{ displayIf: any; label: string }> = ({\n  displayIf,\n  label,\n  children,\n}) => {\n  if (displayIf) {\n    return (\n      <SuspectAttrDiv>\n        <div className=\"label\">{label}</div>\n        <div className=\"content\">{children}</div>\n      </SuspectAttrDiv>\n    );\n  } else {\n    return null;\n  }\n};\n\nconst galleryLinkTo = (filters: Partial<SuspectFilters> | undefined): string => {\n  const components = [\n    ['kw', filters?.keyword?.text],\n    ['charged', filters?.hasBeenCharged],\n    ['fbi', filters?.hasFbiIdentifier],\n  ].filter(([_k, v]) => v) as [string, string][];\n  if (components.length === 0) {\n    return '/gallery';\n  } else {\n    const search = components.map(([k, v]: [string, string]) => `${k}=${v}`).join('&');\n    return `/gallery?${search}`;\n  }\n};\n\nconst OtherTags = ({ tags }: { tags: SuspectTag[] }) => {\n  if (tags.length === 0) {\n    return null;\n  }\n  const tagsByType: { [k: string]: string[] } = tags.reduce(\n    (acc: { [k: string]: string[] }, tag: SuspectTag) => {\n      if (!(tag.type in acc)) {\n        acc[tag.type] = [];\n      }\n      acc[tag.type].push(tag.name);\n      return acc;\n    },\n    {}\n  );\n\n  return (\n    <>\n      {[...Object.keys(tagsByType)].sort().map((tagType: string) => (\n        <SuspectAttr displayIf label={`${tagType[0].toUpperCase()}${tagType.slice(1)} tags`}>\n          {tagsByType[tagType].map((t: string) => (\n            <>\n              <Link to={galleryLinkTo({ keyword: keywordFilterFromTextInput(t) })}>#{t}</Link>{' '}\n            </>\n          ))}\n        </SuspectAttr>\n      ))}\n    </>\n  );\n};\n\nconst ArrestedAttrs = ({\n  suspect,\n  dateFormatter,\n}: {\n  suspect: Suspect;\n  dateFormatter: (d: Date) => string;\n}) => {\n  if (!suspect.chargingDocUrl) {\n    return null;\n  }\n  const msg = [\n    suspect.caseIdentifier ? `Case ${suspect.caseIdentifier}` : undefined,\n    suspect.arrestDate ? dateFormatter(suspect.arrestDate) : undefined,\n    suspect.arrestState,\n  ]\n    .filter((str) => str)\n    .join(', ');\n\n  return (\n    <>\n      <SuspectAttr displayIf label=\"Arrest docs\">\n        <a href={suspect.chargingDocUrl}>\n          {suspect.caseIdentifier ? `Case ${suspect.caseIdentifier}` : 'Arrest docs'}\n        </a>\n      </SuspectAttr>\n      <SuspectAttr displayIf={suspect.arrestDate} label=\"Arrested\">\n        {dateFormatter(suspect.arrestDate!)}\n        {suspect.arrestState ? ` in ${suspect.arrestState}` : null}\n      </SuspectAttr>\n      <SuspectAttr displayIf={suspect.realName} label=\"Arrest Name\">\n        {suspect.realName}\n      </SuspectAttr>\n    </>\n  );\n};\n\nconst OtherSuspectLink = ({ hashtag }: { hashtag: string }) => (\n  <Link to={`/gallery/${hashtag}`}>#{hashtag}</Link>\n);\n\nconst SuspectProfile = ({\n  suspect,\n  dateFormatter,\n}: {\n  suspect: Suspect;\n  dateFormatter: (d: Date) => string;\n}) => {\n  return (\n    <SuspectProfileDiv>\n      <SuspectThumbnail primaryHashtag={suspect.primaryHashtag} />\n      <div style={{ marginLeft: '2rem' }}>\n        <SuspectAttr displayIf={suspect.alternateHashtags.length > 0} label=\"Alt. hashtags\">\n          {suspect.alternateHashtags.map((t) => `#${t}`).join(', ')}\n        </SuspectAttr>\n        <SuspectAttr displayIf={suspect.fbiIdentifier} label=\"FBI Identifier\">\n          {suspect.fbiIdentifier}\n        </SuspectAttr>\n        <SuspectAttr displayIf={suspect.isMpdSuspect} label=\"MPD Person of Interest?\">\n          Yes\n        </SuspectAttr>\n        <SuspectAttr displayIf={suspect.caseStatus} label=\"Case Status\">\n          {suspect.caseStatus}\n        </SuspectAttr>\n        <ArrestedAttrs suspect={suspect} dateFormatter={dateFormatter} />\n        <SuspectAttr displayIf={suspect.idStatus} label=\"ID Status\">\n          {suspect.idStatus}\n        </SuspectAttr>\n        <SuspectAttr displayIf={suspect.actionsSummary} label=\"Observed Actions\">\n          {suspect.actionsSummary}\n        </SuspectAttr>\n        <SuspectAttr displayIf={suspect.appearanceSummary} label=\"Appearance Notes\">\n          {suspect.appearanceSummary}\n        </SuspectAttr>\n        <SuspectAttr displayIf={suspect.associates.length > 0} label=\"Associates\">\n          {suspect.associates.map((t: string) => (\n            <>\n              <OtherSuspectLink hashtag={t} />{' '}\n            </>\n          ))}\n        </SuspectAttr>\n        <OtherTags tags={suspect.otherTags} />\n      </div>\n    </SuspectProfileDiv>\n  );\n};\n\nconst SuspectDetailGallery = ({ galleryItems }: { galleryItems: GalleryItem[] }) => (\n  <OverviewContainerDiv>\n    {galleryItems.map((gItem) => (\n      <SuspectCardDiv data-title={`mediaItem-${gItem.mediaItemId}`}>\n        <a href={gItem.archiveUrl} target=\"_blank\" rel=\"noreferrer\">\n          <SuspectThumbnailImg\n            src={gItem.thumbnailUrl || gItem.archiveUrl}\n            alt={`thumbnail of media item ${gItem.mediaItemId}`}\n          />\n        </a>\n      </SuspectCardDiv>\n    ))}\n  </OverviewContainerDiv>\n);\n\nconst SuspectDetail = ({\n  suspects,\n  loadState,\n  loadError,\n  dateFormatter,\n  prevSuspectFilters,\n  detailItemsInventory,\n}: {\n  suspects: Suspect[];\n  loadState: LoadState;\n  loadError?: string;\n  dateFormatter: (d: Date) => string;\n  prevSuspectFilters: SuspectFilters | undefined;\n  detailItemsInventory: GalleryItemsInventory;\n}) => {\n  const { suspectTag } = useParams() as { suspectTag: string };\n\n  const suspect =\n    suspects.find((s) => s.primaryHashtag?.toLocaleLowerCase() === suspectTag.toLowerCase()) ||\n    undefined;\n\n  return (\n    <div>\n      <div style={{ margin: '30px 30px 0px', maxWidth: '800px' }}>\n        <p style={{ fontSize: '0.9rem', marginTop: '0px' }}>\n          <Link to={galleryLinkTo(prevSuspectFilters)}>Back to the gallery</Link>\n        </p>\n        <h2>#{suspect ? suspect.primaryHashtag : suspectTag}</h2>\n        {loadState === LoadState.LOADING ? <div>Loading...</div> : null}\n        {loadState === LoadState.ERROR ? <div>Error: {loadError}</div> : null}\n        {suspect ? (\n          <SuspectProfile suspect={suspect} dateFormatter={dateFormatter} />\n        ) : (\n          <p>#{suspectTag} not found</p>\n        )}\n      </div>\n      {suspect ? (\n        <SuspectDetailGallery\n          galleryItems={detailItemsInventory[suspect.primaryHashtag || ''] || []}\n        />\n      ) : null}\n    </div>\n  );\n};\n\nexport default SuspectDetail;\n","import { DateTime } from 'luxon';\nimport React, { useEffect, useState } from 'react';\n\nimport { Route, Switch, useRouteMatch } from 'react-router';\n\nimport { PROJECT_CONFIG } from '@jan6evidence/settings';\nimport type { Suspect } from '@jan6evidence/types';\n\nimport LoadState from '../types/LoadState';\n\nimport PageHeaderAndNav from './PageHeaderAndNav';\nimport SuspectDetail from './SuspectDetail';\nimport SuspectsGallery, { SuspectFilters } from './SuspectsGallery';\nimport { usePageTitle } from './shared/hooks';\nimport { AppWrapper } from './table-styled-components';\n\nexport type GalleryItem = {\n  mediaItemId: string;\n  archiveUrl: string;\n  thumbnailUrl?: string;\n};\n\nexport type GalleryItemsInventory = { [primaryTag: string]: GalleryItem[] };\n\ninterface SuspectsAppProps {\n  suspects: Suspect[];\n  loadState: LoadState;\n  loadError?: string | undefined;\n}\n\nconst SuspectsApp = (props: SuspectsAppProps) => {\n  usePageTitle('January 6 Persons of Interest');\n  const match = useRouteMatch();\n\n  const dateFormatter = (dateObj: Date) =>\n    DateTime.fromJSDate(dateObj, { zone: PROJECT_CONFIG.timeFormat.zone }).toFormat('yyyy-MM-dd');\n\n  const [prevSuspectFilters, setPrevSuspectFilters] = useState<SuspectFilters | undefined>(\n    undefined\n  );\n\n  // async loading of items to appear in suspect detail\n  const [detailItemsLoadState, setDetailItemsLoadState] = useState<LoadState>(LoadState.INIT);\n  const [detailItemsLoadError, setDetailItemsLoadError] = useState<string>('');\n  const [detailItemsInventory, setDetailItemsInventory] = useState<GalleryItemsInventory>({});\n\n  useEffect(() => {\n    fetch('/data/static-gallery-urls.json')\n      .then((response) => response.text())\n      .then((body) => {\n        const res = JSON.parse(body) as GalleryItemsInventory;\n        setDetailItemsInventory(res);\n        setDetailItemsLoadState(LoadState.LOADED);\n      })\n      .catch((error) => {\n        setDetailItemsLoadError(error.message);\n        setDetailItemsLoadState(LoadState.ERROR);\n      });\n  }, []);\n\n  return (\n    <Switch>\n      <Route path={`${match.path}/:suspectTag`}>\n        <SuspectDetail\n          suspects={props.suspects}\n          loadState={props.loadState}\n          loadError={props.loadError}\n          dateFormatter={dateFormatter}\n          prevSuspectFilters={prevSuspectFilters}\n          detailItemsInventory={detailItemsInventory}\n        />\n      </Route>\n      <Route path={match.path}>\n        <SuspectsGallery\n          suspects={props.suspects}\n          loadState={props.loadState}\n          loadError={props.loadError}\n          setPrevSuspectFilters={setPrevSuspectFilters}\n        />\n      </Route>\n    </Switch>\n  );\n};\n\nexport default SuspectsApp;\n","import React from 'react';\n\nimport { suspects } from '@jan6evidence/data';\nimport { PROJECT_CONFIG } from '@jan6evidence/settings';\n\nimport LoadState from '../types/LoadState';\n\nimport PageHeaderAndNav from './PageHeaderAndNav';\nimport SuspectsApp from './SuspectsApp';\nimport { AppWrapper } from './table-styled-components';\n\nconst StaticSuspectsApp = () => {\n  return (\n    <AppWrapper>\n      <PageHeaderAndNav projectConfig={PROJECT_CONFIG} />\n      <SuspectsApp suspects={suspects} loadState={LoadState.LOADED} />\n    </AppWrapper>\n  );\n};\n\nexport default StaticSuspectsApp;\n","import React from 'react';\nimport { Redirect, Route, Switch } from 'react-router';\n\nimport { PATHS } from '@jan6evidence/routes';\n\nimport Error404Page from './Error404Page';\nimport StaticAboutPage from './StaticAboutPage';\nimport StaticEvidencePage from './StaticEvidencePage';\nimport StaticMediaItemsPage from './StaticMediaItemsPage';\nimport StaticOtherResourcesPage from './StaticOtherResourcesPage';\nimport StaticSuspectsApp from './StaticSuspectsApp';\n\nfunction Routes() {\n  return (\n    <Switch>\n      <Route exact path=\"/\">\n        <Redirect to={PATHS.evidence} />\n      </Route>\n      <Route path={PATHS.about} component={StaticAboutPage} />\n      <Route path={PATHS.resources} component={StaticOtherResourcesPage} />\n      <Route path={PATHS.suspects} component={StaticSuspectsApp} />\n      <Route path={PATHS.evidence} exact component={StaticEvidencePage} />\n      <Route path={`${PATHS.evidence}/:detailId`} component={StaticEvidencePage} />\n      <Route path={PATHS.mediaItems} component={StaticMediaItemsPage} />\n      <Route component={Error404Page} />\n    </Switch>\n  );\n}\n\nexport default Routes;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\n\nimport './index.css';\nimport Routes from './ui/Routes';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <Routes />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}