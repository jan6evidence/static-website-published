{"version":3,"sources":["ui/shared/constants.ts","ui/PageHeaderAndNav.tsx","ui/table-styled-components.ts","ui/AboutPage.tsx","data.ts","ui/shared/mixins.ts","ui/Collection/collection-styled-components.ts","../../libs/formatters/index.ts","ui/shared/LocationLink.tsx","ui/shared/shared-styled-components.ts","ui/shared/Tag.tsx","ui/shared/util.ts","ui/EvidenceDetail/detail-styled-components.ts","ui/EvidenceDetail/evidenceFormUrl.ts","ui/EvidenceDetail/media-embeds.tsx","ui/EvidenceDetail/index.tsx","ui/shared/contexts.ts","ui/shared/hooks.ts","ui/EvidenceMain/evidence-results-styled-components.ts","ui/EvidenceMain/EvidenceMapbox.tsx","ui/EvidenceMain/Result.tsx","ui/EvidenceMain/EvidenceTable.tsx","ui/EvidenceMain/TimelineHelpers.tsx","ui/EvidenceMain/timeline/EvidenceStripe.tsx","ui/EvidenceMain/EvidenceTimeline.tsx","ui/EvidenceMain/index.tsx","ui/CollectionsApp.tsx","ui/Error404Page.tsx","ui/OtherResourcesPage.tsx","ui/FilterBox/filter-box-styled-components.ts","ui/FilterBox/ActiveFilters.tsx","ui/FilterBox/FilterChoiceBox.tsx","ui/FilterBox/KeywordSearch.tsx","ui/FilterBox/Section.tsx","ui/FilterBox/index.tsx","ui/FilterBox/filterEvidence.ts","ui/EvidenceApp.tsx","ui/StaticEvidencePage.tsx","../../data/fbi_links.ts","../../data/index.ts","ui/SuspectsGallery.tsx","ui/Header.tsx","ui/Row/row-styled-components.ts","ui/Row/Categories.tsx","ui/Row/index.tsx","ui/SuspectsTable.tsx","ui/SuspectsApp.tsx","ui/video-annotator/Portal.tsx","ui/video-annotator/NotesInput.tsx","ui/video-annotator/AnnotationForm.tsx","ui/video-annotator/Map.tsx","ui/video-annotator/VideoPlayer.tsx","ui/video-annotator/VideoAnnotatorPage.tsx","ui/Routes.tsx","index.tsx"],"names":["colors","shadows","padding","widths","PageHeaderDiv","styled","div","NavList","ul","UpdateDiv","navLinkOrText","to","text","isLink","PageHeaderAndNav","className","PATHS","evidence","suspects","about","resources","href","data-show-count","async","src","charSet","AppWrapper","TableWrapper","TableStyle","table","ScrollableTable","TableHead","thead","StickyTH","th","EvidenceResultsWrapper","EvidenceTableWrapper","EvidenceCount","AboutDiv","button","AboutPage","download","toDate","str","Date","toLatLng","location","jitterSeed","rand","randomSeed","create","lat","floatBetween","lng","REAL_TIME_START","UTC","REAL_TIME_END","chroma","scale","makeColor","timelineStartPercent","Math","floor","length","evidenceData","map","item","realTimeStart","realTimeEnd","time","max","min","getTime","toTimelinePercent","latLng","_id","undefined","color","suspectData","arrestDate","TextButton","css","LeftBox","CollectionsList","latLngFormatter","x","places","pow10","roundedX","round","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","format","toNdecimals","latStr","lngStr","LocationLink","name","googleMapUrl","target","rel","Pill","span","PillXButton","Tag","id","title","label","onDelete","style","backgroundColor","type","onClick","numberTimeFormatter","d","moment","tz","timeFormatter","realTimeRangeFormatter","formattedRealTimeStart","formattedRealTimeEnd","videoTimepointFormatter","timeSec","hhmmss","toISOString","substr","startsWith","slice","BORDER_RADIUS","MODAL_SPACING","ModalWrapper","section","Header","header","Buttons","nav","Content","main","buttonBorderWidth","Nav","formatTags","tags","join","evidenceUpdateFormUrl","formUrl","URL","formFields","usp","imageUrl","videoUrl","videoStartTimepoint","videoEndTimepoint","locationName","replace","suspectTags","otherTags","summary","rationale","Object","entries","forEach","key","value","trim","searchParams","append","bareMp4VideoTag","url","urlAsString","safeMakeUrl","hash","controls","embedTweet","tweetId","options","conversation","embedVideo","videoDetails","ytVideoId","toString","width","height","frameBorder","allow","allowFullScreen","youtubeIframe","videoId","archiveOrgVideoPath","archiveOrgVideoIframe","videoPath","megaVideoId","urlString","megaVideoIframe","vimeoId","vimeoIframe","profileId","embedUrl","border","overflow","scrolling","facebookIframe","_evidence","driveFileId","googleDriveIframe","embedId","rumbleIframe","instagramIframe","embedImage","hostname","match","matchResult","pathname","tweetIdFromUrl","alt","videoTimepointRow","formattedRange","startSec","endSec","formattedStart","formattedEnd","videoTimepointRangeFormatter","scope","EvidenceDetail","detailId","onClose","prev","next","history","useHistory","useLocation","handleOnClick","React","useCallback","push","search","isOpen","onRequestClose","contentLabel","overlay","zIndex","shouldCloseOnOverlayClick","Button","size","variant","disabled","HighlightContext","createContext","highlight","setHighlight","split","usePageTitle","useEffect","previousTitle","document","useQuery","URLSearchParams","useQueryState","query","qs","parse","useState","queryState","setQueryState","debouncedQueryState","delay","debouncedValue","setDebouncedValue","timer","setTimeout","clearTimeout","useDebouncedValue","stringify","nextQuery","updater","nextState","MapWrapper","EVIDENCE_COLORS","TimelineWrapper","HandleShape","svg","NoResults","capitolLatLng","evidenceLayerStyle","paint","evidenceHoverLayerStyle","source","Tooltip","EvidenceMapbox","onHover","locatedEvidence","filter","sort","a","b","geojson","features","geometry","coordinates","properties","parseFloatString","parseFloat","viewport","latitude","longitude","zoom","hoveredEvidence","setHoveredEvidence","onMapHover","event","feature","hoveredItem","find","onMapClick","clickedItem","hoverLayerFilter","onViewportChange","nextViewport","prevQueryState","mapboxApiAccessToken","mapStyle","interactiveLayerIds","data","isJan6Eastern","date","toEasternTimeString","forceIncludeDate","m","dateStr","timeStr","ResultThumbnail","cellData","formattedDuration","thumbnailUrl","toUpperCase","ResultSummary","ResultTags","ResultTime","alwaysIncludeDate","toRealTimeFieldStr","ResultLocation","cellDataGetter","rowData","makeCellRenderer","Component","EvidenceTable","results","getDetailPath","index","headerHeight","rowHeight","rowCount","rowGetter","rowClassName","onRowClick","onRowMouseOver","onRowMouseOut","noRowsRenderer","dataKey","cellRenderer","flexGrow","RAIL_HEIGHT","railOuterStyle","position","cursor","railInnerStyle","pointerEvents","SliderRail","getRailProps","Handle","domain","handle","percent","isRight","getHandleProps","left","transform","WebkitTapHighlightColor","role","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","marginTop","viewBox","points","Track","getTrackProps","borderRadius","Tick","tick","display","flexDirection","alignItems","fontSize","timelineTitle","Stripe","Link","EvidenceStripe","Consumer","onMouseOver","onMouseOut","memo","sliderStyle","DOMAIN_START","DOMAIN_END","EvidenceTimeline","values","startEndTimes","onChangeTimes","draggingValues","setDraggingValues","tickValues","range","mode","step","reversed","rootStyle","onUpdate","newValues","onChange","handles","right","tracks","ticks","count","Modal","setAppElement","EvidenceViewer","timedEvidence","setStartEndTimes","rootPath","useParams","get","prevEvidence","nextEvidence","closeModal","debouncedHighlight","f","wait","immediate","timeout","args","later","callNow","debounce","detailEvidence","r","i","Provider","CollectionsApp","isAdding","setIsAdding","newName","setNewName","useLocalStorage","collections","setCollections","collectionItems","items","useMemo","itemIds","indexOf","collection","onSubmit","e","preventDefault","htmlFor","Error404Div","Error404Page","ResourcesDiv","ResourcesColumn","ResourcesPage","Box","BoxHeader","Toggles","SectionHeader","h5","FilterPills","ActiveFilters","filters","choices","keywords","filterChoices","result","keys","filterKey","sectionFilters","sectionChoices","element","FilterChoiceBox","categoryId","selectedIds","setFilter","toggleSelection","newSelected","Set","has","delete","add","Form","Control","placeholder","ButtonGroup","toggle","vertical","choice","ToggleButton","checked","classnames","hidden","toLowerCase","includes","KeywordSearch","Section","children","FilterBox","toggles","onKeywordsChanged","onFilterChanged","onToggleChanged","removeOneFromSection","Switch","includeUntimestamped","evt","params","suspect","filterEvidence","rawKeywords","filteredEvidence","timelineFilteredEvidence","allLocations","allSuspects","allOtherTags","addFilterChoiceItem","filterChoiceMap","s","some","itemField","keyword","toLocaleLowerCase","doesEvidenceMatchKeywords","matchLocation","matchSuspects","tag","matchTags","matchTimeline","itemStart","itemEnd","rangeStart","rangeEnd","isItemInTimeRange","toArray","Array","isArray","MobileOverlay","open","setOpen","background","margin","EvidenceApp","props","other_tags","setToggles","parsedStartEndTimes","start_end_times","parseInt","newValue","prevState","queryKey","from","nextKeywords","oldToggles","newTimes","hideExplorerLink","StaticEvidencePage","fbiLinksByFbiNumber","FBI_POI_LINKS","link","regexMatch","num","getFbiLinksByFbiNumber","SuspectCardDiv","SuspectThumbnailImg","img","OverviewContainerDiv","SuspectThumbnail","primaryHashtag","filename","THUMBNAIL_FILENAMES","thumbnailSrcUrl","detailUrl","twitterSearchUrl","SuspectCard","fbiLink","fbiIdentifier","fbiNumberMatch","caption","fbiUrl","getFbiLink","data-title","SuspectsGallery","spec","tr","rowNum","colSpan","rowSpan","top","medText","CrimeCategories","CrimeCategory","li","HashtagCellWrapper","td","LinksCellWrapper","SummaryCellWrapper","Categories","category","present","SuspectPhoto","ImageCell","primaryPhotoUrl","photoURL","HashtagLink","hashtag","formattedHashtag","encodeURIComponent","HashtagCell","alternateHashtags","LinksCell","links","compositeURL","filesUrl","hasSuspectTag","TagsCell","TwitterUserLink","username","formattedUsername","ProfileLeadsCell","profileLeads","lead","SummaryCell","sections","body","actionsSummary","appearanceSummary","associates","Row","caseStatus","HEADER_SPEC","SuspectsTable","data-toggle","SuspectsTableApp","SuspectsApp","maxWidth","marginBottom","Portal","ReactDOM","createPortal","HASHTAGS","flatMap","insertHashtag","editor","Transforms","insertNodes","move","insertText","HashtagElement","attributes","contentEditable","selected","useSelected","focused","useFocused","boxShadow","Element","NotesInput","ref","useRef","setTarget","setIndex","setSearch","isInline","isVoid","withHashtags","withReact","withHistory","createEditor","suggestions","onKeyDown","prevIndex","nextIndex","select","el","current","rect","ReactEditor","toDOMRange","getBoundingClientRect","window","pageYOffset","pageXOffset","selection","Range","isCollapsed","edges","start","wordBefore","Editor","before","unit","beforeRange","beforeText","string","beforeMatch","after","afterRange","afterMatch","renderElement","minHeight","suggestion","onMouseEnter","onMouseDown","padTime","padStart","toDuration","seconds","hour","sec","initialNotes","AnnotationForm","onUrlChange","videoState","localStartTime","setLocalStartTime","notes","setNotes","localCurrentTime","secondsPlayed","findHashtags","node","videoTime","localTime","n","Node","hashtags","Boolean","classNames","state","aria-describedby","getHours","getMinutes","getSeconds","hours","minutes","Circle","Map","markerLatLng","onMarkerDrop","setViewport","lngLat","draggable","onDragEnd","initialState","VideoPlayer","forwardRef","setState","update","changes","newState","progressInterval","onProgress","progress","playedSeconds","onReady","onError","Layout","VideoAnnotatorPage","setUrl","setMarkerLatLng","setVideoState","annotations","setAnnotations","videoPlayerRef","newLatLng","newUrl","annotation","prevAnnotations","seekTo","suspectsTable","Routes","exact","path","component","OtherResourcesPage","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.145d1503.chunk.js","sourcesContent":["/* CONSTANTS */\nconst colors = {\n  tableLines: '#999',\n  titleBg: '#99ddbb',\n  headerBg: '#bbffcc',\n  link: '#374',\n  linkHover: '#051',\n  activeFilter: '#f0f099',\n  activeFilterHover: '#ff0',\n  /* tag colors */\n  person: '#bbe',\n  group: '#ffe069',\n  behavior: '#fcb',\n  equipment: '#d0dd99',\n};\n\nconst shadows = {\n  lg: '0px 1px 12px rgba(0, 0, 0, 0.3)',\n  sm: '1px 1px 2px rgba(0, 0, 0, 0.2)',\n};\n\nconst padding = {\n  xs: 3,\n  sm: 6,\n  md: 12,\n  lg: 24,\n  xl: 48,\n  xxl: 72,\n};\n\nconst widths = {\n  filterbox: 240,\n};\n\nexport { colors, shadows, padding, widths };\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Follow } from 'react-twitter-widgets';\n\nimport styled from 'styled-components';\n\nimport { PATHS } from './Routes';\n\nimport { colors, widths, padding } from './shared/constants';\n\nconst PageHeaderDiv = styled.div`\n  padding: ${padding.sm}px ${padding.lg}px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n\n  background: ${colors.titleBg};\n\n  .sitename {\n    margin: 0;\n    display: inline-block;\n    font-size: 2rem;\n    margin-right: ${padding.xl}px;\n    position: relative;\n    white-space: nowrap;\n\n    a {\n      color: #000;\n    }\n\n    a: hover {\n      text-decoration: none;\n    }\n  }\n\n  .sitename .beta {\n    position: absolute;\n    top: 0rem;\n    right: -1rem;\n    background: #003399;\n    color: #ffffff;\n    font-size: 0.6rem;\n    font-weight: bold;\n    padding: 0px 3px;\n    transform: rotate(10deg);\n  }\n`;\n\nconst NavList = styled.ul`\n  margin: 0px;\n  padding: 0px;\n  white-space: nowrap;\n\n  li {\n    display: inline-block;\n    margin-right: ${padding.lg}px;\n    margin-bottom: 0px;\n  }\n\n  a {\n    color: ${colors.linkHover};\n  }\n`;\n\nconst UpdateDiv = styled.div`\n  display: inline-block;\n  margin-left: auto;\n  font-size: 0.8rem;\n  text-align: center;\n  white-space: nowrap;\n  color: ${colors.linkHover};\n`;\n\nconst mostRecentUpdateStr = () => {\n  return 'FIXME ';\n};\n\nconst navLinkOrText = ({ to, text, isLink }: { to: string; text: string; isLink: boolean }) => {\n  if (isLink) {\n    return (\n      <li>\n        <Link to={to}>{text}</Link>\n      </li>\n    );\n  } else {\n    return <li>{text}</li>;\n  }\n};\n\nexport const PageHeaderAndNav = () => {\n  return (\n    <PageHeaderDiv>\n      <div className=\"sitename\">\n        <div className=\"beta\">VERY BETA</div>\n        <Link to=\"/\">January 6 Evidence</Link>\n      </div>\n      <NavList>\n        {navLinkOrText({ to: PATHS.evidence, text: 'Explorer', isLink: true })}\n        {navLinkOrText({ to: PATHS.suspects, text: 'Persons of Interest', isLink: true })}\n        {navLinkOrText({ to: PATHS.about, text: 'About', isLink: true })}\n        {navLinkOrText({ to: PATHS.resources, text: 'Resources', isLink: true })}\n      </NavList>\n      <UpdateDiv>\n        {/*\n          // uncomment when mostRecentUpdateStr is working\n         (\n          <span>\n            Updated {mostRecentUpdateStr()} <br />\n          </span>\n         )\n        */}\n        <span>\n          For updates and feedback: <br />\n        </span>\n        <a\n          href=\"https://twitter.com/jan6evidence\"\n          className=\"twitter-follow-button\"\n          data-show-count=\"false\"\n        >\n          Follow @jan6evidence\n        </a>\n        <script async src=\"https://platform.twitter.com/widgets.js\" charSet=\"utf-8\" />\n      </UpdateDiv>\n    </PageHeaderDiv>\n  );\n};\n\nexport default PageHeaderAndNav;\n","import styled from 'styled-components';\n\nimport { colors, widths, padding } from './shared/constants';\n\nexport const AppWrapper = styled.div`\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n\n  h1 {\n    padding: 6px;\n    margin: 0;\n    background: ${colors.titleBg};\n  }\n`;\n\nexport const TableWrapper = styled.div`\n  position: relative;\n  flex: 1 1 auto;\n  background: #fcfcfc;\n\n  overflow: scroll;\n`;\n\nconst TableStyle = styled.table`\n  border-spacing: 0;\n  border-collapse: collapse;\n\n  th,\n  td {\n    margin: 0;\n    padding: 0 6px;\n  }\n\n  tbody tr {\n    border-bottom: 1px solid ${colors.tableLines};\n    &:hover {\n      background: #f9f9f9;\n    }\n  }\n\n  a {\n    color: ${colors.link};\n    &:hover {\n      color: ${colors.linkHover};\n    }\n  }\n`;\n\nexport const ScrollableTable = styled(TableStyle)`\n  width: 100%;\n`;\n\nexport const HeadFloater = styled(TableStyle)`\n  position: absolute;\n  top: 0;\n`;\n\nexport const TableHead = styled.thead`\n  background: white;\n`;\n\nexport const StickyTH = styled.th`\n  background: ${colors.headerBg};\n  position: sticky;\n  z-index: 10;\n\n  .parent-category {\n    border-bottom: 1px solid #051;\n  }\n`;\n\nexport const EvidenceResultsWrapper = styled.div`\n  padding-left: ${widths.filterbox}px;\n  width: 100%;\n  max-height: 100vh;\n  min-height: 100vh;\n\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n`;\n\nexport const EvidenceTableWrapper = styled.div`\n  flex: 1 1 auto;\n\n  border-top: 1px solid ${colors.tableLines};\n  display: flex;\n`;\n\nexport const EvidenceCount = styled.div`\n  padding: ${padding.sm}px;\n`;\n\nexport const ButtonLink = styled.button`\n  border: 0;\n  background: transparent;\n  margin: 0;\n  padding: 0;\n  font-size: inherit;\n  line-height: inherit;\n  color: ${colors.link};\n  text-decoration: underline;\n\n  &:hover {\n    color: ${colors.linkHover};\n  }\n`;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Tweet } from 'react-twitter-widgets';\n\nimport styled from 'styled-components';\n\nimport { PageHeaderAndNav } from './PageHeaderAndNav';\nimport { PATHS } from './Routes';\n\nimport Container from './shared/Container';\nimport { AppWrapper } from './table-styled-components';\n\nconst AboutDiv = styled.div`\n  max-width: 800px;\n  padding: 30px;\n  margin-left: auto;\n  margin-right: auto;\n\n  /* Fixes a safari-specific issue where the header gets squashed on longer pages\n     See https://github.com/jan6evidence/static-website/pull/177 */\n  min-height: -webkit-fill-available;\n\n  * + h2 {\n    margin-top: 2rem;\n  }\n`;\n\nfunction AboutPage() {\n  return (\n    <AppWrapper>\n      <PageHeaderAndNav />\n      <AboutDiv>\n        <h2>About</h2>\n        <p>\n          Since the January 6 attack on the Capitol, hundreds of volunteers have scrutinized photos\n          and video of the event. They have reviewed thousands of hours of footage, created\n          timelines, identified and tracked persons of interest, synchronized videos, and provided\n          analysis.\n        </p>\n        <p>\n          This site is an effort to help organize and visualize this crowdsourced information.\n          Contributors include data scientists, academic researchers, software engineers, and many\n          others. All are motivated by a desire to understand what happened on January 6 and why.\n          Most wish to remain anonymous.\n        </p>\n        <p>\n          If you find this site helpful in your own work, please credit &ldquo;crowdsourced\n          investigations shared on <a href=\"/\">Jan6evidence.com</a>.&rdquo;\n        </p>\n\n        <h2>Evidence</h2>\n        <p>\n          The evidence available in the <Link to={PATHS.evidence}>explorer</Link> currently comes\n          from two sources:{' '}\n          <a href=\"https://docs.google.com/spreadsheets/d/1x5h4BasakKqXdtLGrf-bZqVCZ_JEPPWvjKMzmhp5n4w\">\n            this google sheet\n          </a>{' '}\n          assembled by volunteers, and the{' '}\n          <a href=\"https://projects.propublica.org/parler-capitol-videos/\">\n            ProPublica-hosted Parler videos\n          </a>{' '}\n          . We also use the{' '}\n          <a href=\"https://docs.google.com/spreadsheets/d/18NzncPJ-5oaYrDfq_VnjaSTLyY_vKaoSTgc6lznl9GU\">\n            Capitol Suspects Database\n          </a>{' '}\n          to identify persons of interest, and gathered latitude/longitudes of Parler videos from\n          the <a href=\"https://jan6attack.com/videos.htm\">Capitol Terrorist Attack</a> site.\n        </p>\n        <p>\n          This site is in beta, and the current set is just a small fraction of the crowdsourced\n          data assembled online. Volunteers are continuously updating the data available in the\n          explorer, and we&rsquo;ll streamline the process in the future. Here&rsquo;s how you can\n          help:\n        </p>\n        <ul>\n          <li>\n            <a href=\"https://docs.google.com/document/d/1A7bK0p2k0pV_WOut8x69I6xGyZ3Qw9t4GWxnsGNCAfQ/edit\">\n              Sign up to review videos and log evidence\n            </a>\n            .\n          </li>\n          <li>\n            You can also use those same{' '}\n            <a href=\"https://docs.google.com/document/d/1A7bK0p2k0pV_WOut8x69I6xGyZ3Qw9t4GWxnsGNCAfQ/edit\">\n              instructions\n            </a>{' '}\n            to send us evidence logs from other videos as well.\n          </li>\n          <li>\n            When looking at a piece of evidence on this site, you&rsquo;ll see an{' '}\n            <b>Update Evidence</b> button. Use it to suggest a specific update.\n          </li>\n        </ul>\n        <p>\n          The evidence dataset is available for{' '}\n          <a href=\"/data/evidence.json\" download=\"evidence.json\">\n            download in JSON format\n          </a>\n          . Please note that the schema of this file may change at any time. We recommend\n          downloading a copy for yourself rather than automating retrieval from this site in a\n          manner that assumes a specific data structure.\n        </p>\n        <h2>Thanks</h2>\n        <p>This site builds on the work of many others. It would not be possible without...</p>\n        <ul>\n          <li>\n            <a href=\"https://twitter.com/donk_enby\">@donk_enby</a>, who provided the{' '}\n            <a href=\"https://twitter.com/donk_enby/status/1360064918742007809\">\n              largest source of evidence\n            </a>{' '}\n            from the attack.\n          </li>\n          <li>\n            The dedicated team building the{' '}\n            <a href=\"https://docs.google.com/spreadsheets/d/18NzncPJ-5oaYrDfq_VnjaSTLyY_vKaoSTgc6lznl9GU/edit#gid=0\">\n              Capitol Suspects Database\n            </a>\n            .\n          </li>\n          <li>\n            <i>More coming soon&hellip;</i>\n          </li>\n        </ul>\n        <h2>Contact</h2>\n        <ul>\n          <li>\n            Twitter: <a href=\"https://twitter.com/jan6evidence\">@jan6evidence</a>\n          </li>\n          <li>\n            Email: <a href=\"mailto:jan6evidence@gmail.com\">jan6evidence@gmail.com</a>\n          </li>\n        </ul>\n      </AboutDiv>\n    </AppWrapper>\n  );\n}\n\nexport default AboutPage;\n","import chroma from 'chroma-js';\nimport randomSeed from 'random-seed';\n\nimport evidenceData from '@jan6evidence/data/evidence.json';\nimport suspectData from '@jan6evidence/data/suspects.json';\nimport type { Evidence, Location, Suspect } from '@jan6evidence/types';\n\n// Dates are serailized as strings, so we need to manually deserialize\n// Would be nice to move this deserializaiton to ../data/index.ts but we tried\n// and ran into compile errors, so we're doing it here for now.\nconst toDate = (str: string | undefined): Date | undefined => {\n  if (!str) {\n    return undefined;\n  }\n  try {\n    return new Date(str);\n  } catch {\n    return undefined;\n  }\n};\n\nconst toLatLng = (location: Location, jitterSeed: string): [number, number] => {\n  // jitterSeed with the evidence ID so that it's consistent\n  const rand = randomSeed.create(jitterSeed);\n  return [\n    location.lat + rand.floatBetween(-0.0001, 0.0001),\n    location.lng + rand.floatBetween(-0.0001, 0.0001),\n  ];\n};\n\nconst REAL_TIME_START = Date.UTC(2021, 0, 6, 15, 0, 0); // 10AM Eastern\nconst REAL_TIME_END = Date.UTC(2021, 0, 7, 1, 0, 0); // 8PM Eastern\n\nconst toTimelinePercent = (time: Date | undefined): number | undefined => {\n  if (!time) {\n    return undefined;\n  }\n  return Math.max(\n    0,\n    Math.min(1, (time.getTime() - REAL_TIME_START) / (REAL_TIME_END - REAL_TIME_START))\n  );\n};\n\nconst colors = chroma.scale(['#f30', '#ff0', '#099', '#09f']).padding(-0.5).colors(40);\n\nconst makeColor = (timelineStartPercent: number | undefined): string => {\n  return (\n    (timelineStartPercent && colors[Math.floor(colors.length * timelineStartPercent)]) || '#ccc'\n  );\n};\n\nconst evidence = evidenceData.map(\n  (item): Evidence => {\n    const realTimeStart = toDate(item.realTimeStart);\n    const realTimeEnd = toDate(item.realTimeEnd);\n    const timelineStartPercent = toTimelinePercent(realTimeStart);\n    return {\n      ...item,\n      realTimeStart,\n      realTimeEnd,\n      // TODO: move this to the data generation step?\n      latLng: item.location ? toLatLng(item.location, item._id) : undefined,\n      timelineStartPercent,\n      color: makeColor(timelineStartPercent),\n    } as Evidence;\n  }\n);\n\nconst suspects = suspectData.map(\n  (item): Suspect => {\n    const arrestDate = toDate(item.arrestDate);\n    return {\n      ...item,\n      arrestDate,\n    } as Suspect;\n  }\n);\n\n// eslint-disable-next-line import/prefer-default-export\nexport { evidence, makeColor, suspects, toLatLng, toTimelinePercent };\n","import { css } from 'styled-components';\n\nimport { padding, widths, colors, shadows } from './constants';\n\nexport const TextButton = css`\n  border: 0;\n  background: none;\n\n  &:hover {\n    background: rgba(0, 0, 0, 0.2);\n  }\n  &:active {\n    background: rgba(0, 0, 0, 0.4);\n    color: white;\n  }\n`;\n\nexport const LeftBox = css`\n  width: ${widths.filterbox}px;\n  min-height: 100vh;\n  max-height: 100vh;\n  position: fixed;\n  top: 0;\n  left: 0;\n\n  z-index: 10;\n  box-shadow: ${shadows.lg};\n  background-color: #ddd;\n  border-right: 2px solid ${colors.tableLines};\n\n  display: flex;\n  flex-direction: column;\n`;\n","import styled from 'styled-components';\n\nimport { colors, padding } from '../shared/constants';\nimport { LeftBox } from '../shared/mixins';\n\nexport const CollectionsList = styled.div`\n  ${LeftBox}\n\n  h4 {\n    margin: 0;\n    padding: ${padding.sm}px 0 ${padding.sm - 1}px ${padding.sm}px; // minus one for border\n    line-height: 3rem;\n  }\n\n  .collections-list {\n    flex: 1 1 auto;\n    overflow-x: hidden;\n    overflow-y: auto;\n\n    .collection {\n      width: 100%;\n      border: 0;\n      border-top: 1px solid ${colors.tableLines};\n      padding: ${padding.md}px ${padding.sm}px;\n      text-align: left;\n\n      &:last-child {\n        border-bottom: 1px solid ${colors.tableLines};\n      }\n\n      &:hover {\n        background: ${colors.tableLines};\n      }\n\n      &.active {\n        background: ${colors.activeFilter};\n\n        &:hover {\n          background: ${colors.activeFilterHover};\n        }\n      }\n    }\n  }\n\n  .add-new {\n    flex: 0 0 auto;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: stretch;\n    padding: ${padding.xs}px;\n\n    form {\n      display: flex;\n      flex-direction: column;\n      align-items: stretch;\n\n      label {\n        display: flex;\n        align-items: center;\n\n        input {\n          flex: 1 1 auto;\n          margin-left: ${padding.sm}px;\n        }\n      }\n\n      .buttons {\n        display: flex;\n        justify-content: stretch;\n\n        button {\n          flex: 1 1 50%;\n        }\n\n        button + button {\n          margin-left: ${padding.sm}px;\n        }\n      }\n    }\n  }\n`;\n\nexport const CollectionViewer = styled.div`\n  flex: 1 1 auto;\n  display: flex;\n  flex-direction: column;\n\n  h2 {\n    flex: 0 0 auto;\n    font-size: 1.75rem;\n    margin: 0;\n    padding: ${padding.md}px ${padding.sm}px ${padding.sm}px ${padding.lg}px;\n  }\n\n  .nav-tabs {\n    flex: 0 0 auto;\n    margin-bottom: ${padding.md}px;\n  }\n\n  .nav-link {\n    color: ${colors.link};\n    background: none;\n    &:hover {\n      color: ${colors.linkHover};\n    }\n\n    &.active {\n      color: black;\n    }\n  }\n`;\n","import moment from 'moment-timezone';\n\nimport type { Location as LatLng } from '../types/Location';\n\n// This is used to autolink URLs (not already embedded in `<>` or `()`) in markdown, before translation to HTML\n// https://stackoverflow.com/questions/3809401/what-is-a-good-regular-expression-to-match-a-url\nconst URL_REGEX = /(?<![(<])https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)[^.\\s]/g;\n\nexport const autolinkMarkdown = (md: string): string => {\n  return md.replace(URL_REGEX, (match: string): string => {\n    return `<${match}>`;\n  });\n};\n\nexport const preserveLinebreaksMarkdown = (md: string): string => {\n  return md.trim().replace(/\\n/g, (_newline: string) => '  \\n');\n};\n\nexport const markdownPreprocessing = (md: string): string => {\n  return preserveLinebreaksMarkdown(autolinkMarkdown(md));\n};\n\nexport const numberTimeFormatter = (d: number) => moment.tz(d, 'America/New_York').format('h:mm A');\n\nexport const timeFormatter = (\n  d: Date | undefined,\n  format: string = 'h:mm A'\n): string | undefined => {\n  if (d) {\n    return moment(d).tz('America/New_York').format(format);\n  } else {\n    return undefined;\n  }\n};\n\nexport const realTimeRangeFormatter = (realTimeStart?: Date, realTimeEnd?: Date): string => {\n  const formattedRealTimeStart = timeFormatter(realTimeStart) || '??:??';\n  const formattedRealTimeEnd = realTimeEnd ? timeFormatter(realTimeEnd) : undefined;\n  if (formattedRealTimeEnd && formattedRealTimeEnd !== formattedRealTimeStart) {\n    return `${formattedRealTimeStart} - ${formattedRealTimeEnd}`;\n  } else {\n    return formattedRealTimeStart;\n  }\n};\n\nexport const videoTimepointFormatter = (timeSec?: number): string | undefined => {\n  if (timeSec === undefined) {\n    return undefined;\n  }\n  // https://stackoverflow.com/a/1322771\n  // Note that this ignores decimals.\n  const hhmmss = new Date(timeSec * 1000).toISOString().substr(11, 8);\n  if (hhmmss.startsWith('00')) {\n    return hhmmss.slice(1);\n  } else {\n    return hhmmss;\n  }\n};\n\nexport const videoTimepointRangeFormatter = (\n  startSec?: number,\n  endSec?: number\n): string | undefined => {\n  if (startSec === undefined) {\n    return undefined;\n  }\n  const formattedStart = videoTimepointFormatter(startSec) || '??:??';\n  const formattedEnd = endSec ? videoTimepointFormatter(endSec) : undefined;\n  if (formattedEnd && formattedEnd !== formattedStart) {\n    return `${formattedStart} - ${formattedEnd}`;\n  } else {\n    return formattedStart;\n  }\n};\n\nexport const toNdecimals = (x: number, places: number): string => {\n  const pow10 = 10 ** places;\n  const roundedX = Math.round(x * pow10) / pow10;\n  const formatter = new Intl.NumberFormat('en-US', {\n    minimumFractionDigits: places,\n    maximumFractionDigits: places,\n  });\n  return formatter.format(roundedX);\n};\n\nconst LAT_LONG_DECIMAL_PLACES = 4;\n\nexport const latLngFormatter = (latLng: LatLng | undefined): string | undefined => {\n  if (latLng) {\n    const [latStr, lngStr] = [latLng.lat, latLng.lng].map((x) =>\n      toNdecimals(x, LAT_LONG_DECIMAL_PLACES)\n    );\n    return `${latStr}, ${lngStr}`;\n  } else {\n    return undefined;\n  }\n};\n","import React from 'react';\n\nimport { latLngFormatter } from '@jan6evidence/formatters';\nimport { Location as LatLng } from '@jan6evidence/types';\n\nexport const LocationLink = ({ latLng, name }: { latLng?: LatLng; name?: string }) => {\n  if (latLng) {\n    const googleMapUrl = `https://maps.google.com/?q=${latLng.lat},${latLng.lng}`;\n    return (\n      <span className=\"location\">\n        <a href={googleMapUrl} target=\"_blank\" rel=\"noreferrer\">\n          {name || latLngFormatter(latLng)}\n        </a>\n      </span>\n    );\n  } else {\n    return <span className=\"location\">?</span>;\n  }\n};\n\nexport default LocationLink;\n","import styled from 'styled-components';\n\nimport { padding, shadows } from './constants';\nimport { TextButton } from './mixins';\n\nexport const Pill = styled.span`\n  position: relative;\n  border-radius: ${padding.sm}px;\n  background: #b0adaa;\n  display: inline-block;\n  padding: 1px 4px 1px 4px;\n  margin: 0 3px 3px 0;\n  font-size: 12px;\n\n  box-shadow: ${shadows.sm};\n\n  max-width: 100px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  &.has-delete {\n    padding-right: 16px;\n  }\n`;\n\nexport const PillXButton = styled.button`\n  ${TextButton}\n  height: 100%;\n  padding-right: 4px;\n  position: absolute;\n  top: 0;\n  right: 0;\n`;\n","import React from 'react';\n\nimport { Pill, PillXButton } from './shared-styled-components';\n\ntype Props = {\n  id: string;\n  label: string;\n  className?: string;\n  color?: string;\n  title?: string;\n  onDelete?: () => void;\n};\n\nconst Tag = ({ id, title, className, color, label, onDelete }: Props) => (\n  <Pill\n    key={`tag-${title}-${id}`}\n    style={color ? { backgroundColor: color } : {}}\n    className={`${className}${onDelete ? ' has-delete' : ''}`}\n    title={title || label}\n  >\n    {label}\n    {onDelete && (\n      <PillXButton title=\"Delete\" type=\"button\" onClick={onDelete}>\n        &times;\n      </PillXButton>\n    )}\n  </Pill>\n);\n\nexport default Tag;\n","import moment from 'moment-timezone';\n\nimport { latLngFormatter } from '@jan6evidence/formatters';\nimport { Location as LatLng } from '@jan6evidence/types';\n\nexport const numberTimeFormatter = (d: number) => moment.tz(d, 'America/New_York').format('h:mm A');\n\nexport const timeFormatter = (\n  d: Date | undefined,\n  format: string = 'h:mm A'\n): string | undefined => {\n  if (d) {\n    return moment(d).tz('America/New_York').format(format);\n  } else {\n    return undefined;\n  }\n};\n\nexport const realTimeRangeFormatter = (realTimeStart?: Date, realTimeEnd?: Date): string => {\n  const formattedRealTimeStart = timeFormatter(realTimeStart) || '??:??';\n  const formattedRealTimeEnd = realTimeEnd ? timeFormatter(realTimeEnd) : undefined;\n  if (formattedRealTimeEnd && formattedRealTimeEnd !== formattedRealTimeStart) {\n    return `${formattedRealTimeStart} - ${formattedRealTimeEnd}`;\n  } else {\n    return formattedRealTimeStart;\n  }\n};\n\nexport const videoTimepointFormatter = (timeSec?: number): string | undefined => {\n  if (timeSec === undefined) {\n    return undefined;\n  }\n  // https://stackoverflow.com/a/1322771\n  // Note that this ignores decimals.\n  const hhmmss = new Date(timeSec * 1000).toISOString().substr(11, 8);\n  if (hhmmss.startsWith('00')) {\n    return hhmmss.slice(1);\n  } else {\n    return hhmmss;\n  }\n};\n\nexport const videoTimepointRangeFormatter = (\n  startSec?: number,\n  endSec?: number\n): string | undefined => {\n  if (startSec === undefined) {\n    return undefined;\n  }\n  const formattedStart = videoTimepointFormatter(startSec) || '??:??';\n  const formattedEnd = endSec ? videoTimepointFormatter(endSec) : undefined;\n  if (formattedEnd && formattedEnd !== formattedStart) {\n    return `${formattedStart} - ${formattedEnd}`;\n  } else {\n    return formattedStart;\n  }\n};\n\nexport function debounce(f: (...args: any[]) => void, wait: number, immediate?: boolean) {\n  let timeout: NodeJS.Timeout | null;\n  return (...args: any[]) => {\n    const later = () => {\n      timeout = null;\n      if (!immediate) f(...args);\n    };\n    const callNow = immediate && !timeout;\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) f(...args);\n  };\n}\n","import styled from 'styled-components';\n\nimport { colors, shadows, padding } from '../shared/constants';\n\nconst BORDER_RADIUS = padding.md;\nconst MODAL_SPACING = 40;\nconst HEADER_HEIGHT = 64;\n\nexport const ModalWrapper = styled.section`\n  position: absolute;\n  transform: translate(0, 0); // hack to make the prev/next buttons appear properly\n  top: ${MODAL_SPACING}px;\n  left: ${MODAL_SPACING}px;\n  right: ${MODAL_SPACING}px;\n  bottom: ${MODAL_SPACING}px;\n  background: white;\n  border-radius: ${BORDER_RADIUS}px;\n  border: 2px solid ${colors.titleBg};\n  box-shadow: ${shadows.lg};\n\n  display: flex;\n  flex-direction: column;\n\n  a {\n    color: ${colors.link};\n\n    &:hover {\n      color: ${colors.linkHover};\n    }\n  }\n`;\n\nexport const Header = styled.header`\n  flex: 0 0 auto;\n  background: ${colors.headerBg};\n  position: relative;\n  border-radius: ${BORDER_RADIUS}px ${BORDER_RADIUS}px 0 0;\n  padding: ${padding.md}px;\n  height: ${HEADER_HEIGHT}px;\n\n  h2 {\n    margin: 0;\n    padding: 0;\n  }\n`;\n\nexport const Buttons = styled.nav`\n  position: absolute;\n  top: 0;\n  right: 0;\n\n  display: flex;\n\n  button {\n    background: 0;\n    border: 0;\n    padding: ${padding.md}px;\n    font-size: 32px;\n    line-height: 32px;\n    color: #555;\n    display: flex;\n    align-items: baseline;\n\n    &:not(:disabled) {\n      color: ${colors.link};\n    }\n\n    &:hover:not(:disabled) {\n      color: ${colors.linkHover};\n\n      background: rgba(255, 255, 255, 0.3);\n    }\n\n    &.close-button {\n      font-size: 36px;\n      line-height: 36px;\n      padding: ${padding.md}px ${padding.lg}px;\n    }\n  }\n`;\n\nexport const Content = styled.main`\n  flex: 1 1 auto;\n  padding: ${padding.md}px;\n  overflow-y: auto;\n  overflow-x: hidden;\n\n  .media {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    background: #333;\n    margin: ${-padding.md}px ${-padding.md}px 0 ${-padding.md}px;\n\n    a {\n      color: ${colors.headerBg};\n\n      &:hover {\n        color: ${colors.titleBg};\n      }\n    }\n\n    img {\n      max-height: calc(100vh - ${MODAL_SPACING * 2 + HEADER_HEIGHT * 3}px);\n    }\n    video {\n      max-height: calc(100vh - ${MODAL_SPACING * 2 + HEADER_HEIGHT * 5}px);\n    }\n\n    span {\n      display: block;\n      width: 100%;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      padding: 0 ${padding.md}px;\n      text-align: center;\n    }\n  }\n\n  table {\n    border-collapse: collapse;\n    border-spacing: 0;\n    max-width: 708px;\n    margin: 0 auto;\n\n    th {\n      vertical-align: top;\n    }\n\n    td {\n      padding: 0 0 0 ${padding.md}px;\n    }\n\n    th,\n    td {\n      padding-top: ${padding.md}px;\n    }\n  }\n`;\n\nconst buttonBorderWidth = '3px';\n\nexport const Nav = styled.div`\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n\n  display: flex;\n  justify-content: space-between;\n\n  button {\n    height: 72px;\n    width: 60px;\n    font-size: 72px;\n    line-height: 72px;\n    padding-left: 7px;\n    background-color: ${colors.headerBg};\n    color: ${colors.link};\n    cursor: pointer;\n\n    border-top-right-radius: ${BORDER_RADIUS}px;\n    border-bottom-left-radius: ${BORDER_RADIUS}px;\n    border: 0;\n    border: ${buttonBorderWidth} solid ${colors.titleBg};\n    margin-bottom: -${buttonBorderWidth};\n    margin-left: -${buttonBorderWidth};\n\n    &:hover {\n      color: ${colors.linkHover};\n      border-color: ${colors.link};\n    }\n    &:active {\n      background-color: ${colors.titleBg};\n    }\n\n    &:disabled,\n    &:disabled:hover,\n    &:disabled:active {\n      cursor: auto;\n      background-color: #ddd;\n      color: #888;\n      border-color: #aaa;\n    }\n  }\n\n  button + button {\n    margin-left: 0;\n    margin-right: -${buttonBorderWidth};\n    padding-right: 4px;\n    border-radius: 0;\n    border-top-left-radius: ${BORDER_RADIUS}px;\n    border-bottom-right-radius: ${BORDER_RADIUS}px;\n  }\n`;\n","import { url } from 'inspector';\n\nimport { Evidence } from '@jan6evidence/types';\n\nimport { timeFormatter, videoTimepointFormatter } from '../shared/util';\n\ntype FormData = {};\n\nconst formatLatLng = (latLng: Array<number> | undefined): string | undefined => {\n  if (latLng && latLng.length === 2) {\n    return `${latLng[0]}, ${latLng[1]}`;\n  } else {\n    return undefined;\n  }\n};\n\nconst formatTags = (tags: Array<string> | undefined): string | undefined => {\n  if (tags && tags.length > 0) {\n    return tags.join(', ');\n  } else {\n    return undefined;\n  }\n};\n\nconst evidenceUpdateFormUrl = (evidence: Evidence): string => {\n  const formUrl = new URL(\n    'https://docs.google.com/forms/d/e/1FAIpQLScCg7u21sUuCbO6lBKdTqxoSH4j2NiLGrWi5cliwCRra8O5UQ/viewform'\n  );\n  const formFields = {\n    usp: 'pp_url', // some standard google thing\n    'entry.1011702585': 'Modify an entry',\n    'entry.1623428240': evidence._id,\n    'entry.789172520': evidence.imageUrl,\n    'entry.523480783': evidence.videoUrl,\n    'entry.1776265168': videoTimepointFormatter(evidence.videoStartTimepoint),\n    'entry.1043855916': videoTimepointFormatter(evidence.videoEndTimepoint),\n    'entry.1394213472': evidence.locationName?.replace(/\\n {2}/, ' '),\n    'entry.807096470': formatLatLng(evidence.latLng),\n    'entry.1510850464': formatTags(evidence.suspectTags),\n    'entry.161204806': formatTags(evidence.otherTags),\n    'entry.1939650052': evidence.summary,\n    // Date and time not working yet\n    //   'entry.325605150': evidence.realTimeStart?.toLocaleDateString()\n    //   'entry.325605150': timeFormatter(evidence.realTimeStart, 'HH:mm'),\n    'entry.129842460': evidence.rationale,\n  };\n  Object.entries(formFields).forEach(([key, value]) => {\n    if (value && value.trim() !== '') {\n      formUrl.searchParams.append(key, value);\n    }\n  });\n  return formUrl.href;\n};\n\nexport default evidenceUpdateFormUrl;\n","import React from 'react';\nimport { Tweet } from 'react-twitter-widgets';\n\nimport { Evidence } from '@jan6evidence/types';\n\nconst safeMakeUrl = (urlAsString: string | undefined): URL | undefined => {\n  try {\n    return new URL(urlAsString || '');\n  } catch {\n    return undefined;\n  }\n};\n\nconst tweetIdFromUrl = (urlAsString: string | undefined): string | undefined => {\n  const url = new URL(urlAsString || '');\n  if (!url.hostname.match(/twitter\\.com$/)) {\n    return undefined;\n  }\n  const matchResult = url.pathname.match(/status\\/(\\d+)/);\n  return (matchResult && matchResult[1]) || undefined;\n};\n\nconst youtubeIframe = (evidence: Evidence, ytVideoId: string) => {\n  const url = new URL(`https://www.youtube.com/embed/${ytVideoId}`);\n  if (evidence.videoStartTimepoint) {\n    url.searchParams.append('start', evidence.videoStartTimepoint.toString());\n  }\n  return (\n    <iframe\n      key={evidence.videoUrl}\n      title=\"embedded evidence video from youtube\"\n      width=\"560\"\n      height=\"315\"\n      src={url.href}\n      frameBorder=\"0\"\n      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n      allowFullScreen\n    />\n  );\n};\n\nconst archiveOrgVideoIframe = (evidence: Evidence, archiveOrgVideoPath: string) => {\n  const url = new URL(`https://archive.org/embed/${archiveOrgVideoPath}`);\n  if (evidence.videoStartTimepoint) {\n    url.searchParams.append('start', evidence.videoStartTimepoint.toString());\n  }\n  return (\n    <iframe\n      key={evidence.videoUrl}\n      title=\"embedded evidence video from archive.org\"\n      src={url.href}\n      width=\"640\"\n      height=\"480\"\n      frameBorder=\"0\"\n      allowFullScreen\n    />\n  );\n};\n\nconst bareMp4VideoTag = (evidence: Evidence) => {\n  const url = safeMakeUrl(evidence.videoUrl);\n  if (!url) {\n    return null;\n  }\n  if (evidence.videoStartTimepoint && (url.hash || '').trim() === '') {\n    url.hash = `t=${evidence.videoStartTimepoint}`;\n  }\n  return (\n    <video controls key={evidence.videoUrl}>\n      <source src={url.href} />\n    </video>\n  );\n};\n\nconst vimeoIframe = (evidence: Evidence, vimeoId: string) => {\n  const url = new URL(`https://player.vimeo.com/video/${vimeoId}`);\n  if (evidence.videoStartTimepoint) {\n    url.hash = `t=${evidence.videoStartTimepoint}s`;\n  }\n  return (\n    <iframe\n      key={evidence.videoUrl}\n      title=\"embedded evidence video from vimeo.com\"\n      src={url.href}\n      width=\"640\"\n      height=\"480\"\n      frameBorder=\"0\"\n      allowFullScreen\n    />\n  );\n};\n\nconst facebookIframe = (evidence: Evidence, profileId: string, videoId: string) => {\n  const videoUrl = new URL(`https://facebook.com/${profileId}/videos/${videoId}`);\n  // start time doesn't seem to be respected...\n  if (evidence.videoStartTimepoint) {\n    videoUrl.searchParams.append('t', `{evidence.videoStartTimepoint}s`);\n  }\n  const embedUrl = new URL('https://www.facebook.com/plugins/video.php');\n  embedUrl.searchParams.append('href', videoUrl.href);\n  embedUrl.searchParams.append('show_text', 'false');\n  return (\n    <iframe\n      key={evidence.videoUrl}\n      title=\"embedded evidence video from facebook.com\"\n      src={embedUrl.href}\n      width=\"476\"\n      height=\"476\"\n      style={{ border: 'none', overflow: 'hidden' }}\n      scrolling=\"no\"\n      frameBorder=\"0\"\n      allow=\"autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share\"\n      allowFullScreen\n    />\n  );\n};\n\nconst megaVideoIframe = (evidence: Evidence, megaVideoId: string) => {\n  let urlString = `https://mega.nz/embed/${megaVideoId}`;\n  if (evidence.videoStartTimepoint) {\n    urlString += `!${evidence.videoStartTimepoint}s`;\n  }\n  return (\n    <iframe\n      key={evidence.videoUrl}\n      title=\"embedded evidence video from mega.nz\"\n      width=\"560\"\n      height=\"315\"\n      src={urlString}\n      frameBorder=\"0\"\n      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n      allowFullScreen\n    />\n  );\n};\n\nconst googleDriveIframe = (_evidence: Evidence, driveFileId: string) => {\n  const urlString = `https://drive.google.com/file/d/${driveFileId}/preview`;\n  // adding t=${startTimeInSeconds} seems to start the video in the right place\n  // but results in the video not playing correctly, so skip for now\n  return (\n    <iframe\n      title=\"embedded evidence video from google drive\"\n      src={urlString}\n      width=\"640\"\n      height=\"480\"\n      frameBorder=\"0\"\n      allowFullScreen\n    />\n  );\n};\n\nconst rumbleIframe = (_evidence: Evidence, embedId: string) => {\n  const urlString = `https://rumble.com/embed/${embedId}`;\n  return (\n    <iframe\n      title=\"embedded evidence video from rumble\"\n      src={urlString}\n      width=\"640\"\n      height=\"360\"\n      frameBorder=\"0\"\n      allowFullScreen\n    />\n  );\n};\n\nconst instagramIframe = (_evidence: Evidence, videoId: string) => {\n  const urlString = `https://www.instagram.com/tv/${videoId}/embed`;\n  return (\n    <iframe\n      title=\"embedded evidence video from rumble\"\n      src={urlString}\n      width=\"400\"\n      height=\"480\"\n      frameBorder=\"0\"\n      scrolling=\"no\"\n      // width=\"640\"\n      // height=\"360\"\n      // frameBorder=\"0\"\n      // allowFullScreen\n    />\n  );\n};\n\nconst embedTweet = (tweetId: string) => {\n  return <Tweet tweetId={tweetId} options={{ conversation: 'none' }} />;\n};\n\nexport const embedVideo = (evidence: Evidence) => {\n  if (!evidence.videoDetails) {\n    return null;\n  }\n\n  switch (evidence.videoDetails.type) {\n    case 'youtube':\n      return youtubeIframe(evidence, evidence.videoDetails.videoId);\n    case 'archiveOrg':\n      return archiveOrgVideoIframe(evidence, evidence.videoDetails.videoPath);\n    case 'tweet':\n      return embedTweet(evidence.videoDetails.tweetId);\n    case 'megavideo':\n      return megaVideoIframe(evidence, evidence.videoDetails.videoId);\n    case 'vimeo':\n      return vimeoIframe(evidence, evidence.videoDetails.videoId);\n    case 'facebook':\n      return facebookIframe(\n        evidence,\n        evidence.videoDetails.profileId,\n        evidence.videoDetails.videoId\n      );\n    case 'googleDrive':\n      return googleDriveIframe(evidence, evidence.videoDetails.driveFileId);\n    case 'rumble':\n      return rumbleIframe(evidence, evidence.videoDetails.embedId);\n    case 'directLink':\n      return bareMp4VideoTag(evidence);\n    case 'instagram':\n      return instagramIframe(evidence, evidence.videoDetails.videoId);\n    default:\n      return null;\n  }\n};\n\nexport const embedImage = (evidence: Evidence) => {\n  if (!evidence.imageUrl) {\n    return null;\n  }\n\n  const tweetId = tweetIdFromUrl(evidence.imageUrl);\n  if (tweetId) {\n    return embedTweet(tweetId);\n  }\n\n  return (\n    <img\n      src={evidence.imageUrl}\n      alt={evidence.summary || evidence.locationName || 'Evidence Image'}\n    />\n  );\n};\n","import React from 'react';\nimport { Button } from 'react-bootstrap';\nimport ReactMarkdown from 'react-markdown';\nimport Modal from 'react-modal';\nimport { useHistory, useLocation } from 'react-router-dom';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { PATHS } from '../Routes';\nimport { LocationLink } from '../shared/LocationLink';\nimport Tag from '../shared/Tag';\nimport { colors } from '../shared/constants';\nimport { realTimeRangeFormatter, videoTimepointRangeFormatter } from '../shared/util';\n\nimport { ModalWrapper, Header, Content, Buttons, Nav } from './detail-styled-components';\nimport evidenceUpdateFormUrl from './evidenceFormUrl';\nimport { embedImage, embedVideo } from './media-embeds';\n\ntype Props = {\n  detailId: string;\n  evidence: Evidence;\n  onClose: () => void;\n  prev?: Evidence;\n  next?: Evidence;\n};\n\nconst videoTimepointRow = (evidence: Evidence) => {\n  if (!evidence.videoUrl) {\n    return undefined;\n  }\n  const formattedRange = videoTimepointRangeFormatter(\n    evidence.videoStartTimepoint,\n    evidence.videoEndTimepoint\n  );\n  if (formattedRange) {\n    return (\n      <tr>\n        <th scope=\"row\">Video timepoint</th>\n        <td>{formattedRange}</td>\n      </tr>\n    );\n  } else {\n    return undefined;\n  }\n};\n\nexport default function EvidenceDetail({ detailId, evidence, onClose, prev, next }: Props) {\n  const history = useHistory();\n  const location = useLocation();\n  const handleOnClick = React.useCallback(\n    (item) => {\n      if (item) {\n        history.push({ pathname: `${PATHS.evidence}/${item._id}`, search: location.search });\n      }\n    },\n    [history, location]\n  );\n\n  return (\n    <Modal\n      isOpen={!!detailId}\n      onRequestClose={onClose}\n      contentLabel=\"Evidence Details\"\n      style={{ overlay: { zIndex: 1000 } }}\n      className=\"evidence-detail-modal\"\n      shouldCloseOnOverlayClick\n    >\n      {evidence ? (\n        <ModalWrapper>\n          <Header>\n            <h2>Evidence Detail</h2>\n            <Buttons>\n              {/* <button title=\"Star\" type=\"button\" disabled>\n                &#9733;\n              </button> */}\n              <button title=\"Close\" type=\"button\" className=\"close-button\" onClick={onClose}>\n                &times;\n              </button>\n            </Buttons>\n          </Header>\n          <Content>\n            {evidence.imageUrl && (\n              <div className=\"media\">\n                <a href={evidence.imageUrl}>\n                  {embedImage(evidence)}\n                  <span>{evidence.imageUrl}</span>\n                </a>\n              </div>\n            )}\n            {evidence.videoUrl && (\n              <div className=\"media\">\n                {embedVideo(evidence)}\n                <a href={evidence.videoUrl} target=\"_blank\" rel=\"noreferrer\">\n                  {evidence.videoUrl}\n                </a>\n              </div>\n            )}\n            <table>\n              <tbody>\n                <tr>\n                  <th scope=\"row\"> </th>\n                  <td>\n                    <Button\n                      href={evidenceUpdateFormUrl(evidence)}\n                      target=\"_blank\"\n                      size=\"sm\"\n                      variant=\"outline-success\"\n                    >\n                      Update Evidence\n                    </Button>\n                  </td>\n                </tr>\n                <tr>\n                  <th scope=\"row\">Summary</th>\n                  <td>\n                    <ReactMarkdown>{evidence.summary || ''}</ReactMarkdown>\n                  </td>\n                </tr>\n                <tr>\n                  <th scope=\"row\">Tags</th>\n                  <td>\n                    {evidence.suspectTags &&\n                      evidence.suspectTags.map((label) => (\n                        <Tag\n                          key={`${evidence._id}-person-${label}`}\n                          id={`${evidence._id}-person-${label}`}\n                          label={label}\n                          color={colors.person}\n                          title={label}\n                        />\n                      ))}\n                    {evidence.otherTags &&\n                      evidence.otherTags.map((label) => (\n                        <Tag\n                          key={`${evidence._id}-other-${label}`}\n                          id={`${evidence._id}-other-${label}`}\n                          label={label}\n                          title={label}\n                        />\n                      ))}\n                  </td>\n                </tr>\n                <tr>\n                  <th scope=\"row\">Time</th>\n                  <td>{realTimeRangeFormatter(evidence.realTimeStart, evidence.realTimeEnd)}</td>\n                </tr>\n                {videoTimepointRow(evidence)}\n                <tr>\n                  <th scope=\"row\">Location</th>\n                  <td>\n                    <LocationLink latLng={evidence.location} name={evidence.locationName} />\n                  </td>\n                </tr>\n                <tr>\n                  <th scope=\"row\">Rationale</th>\n                  <td>\n                    <ReactMarkdown>{evidence.rationale || ''}</ReactMarkdown>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n            <Nav>\n              <button\n                type=\"button\"\n                disabled={!prev}\n                title=\"Previous\"\n                onClick={() => handleOnClick(prev)}\n              >\n                &laquo;\n              </button>\n              <button\n                type=\"button\"\n                disabled={!next}\n                title=\"Next\"\n                onClick={() => handleOnClick(next)}\n              >\n                &raquo;\n              </button>\n            </Nav>\n          </Content>\n        </ModalWrapper>\n      ) : (\n        <ModalWrapper>\n          <Header>\n            <h2>Evidence &apos;{detailId}&apos; not found</h2>\n            <Buttons>\n              <button title=\"Close\" type=\"button\" className=\"close-button\" onClick={onClose}>\n                &times;\n              </button>\n            </Buttons>\n          </Header>\n        </ModalWrapper>\n      )}\n    </Modal>\n  );\n}\n","import React from 'react';\n\nexport const HighlightContext = React.createContext({\n  highlight: '',\n  setHighlight: (id: string) => {\n    id.split(''); // fixes TS error when `id` isn't used :P\n  },\n});\n\nexport default {};\n","import qs from 'query-string';\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\n\nexport function usePageTitle(title: string) {\n  React.useEffect(() => {\n    const previousTitle = document.title;\n    document.title = title;\n    return () => {\n      document.title = previousTitle;\n    };\n  }, [title]);\n}\n\nexport function useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nexport const useDebouncedValue = (delay: number, value: any) => {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n};\n\ntype QueryState = Record<string, string | string[] | null | undefined>;\ntype QueryStateUpdater = (prevState: QueryState) => QueryState;\nexport const useQueryState = (): [QueryState, (updater: QueryStateUpdater) => void] => {\n  const history = useHistory();\n  const location = useLocation();\n\n  const query: QueryState = qs.parse(location.search);\n  const [queryState, setQueryState] = useState<QueryState>(query);\n\n  const debouncedQueryState = useDebouncedValue(300, queryState);\n  useEffect(() => {\n    history.push({ search: qs.stringify(debouncedQueryState) });\n  }, [debouncedQueryState]);\n\n  useEffect(() => {\n    const incomingQuery = location.search.replace(/^\\?/, '');\n    const expectedQuery = qs.stringify(debouncedQueryState);\n    // Detect external query string changes and update our state accordingly\n    if (incomingQuery !== expectedQuery) {\n      const nextQuery: QueryState = qs.parse(location.search);\n      setQueryState(nextQuery);\n    }\n  }, [location]);\n\n  const update = (updater: QueryStateUpdater) => {\n    const nextState = updater(queryState);\n    setQueryState(nextState);\n  };\n\n  return [queryState, update];\n};\n","import styled from 'styled-components';\n\nimport { padding, colors } from '../shared/constants';\n\nexport const MapWrapper = styled.div`\n  flex: 0 0 auto;\n  background-color: #ded;\n  border: 1px solid #9a9;\n  height: 300px;\n  width: 100%;\n\n  .pointer-events-none {\n    pointer-events: none;\n  }\n`;\n\nconst EVIDENCE_COLORS = {\n  photo: '#6699ff',\n  video: '#cc2266',\n  clip: 'orange',\n};\n\nexport const TimelineWrapper = styled.div`\n  flex: 0 0 auto;\n  height: 120px;\n  padding: ${padding.sm}px ${padding.lg}px;\n\n  overflow-x: hidden;\n\n  background: #111;\n  color: white;\n\n  &:hover .handle {\n    fill: #f0f0f0;\n  }\n\n  .selected-time {\n    margin-left: -${padding.sm}px;\n    margin-bottom: ${padding.sm}px;\n  }\n\n  .tick {\n    background-color: white;\n  }\n`;\n\nexport const HandleShape = styled.svg`\n  fill: #ddd;\n\n  &.disabled {\n    fill: #999;\n  }\n`;\n\nexport const TableWrapper = styled.div`\n  flex: 1;\n\n  .active {\n    box-shadow: inset 0 0 0 6px #ff0;\n  }\n\n  .table-row {\n    border-bottom: 1px solid ${colors.tableLines};\n\n    &.highlighted {\n      background-color: ${colors.activeFilter};\n    }\n  }\n\n  img {\n    min-height: 120px;\n    width: 100%;\n    background: #f0f0f0;\n  }\n\n  .thumbnail-wrapper {\n    position: relative;\n    font-size: 13px;\n    color: white;\n\n    img {\n      min-height: 120px;\n      width: 100%;\n      background: #333;\n      border: 3px solid black;\n\n      &.video {\n        border-color: ${EVIDENCE_COLORS.video};\n      }\n      &.clip {\n        border-color: ${EVIDENCE_COLORS.clip};\n      }\n      &.photo {\n        border-color: ${EVIDENCE_COLORS.photo};\n      }\n    }\n\n    .triangle {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      margin: auto;\n      background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDQ4IDQ4IiBmaWxsPSIjZmZmIj48cGF0aCBkPSJNMjQgNEMxMi45NSA0IDQgMTIuOTUgNCAyNHM4Ljk1IDIwIDIwIDIwIDIwLTguOTUgMjAtMjBTMzUuMDUgNCAyNCA0em0tNCAyOVYxNWwxMiA5LTEyIDl6Ii8+PC9zdmc+);\n      color: #fff;\n      background-size: 48px 48px;\n      height: 48px;\n      width: 48px;\n      opacity: 0.8;\n    }\n\n    .duration {\n      position: absolute;\n      bottom: 6px;\n      right: 6px;\n      opacity: 0.8;\n    }\n\n    .type {\n      position: absolute;\n      top: 6px;\n      left: 6px;\n      opacity: 0.8;\n    }\n  }\n\n  .tags-wrapper {\n    display: flex;\n    align-items: flex-start;\n    flex-wrap: wrap;\n    font-size: 13px;\n  }\n\n  .summary,\n  .time,\n  .location {\n    height: 100px;\n    white-space: normal;\n  }\n`;\n\nexport const NoResults = styled.div`\n  text-align: center;\n  padding: ${padding.lg}px;\n`;\n","/* eslint-disable import/no-unresolved */\n\nimport type { FeatureCollection, Point } from 'geojson';\nimport * as React from 'react';\n\nimport InteractiveMap, { Source, Layer, Marker } from 'react-map-gl';\nimport type { LayerProps } from 'react-map-gl';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { PATHS } from '../Routes';\nimport { useQueryState } from '../shared/hooks';\n\nimport { MapWrapper } from './evidence-results-styled-components';\n\nconst capitolLatLng: [number, number] = [38.892, -77.02];\nconst defaultZoom: number = 13.5;\n\nconst evidenceLayerStyle: LayerProps = {\n  id: 'evidence',\n  type: 'circle',\n  paint: {\n    'circle-radius': 5,\n    'circle-color': ['get', 'color'],\n    'circle-stroke-width': 2,\n    'circle-stroke-color': '#000',\n    'circle-stroke-opacity': 0.3,\n  },\n};\nconst evidenceHoverLayerStyle: LayerProps = {\n  id: 'evidence-hover',\n  source: 'evidence',\n  type: 'circle',\n  paint: {\n    'circle-radius': 5,\n    'circle-color': '#fff',\n    'circle-stroke-width': 2,\n    'circle-stroke-color': '#000',\n    'circle-stroke-opacity': 0.4,\n  },\n};\n\nconst Tooltip = styled.div`\n  background-color: #fff;\n  padding: 4px 8px;\n  border-radius: 3px;\n  box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.4);\n  width: 180px;\n  overflow: hidden;\n  line-height: 1.4;\n  font-size: 12px;\n  margin-top: -5px;\n  margin-left: 10px;\n`;\n\ntype EvidenceWithLatLng = Evidence & { latLng: [number, number] };\n\n// https://visgl.github.io/react-map-gl/docs/api-reference/interactive-map#onviewportchange\ntype Viewport = {\n  latitude: number;\n  longitude: number;\n  zoom: number;\n};\n\ntype Props = {\n  evidence: Array<Evidence>;\n  highlight: string;\n  onHover: (id: string) => void;\n};\n\nconst EvidenceMapbox = ({ evidence, highlight, onHover }: Props) => {\n  const history = useHistory();\n  const location = useLocation();\n  const locatedEvidence = evidence.filter((item): item is EvidenceWithLatLng => !!item.latLng);\n\n  // Sort by start time, so that the gray markers land at the bottom\n  // and the later-in-the-day markers are on top.\n  locatedEvidence.sort((a, b) => +(a.realTimeStart || 0) - +(b.realTimeStart || 0));\n\n  const geojson: FeatureCollection<Point> = {\n    type: 'FeatureCollection',\n    features: locatedEvidence.map((item) => {\n      const [lat, lng] = item.latLng;\n      const coordinates: [number, number] = [lng, lat];\n      return {\n        type: 'Feature',\n        geometry: {\n          type: 'Point',\n          coordinates,\n        },\n        properties: {\n          id: item._id,\n          color: item.color,\n        },\n      };\n    }),\n  };\n\n  const [queryState, setQueryState] = useQueryState();\n\n  const parseFloatString = (value: string | string[] | null | undefined) =>\n    typeof value === 'string' ? parseFloat(value) : undefined;\n\n  const viewport: Viewport = {\n    latitude: parseFloatString(queryState.latitude) ?? capitolLatLng[0],\n    longitude: parseFloatString(queryState.longitude) ?? capitolLatLng[1],\n    zoom: parseFloatString(queryState.zoom) ?? defaultZoom,\n  };\n\n  const setViewport = (nextViewport: Viewport) => {\n    setQueryState((prevQueryState) => ({\n      ...prevQueryState,\n      latitude: nextViewport.latitude.toString(),\n      longitude: nextViewport.longitude.toString(),\n      zoom: nextViewport.zoom.toString(),\n    }));\n  };\n\n  const [hoveredEvidence, setHoveredEvidence] = React.useState<Evidence | undefined>();\n  const onMapHover = React.useCallback(\n    (event) => {\n      const feature = event.features && event.features[0];\n      const hoveredItem = evidence.find((item) => item._id === feature?.properties?.id);\n      onHover(hoveredItem?._id || '');\n      setHoveredEvidence(hoveredItem);\n    },\n    [evidence]\n  );\n  const onMapClick = React.useCallback(\n    (event) => {\n      const feature = event.features && event.features[0];\n      const clickedItem = evidence.find((item) => item._id === feature?.properties?.id);\n      if (clickedItem) {\n        history.push({ pathname: `${PATHS.evidence}/${clickedItem._id}`, search: location.search });\n      }\n    },\n    [evidence]\n  );\n  const hoverLayerFilter = React.useMemo(() => {\n    const id = hoveredEvidence?._id || highlight || '_none_';\n    return ['==', id, ['get', 'id']];\n  }, [hoveredEvidence, highlight]);\n\n  return (\n    <MapWrapper>\n      <InteractiveMap\n        {...viewport}\n        width=\"100%\"\n        height=\"100%\"\n        onViewportChange={setViewport}\n        mapboxApiAccessToken=\"pk.eyJ1IjoibWlzdGFrZW5tdXN0YXJkIiwiYSI6ImNrbGVkbWtkdzFrOXEyenRrejVyb2Zzc20ifQ.LkFY7eWOE8ryEW_6Kj0f_Q\"\n        mapStyle=\"mapbox://styles/mapbox/satellite-v9\"\n        interactiveLayerIds={\n          evidenceLayerStyle.id && evidenceHoverLayerStyle.id\n            ? [evidenceLayerStyle.id, evidenceHoverLayerStyle.id]\n            : undefined\n        }\n        onHover={onMapHover}\n        onClick={onMapClick}\n      >\n        <Source type=\"geojson\" data={geojson}>\n          <Layer {...evidenceLayerStyle} />\n          <Layer {...evidenceHoverLayerStyle} filter={hoverLayerFilter} />\n        </Source>\n        {hoveredEvidence && hoveredEvidence.latLng ? (\n          <Marker\n            latitude={hoveredEvidence.latLng[0]}\n            longitude={hoveredEvidence.latLng[1]}\n            className=\"pointer-events-none\"\n          >\n            {hoveredEvidence.summary ? <Tooltip>{hoveredEvidence.summary}</Tooltip> : null}\n          </Marker>\n        ) : null}\n      </InteractiveMap>\n    </MapWrapper>\n  );\n};\n\nexport default EvidenceMapbox;\n","/* eslint-ignore import/no-extraneous-dependencies */\n\nimport moment from 'moment-timezone';\nimport React from 'react';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { LocationLink } from '../shared/LocationLink';\nimport Tag from '../shared/Tag';\n\nimport { colors } from '../shared/constants';\n\nconst isJan6Eastern = (date: Date): boolean => {\n  const m = moment(date);\n  return m.tz('America/New_York').format('YYYY-MM-DD') === '2021-01-06';\n};\n\nconst toEasternTimeString = (date: Date, forceIncludeDate: boolean = false): string => {\n  const m = moment(date);\n  const dateStr = m.tz('America/New_York').format('YYYY-MM-DD');\n  const timeStr = m.tz('America/New_York').format('h:mm A');\n  if (isJan6Eastern(date) && !forceIncludeDate) {\n    return timeStr;\n  } else {\n    return `${dateStr} ${timeStr}`;\n  }\n};\n\nconst toRealTimeFieldStr = (\n  realTimeStart: Date | undefined,\n  realTimeEnd: Date | undefined\n): string => {\n  if (!realTimeStart) {\n    return '?';\n  }\n  if (realTimeEnd) {\n    const alwaysIncludeDate = !isJan6Eastern(realTimeStart) || !isJan6Eastern(realTimeEnd);\n    return `${toEasternTimeString(realTimeStart, alwaysIncludeDate)} - ${toEasternTimeString(\n      realTimeEnd,\n      alwaysIncludeDate\n    )}`;\n  } else {\n    return toEasternTimeString(realTimeStart);\n  }\n};\n\ntype Props = {\n  data: Evidence;\n  isActive: boolean;\n  activate: () => void;\n};\n\nexport function ResultThumbnail({ cellData: data }: { cellData: Evidence }) {\n  const type = data.videoUrl ? 'video' : 'photo';\n  const formattedDuration =\n    data.videoStartTimepoint && data.videoEndTimepoint\n      ? data.videoEndTimepoint - data.videoStartTimepoint\n      : '?';\n\n  return (\n    <div className=\"thumbnail-wrapper\">\n      <img className={type} src={data.imageUrl || data.videoDetails?.thumbnailUrl} alt=\"\" />\n      <span className=\"type\">{type[0].toUpperCase() + type.slice(1)}</span>\n      {type === 'video' && (\n        <>\n          <span className=\"triangle\" />\n          <span className=\"duration\">{formattedDuration}</span>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport function ResultSummary({ cellData: data }: { cellData: Evidence }) {\n  const summary = data.summary || '';\n\n  return (\n    <div className=\"summary\">{`${summary.slice(0, 225)}${summary.length > 255 ? '...' : ''}`}</div>\n  );\n}\n\nexport function ResultTags({ cellData: data }: { cellData: Evidence }) {\n  return (\n    <div className=\"tags-wrapper\">\n      {data.suspectTags &&\n        data.suspectTags.map((label) => (\n          <Tag\n            key={`${data._id}-person-${label}`}\n            id={`${data._id}-person-${label}`}\n            label={label}\n            color={colors.person}\n            title={label}\n          />\n        ))}\n      {data.otherTags &&\n        data.otherTags.map((label) => (\n          <Tag\n            key={`${data._id}-other-${label}`}\n            id={`${data._id}-other-${label}`}\n            label={label}\n            title={label}\n          />\n        ))}\n    </div>\n  );\n}\n\nexport function ResultTime({ cellData: data }: { cellData: Evidence }) {\n  const timeStr = toRealTimeFieldStr(data.realTimeStart, data.realTimeEnd);\n\n  return <span className=\"time\">{timeStr}</span>;\n}\n\nexport function ResultLocation({ cellData: data }: { cellData: Evidence }) {\n  if (data.location) {\n    return <LocationLink latLng={data.location} name={data.locationName} />;\n  } else {\n    return <span className=\"location\">?</span>;\n  }\n}\n","import React, { ReactElement } from 'react';\nimport 'react-virtualized/styles.css';\n\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { Column, Table, AutoSizer } from 'react-virtualized';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { ResultLocation, ResultSummary, ResultTags, ResultThumbnail, ResultTime } from './Result';\n\nimport { TableWrapper, NoResults } from './evidence-results-styled-components';\n\ntype Props = {\n  results: Evidence[];\n  highlight: string;\n  onHover: (id: string) => void;\n  getDetailPath: (id: string) => string;\n};\n\nfunction cellDataGetter({ rowData }: { rowData: any }): any {\n  // Be default, react-virtualized tries to pass the cell's render\n  // function just the data for that cell. To make our cell renderers\n  // simpler, we pass the full row of data (so we can easily have cells\n  // that show multiple fields of data)\n  return rowData;\n}\n\nfunction makeCellRenderer(\n  Component: React.ComponentType<{ cellData: Evidence }>\n): ({ cellData }: { cellData?: Evidence }) => ReactElement {\n  return function inner({ cellData }) {\n    if (!cellData) {\n      return <span />;\n    }\n\n    return <Component cellData={cellData} />;\n  };\n}\n\nconst ROW_HEIGHT = 150;\n\nconst EvidenceTable = ({ results, highlight, onHover, getDetailPath }: Props) => {\n  const history = useHistory();\n  const location = useLocation();\n  const handleOnClick = React.useCallback(\n    ({ index }) => {\n      history.push({ pathname: getDetailPath(results[index]._id), search: location.search });\n    },\n    [history, location, results]\n  );\n\n  return (\n    <TableWrapper>\n      <AutoSizer>\n        {({ height, width }) => (\n          <Table\n            height={height}\n            width={width}\n            headerHeight={40}\n            rowHeight={ROW_HEIGHT}\n            rowCount={results.length}\n            rowGetter={({ index }) => results[index]}\n            rowClassName={({ index }) =>\n              `table-row ${results[index]?._id === highlight ? 'highlighted' : ''}`\n            }\n            onRowClick={handleOnClick}\n            onRowMouseOver={({ index }) => onHover(results[index]?._id)}\n            onRowMouseOut={() => onHover('')}\n            noRowsRenderer={() => <NoResults>No results found.</NoResults>}\n          >\n            <Column\n              label=\"Thumbnail\"\n              dataKey=\"thumbnail\"\n              cellDataGetter={cellDataGetter}\n              cellRenderer={makeCellRenderer(ResultThumbnail)}\n              width={180}\n            />\n            <Column\n              label=\"Summary\"\n              dataKey=\"summary\"\n              cellDataGetter={cellDataGetter}\n              cellRenderer={makeCellRenderer(ResultSummary)}\n              width={360}\n              flexGrow={1}\n            />\n            <Column\n              label=\"Tags\"\n              dataKey=\"tags\"\n              cellDataGetter={cellDataGetter}\n              cellRenderer={makeCellRenderer(ResultTags)}\n              width={100}\n            />\n            <Column\n              label=\"Time\"\n              dataKey=\"time\"\n              cellDataGetter={cellDataGetter}\n              cellRenderer={makeCellRenderer(ResultTime)}\n              width={80}\n            />\n            <Column\n              label=\"Location\"\n              dataKey=\"location\"\n              cellDataGetter={cellDataGetter}\n              cellRenderer={makeCellRenderer(ResultLocation)}\n              width={144}\n            />\n          </Table>\n        )}\n      </AutoSizer>\n    </TableWrapper>\n  );\n};\n\nexport default EvidenceTable;\n","import React from 'react';\n\nimport { numberTimeFormatter } from '../shared/util';\n\nimport { HandleShape } from './evidence-results-styled-components';\n\nexport type Range = [number, number];\n\nexport interface RangePoint {\n  id: string;\n  value: number;\n  percent: number;\n}\n\nexport const RAIL_HEIGHT = 48;\n\n// *******************************************************\n// RAIL\n// *******************************************************\nconst railOuterStyle: React.CSSProperties = {\n  position: 'absolute',\n  width: '100%',\n  height: RAIL_HEIGHT,\n  cursor: 'pointer',\n};\n\nconst railInnerStyle: React.CSSProperties = {\n  position: 'absolute',\n  width: '100%',\n  height: RAIL_HEIGHT,\n  pointerEvents: 'none',\n  backgroundColor: '#555',\n};\n\ntype SliderRailProps = {\n  getRailProps: () => void;\n};\n\nexport function SliderRail({ getRailProps }: SliderRailProps) {\n  return (\n    <>\n      <div style={railOuterStyle} {...getRailProps()} />\n      <div style={railInnerStyle} />\n    </>\n  );\n}\n\n// *******************************************************\n// HANDLE COMPONENT\n// *******************************************************\ntype HandleProps = {\n  domain: Range;\n  handle: RangePoint;\n  getHandleProps: (id: string) => void;\n  disabled?: boolean;\n  isRight?: boolean;\n};\n\nexport function Handle({\n  domain: [min, max],\n  handle: { id, value, percent },\n  disabled,\n  isRight,\n  getHandleProps,\n}: HandleProps) {\n  return (\n    <>\n      <div\n        style={{\n          left: `${percent}%`,\n          position: 'absolute',\n          transform: 'translate(-50%, 0)',\n          WebkitTapHighlightColor: 'rgba(0,0,0,0)',\n          zIndex: 5,\n          width: 28,\n          height: 42,\n          cursor: 'move',\n          backgroundColor: 'none',\n        }}\n        {...getHandleProps(id)}\n      />\n      <div\n        role=\"slider\"\n        aria-label={`Handle at ${value}`}\n        aria-valuemin={min}\n        aria-valuemax={max}\n        aria-valuenow={value}\n        style={{\n          left: `${percent}%`,\n          position: 'absolute',\n          marginTop: -3,\n          transform: 'translate(-50%, -0)',\n          zIndex: 3,\n          width: 12,\n          height: RAIL_HEIGHT,\n        }}\n      >\n        <HandleShape\n          viewBox={`0 0 12 ${RAIL_HEIGHT + 6}`}\n          className={`handle ${id} ${disabled && 'disabled'}`}\n        >\n          {isRight ? (\n            <polygon\n              points={`0,0 12,0 12,${RAIL_HEIGHT + 6} 0,${\n                RAIL_HEIGHT + 6\n              } 0,${RAIL_HEIGHT} 6,${RAIL_HEIGHT} 6,6 0,6`}\n            />\n          ) : (\n            <polygon\n              points={`0,0 0,${RAIL_HEIGHT + 6} 12,${\n                RAIL_HEIGHT + 6\n              } 12,${RAIL_HEIGHT} 6,${RAIL_HEIGHT} 6,6 12,6 12,0`}\n            />\n          )}\n        </HandleShape>\n      </div>\n    </>\n  );\n}\n\n// *******************************************************\n// KEYBOARD HANDLE COMPONENT\n// Uses a button to allow keyboard events\n// *******************************************************\nexport function KeyboardHandle({\n  domain: [min, max],\n  handle: { id, value, percent },\n  disabled,\n  getHandleProps,\n}: HandleProps) {\n  return (\n    <button\n      type=\"button\"\n      role=\"slider\"\n      aria-valuemin={min}\n      aria-valuemax={max}\n      aria-valuenow={value}\n      style={{\n        left: `${percent}%`,\n        position: 'absolute',\n        transform: 'translate(-50%, 0)',\n        zIndex: 2,\n        width: 24,\n        height: RAIL_HEIGHT,\n        borderRadius: '50%',\n        boxShadow: '1px 1px 1px 1px rgba(0, 0, 0, 0.3)',\n        backgroundColor: disabled ? '#999' : '#ffc400',\n      }}\n      {...getHandleProps(id)}\n    />\n  );\n}\n\n// *******************************************************\n// TRACK COMPONENT\n// *******************************************************\ntype TrackProps = {\n  source: RangePoint;\n  target: RangePoint;\n  getTrackProps: () => void;\n  disabled?: boolean;\n};\n\nexport function Track({ source, target, getTrackProps, disabled }: TrackProps) {\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        height: RAIL_HEIGHT,\n        zIndex: 1,\n        backgroundColor: disabled ? '#555' : '#222',\n        borderRadius: 7,\n        left: `${source.percent}%`,\n        width: `${target.percent - source.percent}%`,\n      }}\n      {...getTrackProps()}\n    />\n  );\n}\n\n// *******************************************************\n// TICK COMPONENT\n// *******************************************************\ntype TickType = {\n  tick: RangePoint;\n  count: number;\n  format?: (value: number) => string;\n};\n\nexport function Tick({ tick }: TickType) {\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        left: `${tick.percent}%`,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        transform: 'translate(-50%, 0px)',\n      }}\n    >\n      <div\n        className=\"tick\"\n        style={{\n          marginTop: RAIL_HEIGHT,\n          width: 1,\n          height: 6,\n        }}\n      />\n      <div\n        style={{\n          fontSize: 10,\n        }}\n      >\n        {numberTimeFormatter(tick.value)}\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { PATHS } from '../../Routes';\nimport { HighlightContext } from '../../shared/contexts';\nimport { realTimeRangeFormatter } from '../../shared/util';\nimport { RAIL_HEIGHT } from '../TimelineHelpers';\n\nconst timelineTitle = (evidence: Evidence) => {\n  return `[${realTimeRangeFormatter(evidence.realTimeStart, evidence.realTimeEnd)}] ${\n    evidence.summary\n  }`;\n};\n\nconst Stripe = styled(Link)`\n  display: block;\n  position: absolute;\n\n  width: 3px;\n  height: ${RAIL_HEIGHT}px;\n\n  transform: translate(-50%, 0);\n  margin-top: 0;\n  z-index: 2;\n\n  cursor: pointer;\n\n  &:hover,\n  &.highlighted {\n    background-color: white !important;\n  }\n`;\n\ntype Props = {\n  evidence: Evidence;\n};\n\nconst EvidenceStripe = ({ evidence }: Props) => {\n  const location = useLocation();\n\n  return (\n    <HighlightContext.Consumer>\n      {({ highlight, setHighlight }) => (\n        <Stripe\n          to={{ pathname: `${PATHS.evidence}/${evidence._id}`, search: location.search }}\n          title={timelineTitle(evidence)}\n          style={{\n            left: `${(evidence.timelineStartPercent || 0) * 100}%`,\n            backgroundColor: evidence.color,\n          }}\n          className={highlight === evidence._id ? 'highlighted' : ''}\n          onMouseOver={() => setHighlight(evidence._id)}\n          onMouseOut={() => setHighlight('')}\n        />\n      )}\n    </HighlightContext.Consumer>\n  );\n};\n\nexport default React.memo(EvidenceStripe);\n","import React, { useState } from 'react';\nimport { Slider, Rail, Handles, Tracks, Ticks } from 'react-compound-slider';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { numberTimeFormatter } from '../shared/util';\n\nimport { Range, SliderRail, Handle, Track, Tick } from './TimelineHelpers';\nimport { TimelineWrapper } from './evidence-results-styled-components';\nimport EvidenceStripe from './timeline/EvidenceStripe';\n\nconst sliderStyle = {\n  position: 'relative',\n  width: '100%',\n};\n\n// DOMAIN_START and DOMAIN_END are the start and end times of the timeline,\n// in milliseconds since the unix epoch.\nconst DOMAIN_START = Date.UTC(2021, 0, 6, 15, 0, 0); // 10AM Eastern\nconst DOMAIN_END = Date.UTC(2021, 0, 7, 1, 0, 0); // 8PM Eastern\n\n// Returns min if (val < min), max if (val > max), and val otherwise.\nfunction clamp(val: number, min: number, max: number): number {\n  return Math.min(Math.max(val, min), max);\n}\n\ntype EvidenceTimelineProps = {\n  startEndTimes?: [Date, Date] | null;\n  onChangeTimes?: (newTimes: [Date, Date] | null) => void; // if none, timeline is stripes only\n  evidence: Evidence[];\n};\n\nexport default function EvidenceTimeline({\n  startEndTimes,\n  onChangeTimes,\n  evidence,\n}: EvidenceTimelineProps) {\n  // The parent component passes in the currently-selected time range. We also\n  // maintain this local state, which has the start/end values as you're dragging\n  // the sliders. Once the user releases the slider, we pass the new values up to\n  // the parent and discard this state.\n  const [draggingValues, setDraggingValues] = useState<[number, number] | null>(null);\n\n  const domain: Range = [DOMAIN_START, DOMAIN_END];\n  let values: Range;\n  if (draggingValues) {\n    values = draggingValues;\n  } else if (startEndTimes) {\n    values = [startEndTimes[0].getTime(), startEndTimes[1].getTime()];\n  } else {\n    values = [DOMAIN_START, DOMAIN_END];\n  }\n\n  function onChange(newValues: readonly number[]) {\n    if (onChangeTimes) {\n      if (newValues[0] === DOMAIN_START && newValues[1] === DOMAIN_END) {\n        onChangeTimes(null);\n      } else {\n        onChangeTimes([new Date(newValues[0]), new Date(newValues[1])]);\n      }\n    }\n  }\n\n  const tickValues = [];\n  let range = DOMAIN_END - DOMAIN_START;\n  while (range >= 0) {\n    tickValues.push(range + DOMAIN_START);\n    range -= 30 * 60 * 1000; // 30 minutes between ticks\n  }\n\n  return (\n    <TimelineWrapper>\n      <div className=\"selected-time\">\n        {`${numberTimeFormatter(values[0])} - ${numberTimeFormatter(values[1])}`}\n      </div>\n      <Slider\n        mode={1}\n        step={5}\n        domain={domain}\n        reversed={false}\n        rootStyle={sliderStyle}\n        onUpdate={(newValues) => setDraggingValues([newValues[0], newValues[1]])}\n        onChange={onChange}\n        values={values}\n      >\n        <Rail>{({ getRailProps }) => <SliderRail getRailProps={getRailProps} />}</Rail>\n        {onChangeTimes && (\n          <Handles>\n            {({ handles, getHandleProps }) => (\n              <div className=\"slider-handles\">\n                {handles.map((handle) => (\n                  <Handle\n                    key={handle.id}\n                    handle={handle}\n                    domain={domain}\n                    getHandleProps={getHandleProps}\n                    isRight={handle.value > values[0]}\n                  />\n                ))}\n              </div>\n            )}\n          </Handles>\n        )}\n        {evidence.map((item) => (\n          <EvidenceStripe key={item._id} evidence={item} />\n        ))}\n        {onChangeTimes && (\n          <Tracks left={false} right={false}>\n            {({ tracks, getTrackProps }) => (\n              <div className=\"slider-tracks\">\n                {tracks.map(({ id, source, target }) => (\n                  <Track key={id} source={source} target={target} getTrackProps={getTrackProps} />\n                ))}\n              </div>\n            )}\n          </Tracks>\n        )}\n        <Ticks values={tickValues}>\n          {({ ticks }) => (\n            <div className=\"slider-ticks\">\n              {ticks.map((tick) => (\n                <Tick key={tick.id} tick={tick} count={ticks.length} />\n              ))}\n            </div>\n          )}\n        </Ticks>\n      </Slider>\n      <div>{`${numberTimeFormatter(values[0])} - ${numberTimeFormatter(values[1])}`}</div>\n    </TimelineWrapper>\n  );\n}\n","import React from 'react';\nimport Modal from 'react-modal';\nimport { useParams, useHistory, useLocation, useRouteMatch } from 'react-router-dom';\n\nimport { Evidence } from '@jan6evidence/types';\n\nimport EvidenceDetail from '../EvidenceDetail';\nimport PageHeaderAndNav from '../PageHeaderAndNav';\nimport { HighlightContext } from '../shared/contexts';\nimport { useQuery } from '../shared/hooks';\nimport { debounce } from '../shared/util';\nimport {\n  EvidenceResultsWrapper,\n  EvidenceTableWrapper,\n  EvidenceCount,\n} from '../table-styled-components';\n\nimport EvidenceMapbox from './EvidenceMapbox';\nimport EvidenceTable from './EvidenceTable';\nimport EvidenceTimeline from './EvidenceTimeline';\n\nModal.setAppElement('#root');\n\nexport { EvidenceTable, EvidenceTimeline, EvidenceMapbox };\n\ntype StartEndTimes = [Date, Date] | null;\n\ntype Props = {\n  evidence: Evidence[];\n  timedEvidence: Evidence[];\n  startEndTimes?: StartEndTimes;\n  setStartEndTimes?: (se: StartEndTimes) => void;\n  title: string;\n  hideExplorerLink?: boolean;\n  rootPath: string;\n  getDetailPath: (id: string) => string;\n};\n\nconst EvidenceViewer = ({\n  evidence,\n  timedEvidence,\n  startEndTimes,\n  setStartEndTimes,\n  rootPath,\n  getDetailPath,\n}: Props) => {\n  const [highlight, setHighlight] = React.useState<string>('');\n  let { detailId } = useParams<{ detailId?: string }>();\n  const history = useHistory();\n  const location = useLocation();\n\n  // check query for detail ID if it's not in the pathname\n  const query = useQuery();\n  if (!detailId) {\n    detailId = query.get('detail') || '';\n  }\n\n  const closeModal = React.useCallback(() => {\n    history.push({ pathname: rootPath, search: location.search });\n  }, [history, location]);\n\n  const debouncedHighlight = React.useCallback(debounce(setHighlight, 100), []);\n\n  let prevEvidence;\n  let nextEvidence;\n  const detailEvidence = detailId\n    ? evidence.find((r, i) => {\n        if (r._id === detailId) {\n          prevEvidence = evidence[i - 1];\n          nextEvidence = evidence[i + 1];\n          return true;\n        }\n        return false;\n      })!\n    : { _id: '' };\n\n  return (\n    <EvidenceResultsWrapper>\n      <PageHeaderAndNav />\n      <HighlightContext.Provider value={{ highlight, setHighlight: debouncedHighlight }}>\n        <EvidenceMapbox evidence={evidence} onHover={debouncedHighlight} highlight={highlight} />\n        <EvidenceTimeline\n          startEndTimes={startEndTimes}\n          onChangeTimes={setStartEndTimes}\n          // We re-filter here, ignoring time time filter, so that we still show\n          // evidence on the timeline that isn't in the selected time range\n          evidence={timedEvidence}\n        />\n        <EvidenceCount>\n          {evidence.length} bit{evidence.length === 1 ? '' : 's'} of evidence\n        </EvidenceCount>\n        <EvidenceTableWrapper>\n          <EvidenceTable\n            results={evidence}\n            highlight={highlight}\n            onHover={debouncedHighlight}\n            getDetailPath={getDetailPath}\n          />\n        </EvidenceTableWrapper>\n      </HighlightContext.Provider>\n      <EvidenceDetail\n        detailId={detailId}\n        evidence={detailEvidence}\n        onClose={closeModal}\n        prev={prevEvidence}\n        next={nextEvidence}\n      />\n    </EvidenceResultsWrapper>\n  );\n};\n\nexport default EvidenceViewer;\n","/* eslint-disable import/no-unresolved, no-console */\n\nimport React, { FormEvent } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { useLocalStorage } from 'react-use';\n\nimport { evidence } from '../data';\n\nimport { CollectionsList } from './Collection/collection-styled-components';\nimport EvidenceViewer from './EvidenceMain';\nimport { PATHS } from './Routes';\nimport { usePageTitle, useQuery } from './shared/hooks';\n\ntype CollectionType = {\n  _id: string;\n  name: string;\n  items: string[];\n};\n\nconst CollectionsApp = () => {\n  usePageTitle('Evidence Collections');\n  const [isAdding, setIsAdding] = React.useState<boolean>(false);\n  const [newName, setNewName] = React.useState<string>('');\n  const [collections, setCollections] = useLocalStorage<CollectionType[]>('collections', []);\n\n  const query = useQuery();\n  const collectionItems = query.get('collectionItems');\n  const name = query.get('name') || undefined;\n  const id = query.get('id') || undefined;\n\n  const items = React.useMemo(() => {\n    const itemIds = collectionItems?.split(',');\n    if (itemIds) {\n      return evidence.filter((item) => {\n        return itemIds.indexOf(item._id) > -1;\n      });\n    }\n    return [];\n  }, [id, name, collectionItems]);\n  const history = useHistory();\n\n  const handleSubmit = (e: FormEvent) => {\n    e.preventDefault();\n    setCollections([\n      ...(collections as CollectionType[]),\n      {\n        _id: newName,\n        name: newName,\n        items: [],\n      },\n    ]);\n    setIsAdding(false);\n  };\n\n  const rootPath = name\n    ? `${PATHS.collections}/${id}?name=${name}&collectionItems=${collectionItems}`\n    : PATHS.collections;\n\n  function getDetailPath(detailId: string) {\n    return `${rootPath}&detail=${detailId}`;\n  }\n\n  return (\n    <div>\n      <CollectionsList>\n        <h4>My Collections</h4>\n        <div className=\"collections-list\">\n          {(collections as CollectionType[]).map((collection, i) => (\n            <button\n              type=\"button\"\n              className={`collection ${id === collection._id ? 'active' : ''}`}\n              key={`collection-${collection.name}-${collection.items.length}`}\n              onClick={() =>\n                history.push(\n                  `${PATHS.collections}/${collection._id}?name=${\n                    collection.name\n                  }&collectionItems=${collection.items.join(',')}`\n                )\n              }\n            >\n              {`${collection.name || `Collection ${i + 1}`} (${collection.items.length})`}\n            </button>\n          ))}\n        </div>\n        <div className=\"add-new\">\n          {!isAdding && (\n            <button\n              type=\"button\"\n              className=\"btn btn-primary btn-sm\"\n              onClick={() => setIsAdding(true)}\n            >\n              + Add New Collection\n            </button>\n          )}\n          {isAdding && (\n            <form onSubmit={handleSubmit}>\n              <label htmlFor=\"newname\" className=\"form-label form-label-sm\">\n                Name\n                <input\n                  id=\"newname\"\n                  type=\"text\"\n                  className=\"form-control form-control-sm\"\n                  value={newName}\n                  onChange={(e) => setNewName(e.target.value)}\n                />\n              </label>\n              <div className=\"buttons\">\n                <button\n                  type=\"button\"\n                  className=\"btn btn-light btn-sm\"\n                  onClick={() => setIsAdding(false)}\n                >\n                  Cancel\n                </button>\n                <button type=\"submit\" className=\"btn btn-primary btn-sm\">\n                  Add\n                </button>\n              </div>\n            </form>\n          )}\n        </div>\n      </CollectionsList>\n      {id && name && (\n        <EvidenceViewer\n          title={`Collection: ${name}`}\n          evidence={items}\n          timedEvidence={items}\n          rootPath={rootPath}\n          getDetailPath={getDetailPath}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default CollectionsApp;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Tweet } from 'react-twitter-widgets';\n\nimport styled from 'styled-components';\n\nimport { PageHeaderAndNav } from './PageHeaderAndNav';\nimport { PATHS } from './Routes';\n\nimport Container from './shared/Container';\nimport { AppWrapper } from './table-styled-components';\n\nconst Error404Div = styled.div`\n  width: 800px;\n  padding: 30px;\n  margin-left: auto;\n  margin-right: auto;\n\n  /* Fixes a safari-specific issue where the header gets squashed on longer pages\n     See https://github.com/jan6evidence/static-website/pull/177 */\n  min-height: -webkit-fill-available;\n\n  * + h2 {\n    margin-top: 2rem;\n  }\n`;\n\nfunction Error404Page({ location }: { location: any }) {\n  return (\n    <AppWrapper>\n      <PageHeaderAndNav />\n      <Error404Div>\n        <h2>404: Not found</h2>\n        <p>{location.pathname}</p>\n      </Error404Div>\n    </AppWrapper>\n  );\n}\n\nexport default Error404Page;\n","import React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { Link } from 'react-router-dom';\nimport { Tweet } from 'react-twitter-widgets';\n\nimport styled from 'styled-components';\n\nimport { PageHeaderAndNav } from './PageHeaderAndNav';\n\nimport Container from './shared/Container';\nimport { AppWrapper } from './table-styled-components';\n\nconst ResourcesDiv = styled.div`\n  display: flex;\n  margin-left: auto;\n  margin-right: auto;\n  max-width: 800px;\n`;\n\nconst ResourcesColumn = styled.div`\n  padding: 30px;\n  * + h2 {\n    margin-top: 2rem;\n  }\n`;\n\nfunction ResourcesPage() {\n  return (\n    <AppWrapper>\n      <PageHeaderAndNav />\n      <ResourcesDiv>\n        <ResourcesColumn>\n          <h2>Resources for investigators of the Capitol Attack</h2>\n          <p>\n            <b>Read this first</b>\n          </p>\n          <ul>\n            <li>\n              <a href=\"https://www.technologyreview.com/2021/01/14/1015931/how-to-be-an-ethical-online-investigator-activist/\">\n                How to be an ethical online investigator\n              </a>\n            </li>\n          </ul>\n          <p>\n            <b>Locations</b>\n          </p>\n          <ul>\n            <li>\n              US Capitol Map:{' '}\n              <a href=\"https://drive.google.com/file/d/1aQFDTYoTsYLRJ3qbPS7-4uMKEWtM6iRQ/view?usp=sharing\">\n                Grounds\n              </a>\n              ,{' '}\n              <a href=\"https://drive.google.com/file/d/1DhIuY_lp3UW3FhmJcZuT0fmYLwOZAvfQ/view?usp=sharing\">\n                First Floor\n              </a>\n              ,{' '}\n              <a href=\"https://drive.google.com/file/d/1NSQLNzefv9sowlu_pcQjHQC6he6ba5vr/view?usp=sharing\">\n                Second Floor\n              </a>\n              ,{' '}\n              <a href=\"https://drive.google.com/file/d/1--4oBRMUlYBaTRmB9YhvCXROuzvsO7JR/view?usp=sharing\">\n                Third Floor\n              </a>\n            </li>\n            <li>\n              Guide to recognizing US Capitol locations:{' '}\n              <a href=\"https://docs.google.com/document/d/1mC7V-FqjB4PzmAgzYlURG7AnGA_pdDnVsEh-7fFRToM/edit#heading=h.56y0ktk4a1f8\">\n                Exterior\n              </a>\n              ,{' '}\n              <a href=\"https://docs.google.com/document/d/1hxXJrKhtDyf-1anm6g-wgp9DNNiy0dJp4KJKiNlXyAU/edit#\">\n                Interior\n              </a>\n            </li>\n          </ul>\n          <p>\n            <b>Timing</b>\n          </p>\n          <ul>\n            <li>\n              <a href=\"https://docs.google.com/document/d/1uzKC6f9pPFQfBJM_jO-iNeFXQlZIP4ad_J4vizClENI/edit\">\n                Capitol Siege Timeline\n              </a>\n            </li>\n            <li>\n              <a href=\"https://docs.google.com/document/d/1aoUBFlERClHrNOoufBMiC7p0M15PrvyjM371sIG02Jw/edit\">\n                Visual Clues for Timing Capitol Siege Footage\n              </a>\n            </li>\n          </ul>\n          <p>\n            <b>Persons of Interest</b>\n          </p>\n          <ul>\n            <li>\n              <a href=\"https://docs.google.com/spreadsheets/d/18NzncPJ-5oaYrDfq_VnjaSTLyY_vKaoSTgc6lznl9GU\">\n                Capitol Suspects Database\n              </a>\n            </li>\n            <li>\n              <a href=\"https://www.fbi.gov/wanted/capitol-violence\">\n                FBI Most Wanted: Capitol Violence\n              </a>\n            </li>\n            <li>\n              <a href=\"https://mpdc.dc.gov/page/may-2020-february-2021-unrest-related-arrests-and-persons-interest\">\n                Metro Police Department: Persons of Interest\n              </a>\n            </li>\n            <li>\n              <a href=\"https://www.justice.gov/usao-dc/capitol-breach-cases\">\n                Department of Justice Cases\n              </a>\n            </li>\n          </ul>\n          <p>\n            <b>Other Tools</b>\n          </p>\n          <ul>\n            <li>\n              <a href=\"http://bit.ly/bcattools\">Bellingcat&rsquo;s Online Investigation Toolkit</a>\n            </li>\n            <li>\n              <a href=\"https://jan6attack.com\">Capitol Terrorist Attack</a>\n            </li>\n            <li>\n              <a href=\"https://www.detrumpify.org/pb_j6_marchers.php\">Detrumpify.org</a>\n            </li>\n            <li>\n              <a href=\"https://facesoftheriot.com/\">Faces of the Riot</a>\n            </li>\n            <li>\n              <a href=\"https://ne0ndistraction.github.io/posts/\">ne0ndistraction: Parler Posts</a>\n            </li>\n            <li>\n              <a href=\"http://capitolmap.com/faces\">Patr10tic: Facial Recognition Tools</a>\n            </li>\n            <li>\n              <a href=\"https://projects.propublica.org/parler-capitol-videos/\">\n                ProPublica: What Parler Saw\n              </a>\n            </li>\n            <li>\n              <a href=\"https://seditionhunters.org\">SeditionHunters.org</a>\n            </li>\n          </ul>\n        </ResourcesColumn>\n      </ResourcesDiv>\n    </AppWrapper>\n  );\n}\n\nexport default ResourcesPage;\n","import styled from 'styled-components';\n\nimport { colors, shadows, padding, widths } from '../shared/constants';\nimport { TextButton, LeftBox } from '../shared/mixins';\n\nexport const Box = styled.div`\n  ${LeftBox}\n\n  font-size: 12px;\n  line-height: 18px;\n\n  h4 {\n    font-size: 18px;\n    line-height: 24px;\n    padding-left: ${padding.sm}px;\n  }\n\n  h5 {\n    font-size: 15px;\n    line-height: 24px;\n  }\n\n  .btn-group-toggle {\n    flex: 1 1 auto;\n    max-height: 25vh;\n    overflow-y: auto;\n    overflow-x: hidden;\n    border-top: 1px solid ${colors.tableLines};\n    border-bottom: 1px solid ${colors.tableLines};\n\n    display: block;\n\n    > .btn {\n      font-size: 12px;\n      line-height: 12px;\n      text-align: left;\n      padding: ${padding.sm}px;\n      border-radius: 0;\n\n      color: black;\n      background-color: white;\n      border-color: ${colors.tableLines};\n\n      display: flex;\n      flex-direction: row;\n\n      &:hover {\n        background-color: #bbb;\n      }\n\n      &.active {\n        color: black;\n        background-color: ${colors.activeFilter};\n\n        &:hover {\n          background-color: ${colors.activeFilterHover};\n        }\n      }\n\n      &:first-child {\n        border-top: 0;\n      }\n\n      &.hidden {\n        display: none;\n      }\n\n      .label {\n        flex: 1;\n      }\n\n      .count {\n        color: gray;\n        font-style: italic;\n        width: 25px;\n      }\n    }\n  }\n\n  .choice-filter {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    z-index: 1;\n    border-bottom: 0;\n    border-color: ${colors.tableLines};\n    width: calc(100% + 1px);\n  }\n`;\n\nexport const BoxHeader = styled.div`\n  display: flex;\n  align-items: stretch;\n  margin-bottom: ${padding.md}px;\n\n  h4 {\n    flex: 1 1 auto;\n    margin-bottom: 0;\n  }\n\n  button {\n    ${TextButton}\n  }\n`;\n\nexport const Toggles = styled.div`\n  padding: ${padding.md}px ${padding.sm}px ${padding.sm}px ${padding.sm}px;\n`;\n\nexport const SectionHeader = styled.h5`\n  flex: 0 0 auto;\n  width: 100%;\n  text-align: left;\n\n  padding: ${padding.sm}px;\n  padding-bottom: 0;\n\n  display: flex;\n  align-items: center;\n`;\n\nexport const FilterPills = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  padding-left: ${padding.sm}px;\n\n  .time {\n    background: #beb;\n  }\n  .location {\n    background: white;\n  }\n  .suspect {\n    background: ${colors.person};\n  }\n  .type {\n    background: #bbe;\n  }\n`;\n","import React from 'react';\n\nimport type { Filters, FilterChoices, FilterChoice } from '../../types/Filters';\nimport Tag from '../shared/Tag';\n\nimport { FilterPills } from './filter-box-styled-components';\n\ntype Props = {\n  filters: Filters;\n  choices: FilterChoices;\n  keywords: string[];\n  onDelete: (type: 'keywords' | keyof Filters, id: string) => void;\n};\n\nconst ActiveFilters = ({ filters, choices, keywords, onDelete }: Props) => {\n  const filterChoices = React.useMemo(() => {\n    const result: (FilterChoice & { type: keyof Filters })[] = [];\n    (Object.keys(filters) as (keyof Filters)[]).forEach((filterKey) => {\n      const sectionFilters: Set<string> = filters[filterKey];\n      const sectionChoices: FilterChoice[] | undefined = choices[filterKey];\n      if (sectionChoices) {\n        sectionFilters.forEach((id) => {\n          const match = sectionChoices.find((element) => element._id === id);\n          if (match) {\n            result.push({ ...match, type: filterKey });\n          }\n        });\n      }\n    });\n    return result;\n  }, [filters, choices]);\n\n  const search = keywords.join(' ');\n\n  return (\n    <FilterPills>\n      {filterChoices.map(({ _id, type, label }) => (\n        <Tag\n          key={`active-${_id}`}\n          id={_id}\n          className={type}\n          label={label}\n          title={`${type[0].toUpperCase() + type.slice(1)}: ${label}`}\n          onDelete={() => onDelete(type, _id)}\n        />\n      ))}\n      {search.length > 0 && (\n        <Tag\n          key=\"active-keywords\"\n          id=\"search\"\n          label={search}\n          className=\"keywords\"\n          title={`Keywords: ${search}`}\n          onDelete={() => onDelete('keywords', search)}\n        />\n      )}\n    </FilterPills>\n  );\n};\n\nexport default ActiveFilters;\n","import classnames from 'classnames';\nimport React from 'react';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport Form from 'react-bootstrap/Form';\nimport ToggleButton from 'react-bootstrap/ToggleButton';\n\nimport type { FilterChoiceWithCount } from '../../types/Filters';\n\ntype Props = {\n  categoryId: string;\n  choices: FilterChoiceWithCount[];\n  selectedIds: Set<string>;\n  onChange: (choiceIds: Set<string>) => void;\n};\n\nconst FilterChoiceBox = ({ categoryId, choices, selectedIds, onChange }: Props) => {\n  const [filter, setFilter] = React.useState<string>('');\n\n  const toggleSelection = (id: string) => {\n    const newSelected = new Set(selectedIds);\n    if (selectedIds.has(id)) {\n      newSelected.delete(id);\n    } else {\n      newSelected.add(id);\n    }\n    onChange(newSelected);\n  };\n\n  return (\n    <>\n      {choices.length > 8 && (\n        <Form.Control\n          type=\"text\"\n          placeholder=\"Filter...\"\n          onChange={(e) => setFilter(e.target.value)}\n          value={filter}\n          size=\"sm\"\n          className=\"choice-filter\"\n        />\n      )}\n      <ButtonGroup toggle vertical>\n        {choices.map((choice) => (\n          <ToggleButton\n            key={`${categoryId}-choice-${choice._id}`}\n            title={choice.label}\n            type=\"checkbox\"\n            variant=\"secondary\"\n            checked={selectedIds.has(choice._id)}\n            value=\"1\"\n            onChange={() => toggleSelection(choice._id)}\n            className={classnames({\n              hidden:\n                /* selectedIds.has(choice.id) || // TODO should chosen items disappear or go? */\n                !choice.label.toLowerCase().includes(filter.toLowerCase()),\n            })}\n          >\n            <div className=\"label\">{choice.label}</div>\n            <div className=\"count\">({choice.count})</div>\n          </ToggleButton>\n        ))}\n      </ButtonGroup>\n    </>\n  );\n};\n\nexport default FilterChoiceBox;\n","import React from 'react';\nimport Form from 'react-bootstrap/Form';\n\nimport { SectionHeader } from './filter-box-styled-components';\n\ntype Props = {\n  onChange: (search: string) => void;\n  value: string;\n};\n\nconst KeywordSearch = ({ onChange, value }: Props) => {\n  return (\n    <>\n      <SectionHeader>Keywords</SectionHeader>\n      <Form.Control\n        type=\"text\"\n        placeholder=\"Search\"\n        onChange={(e) => onChange(e.target.value)}\n        value={value}\n        size=\"sm\"\n      />\n    </>\n  );\n};\n\nexport default KeywordSearch;\n","import React from 'react';\n\nimport { SectionHeader } from './filter-box-styled-components';\n\ntype Props = {\n  label?: string;\n  children: React.ReactNode;\n};\n\nconst Section = ({ children, label }: Props) => {\n  return (\n    <>\n      {label && <SectionHeader>{label}</SectionHeader>}\n      {children}\n    </>\n  );\n};\n\nexport default Section;\n","import React from 'react';\nimport Form from 'react-bootstrap/Form';\nimport { useHistory } from 'react-router-dom';\n\nimport type { Filters, FilterChoicesWithCount, Toggles } from '../../types/Filters';\n\nimport ActiveFilters from './ActiveFilters';\nimport FilterChoiceBox from './FilterChoiceBox';\n\nimport KeywordSearch from './KeywordSearch';\nimport Section from './Section';\nimport { Box, BoxHeader, Toggles as TogglesContainer } from './filter-box-styled-components';\n\ntype Props = {\n  keywords: string[];\n  filters: Filters;\n  toggles: Toggles;\n  choices: FilterChoicesWithCount;\n  onKeywordsChanged: (newKeywords: string[]) => void;\n  onFilterChanged: <K extends keyof Filters>(key: K, newValue: Filters[K]) => void;\n  onToggleChanged: <K extends keyof Toggles>(key: K, newValue: Toggles[K]) => void;\n};\n\nconst removeOneFromSection = (section: Set<string>, id: string) => {\n  section.delete(id);\n  return section;\n};\n\nconst FilterBox = ({\n  keywords,\n  filters,\n  toggles,\n  choices,\n  onKeywordsChanged,\n  onFilterChanged,\n  onToggleChanged,\n}: Props) => {\n  const history = useHistory();\n\n  const clearAll = () => {\n    onFilterChanged('location', new Set());\n    onFilterChanged('suspect', new Set());\n    onFilterChanged('otherTags', new Set());\n    onKeywordsChanged([]);\n\n    // The above should be sufficient to clear filters, but because successive\n    // query param updates are using stale query params, it will not clear\n    // correctly. Need to access a fresh copy of `useLocation` in `setValue`,\n    // but hooks cannot be calling inside.\n    history.push({ search: '' });\n  };\n\n  return (\n    <Box>\n      <BoxHeader>\n        <h4>Filters</h4>\n        <button type=\"button\" onClick={clearAll}>\n          Clear all\n        </button>\n      </BoxHeader>\n      <ActiveFilters\n        filters={filters}\n        choices={choices}\n        keywords={keywords}\n        onDelete={(type: 'keywords' | keyof Filters, id) =>\n          type === 'keywords'\n            ? onKeywordsChanged([])\n            : onFilterChanged(type, removeOneFromSection(filters[type], id))\n        }\n      />\n      <TogglesContainer>\n        <Form.Switch\n          type=\"switch\"\n          id=\"include-untimestamped\"\n          label=\"Include evidence without a time\"\n          checked={toggles.includeUntimestamped}\n          onChange={(evt) => onToggleChanged('includeUntimestamped', evt.target.checked)}\n        />\n      </TogglesContainer>\n      <KeywordSearch\n        onChange={(search) => onKeywordsChanged(search.split(' '))}\n        value={keywords.join(' ')}\n      />\n\n      <Section label=\"Location\">\n        <FilterChoiceBox\n          categoryId=\"location\"\n          choices={choices.location}\n          selectedIds={filters.location}\n          onChange={(params) => onFilterChanged('location', params)}\n        />\n      </Section>\n      <Section label=\"Suspects\">\n        <FilterChoiceBox\n          categoryId=\"suspects\"\n          choices={choices.suspect}\n          selectedIds={filters.suspect}\n          onChange={(params) => onFilterChanged('suspect', params)}\n        />\n      </Section>\n      <Section label=\"Other Tags\">\n        <FilterChoiceBox\n          categoryId=\"otherTags\"\n          choices={choices.otherTags}\n          selectedIds={filters.otherTags}\n          onChange={(params) => onFilterChanged('otherTags', params)}\n        />\n      </Section>\n    </Box>\n  );\n};\n\nexport default FilterBox;\n","import type { Evidence } from '@jan6evidence/types';\n\nimport type {\n  FilterChoicesWithCount,\n  FilterChoiceWithCount,\n  Filters,\n  Toggles,\n} from '../../types/Filters';\n\nconst isItemInTimeRange = (args: {\n  itemStart: Date;\n  itemEnd?: Date;\n  rangeStart: Date;\n  rangeEnd: Date;\n}): boolean => {\n  const { itemStart, itemEnd, rangeStart, rangeEnd } = args;\n  // Use itemEnd if provided and after itemStart; otherwise treat item as instantaneous at itemStart.\n  const usableItemEnd = itemEnd && itemEnd > itemStart ? itemEnd : itemStart;\n  // Return true if any portion of the item's duration is in the range\n  return itemStart <= rangeEnd && usableItemEnd >= rangeStart;\n};\n\nconst doesEvidenceMatchKeywords = (evidence: Evidence, keywords: string[]): boolean => {\n  if (keywords.length === 0) {\n    return true;\n  }\n\n  return [\n    evidence.locationName,\n    ...(evidence.otherTags || []),\n    ...(evidence.suspectTags || []),\n    evidence.rationale,\n    evidence.summary,\n  ].some((itemField) => {\n    if (!itemField) {\n      return false;\n    }\n\n    return keywords.some(\n      (keyword) => itemField.toLocaleLowerCase().indexOf(keyword.toLocaleLowerCase()) >= 0\n    );\n  });\n};\n\nexport default function filterEvidence(\n  evidence: Evidence[],\n  filters: Filters,\n  rawKeywords: string[],\n  toggles: Toggles,\n  startEndTimes: [Date, Date] | null\n): {\n  filteredEvidence: Evidence[];\n  timelineFilteredEvidence: Evidence[];\n  filterChoices: FilterChoicesWithCount;\n} {\n  const filteredEvidence: Evidence[] = [];\n  const timelineFilteredEvidence: Evidence[] = [];\n\n  const allLocations: { [label: string]: FilterChoiceWithCount } = {};\n  const allSuspects: { [label: string]: FilterChoiceWithCount } = {};\n  const allOtherTags: { [label: string]: FilterChoiceWithCount } = {};\n\n  // helper for adding items to the filter choices\n  function addFilterChoiceItem(\n    filterChoiceMap: { [label: string]: FilterChoiceWithCount },\n    label: string\n  ) {\n    /* eslint-disable no-param-reassign */\n    if (!filterChoiceMap[label]) {\n      filterChoiceMap[label] = { _id: label, label, count: 0 };\n    }\n\n    filterChoiceMap[label].count += 1;\n    /* eslint-enable no-param-reassign */\n  }\n\n  const keywords = rawKeywords.filter((s) => s);\n\n  evidence.forEach((item) => {\n    // Keywords and toggles affect everything -- so apply those first and short-circuit\n    // if the evidence doesn't match\n    if (!doesEvidenceMatchKeywords(item, keywords)) {\n      return;\n    }\n\n    if (!toggles.includeUntimestamped && !item.realTimeStart) {\n      return;\n    }\n\n    // Compute which filters this item matches\n    let matchLocation = true;\n    if (filters.location.size > 0) {\n      if (!item.locationName) {\n        matchLocation = false;\n      } else if (!filters.location.has(item.locationName)) {\n        matchLocation = false;\n      }\n    }\n\n    let matchSuspects = true;\n    if (filters.suspect.size > 0) {\n      if (!item.suspectTags) {\n        matchSuspects = false;\n      } else if (!item.suspectTags.some((tag) => filters.suspect.has(tag))) {\n        matchSuspects = false;\n      }\n    }\n\n    let matchTags = true;\n    if (filters.otherTags.size > 0) {\n      if (!item.otherTags) {\n        matchTags = false;\n      } else if (!item.otherTags.some((tag) => filters.otherTags.has(tag))) {\n        matchTags = false;\n      }\n    }\n\n    let matchTimeline = true;\n    if (startEndTimes && item.realTimeStart) {\n      if (\n        !isItemInTimeRange({\n          itemStart: item.realTimeStart,\n          itemEnd: item.realTimeEnd,\n          rangeStart: startEndTimes[0],\n          rangeEnd: startEndTimes[1],\n        })\n      ) {\n        matchTimeline = false;\n      }\n    }\n\n    // If it matches all the filters, add it to the filtered evidence\n    if (matchLocation && matchSuspects && matchTags && matchTimeline) {\n      filteredEvidence.push(item);\n    }\n\n    // If it matches all the filters *ignoring timeline*, add it to the evidence\n    // for the timeline (the timeline shows evidence outside the timeline\n    // bounds)\n    if (matchLocation && matchSuspects && matchTags) {\n      timelineFilteredEvidence.push(item);\n    }\n\n    // Now, we need to compute the counts for the filter boxes. These filters\n    // are ORs, not ANDs. So the count for each filter is the number of pieces\n    // of evidence that match that specific filter item, *and* match the active\n    // filters for the other types of filters. For example, the count for the\n    // location filter \"The Ellipse\" is the number of pieces of evidence that\n    // are tagged with \"The Ellipse\", AND match all active suspect and tag\n    // filters.\n\n    if (matchSuspects && matchTags && matchTimeline && item.locationName) {\n      addFilterChoiceItem(allLocations, item.locationName);\n    }\n\n    if (matchLocation && matchTags && matchTimeline && item.suspectTags) {\n      item.suspectTags.forEach((tag) => addFilterChoiceItem(allSuspects, tag));\n    }\n\n    if (matchLocation && matchSuspects && matchTimeline && item.otherTags) {\n      item.otherTags.forEach((tag) => addFilterChoiceItem(allOtherTags, tag));\n    }\n  });\n\n  const filterChoices = {\n    location: Object.values(allLocations).sort((a, b) => (a.label < b.label ? -1 : 1)),\n    suspect: Object.values(allSuspects).sort((a, b) => (a.label < b.label ? -1 : 1)),\n    otherTags: Object.values(allOtherTags).sort((a, b) => (a.label < b.label ? -1 : 1)),\n  };\n\n  return { filterChoices, filteredEvidence, timelineFilteredEvidence };\n}\n","import React from 'react';\nimport { Button } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { Filters, Toggles } from '../types/Filters';\n\nimport EvidenceViewer from './EvidenceMain';\nimport FilterBox from './FilterBox';\nimport filterEvidence from './FilterBox/filterEvidence';\nimport { PATHS } from './Routes';\nimport { usePageTitle, useQueryState } from './shared/hooks';\n\nconst toArray = (value: string | string[] | null | undefined): string[] => {\n  if (Array.isArray(value)) {\n    return value;\n  }\n  if (value == null) {\n    return [];\n  }\n  return [value];\n};\n\nconst MobileOverlay = () => {\n  const [open, setOpen] = React.useState(true);\n\n  return (\n    (open && (\n      <div\n        style={{\n          zIndex: 100,\n          position: 'absolute',\n          width: '100%',\n          height: '100vh',\n          background: 'rgba(255, 255, 255, 0.95)',\n          padding: '30px',\n        }}\n        className=\"d-sm-none\"\n      >\n        <h2>January 6 Evidence</h2>\n        <p>\n          You&rsquo;ll probably find the evidence explorer easier to use on a larger device or in a\n          bigger window.\n        </p>\n        <ul>\n          <li>\n            <Link\n              to={PATHS.evidence}\n              onClick={(event) => {\n                event.preventDefault();\n                setOpen(false);\n                return false;\n              }}\n            >\n              Take me to the evidence anyway\n            </Link>\n          </li>\n          <li>\n            <Link to={PATHS.suspects}>Persons of Interest</Link>\n          </li>\n          <li>\n            <Link to={PATHS.about}>About</Link>\n          </li>\n          <li>\n            <Link to={PATHS.resources}>Resources for investigators of the Capitol Attack</Link>\n          </li>\n        </ul>\n        <img\n          src=\"/documentation/explorer-overview.jpg\"\n          style={{ width: '100%', margin: '0px auto' }}\n          alt=\"Example explorer view\"\n        />\n      </div>\n    )) ||\n    null\n  );\n};\n\ninterface EvidenceAppProps {\n  evidence: Evidence[];\n}\n\nconst EvidenceApp = (props: EvidenceAppProps) => {\n  usePageTitle('January 6 Evidence Explorer');\n\n  const [queryState, setQueryState] = useQueryState();\n\n  const filters = {\n    location: new Set<string>(toArray(queryState.location)),\n    suspect: new Set<string>(toArray(queryState.suspect)),\n    otherTags: new Set<string>(toArray(queryState.other_tags)),\n  };\n  const setFilters = <K extends keyof Filters>(key: K, newValue: Filters[K]): void => {\n    setQueryState((prevState) => {\n      const queryKey = key === 'otherTags' ? 'other_tags' : key;\n      return {\n        ...prevState,\n        [queryKey]: Array.from(newValue),\n      };\n    });\n  };\n\n  const keywords = toArray(queryState.keywords);\n  const setKeywords = (nextKeywords: string[]) => {\n    setQueryState((prevState) => ({\n      ...prevState,\n      keywords: nextKeywords,\n    }));\n  };\n\n  const [toggles, setToggles] = React.useState<Toggles>({\n    includeUntimestamped: true,\n  });\n\n  const parsedStartEndTimes =\n    typeof queryState.start_end_times === 'string' ? queryState.start_end_times.split(',') : null;\n  const startEndTimes: [Date, Date] | null = parsedStartEndTimes\n    ? [\n        new Date(parseInt(parsedStartEndTimes[0], 10)),\n        new Date(parseInt(parsedStartEndTimes[1], 10)),\n      ]\n    : null;\n\n  const setStartEndTimes = (newTimes: [Date, Date] | null) => {\n    // eslint-disable-next-line camelcase\n    setQueryState(({ start_end_times, ...prevState }) => ({\n      ...prevState,\n      ...(newTimes\n        ? { start_end_times: [newTimes[0].getTime(), newTimes[1].getTime()].join(',') }\n        : {}),\n    }));\n  };\n\n  const { filteredEvidence, timelineFilteredEvidence, filterChoices } = filterEvidence(\n    props.evidence,\n    filters,\n    keywords,\n    toggles,\n    startEndTimes\n  );\n\n  return (\n    <div>\n      <MobileOverlay />\n      <FilterBox\n        onFilterChanged={setFilters}\n        onKeywordsChanged={setKeywords}\n        filters={filters}\n        choices={filterChoices}\n        keywords={keywords}\n        toggles={toggles}\n        onToggleChanged={(toggle, newValue) => {\n          setToggles((oldToggles) => ({ ...oldToggles, [toggle]: newValue }));\n        }}\n      />\n      <EvidenceViewer\n        title=\"January 6 Evidence Explorer\"\n        evidence={filteredEvidence}\n        timedEvidence={timelineFilteredEvidence}\n        startEndTimes={startEndTimes}\n        setStartEndTimes={setStartEndTimes}\n        hideExplorerLink\n        rootPath={PATHS.evidence}\n        getDetailPath={(detailId) => `${PATHS.evidence}/${detailId}`}\n      />\n    </div>\n  );\n};\n\nexport default EvidenceApp;\n","import React from 'react';\n\nimport { evidence } from '../data';\n\nimport EvidenceApp from './EvidenceApp';\n\nconst StaticEvidencePage = () => {\n  return <EvidenceApp evidence={evidence} />;\n};\n\nexport default StaticEvidencePage;\n","// scraped from https://www.fbi.gov/wanted/capitol-violence\nimport FBI_POI_LINKS from './fbi_poi_links.json';\n\ntype numToStrObj = { [k: number]: string };\n\nconst getFbiLinksByFbiNumber = (): numToStrObj => {\n  let result: numToStrObj = {};\n  FBI_POI_LINKS.forEach((link: string) => {\n    const regexMatch = link.match(/\\d+/);\n    if (regexMatch && regexMatch[0]) {\n      const num = parseInt(regexMatch[0], 10);\n      if (num && !result[num]) {\n        result[num] = link;\n      }\n    }\n  });\n  return result;\n};\n\nexport const fbiLinksByFbiNumber = getFbiLinksByFbiNumber();\n","export { fbiLinksByFbiNumber } from './fbi_links';\n\nimport suspectData from './suspects.json';\nimport { CanonicalTags } from '@jan6evidence/canonical_tags';\nimport { Suspect } from '@jan6evidence/types';\n\nconst toDate = (str: string | undefined): Date | undefined => {\n  if (!str) {\n    return undefined;\n  }\n  try {\n    return new Date(str);\n  } catch {\n    return undefined;\n  }\n};\n\nexport const suspects = suspectData.map(\n  (item): Suspect => {\n    const arrestDate = toDate(item.arrestDate);\n    return {\n      ...item,\n      arrestDate,\n    } as Suspect;\n  }\n);\n\nexport const getCanonicalSuspectTags = (suspects: Array<Suspect>): CanonicalTags => {\n  const tags = new CanonicalTags(\n    suspects.flatMap((s) =>\n      // ignore suspects without hashtags\n      s.primaryHashtag ? [{ mainTag: s.primaryHashtag, alternateTags: s.alternateHashtags }] : []\n    )\n  );\n  tags.logWarningsToConsole();\n  return tags;\n};\n","import React from 'react';\n\nimport styled from 'styled-components';\n\nimport { fbiLinksByFbiNumber } from '@jan6evidence/data';\nimport THUMBNAIL_FILENAMES from '@jan6evidence/data/thumbnail_filenames.json';\nimport { Suspect } from '@jan6evidence/types';\n\nconst SuspectCardDiv = styled.div`\n  padding: 0.25rem;\n  flex: auto;\n  min-width: 8rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 280px;\n  margin: 10px 5px;\n  vertical-align: top;\n`;\n\nconst SuspectThumbnailImg = styled.img`\n  width: auto;\n  height: 200px;\n  vertical-align: middle;\n  border: solid 1px #eee;\n`;\n\nconst OverviewContainerDiv = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n`;\n\nexport const SuspectThumbnail = ({ primaryHashtag }: { primaryHashtag: string | undefined }) => {\n  const filename = (THUMBNAIL_FILENAMES as any)[primaryHashtag || ''] || 'not_found.png';\n  const thumbnailSrcUrl = `/poi_thumbnails/${filename}`;\n  return <SuspectThumbnailImg src={thumbnailSrcUrl} alt={`${primaryHashtag} thumbnail image`} />;\n};\n\n// For now, point to TommyC's site. Replace with our own detail page once we have it!\nconst detailUrl = (suspect: Suspect): string =>\n  `https://jan6attack.com/individuals/${suspect.primaryHashtag?.toLowerCase()}/index.htm`;\n\nconst twitterSearchUrl = (suspect: Suspect): string =>\n  `https://twitter.com/search?q=${suspect.primaryHashtag}`;\n\nconst getFbiLink = (suspect: Suspect) => {\n  if (!suspect.fbiIdentifier) {\n    return null;\n  }\n  const fbiNumberMatch = suspect.fbiIdentifier.match(/\\d+/);\n  if (!fbiNumberMatch) {\n    return null;\n  }\n  const caption = `FBI: ${suspect.fbiIdentifier}`;\n  const fbiUrl = fbiLinksByFbiNumber[parseInt(fbiNumberMatch[0], 10)];\n  if (fbiUrl) {\n    return <a href={fbiUrl}>{caption}</a>;\n  } else {\n    return <span>{caption}</span>;\n  }\n};\n\nconst SuspectCard = ({ suspect }: { suspect: Suspect }) => {\n  if (!suspect.primaryHashtag) {\n    return null;\n  }\n  const fbiLink = getFbiLink(suspect);\n  return (\n    <SuspectCardDiv data-title={`suspect-${suspect._id}`}>\n      <a href={detailUrl(suspect)}>\n        <SuspectThumbnail primaryHashtag={suspect.primaryHashtag} />\n      </a>\n      <a href={twitterSearchUrl(suspect)}>#{suspect.primaryHashtag}</a>\n      {fbiLink || <span>&nbsp;</span>}\n    </SuspectCardDiv>\n  );\n};\n\nconst SuspectsGallery = ({ suspects }: { suspects: Array<Suspect> }) => {\n  return (\n    <OverviewContainerDiv>\n      {suspects.map((suspect) => (\n        <SuspectCard key={suspect._id} suspect={suspect} />\n      ))}\n    </OverviewContainerDiv>\n  );\n};\n\nexport default SuspectsGallery;\n","import React from 'react';\n\nimport { TableHead, StickyTH } from './table-styled-components';\n\nexport type HeaderCell = {\n  rowSpan?: number;\n  colSpan?: number;\n  title: string;\n  ref?: (instance: HTMLTableHeaderCellElement | null) => void;\n  width?: number;\n};\n\ntype Props = {\n  spec: HeaderCell[][];\n  adjustDimensions?: boolean;\n};\n\nconst Header = ({ spec }: Props) => (\n  <TableHead>\n    {spec.map((tr, rowNum) => (\n      // eslint-disable-next-line react/no-array-index-key\n      <tr key={rowNum}>\n        {tr.map((cellData) => {\n          const colSpan = cellData.colSpan || 1;\n          return (\n            <StickyTH\n              rowSpan={cellData.rowSpan || 1}\n              colSpan={colSpan}\n              style={{ top: `${rowNum * 25}px` }}\n              key={cellData.title}\n            >\n              <div className={`${colSpan > 1 ? 'parent-category' : ''}`}>{cellData.title}</div>\n            </StickyTH>\n          );\n        })}\n      </tr>\n    ))}\n  </TableHead>\n);\n\nexport default Header;\n","import styled from 'styled-components';\n\nimport { padding } from '../shared/constants';\n\nconst xlText = '20px';\nconst medText = '14px';\nconst smallText = '13px';\n\nexport const ROW_HEIGHT = 180;\n\nexport const CrimeCategories = styled.ul`\n  padding: 0;\n`;\n\nexport const CrimeCategory = styled.li`\n  list-style-type: none;\n  background: #eee;\n  padding: ${padding.xs}px ${padding.sm}px;\n  border-radius: ${padding.sm}px;\n  margin-bottom: ${padding.sm}px;\n  mix-blend-mode: darken;\n`;\n\nexport const HashtagCellWrapper = styled.td`\n  font-size: ${xlText};\n  .alternates {\n    font-size: ${smallText};\n    display: flex;\n    flex-wrap: wrap;\n\n    .alternate {\n      margin-right: 6px;\n    }\n  }\n`;\n\nexport const LinksCellWrapper = styled.td`\n  font-size: ${medText};\n`;\n\nexport const SummaryCellWrapper = styled.td`\n  font-size: ${medText};\n  p {\n    padding: 12px 0;\n    margin: 0;\n  }\n\n  p + p {\n    padding-top: 0;\n  }\n`;\n","import React from 'react';\n\nimport { CrimeCategories, CrimeCategory } from './row-styled-components';\n\nexport type CategoryType = {\n  id: string;\n  name: string;\n  color?: string;\n  present?: boolean;\n};\nexport type CategoriesType = CategoryType[];\n\ninterface Props {\n  id: string;\n  data: CategoriesType;\n  // addCategory: (id: string) => null,\n  // removeCategory: (id: string) => null,\n}\n\nconst Categories: React.FunctionComponent<Props> = ({\n  id,\n  data /* addCategory, removeCategory, */,\n}: Props) => {\n  return (\n    <>\n      <CrimeCategories>\n        {data.map((category) => {\n          if (category.present) {\n            return (\n              <CrimeCategory\n                key={`${id}-${category.id}`}\n                style={{ backgroundColor: category.color }}\n              >\n                {category.name}\n              </CrimeCategory>\n            );\n          }\n          return null;\n        })}\n      </CrimeCategories>\n    </>\n  );\n};\n\nexport default Categories;\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport type { Suspect } from '@jan6evidence/types';\n\nimport Categories from './Categories';\n\nimport { LinksCellWrapper, SummaryCellWrapper, HashtagCellWrapper } from './row-styled-components';\n\nconst SuspectPhoto = styled.img`\n  max-width: 100px;\n  max-height: 100px;\n`;\n\ntype Props = {\n  data: Suspect;\n};\n\nconst ImageCell = ({ data }: Props) => {\n  if (!data.primaryPhotoUrl) {\n    return <td />;\n  }\n\n  const regexMatch = data.primaryPhotoUrl?.match(/https:\\/\\/drive.google.com\\/file\\/d\\/(\\w+)\\//);\n\n  let photoURL = data.primaryPhotoUrl;\n  if (regexMatch) {\n    photoURL = `https://drive.google.com/uc?export=view&id=${regexMatch[1]}`;\n  }\n\n  return (\n    <td>\n      <a href={photoURL} target=\"_blank\" rel=\"noopener noreferrer\">\n        <SuspectPhoto src={photoURL} alt=\"\" />\n      </a>\n    </td>\n  );\n};\n\nconst HashtagLink = ({ hashtag }: { hashtag: string | undefined }) => {\n  if (!hashtag) {\n    return <span>-</span>;\n  }\n  let formattedHashtag = hashtag;\n  if (!formattedHashtag.startsWith('#')) {\n    formattedHashtag = `#${hashtag}`;\n  }\n\n  return (\n    <a\n      href={`https://twitter.com/search?q=${encodeURIComponent(formattedHashtag)}`}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      {hashtag}\n    </a>\n  );\n};\n\nconst HashtagCell = ({ data }: Props) => (\n  <HashtagCellWrapper>\n    <HashtagLink hashtag={data.primaryHashtag} />\n    {data.alternateHashtags.length > 0 && (\n      <p className=\"alternates\">\n        {data.alternateHashtags.map((hashtag) => (\n          <span className=\"alternate\">\n            <HashtagLink hashtag={hashtag} />\n          </span>\n        ))}\n      </p>\n    )}\n  </HashtagCellWrapper>\n);\n\nconst LinksCell = ({ data }: Props) => {\n  const links = [\n    {\n      label: 'Composites',\n      url: data.compositeURL,\n    },\n    {\n      label: 'Files',\n      url: data.filesUrl,\n    },\n  ].filter(({ url }) => url);\n\n  return (\n    <LinksCellWrapper>\n      {links.map(({ label, url }) => (\n        <p key={label}>\n          <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n            {label}\n          </a>\n        </p>\n      ))}\n    </LinksCellWrapper>\n  );\n};\n\nconst hasSuspectTag = (\n  { data }: Props,\n  { type, name }: { type: string; name: string }\n): boolean => {\n  return data.otherTags.some((tag) => tag.type === type && tag.name === name);\n};\n\nconst TagsCell = ({ data }: Props) => {\n  const tags = [\n    {\n      present: !!data.category,\n      id: 'category',\n      name: data.category!,\n      color: '#ccc',\n    },\n    {\n      present: hasSuspectTag({ data }, { type: 'behavior', name: 'Violence' }),\n      id: 'violent',\n      name: 'Violence',\n      color: '#dd4b4b',\n    },\n    {\n      present: hasSuspectTag({ data }, { type: 'behavior', name: 'Vandalism' }),\n      id: 'vandalism',\n      name: 'Vandalism',\n      color: '#ffba5f',\n    },\n    // {\n    //   present: data.isOrganizer,\n    //   id: 'organizer',\n    //   name: 'Organizer',\n    //   color: '#ced62a',\n    // },\n    {\n      present: hasSuspectTag({ data }, { type: 'equipment', name: 'EarpieceOrRadio' }),\n      id: 'earpiece',\n      name: 'Earpiece / Radio',\n      color: '#bec4ff',\n    },\n    {\n      present: hasSuspectTag({ data }, { type: 'equipment', name: 'HelmetOrArmor' }),\n      id: 'helmet',\n      name: 'Helmet / Armor',\n      color: '#9084ff',\n    },\n  ];\n\n  return (\n    <td>\n      <Categories id={data._id} data={tags} />\n    </td>\n  );\n};\n\nconst TwitterUserLink = ({ username }: { username: string }) => {\n  let formattedUsername = username;\n  if (formattedUsername.startsWith('@')) {\n    formattedUsername = username.slice(1);\n  }\n\n  return (\n    <a\n      href={`https://twitter.com/${encodeURIComponent(formattedUsername)}`}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      {username}\n    </a>\n  );\n};\n\nconst ProfileLeadsCell = ({ data }: Props) => {\n  return (\n    <td>\n      {data.profileLeads.map((lead) => (\n        <p key={lead}>\n          <TwitterUserLink username={lead} />\n        </p>\n      ))}\n    </td>\n  );\n};\n\nconst SummaryCell = ({ data }: Props) => {\n  const sections = [\n    { header: 'Brief summary of observed actions', body: data.actionsSummary },\n    { header: 'Appearance notes', body: data.appearanceSummary },\n    { header: 'Associated with', body: data.associates.join(', ') },\n  ].filter(({ body }) => body);\n\n  return (\n    <SummaryCellWrapper>\n      {sections.map(({ header, body }) => (\n        <p key={header}>\n          <strong>{header}</strong>\n          <br />\n          {body}\n        </p>\n      ))}\n    </SummaryCellWrapper>\n  );\n};\n\n// TODO differentiate by cell type based on columnIndex\nconst Row = ({ data }: Props) => (\n  <tr data-title={`suspect-${data._id}`}>\n    <ImageCell data={data} />\n    <HashtagCell data={data} />\n    <LinksCell data={data} />\n    <TagsCell data={data} />\n    <td>{data.fbiIdentifier}</td>\n    <td>{data.caseStatus}</td>\n    <ProfileLeadsCell data={data} />\n    <SummaryCell data={data} />\n  </tr>\n);\n\nexport default Row;\n","import React from 'react';\n\nimport type { Suspect } from '@jan6evidence/types';\n\nimport Header, { HeaderCell } from './Header';\nimport Row from './Row';\nimport { TableWrapper, ScrollableTable } from './table-styled-components';\n\nconst HEADER_SPEC: HeaderCell[][] = [\n  [\n    { colSpan: 4, title: 'Suspect' },\n    { colSpan: 3, title: 'Law Enforcement' },\n    { rowSpan: 2, title: 'Summary' },\n  ],\n  [\n    { title: 'Image' },\n    { title: 'Hashtag(s)' },\n    { title: 'Links' },\n    { title: 'Tags' },\n    { title: 'Wanted or Arrest #' },\n    { title: \"Arrested or ID'd\" },\n    { title: 'Profile leads' },\n  ],\n];\n\nconst SuspectsTable = ({ suspects }: { suspects: Suspect[] }) => {\n  return (\n    <TableWrapper data-toggle=\"table\">\n      <ScrollableTable>\n        <Header spec={HEADER_SPEC} />\n        <tbody>\n          {suspects.map((suspect) => (\n            <Row key={suspect._id} data={suspect} />\n          ))}\n        </tbody>\n      </ScrollableTable>\n    </TableWrapper>\n  );\n};\n\nexport default SuspectsTable;\n","import React from 'react';\n\nimport type { Suspect } from '@jan6evidence/types';\n\nimport PageHeaderAndNav from './PageHeaderAndNav';\nimport SuspectsGallery from './SuspectsGallery';\nimport SuspectsTable from './SuspectsTable';\nimport { usePageTitle } from './shared/hooks';\nimport { AppWrapper } from './table-styled-components';\n\ninterface SuspectsAppProps {\n  suspects: Suspect[];\n}\n\nconst SuspectsApp = (props: SuspectsAppProps) => {\n  usePageTitle('January 6 Persons of Interest');\n\n  return (\n    <AppWrapper>\n      <PageHeaderAndNav />\n      <div style={{ margin: '30px 30px 0px', maxWidth: '800px' }}>\n        <h2>Persons-of-Interest Gallery</h2>\n        <p style={{ fontSize: '0.9rem', marginBottom: '0px' }}>\n          Data from the{' '}\n          <a href=\"https://docs.google.com/spreadsheets/d/18NzncPJ-5oaYrDfq_VnjaSTLyY_vKaoSTgc6lznl9GU/edit#gid=0\">\n            Capitol Suspects Database\n          </a>\n          .\n        </p>\n      </div>\n      <SuspectsGallery suspects={props.suspects} />\n    </AppWrapper>\n  );\n};\n\nexport const SuspectsTableApp = (props: SuspectsAppProps) => {\n  usePageTitle('January 6 Persons of Interest');\n\n  return (\n    <AppWrapper>\n      <PageHeaderAndNav />\n      <SuspectsTable suspects={props.suspects} />\n    </AppWrapper>\n  );\n};\n\nexport default SuspectsApp;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nconst Portal: React.FC = ({ children }) => {\n  return ReactDOM.createPortal(children, document.body);\n};\n\nexport default Portal;\n","/* eslint-disable no-param-reassign, no-case-declarations,default-case,import/no-unresolved */\nimport React, { useMemo, useCallback, useRef, useEffect, useState } from 'react';\nimport { Node, Editor, Transforms, Range, createEditor } from 'slate';\nimport { withHistory } from 'slate-history';\nimport {\n  Slate,\n  Editable,\n  ReactEditor,\n  withReact,\n  useSelected,\n  useFocused,\n  RenderElementProps,\n} from 'slate-react';\n\nimport { suspects } from '../../data';\n\nimport Portal from './Portal';\n\n// TODO: add more tags\nconst HASHTAGS: string[] = suspects.flatMap((suspect) => suspect.primaryHashtag ?? []).sort();\n\nconst withHashtags = (editor: ReactEditor) => {\n  const { isInline, isVoid } = editor;\n\n  editor.isInline = (element) => {\n    return element.type === 'hashtag' ? true : isInline(element);\n  };\n\n  editor.isVoid = (element) => {\n    return element.type === 'hashtag' ? true : isVoid(element);\n  };\n\n  return editor;\n};\n\nconst insertHashtag = (editor: ReactEditor, hashtag: string) => {\n  Transforms.insertNodes(editor, { type: 'hashtag', hashtag, children: [{ text: `#${hashtag}` }] });\n  Transforms.move(editor);\n  Transforms.insertText(editor, ' ');\n  Transforms.move(editor);\n};\n\n// Slate is missing the `contentEditable` attribute\ntype RenderElementPropsWithContentEditable = RenderElementProps & {\n  attributes: {\n    contentEditable?: boolean;\n  };\n};\n\nconst HashtagElement = ({\n  attributes: { contentEditable, ...attributes },\n  children,\n  element,\n}: RenderElementPropsWithContentEditable) => {\n  const selected = useSelected();\n  const focused = useFocused();\n  return (\n    <span\n      {...attributes}\n      style={{\n        display: 'inline-block',\n        borderRadius: '.25rem',\n        backgroundColor: '#eee',\n        boxShadow: selected && focused ? '0 0 0 2px #B4D5FF' : 'none',\n      }}\n    >\n      <span contentEditable={contentEditable}>#{element.hashtag}</span>\n      {children}\n    </span>\n  );\n};\n\nconst Element = (props: RenderElementProps) => {\n  const { attributes, children, element } = props;\n  switch (element.type) {\n    case 'hashtag':\n      return <HashtagElement {...props} />;\n    default:\n      return <div {...attributes}>{children}</div>;\n  }\n};\n\ntype Props = {\n  value: Node[];\n  onChange: (newValue: Node[]) => void;\n};\n\nconst NotesInput = ({ value, onChange }: Props) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const [target, setTarget] = useState<Range | undefined>();\n  const [index, setIndex] = useState(0);\n  const [search, setSearch] = useState('');\n  const editor = useMemo(() => withHashtags(withReact(withHistory(createEditor()))), []);\n\n  const suggestions = HASHTAGS.filter((tag) =>\n    tag.toLowerCase().startsWith(search.toLowerCase())\n  ).slice(0, 10);\n\n  const onKeyDown = useCallback(\n    (event) => {\n      if (target) {\n        switch (event.key) {\n          case 'ArrowDown':\n            event.preventDefault();\n            const prevIndex = index >= suggestions.length - 1 ? 0 : index + 1;\n            setIndex(prevIndex);\n            break;\n          case 'ArrowUp':\n            event.preventDefault();\n            const nextIndex = index <= 0 ? suggestions.length - 1 : index - 1;\n            setIndex(nextIndex);\n            break;\n          case 'Tab':\n          case 'Enter':\n            event.preventDefault();\n            Transforms.select(editor, target);\n            insertHashtag(editor, suggestions[index]);\n            setTarget(undefined);\n            break;\n          case 'Escape':\n            event.preventDefault();\n            setTarget(undefined);\n            break;\n        }\n      }\n    },\n    [index, search, target]\n  );\n\n  useEffect(() => {\n    if (target && suggestions.length > 0) {\n      const el = ref.current;\n      if (el) {\n        const domRange = ReactEditor.toDOMRange(editor, target);\n        const rect = domRange.getBoundingClientRect();\n        el.style.top = `${rect.top + window.pageYOffset + 24}px`;\n        el.style.left = `${rect.left + window.pageXOffset}px`;\n      }\n    }\n  }, [suggestions.length, editor, index, search, target]);\n\n  return (\n    <Slate\n      editor={editor}\n      value={value}\n      onChange={(newValue) => {\n        onChange(newValue);\n        const { selection } = editor;\n\n        if (selection && Range.isCollapsed(selection)) {\n          const [start] = Range.edges(selection);\n          const wordBefore = Editor.before(editor, start, { unit: 'word' });\n          const before = wordBefore && Editor.before(editor, wordBefore);\n          const beforeRange = before && Editor.range(editor, before, start);\n          const beforeText = beforeRange && Editor.string(editor, beforeRange);\n          const beforeMatch = beforeText && beforeText.match(/^#(\\w+)$/);\n          const after = Editor.after(editor, start);\n          const afterRange = Editor.range(editor, start, after);\n          const afterText = Editor.string(editor, afterRange);\n          const afterMatch = afterText.match(/^(\\s|$)/);\n\n          if (beforeMatch && afterMatch) {\n            setTarget(beforeRange);\n            setSearch(beforeMatch[1]);\n            setIndex(0);\n            return;\n          }\n        }\n\n        setTarget(undefined);\n      }}\n    >\n      <Editable\n        className=\"form-control h-auto\"\n        renderElement={(props) => <Element {...props} />}\n        onKeyDown={onKeyDown}\n        style={{ minHeight: '4em' }}\n      />\n      {target && suggestions.length > 0 && (\n        <Portal>\n          <div\n            ref={ref}\n            style={{\n              position: 'absolute',\n              padding: '3px 0',\n              background: 'white',\n              borderRadius: '.25rem',\n              boxShadow: '0 1px 5px rgba(0,0,0,.2)',\n            }}\n          >\n            {suggestions.map((suggestion, i) => (\n              <div\n                key={suggestion}\n                style={{\n                  padding: '0 6px',\n                  background: i === index ? '#B4D5FF' : 'transparent',\n                  cursor: 'pointer',\n                }}\n                onMouseEnter={() => setIndex(i)}\n                onMouseDown={(event) => {\n                  event.preventDefault();\n                  Transforms.select(editor, target);\n                  insertHashtag(editor, suggestions[i]);\n                  setTarget(undefined);\n                }}\n              >\n                {suggestion}\n              </div>\n            ))}\n          </div>\n        </Portal>\n      )}\n    </Slate>\n  );\n};\n\nexport default NotesInput;\n","/* eslint-disable jsx-a11y/label-has-associated-control, import/no-unresolved */\nimport classNames from 'classnames';\nimport React, { useState } from 'react';\nimport { Node } from 'slate';\n\nimport { LatLng } from './Map';\nimport NotesInput from './NotesInput';\nimport { VideoState } from './VideoPlayer';\n\nconst padTime = (num: number) => num.toString().padStart(2, '0');\n\nconst toDuration = (seconds: number) => {\n  const hour = Math.floor(seconds / 60 / 60);\n  const min = Math.floor(seconds / 60);\n  const sec = Math.floor(seconds - min * 60 - hour * 60 * 60);\n  return `${hour ? `${padTime(hour)}:` : ''}${padTime(min)}:${padTime(sec)}`;\n};\n\nexport type Annotation = {\n  videoUrl: string;\n  videoTime: number;\n  latLng: LatLng;\n  localTime: Date | null;\n  notes: string;\n  hashtags: string[];\n};\n\ntype Props = {\n  url: string;\n  onUrlChange: (url: string) => void;\n  videoState: VideoState | null;\n  latLng: LatLng;\n  onSubmit: (annotation: Annotation) => void;\n};\n\nconst initialNotes = [\n  {\n    type: 'paragraph',\n    children: [{ text: '' }],\n  },\n];\n\nconst AnnotationForm = ({ url, onUrlChange, videoState, latLng, onSubmit }: Props) => {\n  const [localStartTime, setLocalStartTime] = useState<Date | null>(null);\n  const [notes, setNotes] = useState<Node[]>(initialNotes);\n\n  const localCurrentTime = localStartTime\n    ? new Date(localStartTime.getTime() + Math.floor(videoState?.secondsPlayed ?? 0) * 1000)\n    : null;\n\n  const findHashtags = (node: Node) =>\n    // @ts-ignore\n    node.type === 'hashtag' ? node : node.children?.flatMap(findHashtags);\n\n  return (\n    <form\n      className=\"p-3\"\n      onSubmit={(event) => {\n        event.preventDefault();\n\n        onSubmit({\n          videoUrl: url,\n          videoTime: videoState?.secondsPlayed ?? 0,\n          latLng,\n          localTime: localCurrentTime,\n          notes: notes\n            .map((n) => Node.string(n))\n            .join('\\n')\n            .trim(),\n          hashtags: notes\n            .flatMap(findHashtags)\n            .filter(Boolean)\n            .map((n) => n.hashtag as string),\n        });\n        setNotes(initialNotes);\n      }}\n    >\n      <div className=\"form-row\">\n        <div className=\"form-group col-9\">\n          <label htmlFor=\"url\" className=\"mb-0\">\n            Video URL\n          </label>\n          <input\n            className={classNames(\n              'form-control',\n              videoState?.state === 'error' ? 'is-invalid' : null\n            )}\n            name=\"url\"\n            type=\"url\"\n            value={url}\n            onChange={(event) => onUrlChange(event.target.value)}\n            aria-describedby=\"urlValidation\"\n          />\n          <div id=\"urlValidation\" className=\"invalid-feedback\">\n            Couldn&apos;t load this video. Check the URL and try again?\n          </div>\n        </div>\n        <div className=\"form-group col-3\">\n          <label htmlFor=\"videoTime\" className=\"mb-0\">\n            Video time\n          </label>\n          <input\n            className=\"form-control\"\n            name=\"videoTime\"\n            type=\"text\"\n            value={toDuration(videoState?.secondsPlayed ?? 0)}\n            disabled\n          />\n        </div>\n      </div>\n      <div className=\"form-row\">\n        <div className=\"form-group col\">\n          <label htmlFor=\"latLng\" className=\"mb-0\">\n            Location\n          </label>\n          <input\n            className=\"form-control\"\n            name=\"latLng\"\n            type=\"text\"\n            value={`${latLng.latitude}, ${latLng.longitude}`}\n            disabled\n          />\n        </div>\n        <div className=\"form-group col\">\n          <label htmlFor=\"localTime\" className=\"mb-0\">\n            Local time (EST)\n          </label>\n          <input\n            className=\"form-control\"\n            name=\"localTime\"\n            type=\"time\"\n            step={1}\n            value={\n              localCurrentTime\n                ? `${padTime(localCurrentTime.getHours() + 1)}:${padTime(\n                    localCurrentTime.getMinutes()\n                  )}:${padTime(localCurrentTime.getSeconds())}`\n                : ''\n            }\n            onChange={(event) => {\n              const [hours, minutes, seconds] = event.target.value.split(':');\n              const date = new Date(2021, 0, 6, +hours - 1, +minutes, +seconds);\n              setLocalStartTime(new Date(date.getTime() - (videoState?.secondsPlayed ?? 0) * 1000));\n            }}\n          />\n        </div>\n      </div>\n      <div className=\"form-group\">\n        <label className=\"mb-0\">Notes</label>\n        <NotesInput value={notes} onChange={setNotes} />\n      </div>\n      <div className=\"d-flex justify-content-end\">\n        <button type=\"submit\" className=\"btn btn-primary\">\n          Save annotation\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default AnnotationForm;\n","import React from 'react';\nimport InteractiveMap, { Marker } from 'react-map-gl';\nimport styled from 'styled-components';\n\nconst Circle = styled.div`\n  width: 5rem;\n  height: 5rem;\n  border: 3px solid white;\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n  background: rgba(255, 0, 0, 0.2);\n`;\n\nexport type LatLng = {\n  latitude: number;\n  longitude: number;\n};\n\ntype Viewport = LatLng & {\n  zoom: number;\n};\n\ntype Props = {\n  markerLatLng: LatLng;\n  onMarkerDrop: (latLng: LatLng) => void;\n};\n\nconst Map = ({ markerLatLng, onMarkerDrop }: Props) => {\n  const [viewport, setViewport] = React.useState<Viewport>({\n    latitude: 38.88983478579566,\n    longitude: -77.01221343531986,\n    zoom: 15.409421399805353,\n  });\n\n  return (\n    <div className=\"w-100 h-100 bg-secondary\">\n      <InteractiveMap\n        {...viewport}\n        width=\"100%\"\n        height=\"100%\"\n        onViewportChange={setViewport}\n        mapboxApiAccessToken=\"pk.eyJ1IjoibWlzdGFrZW5tdXN0YXJkIiwiYSI6ImNrbGVkbWtkdzFrOXEyenRrejVyb2Zzc20ifQ.LkFY7eWOE8ryEW_6Kj0f_Q\"\n        mapStyle=\"mapbox://styles/mapbox/satellite-v9\"\n        onClick={(event) => {\n          const [longitude, latitude] = event.lngLat;\n          onMarkerDrop({ latitude, longitude });\n        }}\n      >\n        <Marker\n          {...markerLatLng}\n          draggable\n          onDragEnd={(event) => {\n            const [longitude, latitude] = event.lngLat;\n            onMarkerDrop({ latitude, longitude });\n          }}\n        >\n          <Circle />\n        </Marker>\n      </InteractiveMap>\n    </div>\n  );\n};\n\nexport default Map;\n","/* eslint-disable import/no-unresolved */\n\nimport React, { useState, useEffect } from 'react';\nimport ReactPlayer from 'react-player';\n\nexport type VideoState = {\n  state: 'loading' | 'ready' | 'error';\n  secondsPlayed: number;\n};\n\nexport type VideoPlayerRef = ReactPlayer;\n\ntype Props = {\n  url: string;\n  onUpdate: (state: VideoState) => void;\n};\n\nconst initialState: VideoState = { state: 'loading', secondsPlayed: 0 };\n\nconst VideoPlayer = React.forwardRef<VideoPlayerRef, Props>(({ url, onUpdate }: Props, ref) => {\n  const [state, setState] = useState(initialState);\n  const update = (changes: Partial<VideoState>) => {\n    const newState = {\n      ...state,\n      ...changes,\n    };\n    setState(newState);\n  };\n\n  useEffect(() => {\n    setState(initialState);\n  }, [url]);\n\n  useEffect(() => {\n    onUpdate(state);\n  }, [state]);\n\n  return (\n    <ReactPlayer\n      ref={ref}\n      className=\"bg-dark\"\n      width=\"100%\"\n      height=\"100%\"\n      url={url}\n      controls\n      progressInterval={10}\n      onProgress={(progress) => {\n        update({\n          secondsPlayed: progress.playedSeconds,\n        });\n      }}\n      onReady={() => {\n        update({\n          state: 'ready',\n        });\n      }}\n      onError={() => {\n        update({\n          state: 'error',\n        });\n      }}\n    />\n  );\n});\n\nexport default VideoPlayer;\n","import React, { useState, useRef } from 'react';\nimport styled from 'styled-components';\n\nimport { timeFormatter, videoTimepointFormatter } from '../shared/util';\n\nimport AnnotationForm, { Annotation } from './AnnotationForm';\nimport Map, { LatLng } from './Map';\nimport VideoPlayer, { VideoState, VideoPlayerRef } from './VideoPlayer';\n\nconst Layout = styled.div`\n  display: grid;\n  grid: repeat(2, minmax(0, 1fr)) / repeat(2, minmax(0, 1fr));\n  width: 100vw;\n  height: 100vh;\n\n  > .video {\n    grid-row: 1 / span 1;\n    grid-column: 1 / span 1;\n  }\n\n  > .map {\n    grid-row: 2 / span 1;\n    grid-column: 1 / span 1;\n  }\n\n  > .timeline {\n    grid-row: 1 / span 2;\n    grid-column: 2 / span 1;\n  }\n`;\n\nconst VideoAnnotatorPage = () => {\n  const [url, setUrl] = useState('https://youtu.be/8uRjumEQw70');\n  const [markerLatLng, setMarkerLatLng] = useState<LatLng>({\n    latitude: 38.8899389,\n    longitude: -77.0090505,\n  });\n\n  const [videoState, setVideoState] = useState<VideoState | null>(null);\n  const [annotations, setAnnotations] = useState<Annotation[]>([]);\n  const videoPlayerRef = useRef<VideoPlayerRef>(null);\n\n  return (\n    <Layout>\n      <div className=\"video\">\n        <VideoPlayer\n          ref={videoPlayerRef}\n          url={url}\n          onUpdate={(newState) => setVideoState(newState)}\n        />\n      </div>\n      <div className=\"map\">\n        <Map\n          markerLatLng={markerLatLng}\n          onMarkerDrop={(newLatLng) => {\n            setMarkerLatLng(newLatLng);\n          }}\n        />\n      </div>\n      <div className=\"timeline\">\n        <AnnotationForm\n          url={url}\n          onUrlChange={(newUrl) => {\n            setUrl(newUrl);\n          }}\n          videoState={videoState}\n          latLng={markerLatLng}\n          onSubmit={(annotation) => {\n            setAnnotations((prevAnnotations) => [...prevAnnotations, annotation]);\n          }}\n        />\n        <div className=\"p-3\">\n          <div className=\"table-responsive\">\n            <table className=\"table table-sm\">\n              <thead className=\"text-nowrap\">\n                <tr>\n                  <th>Video URL</th>\n                  <th>Video time</th>\n                  <th>Local time (EST)</th>\n                  <th>Location</th>\n                  <th>Notes</th>\n                  <th>Hashtags</th>\n                </tr>\n              </thead>\n              <tbody>\n                {annotations.map((annotation, i) => (\n                  // eslint-disable-next-line react/no-array-index-key\n                  <tr key={i}>\n                    <td>\n                      <a\n                        href={annotation.videoUrl}\n                        onClick={(event) => {\n                          event.preventDefault();\n                          setUrl(annotation.videoUrl);\n                        }}\n                      >\n                        {annotation.videoUrl}\n                      </a>\n                    </td>\n                    <td>\n                      <a\n                        // TODO: Link somewhere real, maybe the video URL + timestamp so that folks can copy/paste the link and have it accurately jump to the right spot?\n                        href={`#${videoTimepointFormatter(annotation.videoTime)}`}\n                        onClick={(event) => {\n                          if (videoPlayerRef.current) {\n                            event.preventDefault();\n                            videoPlayerRef.current.seekTo(annotation.videoTime, 'seconds');\n                          }\n                        }}\n                      >\n                        {videoTimepointFormatter(annotation.videoTime)}\n                      </a>\n                    </td>\n                    <td>{timeFormatter(annotation.localTime || undefined)}</td>\n                    <td>\n                      {annotation.latLng ? (\n                        <a\n                          // TODO: Link somewhere real, maybe to Google Maps with this lat/lng?\n                          href=\"#🌎\"\n                          onClick={(event) => {\n                            event.preventDefault();\n                            setMarkerLatLng(annotation.latLng);\n                          }}\n                        >\n                          🌎\n                        </a>\n                      ) : null}\n                    </td>\n                    <td>{annotation.notes}</td>\n                    <td>{annotation.hashtags.join(', ')}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default VideoAnnotatorPage;\n","import React from 'react';\nimport { Redirect, Route, Switch } from 'react-router';\n\nimport AboutPage from './AboutPage';\nimport CollectionsApp from './CollectionsApp';\nimport Error404Page from './Error404Page';\nimport OtherResourcesPage from './OtherResourcesPage';\nimport StaticEvidencePage from './StaticEvidencePage';\nimport SuspectsApp, { SuspectsTableApp } from './SuspectsApp';\nimport VideoAnnotatorPage from './video-annotator/VideoAnnotatorPage';\n\nexport const PATHS = {\n  evidence: '/e',\n  collections: '/c',\n  suspects: '/gallery',\n  suspectsTable: '/poi_table',\n  about: '/about',\n  resources: '/resources',\n};\n\nfunction Routes() {\n  return (\n    <Switch>\n      <Route exact path=\"/\">\n        <Redirect to={PATHS.evidence} />\n      </Route>\n      <Route path={PATHS.about} component={AboutPage} />\n      <Route path={PATHS.resources} component={OtherResourcesPage} />\n      <Route path={PATHS.suspects} component={SuspectsApp} />\n      <Route path={PATHS.suspectsTable} component={SuspectsTableApp} />\n      <Route path={PATHS.evidence} exact component={StaticEvidencePage} />\n      <Route path={`${PATHS.evidence}/:detailId`} component={StaticEvidencePage} />\n      <Route exact path={PATHS.collections} component={CollectionsApp} />\n      <Route\n        path={`${PATHS.collections}/:collectionId?name=:name&collectionItems=:collectionItems&detail=:detailId`}\n        component={CollectionsApp}\n      />\n      <Route path=\"/video-annotator\">\n        <VideoAnnotatorPage />\n      </Route>\n      <Route component={Error404Page} />\n    </Switch>\n  );\n}\n\nexport default Routes;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\n\nimport './index.css';\nimport Routes from './ui/Routes';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <Routes />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}