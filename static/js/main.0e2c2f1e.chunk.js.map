{"version":3,"sources":["ui/shared/constants.ts","ui/PageHeaderAndNav.tsx","ui/table-styled-components.ts","ui/AboutPage.tsx","ui/Error404Page.tsx","ui/OtherResourcesPage.tsx","data.ts","../../libs/formatters/index.ts","ui/shared/LocationLink.tsx","ui/shared/mixins.ts","ui/shared/shared-styled-components.ts","ui/shared/Tag.tsx","ui/shared/util.ts","ui/EvidenceDetail/detail-styled-components.ts","ui/EvidenceDetail/evidenceFormUrl.ts","ui/EvidenceDetail/media-embeds.tsx","ui/EvidenceDetail/index.tsx","ui/shared/contexts.ts","ui/shared/hooks.ts","ui/EvidenceMain/evidence-results-styled-components.ts","ui/EvidenceMain/EvidenceMapbox.tsx","ui/EvidenceMain/Result.tsx","ui/EvidenceMain/EvidenceTable.tsx","ui/EvidenceMain/TimelineHelpers.tsx","ui/EvidenceMain/timeline/EvidenceStripe.tsx","ui/EvidenceMain/EvidenceTimeline.tsx","ui/EvidenceMain/index.tsx","ui/EvidenceMain/EvidenceCopyableExport.tsx","ui/EvidenceMain/EvidenceExportView.tsx","ui/EvidenceMain/EvidenceMobileOverlay.tsx","ui/FilterBox/filter-box-styled-components.ts","ui/FilterBox/ActiveFilters.tsx","ui/FilterBox/KeywordSearch.tsx","ui/FilterBox/Section.tsx","ui/FilterBox/TagFilterChoiceBox.tsx","ui/FilterBox/index.tsx","ui/FilterBox/filterEvidence.ts","ui/EvidenceApp.tsx","ui/StaticEvidencePage.tsx","../../data/fbi_links.ts","../../libs/canonical_tags/index.ts","../../data/index.ts","ui/SuspectsGallery.tsx","ui/Row/row-styled-components.ts","ui/SuspectsApp.tsx","ui/Row/index.tsx","ui/StaticSuspectsApp.tsx","ui/Routes.tsx","index.tsx"],"names":["colors","shadows","padding","widths","PageHeaderDiv","styled","div","NavList","ul","UpdateDiv","navLinkOrText","to","text","isLink","PageHeaderAndNav","className","PATHS","evidence","suspects","about","resources","href","data-show-count","async","src","charSet","AppWrapper","TableStyle","table","EvidenceResultsWrapper","thead","th","EvidenceTableWrapper","EvidenceCount","AboutDiv","button","AboutPage","download","Error404Div","Error404Page","location","pathname","ResourcesDiv","ResourcesColumn","ResourcesPage","toDate","str","Date","JITTER","toLatLng","jitterSeed","rand","randomSeed","create","lat","floatBetween","lng","TIMELINE_DOMAIN_START","UTC","TIMELINE_DOMAIN_END","chroma","scale","makeColor","timelineStartPercent","undefined","colorIndex","Math","floor","length","clampedColorIndex","min","max","evidenceData","map","item","realTimeStart","realTimeEnd","time","getTime","toTimelinePercent","latLng","_id","color","toNdecimals","x","places","pow10","roundedX","round","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","format","latLngFormatter","decimalPlaces","latStr","lngStr","LocationLink","name","googleMapUrl","target","rel","TextButton","css","LeftBox","Pill","span","PillXButton","Tag","id","title","label","onDelete","style","backgroundColor","type","onClick","numberTimeFormatter","d","moment","tz","timeFormatter","realTimeRangeFormatter","formattedRealTimeStart","formattedRealTimeEnd","videoTimepointFormatter","timeSec","hhmmss","toISOString","substr","startsWith","slice","videoTimepointRangeFormatter","startSec","endSec","formattedStart","formattedEnd","BORDER_RADIUS","MODAL_SPACING","ModalWrapper","section","Header","header","Buttons","nav","Content","main","buttonBorderWidth","Nav","formatTags","tags","join","evidenceUpdateFormUrl","formUrl","URL","formFields","usp","imageUrl","videoUrl","videoStartTimepoint","videoEndTimepoint","locationName","replace","suspectTags","otherTags","summary","rationale","Object","entries","forEach","key","value","trim","searchParams","append","bareMp4VideoTag","url","urlAsString","safeMakeUrl","hash","controls","embedTweet","tweetId","options","conversation","embedVideo","videoDetails","ytVideoId","toString","width","height","frameBorder","allow","allowFullScreen","youtubeIframe","videoId","identifier","filename","archiveOrgVideoIframe","megaVideoId","urlString","megaVideoIframe","vimeoId","vimeoIframe","profileId","embedUrl","border","overflow","scrolling","facebookIframe","_evidence","driveFileId","googleDriveIframe","embedId","rumbleIframe","instagramIframe","embedImage","hostname","match","matchResult","tweetIdFromUrl","ppId","pacificPressId","pacificPressIdFromUrl","alt","videoTimepointRow","formattedRange","scope","EvidenceDetail","detailId","onClose","prevPath","nextPath","collectionsFC","history","useHistory","useLocation","handleOnClick","React","useCallback","push","search","isOpen","onRequestClose","contentLabel","overlay","zIndex","shouldCloseOnOverlayClick","Button","size","variant","disabled","HighlightContext","createContext","highlight","setHighlight","split","usePageTitle","useEffect","previousTitle","document","useDebouncedValue","delay","useState","debouncedValue","setDebouncedValue","timer","setTimeout","clearTimeout","useQueryState","query","qs","parse","queryState","setQueryState","debouncedQueryState","stringify","nextQuery","updater","nextState","MapWrapper","MapSpinner","EVIDENCE_COLORS","TimelineWrapper","HandleShape","svg","TableWrapper","NoResults","capitolLatLng","evidenceLayerStyle","paint","evidenceHoverLayerStyle","source","Tooltip","EvidenceMapbox","onHover","onChangeBounds","locatedEvidence","filter","sort","a","b","geojson","features","geometry","coordinates","properties","parseFloatString","parseFloat","viewport","latitude","longitude","zoom","hoveredEvidence","setHoveredEvidence","onMapHover","event","feature","hoveredItem","find","onMapClick","clickedItem","hoverLayerFilter","loading","setLoading","mapRef","current","getMap","bounds","getBounds","serializedBounds","JSON","toArray","debouncedBounds","deserializedBounds","LngLatBounds","convert","onViewportChange","nextViewport","prevQueryState","mapboxApiAccessToken","mapStyle","interactiveLayerIds","ref","data","isJan6Eastern","date","toEasternTimeString","forceIncludeDate","m","dateStr","timeStr","ResultThumbnail","cellData","formattedDuration","thumbnailUrl","toUpperCase","ResultSummary","ResultTags","ResultTime","alwaysIncludeDate","toRealTimeFieldStr","ResultLocation","cellDataGetter","rowData","makeCellRenderer","Component","EvidenceTable","results","getDetailPath","index","headerHeight","rowHeight","rowCount","rowGetter","rowClassName","onRowClick","onRowMouseOver","onRowMouseOut","noRowsRenderer","dataKey","cellRenderer","flexGrow","RAIL_HEIGHT","railOuterStyle","position","cursor","railInnerStyle","pointerEvents","SliderRail","getRailProps","Handle","domain","handle","percent","isRight","getHandleProps","left","transform","WebkitTapHighlightColor","role","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","marginTop","viewBox","points","Track","getTrackProps","borderRadius","Tick","tick","display","flexDirection","alignItems","fontSize","timelineTitle","Stripe","Link","EvidenceStripe","Consumer","onMouseOver","onMouseOut","memo","sliderStyle","EvidenceTimeline","values","startEndTimes","onChangeTimes","draggingValues","setDraggingValues","tickValues","range","mode","step","reversed","rootStyle","onUpdate","newValues","onChange","handles","right","tracks","ticks","count","Modal","setAppElement","EvidenceViewer","prevEvidence","nextEvidence","timedEvidence","setStartEndTimes","rootPath","setBounds","useParams","closeModal","debouncedHighlight","f","wait","immediate","timeout","args","later","callNow","debounce","detailEvidence","r","i","Provider","ExportEvidenceItem","detailUrl","allTags","concat","ExportEvidenceTable","maybetwoColumnRow","EvidenceCopyableExport","ev","condition","content","ExportDiv","EvidenceExportView","tagFilters","keywords","toggles","borderTop","suspect","Array","from","getSouth","getNorth","getWest","getEast","includeUnlocated","includeUntimestamped","MobileOverlay","open","setOpen","background","preventDefault","margin","Box","BoxHeader","Toggles","SectionHeader","h5","FilterPills","ActiveFilters","choices","tagFilterChoices","useMemo","result","keys","filterKey","sectionFilters","sectionChoices","element","KeywordSearch","Form","Control","placeholder","e","Section","children","TagFilterChoiceBox","categoryId","choicesFilter","setChoicesFilter","selectedIds","toggleSelection","newSelected","Set","has","delete","add","ButtonGroup","toggle","vertical","choice","ToggleButton","checked","classnames","hidden","toLowerCase","includes","FilterBox","onKeywordsChanged","onTagFilterChanged","onToggleChanged","suspectTagChoicesFilter","setSuspectTagChoicesFilter","otherTagChoicesFilter","setOtherTagChoicesFilter","removeOneFromSection","Switch","evt","params","filterEvidence","rawKeywords","filteredEvidence","timelineFilteredEvidence","allSuspects","allOtherTags","addTagFilterChoiceItem","tagFilterChoiceMap","s","some","itemField","keyword","toLocaleLowerCase","indexOf","doesEvidenceMatchKeywords","matchSuspects","tag","matchTags","matchTimeline","itemStart","itemEnd","rangeStart","rangeEnd","isItemInTimeRange","matchBounds","isEvidenceInBounds","isArray","EvidenceApp","props","other_tags","QUERY_TRUE","booleanFromQueryParam","param","defaultValue","parsedStartEndTimes","start_end_times","parseInt","exportView","setExportView","newValue","prevState","queryKey","nextKeywords","toggleName","setToggles","newTimes","hideExplorerLink","StaticEvidencePage","fbiLinksByFbiNumber","FBI_POI_LINKS","link","regexMatch","num","getFbiLinksByFbiNumber","CanonicalTags","declarations","lookupTable","warnings","dec","addToStore","mainTag","alternateTags","altTag","this","msg","console","warn","cleanedKey","cleanLookupKey","currentValue","lookup","suspectData","arrestDate","flatMap","primaryHashtag","alternateHashtags","logWarningsToConsole","getCanonicalSuspectTags","SuspectCardDiv","SuspectThumbnailImg","img","OverviewContainerDiv","SuspectThumbnail","THUMBNAIL_FILENAMES","thumbnailSrcUrl","twitterSearchUrl","SuspectCard","fbiLink","fbiIdentifier","fbiNumberMatch","caption","fbiUrl","getFbiLink","data-title","SuspectsGallery","medText","SuspectsApp","li","td","maxWidth","marginBottom","StaticSuspectsApp","collections","suspectsTable","Routes","exact","path","component","OtherResourcesPage","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0e2c2f1e.chunk.js","sourcesContent":["/* CONSTANTS */\nconst colors = {\n  tableLines: '#999',\n  titleBg: '#99ddbb',\n  headerBg: '#bbffcc',\n  link: '#374',\n  linkHover: '#051',\n  activeFilter: '#f0f099',\n  activeFilterHover: '#ff0',\n  /* tag colors */\n  person: '#bbe',\n  group: '#ffe069',\n  behavior: '#fcb',\n  equipment: '#d0dd99',\n};\n\nconst shadows = {\n  lg: '0px 1px 12px rgba(0, 0, 0, 0.3)',\n  sm: '1px 1px 2px rgba(0, 0, 0, 0.2)',\n};\n\nconst padding = {\n  xs: 3,\n  sm: 6,\n  md: 12,\n  lg: 24,\n  xl: 48,\n  xxl: 72,\n};\n\nconst widths = {\n  filterbox: 240,\n};\n\nexport { colors, shadows, padding, widths };\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Follow } from 'react-twitter-widgets';\n\nimport styled from 'styled-components';\n\nimport { PATHS } from './Routes';\n\nimport { colors, widths, padding } from './shared/constants';\n\nconst PageHeaderDiv = styled.div`\n  padding: ${padding.sm}px ${padding.lg}px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n\n  background: ${colors.titleBg};\n\n  .sitename {\n    margin: 0;\n    display: inline-block;\n    font-size: 2rem;\n    margin-right: ${padding.xl}px;\n    position: relative;\n    white-space: nowrap;\n\n    a {\n      color: #000;\n    }\n\n    a: hover {\n      text-decoration: none;\n    }\n  }\n\n  .sitename .beta {\n    position: absolute;\n    top: 0rem;\n    right: -1rem;\n    background: #003399;\n    color: #ffffff;\n    font-size: 0.6rem;\n    font-weight: bold;\n    padding: 0px 3px;\n    transform: rotate(10deg);\n  }\n`;\n\nconst NavList = styled.ul`\n  margin: 0px;\n  padding: 0px;\n  white-space: nowrap;\n\n  li {\n    display: inline-block;\n    margin-right: ${padding.lg}px;\n    margin-bottom: 0px;\n  }\n\n  a {\n    color: ${colors.linkHover};\n  }\n`;\n\nconst UpdateDiv = styled.div`\n  display: inline-block;\n  margin-left: auto;\n  font-size: 0.8rem;\n  text-align: center;\n  white-space: nowrap;\n  color: ${colors.linkHover};\n`;\n\nconst mostRecentUpdateStr = () => {\n  return 'FIXME ';\n};\n\nconst navLinkOrText = ({ to, text, isLink }: { to: string; text: string; isLink: boolean }) => {\n  if (isLink) {\n    return (\n      <li>\n        <Link to={to}>{text}</Link>\n      </li>\n    );\n  } else {\n    return <li>{text}</li>;\n  }\n};\n\nexport const PageHeaderAndNav = () => {\n  return (\n    <PageHeaderDiv>\n      <div className=\"sitename\">\n        <div className=\"beta\">VERY BETA</div>\n        <Link to=\"/\">January 6 Evidence</Link>\n      </div>\n      <NavList>\n        {navLinkOrText({ to: PATHS.evidence, text: 'Explorer', isLink: true })}\n        {navLinkOrText({ to: PATHS.suspects, text: 'Persons of Interest', isLink: true })}\n        {navLinkOrText({ to: PATHS.about, text: 'About', isLink: true })}\n        {navLinkOrText({ to: PATHS.resources, text: 'Resources', isLink: true })}\n      </NavList>\n      <UpdateDiv>\n        {/*\n          // uncomment when mostRecentUpdateStr is working\n         (\n          <span>\n            Updated {mostRecentUpdateStr()} <br />\n          </span>\n         )\n        */}\n        <span>\n          For updates and feedback: <br />\n        </span>\n        <a\n          href=\"https://twitter.com/jan6evidence\"\n          className=\"twitter-follow-button\"\n          data-show-count=\"false\"\n        >\n          Follow @jan6evidence\n        </a>\n        <script async src=\"https://platform.twitter.com/widgets.js\" charSet=\"utf-8\" />\n      </UpdateDiv>\n    </PageHeaderDiv>\n  );\n};\n\nexport default PageHeaderAndNav;\n","import styled from 'styled-components';\n\nimport { colors, widths, padding } from './shared/constants';\n\nexport const AppWrapper = styled.div`\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n\n  h1 {\n    padding: 6px;\n    margin: 0;\n    background: ${colors.titleBg};\n  }\n`;\n\nexport const TableWrapper = styled.div`\n  position: relative;\n  flex: 1 1 auto;\n  background: #fcfcfc;\n\n  overflow: scroll;\n`;\n\nconst TableStyle = styled.table`\n  border-spacing: 0;\n  border-collapse: collapse;\n\n  th,\n  td {\n    margin: 0;\n    padding: 0 6px;\n  }\n\n  tbody tr {\n    border-bottom: 1px solid ${colors.tableLines};\n    &:hover {\n      background: #f9f9f9;\n    }\n  }\n\n  a {\n    color: ${colors.link};\n    &:hover {\n      color: ${colors.linkHover};\n    }\n  }\n`;\n\nexport const ScrollableTable = styled(TableStyle)`\n  width: 100%;\n`;\n\nexport const HeadFloater = styled(TableStyle)`\n  position: absolute;\n  top: 0;\n`;\n\nexport const TableHead = styled.thead`\n  background: white;\n`;\n\nexport const StickyTH = styled.th`\n  background: ${colors.headerBg};\n  position: sticky;\n  z-index: 10;\n\n  .parent-category {\n    border-bottom: 1px solid #051;\n  }\n`;\n\nexport const EvidenceResultsWrapper = styled.div`\n  padding-left: ${widths.filterbox}px;\n  width: 100%;\n  max-height: 100vh;\n  min-height: 100vh;\n\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n`;\n\nexport const EvidenceTableWrapper = styled.div`\n  flex: 1 1 auto;\n\n  border-top: 1px solid ${colors.tableLines};\n  display: flex;\n`;\n\nexport const EvidenceCount = styled.div`\n  padding: ${padding.sm}px;\n`;\n\nexport const ButtonLink = styled.button`\n  border: 0;\n  background: transparent;\n  margin: 0;\n  padding: 0;\n  font-size: inherit;\n  line-height: inherit;\n  color: ${colors.link};\n  text-decoration: underline;\n\n  &:hover {\n    color: ${colors.linkHover};\n  }\n`;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Tweet } from 'react-twitter-widgets';\n\nimport styled from 'styled-components';\n\nimport { PageHeaderAndNav } from './PageHeaderAndNav';\nimport { PATHS } from './Routes';\n\nimport Container from './shared/Container';\nimport { AppWrapper } from './table-styled-components';\n\nconst AboutDiv = styled.div`\n  max-width: 800px;\n  padding: 30px;\n  margin-left: auto;\n  margin-right: auto;\n\n  /* Fixes a safari-specific issue where the header gets squashed on longer pages\n     See https://github.com/jan6evidence/static-website/pull/177 */\n  min-height: -webkit-fill-available;\n\n  * + h2 {\n    margin-top: 2rem;\n  }\n`;\n\nfunction AboutPage() {\n  return (\n    <AppWrapper>\n      <PageHeaderAndNav />\n      <AboutDiv>\n        <h2>About</h2>\n        <p>\n          Since the January 6 attack on the Capitol, hundreds of volunteers have scrutinized photos\n          and video of the event. They have reviewed thousands of hours of footage, created\n          timelines, identified and tracked persons of interest, synchronized videos, and provided\n          analysis.\n        </p>\n        <p>\n          This site is an effort to help organize and visualize this crowdsourced information.\n          Contributors include data scientists, academic researchers, software engineers, and many\n          others. All are motivated by a desire to understand what happened on January 6 and why.\n          Most wish to remain anonymous.\n        </p>\n        <p>\n          If you find this site helpful in your own work, please credit &ldquo;crowdsourced\n          investigations shared on <a href=\"/\">Jan6evidence.com</a>.&rdquo;\n        </p>\n\n        <h2>Evidence</h2>\n        <p>\n          The evidence available in the <Link to={PATHS.evidence}>explorer</Link> currently comes\n          from two sources:{' '}\n          <a href=\"https://docs.google.com/spreadsheets/d/1x5h4BasakKqXdtLGrf-bZqVCZ_JEPPWvjKMzmhp5n4w\">\n            this google sheet\n          </a>{' '}\n          assembled by volunteers, and the{' '}\n          <a href=\"https://projects.propublica.org/parler-capitol-videos/\">\n            ProPublica-hosted Parler videos\n          </a>{' '}\n          . We also use the{' '}\n          <a href=\"https://docs.google.com/spreadsheets/d/18NzncPJ-5oaYrDfq_VnjaSTLyY_vKaoSTgc6lznl9GU\">\n            Capitol Suspects Database\n          </a>{' '}\n          to identify persons of interest, and gathered latitude/longitudes of Parler videos from\n          the <a href=\"https://jan6attack.com/videos.htm\">Capitol Terrorist Attack</a> site.\n        </p>\n        <p>\n          This site is in beta, and the current set is just a small fraction of the crowdsourced\n          data assembled online. Volunteers are continuously updating the data available in the\n          explorer, and we&rsquo;ll streamline the process in the future. Here&rsquo;s how you can\n          help:\n        </p>\n        <ul>\n          <li>\n            <a href=\"https://docs.google.com/document/d/1A7bK0p2k0pV_WOut8x69I6xGyZ3Qw9t4GWxnsGNCAfQ/edit\">\n              Sign up to review videos and log evidence\n            </a>\n            .\n          </li>\n          <li>\n            You can also use those same{' '}\n            <a href=\"https://docs.google.com/document/d/1A7bK0p2k0pV_WOut8x69I6xGyZ3Qw9t4GWxnsGNCAfQ/edit\">\n              instructions\n            </a>{' '}\n            to send us evidence logs from other videos as well.\n          </li>\n          <li>\n            When looking at a piece of evidence on this site, you&rsquo;ll see an{' '}\n            <b>Update Evidence</b> button. Use it to suggest a specific update.\n          </li>\n        </ul>\n        <p>\n          The evidence dataset is available for{' '}\n          <a href=\"/data/evidence.json\" download=\"evidence.json\">\n            download in JSON format\n          </a>\n          . Please note that the schema of this file may change at any time. We recommend\n          downloading a copy for yourself rather than automating retrieval from this site in a\n          manner that assumes a specific data structure.\n        </p>\n        <h2>Thanks</h2>\n        <p>This site builds on the work of many others. It would not be possible without...</p>\n        <ul>\n          <li>\n            <a href=\"https://twitter.com/donk_enby\">@donk_enby</a>, who provided the{' '}\n            <a href=\"https://twitter.com/donk_enby/status/1360064918742007809\">\n              largest source of evidence\n            </a>{' '}\n            from the attack.\n          </li>\n          <li>\n            The dedicated team building the{' '}\n            <a href=\"https://docs.google.com/spreadsheets/d/18NzncPJ-5oaYrDfq_VnjaSTLyY_vKaoSTgc6lznl9GU/edit#gid=0\">\n              Capitol Suspects Database\n            </a>\n            .\n          </li>\n          <li>\n            <i>More coming soon&hellip;</i>\n          </li>\n        </ul>\n        <h2>Contact</h2>\n        <ul>\n          <li>\n            Twitter: <a href=\"https://twitter.com/jan6evidence\">@jan6evidence</a>\n          </li>\n          <li>\n            Email: <a href=\"mailto:jan6evidence@gmail.com\">jan6evidence@gmail.com</a>\n          </li>\n        </ul>\n      </AboutDiv>\n    </AppWrapper>\n  );\n}\n\nexport default AboutPage;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Tweet } from 'react-twitter-widgets';\n\nimport styled from 'styled-components';\n\nimport { PageHeaderAndNav } from './PageHeaderAndNav';\nimport { PATHS } from './Routes';\n\nimport Container from './shared/Container';\nimport { AppWrapper } from './table-styled-components';\n\nconst Error404Div = styled.div`\n  width: 800px;\n  padding: 30px;\n  margin-left: auto;\n  margin-right: auto;\n\n  /* Fixes a safari-specific issue where the header gets squashed on longer pages\n     See https://github.com/jan6evidence/static-website/pull/177 */\n  min-height: -webkit-fill-available;\n\n  * + h2 {\n    margin-top: 2rem;\n  }\n`;\n\nfunction Error404Page({ location }: { location: any }) {\n  return (\n    <AppWrapper>\n      <PageHeaderAndNav />\n      <Error404Div>\n        <h2>404: Not found</h2>\n        <p>{location.pathname}</p>\n      </Error404Div>\n    </AppWrapper>\n  );\n}\n\nexport default Error404Page;\n","import React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { Link } from 'react-router-dom';\nimport { Tweet } from 'react-twitter-widgets';\n\nimport styled from 'styled-components';\n\nimport { PageHeaderAndNav } from './PageHeaderAndNav';\n\nimport Container from './shared/Container';\nimport { AppWrapper } from './table-styled-components';\n\nconst ResourcesDiv = styled.div`\n  display: flex;\n  margin-left: auto;\n  margin-right: auto;\n  max-width: 800px;\n`;\n\nconst ResourcesColumn = styled.div`\n  padding: 30px;\n  * + h2 {\n    margin-top: 2rem;\n  }\n`;\n\nfunction ResourcesPage() {\n  return (\n    <AppWrapper>\n      <PageHeaderAndNav />\n      <ResourcesDiv>\n        <ResourcesColumn>\n          <h2>Resources for investigators of the Capitol Attack</h2>\n          <p>\n            <b>Read this first</b>\n          </p>\n          <ul>\n            <li>\n              <a href=\"https://www.technologyreview.com/2021/01/14/1015931/how-to-be-an-ethical-online-investigator-activist/\">\n                How to be an ethical online investigator\n              </a>\n            </li>\n          </ul>\n          <p>\n            <b>Locations</b>\n          </p>\n          <ul>\n            <li>\n              US Capitol Map:{' '}\n              <a href=\"https://drive.google.com/file/d/1aQFDTYoTsYLRJ3qbPS7-4uMKEWtM6iRQ/view?usp=sharing\">\n                Grounds\n              </a>\n              ,{' '}\n              <a href=\"https://drive.google.com/file/d/1DhIuY_lp3UW3FhmJcZuT0fmYLwOZAvfQ/view?usp=sharing\">\n                First Floor\n              </a>\n              ,{' '}\n              <a href=\"https://drive.google.com/file/d/1NSQLNzefv9sowlu_pcQjHQC6he6ba5vr/view?usp=sharing\">\n                Second Floor\n              </a>\n              ,{' '}\n              <a href=\"https://drive.google.com/file/d/1--4oBRMUlYBaTRmB9YhvCXROuzvsO7JR/view?usp=sharing\">\n                Third Floor\n              </a>\n            </li>\n            <li>\n              Guide to recognizing US Capitol locations:{' '}\n              <a href=\"https://docs.google.com/document/d/1mC7V-FqjB4PzmAgzYlURG7AnGA_pdDnVsEh-7fFRToM/edit#heading=h.56y0ktk4a1f8\">\n                Exterior\n              </a>\n              ,{' '}\n              <a href=\"https://docs.google.com/document/d/1hxXJrKhtDyf-1anm6g-wgp9DNNiy0dJp4KJKiNlXyAU/edit#\">\n                Interior\n              </a>\n            </li>\n          </ul>\n          <p>\n            <b>Timing</b>\n          </p>\n          <ul>\n            <li>\n              <a href=\"https://docs.google.com/document/d/1uzKC6f9pPFQfBJM_jO-iNeFXQlZIP4ad_J4vizClENI/edit\">\n                Capitol Siege Timeline\n              </a>\n            </li>\n            <li>\n              <a href=\"https://docs.google.com/document/d/1aoUBFlERClHrNOoufBMiC7p0M15PrvyjM371sIG02Jw/edit\">\n                Visual Clues for Timing Capitol Siege Footage\n              </a>\n            </li>\n          </ul>\n          <p>\n            <b>Persons of Interest</b>\n          </p>\n          <ul>\n            <li>\n              <a href=\"https://docs.google.com/spreadsheets/d/18NzncPJ-5oaYrDfq_VnjaSTLyY_vKaoSTgc6lznl9GU\">\n                Capitol Suspects Database\n              </a>\n            </li>\n            <li>\n              <a href=\"https://www.fbi.gov/wanted/capitol-violence\">\n                FBI Most Wanted: Capitol Violence\n              </a>\n            </li>\n            <li>\n              <a href=\"https://mpdc.dc.gov/page/may-2020-february-2021-unrest-related-arrests-and-persons-interest\">\n                Metro Police Department: Persons of Interest\n              </a>\n            </li>\n            <li>\n              <a href=\"https://www.justice.gov/usao-dc/capitol-breach-cases\">\n                Department of Justice Cases\n              </a>\n            </li>\n          </ul>\n          <p>\n            <b>Other Tools</b>\n          </p>\n          <ul>\n            <li>\n              <a href=\"http://bit.ly/bcattools\">Bellingcat&rsquo;s Online Investigation Toolkit</a>\n            </li>\n            <li>\n              <a href=\"https://jan6attack.com\">Capitol Terrorist Attack</a>\n            </li>\n            <li>\n              <a href=\"https://www.detrumpify.org/pb_j6_marchers.php\">Detrumpify.org</a>\n            </li>\n            <li>\n              <a href=\"https://facesoftheriot.com/\">Faces of the Riot</a>\n            </li>\n            <li>\n              <a href=\"https://ne0ndistraction.github.io/posts/\">ne0ndistraction: Parler Posts</a>\n            </li>\n            <li>\n              <a href=\"http://capitolmap.com/faces\">Patr10tic: Facial Recognition Tools</a>\n            </li>\n            <li>\n              <a href=\"https://projects.propublica.org/parler-capitol-videos/\">\n                ProPublica: What Parler Saw\n              </a>\n            </li>\n            <li>\n              <a href=\"https://seditionhunters.org\">SeditionHunters.org</a>\n            </li>\n          </ul>\n        </ResourcesColumn>\n      </ResourcesDiv>\n    </AppWrapper>\n  );\n}\n\nexport default ResourcesPage;\n","import chroma from 'chroma-js';\nimport randomSeed from 'random-seed';\n\nimport evidenceData from '@jan6evidence/data/evidence.json';\nimport type { Evidence, Location, Suspect } from '@jan6evidence/types';\n\n// Dates are serailized as strings, so we need to manually deserialize\n// Would be nice to move this deserializaiton to ../data/index.ts but we tried\n// and ran into compile errors, so we're doing it here for now.\nconst toDate = (str: string | undefined): Date | undefined => {\n  if (!str) {\n    return undefined;\n  }\n  try {\n    return new Date(str);\n  } catch {\n    return undefined;\n  }\n};\n\nconst JITTER = { lat: 0.00003, lng: 0.00003 };\n\nconst toLatLng = (location: Location, jitterSeed: string): [number, number] => {\n  // jitterSeed with the evidence ID so that it's consistent\n  const rand = randomSeed.create(jitterSeed);\n  return [\n    location.lat + rand.floatBetween(-JITTER.lat, JITTER.lat),\n    location.lng + rand.floatBetween(-JITTER.lng, JITTER.lng),\n  ];\n};\n\nexport const TIMELINE_DOMAIN_START = Date.UTC(2021, 0, 6, 13, 0, 0); // 8AM Eastern\nexport const TIMELINE_DOMAIN_END = Date.UTC(2021, 0, 6, 23, 0, 0); // 6PM Eastern\n\nconst toTimelinePercent = (time: Date | undefined): number | undefined => {\n  if (!time) {\n    return undefined;\n  }\n  return Math.max(\n    0,\n    Math.min(\n      1,\n      (time.getTime() - TIMELINE_DOMAIN_START) / (TIMELINE_DOMAIN_END - TIMELINE_DOMAIN_START)\n    )\n  );\n};\n\n// 8am 10am 12pm 2pm 4pm 6pm\n\nconst colors = chroma.scale(['#f30', '#ff0', '#099', '#09f']).padding([-0.8, 0]).colors(40);\n\nconst makeColor = (timelineStartPercent: number | undefined): string => {\n  if (timelineStartPercent === undefined) {\n    return '#ccc';\n  }\n  const colorIndex = Math.floor(timelineStartPercent * colors.length);\n  const clampedColorIndex = Math.min(Math.max(colorIndex, 0), colors.length - 1);\n  return colors[clampedColorIndex];\n};\n\nconst evidence = evidenceData.map(\n  (item): Evidence => {\n    const realTimeStart = toDate(item.realTimeStart);\n    const realTimeEnd = toDate(item.realTimeEnd);\n    const timelineStartPercent = toTimelinePercent(realTimeStart);\n    return {\n      ...item,\n      realTimeStart,\n      realTimeEnd,\n      // TODO: move this to the data generation step?\n      latLng: item.location ? toLatLng(item.location, item._id) : undefined,\n      timelineStartPercent,\n      color: makeColor(timelineStartPercent),\n    } as Evidence;\n  }\n);\n\n// eslint-disable-next-line import/prefer-default-export\nexport { evidence, makeColor, toLatLng, toTimelinePercent };\n","import moment from 'moment-timezone';\n\nimport type { Location as LatLng } from '../types/Location';\n\n// This is used to autolink URLs (not already embedded in `<>` or `()`) in markdown, before translation to HTML\n// https://stackoverflow.com/questions/3809401/what-is-a-good-regular-expression-to-match-a-url\nconst URL_REGEX = /(?<![(<])https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)[^.\\s]/g;\n\nexport const autolinkMarkdown = (md: string): string => {\n  return md.replace(URL_REGEX, (match: string): string => {\n    return `<${match}>`;\n  });\n};\n\nexport const preserveLinebreaksMarkdown = (md: string): string => {\n  return md.trim().replace(/\\n/g, (_newline: string) => '  \\n');\n};\n\nexport const markdownPreprocessing = (md: string): string => {\n  return preserveLinebreaksMarkdown(autolinkMarkdown(md));\n};\n\nexport const numberTimeFormatter = (d: number) => moment.tz(d, 'America/New_York').format('h:mm A');\n\nexport const timeFormatter = (\n  d: Date | undefined,\n  format: string = 'h:mm A'\n): string | undefined => {\n  if (d) {\n    return moment(d).tz('America/New_York').format(format);\n  } else {\n    return undefined;\n  }\n};\n\nexport const realTimeRangeFormatter = (realTimeStart?: Date, realTimeEnd?: Date): string => {\n  const formattedRealTimeStart = timeFormatter(realTimeStart) || '??:??';\n  const formattedRealTimeEnd = realTimeEnd ? timeFormatter(realTimeEnd) : undefined;\n  if (formattedRealTimeEnd && formattedRealTimeEnd !== formattedRealTimeStart) {\n    return `${formattedRealTimeStart} - ${formattedRealTimeEnd}`;\n  } else {\n    return formattedRealTimeStart;\n  }\n};\n\nexport const videoTimepointFormatter = (timeSec?: number): string | undefined => {\n  if (timeSec === undefined) {\n    return undefined;\n  }\n  // https://stackoverflow.com/a/1322771\n  // Note that this ignores decimals.\n  const hhmmss = new Date(timeSec * 1000).toISOString().substr(11, 8);\n  if (hhmmss.startsWith('00')) {\n    return hhmmss.slice(1);\n  } else {\n    return hhmmss;\n  }\n};\n\nexport const videoTimepointRangeFormatter = (\n  startSec?: number,\n  endSec?: number\n): string | undefined => {\n  if (startSec === undefined) {\n    return undefined;\n  }\n  const formattedStart = videoTimepointFormatter(startSec) || '??:??';\n  const formattedEnd = endSec ? videoTimepointFormatter(endSec) : undefined;\n  if (formattedEnd && formattedEnd !== formattedStart) {\n    return `${formattedStart} - ${formattedEnd}`;\n  } else {\n    return formattedStart;\n  }\n};\n\nexport const toNdecimals = (x: number, places: number): string => {\n  const pow10 = 10 ** places;\n  const roundedX = Math.round(x * pow10) / pow10;\n  const formatter = new Intl.NumberFormat('en-US', {\n    minimumFractionDigits: places,\n    maximumFractionDigits: places,\n  });\n  return formatter.format(roundedX);\n};\n\nconst LAT_LONG_DECIMAL_PLACES = 4;\n\nexport const latLngFormatter = (\n  latLng: LatLng | undefined,\n  decimalPlaces: number = LAT_LONG_DECIMAL_PLACES\n): string | undefined => {\n  if (latLng) {\n    const [latStr, lngStr] = [latLng.lat, latLng.lng].map((x) => toNdecimals(x, decimalPlaces));\n    return `${latStr}, ${lngStr}`;\n  } else {\n    return undefined;\n  }\n};\n","import React from 'react';\n\nimport { latLngFormatter } from '@jan6evidence/formatters';\nimport { Location as LatLng } from '@jan6evidence/types';\n\nexport const LocationLink = ({ latLng, name }: { latLng?: LatLng; name?: string }) => {\n  if (latLng) {\n    const googleMapUrl = `https://maps.google.com/?q=${latLng.lat},${latLng.lng}`;\n    return (\n      <span className=\"location\">\n        <a href={googleMapUrl} target=\"_blank\" rel=\"noreferrer\">\n          {name || latLngFormatter(latLng)}\n        </a>\n      </span>\n    );\n  } else {\n    return <span className=\"location\">?</span>;\n  }\n};\n\nexport default LocationLink;\n","import { css } from 'styled-components';\n\nimport { padding, widths, colors, shadows } from './constants';\n\nexport const TextButton = css`\n  border: 0;\n  background: none;\n\n  &:hover {\n    background: rgba(0, 0, 0, 0.2);\n  }\n  &:active {\n    background: rgba(0, 0, 0, 0.4);\n    color: white;\n  }\n`;\n\nexport const LeftBox = css`\n  width: ${widths.filterbox}px;\n  min-height: 100vh;\n  max-height: 100vh;\n  position: fixed;\n  top: 0;\n  left: 0;\n\n  z-index: 10;\n  box-shadow: ${shadows.lg};\n  background-color: #ddd;\n  border-right: 2px solid ${colors.tableLines};\n\n  display: flex;\n  flex-direction: column;\n`;\n","import styled from 'styled-components';\n\nimport { padding, shadows } from './constants';\nimport { TextButton } from './mixins';\n\nexport const Pill = styled.span`\n  position: relative;\n  border-radius: ${padding.sm}px;\n  background: #b0adaa;\n  display: inline-block;\n  padding: 1px 4px 1px 4px;\n  margin: 0 3px 3px 0;\n  font-size: 12px;\n\n  box-shadow: ${shadows.sm};\n\n  max-width: 100px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  &.has-delete {\n    padding-right: 16px;\n  }\n`;\n\nexport const PillXButton = styled.button`\n  ${TextButton}\n  height: 100%;\n  padding-right: 4px;\n  position: absolute;\n  top: 0;\n  right: 0;\n`;\n","import React from 'react';\n\nimport { Pill, PillXButton } from './shared-styled-components';\n\ntype Props = {\n  id: string;\n  label: string;\n  className?: string;\n  color?: string;\n  title?: string;\n  onDelete?: () => void;\n};\n\nconst Tag = ({ id, title, className, color, label, onDelete }: Props) => (\n  <Pill\n    key={`tag-${title}-${id}`}\n    style={color ? { backgroundColor: color } : {}}\n    className={`${className}${onDelete ? ' has-delete' : ''}`}\n    title={title || label}\n  >\n    {label}\n    {onDelete && (\n      <PillXButton title=\"Delete\" type=\"button\" onClick={onDelete}>\n        &times;\n      </PillXButton>\n    )}\n  </Pill>\n);\n\nexport default Tag;\n","import moment from 'moment-timezone';\n\nimport { latLngFormatter } from '@jan6evidence/formatters';\nimport { Location as LatLng } from '@jan6evidence/types';\n\nexport const numberTimeFormatter = (d: number) => moment.tz(d, 'America/New_York').format('h:mm A');\n\nexport const timeFormatter = (\n  d: Date | undefined,\n  format: string = 'h:mm A'\n): string | undefined => {\n  if (d) {\n    return moment(d).tz('America/New_York').format(format);\n  } else {\n    return undefined;\n  }\n};\n\nexport const realTimeRangeFormatter = (realTimeStart?: Date, realTimeEnd?: Date): string => {\n  const formattedRealTimeStart = timeFormatter(realTimeStart) || '??:??';\n  const formattedRealTimeEnd = realTimeEnd ? timeFormatter(realTimeEnd) : undefined;\n  if (formattedRealTimeEnd && formattedRealTimeEnd !== formattedRealTimeStart) {\n    return `${formattedRealTimeStart} - ${formattedRealTimeEnd}`;\n  } else {\n    return formattedRealTimeStart;\n  }\n};\n\nexport const videoTimepointFormatter = (timeSec?: number): string | undefined => {\n  if (timeSec === undefined) {\n    return undefined;\n  }\n  // https://stackoverflow.com/a/1322771\n  // Note that this ignores decimals.\n  const hhmmss = new Date(timeSec * 1000).toISOString().substr(11, 8);\n  if (hhmmss.startsWith('00')) {\n    return hhmmss.slice(1);\n  } else {\n    return hhmmss;\n  }\n};\n\nexport const videoTimepointRangeFormatter = (\n  startSec?: number,\n  endSec?: number\n): string | undefined => {\n  if (startSec === undefined) {\n    return undefined;\n  }\n  const formattedStart = videoTimepointFormatter(startSec) || '??:??';\n  const formattedEnd = endSec ? videoTimepointFormatter(endSec) : undefined;\n  if (formattedEnd && formattedEnd !== formattedStart) {\n    return `${formattedStart} - ${formattedEnd}`;\n  } else {\n    return formattedStart;\n  }\n};\n\nexport function debounce(f: (...args: any[]) => void, wait: number, immediate?: boolean) {\n  let timeout: NodeJS.Timeout | null;\n  return (...args: any[]) => {\n    const later = () => {\n      timeout = null;\n      if (!immediate) f(...args);\n    };\n    const callNow = immediate && !timeout;\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) f(...args);\n  };\n}\n","import styled from 'styled-components';\n\nimport { colors, shadows, padding } from '../shared/constants';\n\nconst BORDER_RADIUS = padding.md;\nconst MODAL_SPACING = 40;\nconst HEADER_HEIGHT = 64;\n\nexport const ModalWrapper = styled.section`\n  position: absolute;\n  transform: translate(0, 0); // hack to make the prev/next buttons appear properly\n  top: ${MODAL_SPACING}px;\n  left: ${MODAL_SPACING}px;\n  right: ${MODAL_SPACING}px;\n  bottom: ${MODAL_SPACING}px;\n  background: white;\n  border-radius: ${BORDER_RADIUS}px;\n  border: 2px solid ${colors.titleBg};\n  box-shadow: ${shadows.lg};\n\n  display: flex;\n  flex-direction: column;\n\n  a {\n    color: ${colors.link};\n\n    &:hover {\n      color: ${colors.linkHover};\n    }\n  }\n`;\n\nexport const Header = styled.header`\n  flex: 0 0 auto;\n  background: ${colors.headerBg};\n  position: relative;\n  border-radius: ${BORDER_RADIUS}px ${BORDER_RADIUS}px 0 0;\n  padding: ${padding.md}px;\n  height: ${HEADER_HEIGHT}px;\n\n  h2 {\n    margin: 0;\n    padding: 0;\n  }\n`;\n\nexport const Buttons = styled.nav`\n  position: absolute;\n  top: 0;\n  right: 0;\n\n  display: flex;\n  align-items: center;\n\n  button {\n    &.close-button {\n      background: 0;\n      border: 0;\n      font-size: 32px;\n      line-height: 32px;\n      color: #555;\n      display: flex;\n      align-items: baseline;\n\n      font-size: 36px;\n      line-height: 36px;\n      padding: ${padding.md}px ${padding.lg}px;\n\n      &:not(:disabled) {\n        color: ${colors.link};\n      }\n\n      &:hover:not(:disabled) {\n        color: ${colors.linkHover};\n\n        background: rgba(255, 255, 255, 0.3);\n      }\n    }\n  }\n`;\n\nexport const Content = styled.main`\n  flex: 1 1 auto;\n  padding: ${padding.md}px;\n  overflow-y: auto;\n  overflow-x: hidden;\n\n  .media {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    background: #333;\n    margin: ${-padding.md}px ${-padding.md}px 0 ${-padding.md}px;\n\n    a {\n      color: ${colors.headerBg};\n\n      &:hover {\n        color: ${colors.titleBg};\n      }\n    }\n\n    img {\n      max-height: calc(100vh - ${MODAL_SPACING * 2 + HEADER_HEIGHT * 3}px);\n    }\n    video {\n      max-height: calc(100vh - ${MODAL_SPACING * 2 + HEADER_HEIGHT * 5}px);\n    }\n\n    span {\n      display: block;\n      width: 100%;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      padding: 0 ${padding.md}px;\n      text-align: center;\n    }\n  }\n\n  .media + .media {\n    margin-top: 0px;\n  }\n\n  table {\n    border-collapse: collapse;\n    border-spacing: 0;\n    max-width: 708px;\n    margin: 0 auto;\n\n    th {\n      vertical-align: top;\n    }\n\n    td {\n      padding: 0 0 0 ${padding.md}px;\n    }\n\n    th,\n    td {\n      padding-top: ${padding.md}px;\n    }\n  }\n`;\n\nconst buttonBorderWidth = '3px';\n\nexport const Nav = styled.div`\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n\n  display: flex;\n  justify-content: space-between;\n\n  button {\n    height: 72px;\n    width: 60px;\n    font-size: 72px;\n    line-height: 72px;\n    padding-left: 7px;\n    background-color: ${colors.headerBg};\n    color: ${colors.link};\n    cursor: pointer;\n\n    border-top-right-radius: ${BORDER_RADIUS}px;\n    border-bottom-left-radius: ${BORDER_RADIUS}px;\n    border: 0;\n    border: ${buttonBorderWidth} solid ${colors.titleBg};\n    margin-bottom: -${buttonBorderWidth};\n    margin-left: -${buttonBorderWidth};\n\n    &:hover {\n      color: ${colors.linkHover};\n      border-color: ${colors.link};\n    }\n    &:active {\n      background-color: ${colors.titleBg};\n    }\n\n    &:disabled,\n    &:disabled:hover,\n    &:disabled:active {\n      cursor: auto;\n      background-color: #ddd;\n      color: #888;\n      border-color: #aaa;\n    }\n  }\n\n  button + button {\n    margin-left: 0;\n    margin-right: -${buttonBorderWidth};\n    padding-right: 4px;\n    border-radius: 0;\n    border-top-left-radius: ${BORDER_RADIUS}px;\n    border-bottom-right-radius: ${BORDER_RADIUS}px;\n  }\n`;\n","import { url } from 'inspector';\n\nimport { latLngFormatter } from '@jan6evidence/formatters';\nimport { Evidence } from '@jan6evidence/types';\n\nimport { timeFormatter, videoTimepointFormatter } from '../shared/util';\n\ntype FormData = {};\n\nconst formatTags = (tags: Array<string> | undefined): string | undefined => {\n  if (tags && tags.length > 0) {\n    return tags.join(', ');\n  } else {\n    return undefined;\n  }\n};\n\nconst evidenceUpdateFormUrl = (evidence: Evidence): string => {\n  const formUrl = new URL(\n    'https://docs.google.com/forms/d/e/1FAIpQLScCg7u21sUuCbO6lBKdTqxoSH4j2NiLGrWi5cliwCRra8O5UQ/viewform'\n  );\n  const formFields = {\n    usp: 'pp_url', // some standard google thing\n    'entry.1011702585': 'Modify an entry',\n    'entry.1623428240': evidence._id,\n    'entry.789172520': evidence.imageUrl,\n    'entry.523480783': evidence.videoUrl,\n    'entry.1776265168': videoTimepointFormatter(evidence.videoStartTimepoint),\n    'entry.1043855916': videoTimepointFormatter(evidence.videoEndTimepoint),\n    'entry.1394213472': evidence.locationName?.replace(/\\n {2}/, ' '),\n    'entry.807096470': latLngFormatter(evidence.location),\n    'entry.1510850464': formatTags(evidence.suspectTags),\n    'entry.161204806': formatTags(evidence.otherTags),\n    'entry.1939650052': evidence.summary,\n    // Date and time not working yet\n    //   'entry.325605150': evidence.realTimeStart?.toLocaleDateString()\n    //   'entry.325605150': timeFormatter(evidence.realTimeStart, 'HH:mm'),\n    'entry.129842460': evidence.rationale,\n  };\n  Object.entries(formFields).forEach(([key, value]) => {\n    if (value && value.trim() !== '') {\n      formUrl.searchParams.append(key, value);\n    }\n  });\n  return formUrl.href;\n};\n\nexport default evidenceUpdateFormUrl;\n","import React from 'react';\nimport { Tweet } from 'react-twitter-widgets';\n\nimport { Evidence, VideoDetailsArchiveOrg } from '@jan6evidence/types';\n\nconst safeMakeUrl = (urlAsString: string | undefined): URL | undefined => {\n  try {\n    return new URL(urlAsString || '');\n  } catch {\n    return undefined;\n  }\n};\n\nconst tweetIdFromUrl = (urlAsString: string | undefined): string | undefined => {\n  const url = new URL(urlAsString || '');\n  if (!url.hostname.match(/twitter\\.com$/)) {\n    return undefined;\n  }\n  const matchResult = url.pathname.match(/status\\/(\\d+)/);\n  return (matchResult && matchResult[1]) || undefined;\n};\n\nconst youtubeIframe = (evidence: Evidence, ytVideoId: string) => {\n  const url = new URL(`https://www.youtube.com/embed/${ytVideoId}`);\n  if (evidence.videoStartTimepoint) {\n    url.searchParams.append('start', evidence.videoStartTimepoint.toString());\n  }\n  return (\n    <iframe\n      key={evidence.videoUrl}\n      title=\"embedded evidence video from youtube\"\n      width=\"560\"\n      height=\"315\"\n      src={url.href}\n      frameBorder=\"0\"\n      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n      allowFullScreen\n    />\n  );\n};\n\nconst archiveOrgVideoIframe = (evidence: Evidence) => {\n  const videoDetails = evidence.videoDetails as VideoDetailsArchiveOrg;\n  const url = new URL(\n    `https://archive.org/embed/${videoDetails.identifier}/${videoDetails.filename}`\n  );\n  if (evidence.videoStartTimepoint) {\n    url.searchParams.append('start', evidence.videoStartTimepoint.toString());\n  }\n  return (\n    <iframe\n      key={evidence.videoUrl}\n      title=\"embedded evidence video from archive.org\"\n      src={url.href}\n      width=\"640\"\n      height=\"480\"\n      frameBorder=\"0\"\n      allowFullScreen\n    />\n  );\n};\n\nconst bareMp4VideoTag = (evidence: Evidence) => {\n  const url = safeMakeUrl(evidence.videoUrl);\n  if (!url) {\n    return null;\n  }\n  if (evidence.videoStartTimepoint && (url.hash || '').trim() === '') {\n    url.hash = `t=${evidence.videoStartTimepoint}`;\n  }\n  return (\n    <video controls key={evidence.videoUrl}>\n      <source src={url.href} />\n    </video>\n  );\n};\n\nconst vimeoIframe = (evidence: Evidence, vimeoId: string) => {\n  const url = new URL(`https://player.vimeo.com/video/${vimeoId}`);\n  if (evidence.videoStartTimepoint) {\n    url.hash = `t=${evidence.videoStartTimepoint}s`;\n  }\n  return (\n    <iframe\n      key={evidence.videoUrl}\n      title=\"embedded evidence video from vimeo.com\"\n      src={url.href}\n      width=\"640\"\n      height=\"480\"\n      frameBorder=\"0\"\n      allowFullScreen\n    />\n  );\n};\n\nconst facebookIframe = (evidence: Evidence, profileId: string, videoId: string) => {\n  const videoUrl = new URL(`https://facebook.com/${profileId}/videos/${videoId}`);\n  // start time doesn't seem to be respected...\n  if (evidence.videoStartTimepoint) {\n    videoUrl.searchParams.append('t', `{evidence.videoStartTimepoint}s`);\n  }\n  const embedUrl = new URL('https://www.facebook.com/plugins/video.php');\n  embedUrl.searchParams.append('href', videoUrl.href);\n  embedUrl.searchParams.append('show_text', 'false');\n  return (\n    <iframe\n      key={evidence.videoUrl}\n      title=\"embedded evidence video from facebook.com\"\n      src={embedUrl.href}\n      width=\"476\"\n      height=\"476\"\n      style={{ border: 'none', overflow: 'hidden' }}\n      scrolling=\"no\"\n      frameBorder=\"0\"\n      allow=\"autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share\"\n      allowFullScreen\n    />\n  );\n};\n\nconst megaVideoIframe = (evidence: Evidence, megaVideoId: string) => {\n  let urlString = `https://mega.nz/embed/${megaVideoId}`;\n  if (evidence.videoStartTimepoint) {\n    urlString += `!${evidence.videoStartTimepoint}s`;\n  }\n  return (\n    <iframe\n      key={evidence.videoUrl}\n      title=\"embedded evidence video from mega.nz\"\n      width=\"560\"\n      height=\"315\"\n      src={urlString}\n      frameBorder=\"0\"\n      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n      allowFullScreen\n    />\n  );\n};\n\nconst googleDriveIframe = (_evidence: Evidence, driveFileId: string) => {\n  const urlString = `https://drive.google.com/file/d/${driveFileId}/preview`;\n  // adding t=${startTimeInSeconds} seems to start the video in the right place\n  // but results in the video not playing correctly, so skip for now\n  return (\n    <iframe\n      title=\"embedded evidence video from google drive\"\n      src={urlString}\n      width=\"640\"\n      height=\"480\"\n      frameBorder=\"0\"\n      allowFullScreen\n    />\n  );\n};\n\nconst rumbleIframe = (_evidence: Evidence, embedId: string) => {\n  const urlString = `https://rumble.com/embed/${embedId}`;\n  return (\n    <iframe\n      title=\"embedded evidence video from rumble\"\n      src={urlString}\n      width=\"640\"\n      height=\"360\"\n      frameBorder=\"0\"\n      allowFullScreen\n    />\n  );\n};\n\nconst instagramIframe = (_evidence: Evidence, videoId: string) => {\n  const urlString = `https://www.instagram.com/tv/${videoId}/embed`;\n  return (\n    <iframe\n      title=\"embedded evidence video from rumble\"\n      src={urlString}\n      width=\"400\"\n      height=\"480\"\n      frameBorder=\"0\"\n      scrolling=\"no\"\n      // width=\"640\"\n      // height=\"360\"\n      // frameBorder=\"0\"\n      // allowFullScreen\n    />\n  );\n};\n\nconst embedTweet = (tweetId: string) => {\n  return <Tweet tweetId={tweetId} options={{ conversation: 'none' }} />;\n};\n\nexport const embedVideo = (evidence: Evidence) => {\n  if (!evidence.videoDetails) {\n    return null;\n  }\n\n  switch (evidence.videoDetails.type) {\n    case 'youtube':\n      return youtubeIframe(evidence, evidence.videoDetails.videoId);\n    case 'archiveOrg':\n      return archiveOrgVideoIframe(evidence);\n    case 'tweet':\n      return embedTweet(evidence.videoDetails.tweetId);\n    case 'megavideo':\n      return megaVideoIframe(evidence, evidence.videoDetails.videoId);\n    case 'vimeo':\n      return vimeoIframe(evidence, evidence.videoDetails.videoId);\n    case 'facebook':\n      return facebookIframe(\n        evidence,\n        evidence.videoDetails.profileId,\n        evidence.videoDetails.videoId\n      );\n    case 'googleDrive':\n      return googleDriveIframe(evidence, evidence.videoDetails.driveFileId);\n    case 'rumble':\n      return rumbleIframe(evidence, evidence.videoDetails.embedId || '');\n    case 'directLink':\n      return bareMp4VideoTag(evidence);\n    case 'instagram':\n      return instagramIframe(evidence, evidence.videoDetails.videoId);\n    default:\n      return null;\n  }\n};\n\nconst pacificPressIdFromUrl = (urlAsString: string | undefined): string | undefined => {\n  const url = new URL(urlAsString || '');\n  if (!url.hostname.match(/(^|\\.)pacificpressagency\\.com$/)) {\n    return undefined;\n  }\n  const matchResult = url.pathname.match(/preview\\/(\\d+)/);\n  return (matchResult && matchResult[1]) || undefined;\n};\n\nconst embedPacificPressImage = (ppId: string) => {\n  return (\n    <img\n      src={`https://www.pacificpressagency.com/assetpreview/get/${ppId}`}\n      alt=\"embedded evidence from Pacific Press Agency\"\n    />\n  );\n};\n\nexport const embedImage = (evidence: Evidence) => {\n  if (!evidence.imageUrl) {\n    return null;\n  }\n\n  const tweetId = tweetIdFromUrl(evidence.imageUrl);\n  if (tweetId) {\n    return embedTweet(tweetId);\n  }\n\n  const pacificPressId = pacificPressIdFromUrl(evidence.imageUrl);\n  if (pacificPressId) {\n    return embedPacificPressImage(pacificPressId);\n  }\n\n  return (\n    <img\n      src={evidence.imageUrl}\n      alt={evidence.summary || evidence.locationName || 'Evidence Image'}\n    />\n  );\n};\n","import React from 'react';\nimport { Button } from 'react-bootstrap';\nimport ReactMarkdown from 'react-markdown';\nimport Modal from 'react-modal';\nimport { useHistory, useLocation } from 'react-router-dom';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { LocationLink } from '../shared/LocationLink';\nimport Tag from '../shared/Tag';\nimport { colors } from '../shared/constants';\nimport { realTimeRangeFormatter, videoTimepointRangeFormatter } from '../shared/util';\n\nimport { ModalWrapper, Header, Content, Buttons, Nav } from './detail-styled-components';\nimport evidenceUpdateFormUrl from './evidenceFormUrl';\nimport { embedImage, embedVideo } from './media-embeds';\n\ntype Props = {\n  detailId?: string;\n  evidence: Evidence;\n  onClose: () => void;\n  prevPath: string;\n  nextPath: string;\n  collectionsFC?: (props: { id?: string; location?: string }) => React.ReactNode;\n};\n\nconst videoTimepointRow = (evidence: Evidence) => {\n  if (!evidence.videoUrl) {\n    return undefined;\n  }\n  const formattedRange = videoTimepointRangeFormatter(\n    evidence.videoStartTimepoint,\n    evidence.videoEndTimepoint\n  );\n  if (formattedRange) {\n    return (\n      <tr>\n        <th scope=\"row\">Video timepoint</th>\n        <td>{formattedRange}</td>\n      </tr>\n    );\n  } else {\n    return undefined;\n  }\n};\n\nexport default function EvidenceDetail({\n  detailId,\n  evidence,\n  onClose,\n  prevPath,\n  nextPath,\n  collectionsFC,\n}: Props) {\n  const history = useHistory();\n  const location = useLocation();\n  const handleOnClick = React.useCallback(\n    (pathname: string) => {\n      if (pathname) {\n        history.push({ pathname, search: location.search });\n      }\n    },\n    [history, location]\n  );\n\n  return (\n    <Modal\n      isOpen={!!detailId}\n      onRequestClose={onClose}\n      contentLabel=\"Evidence Details\"\n      style={{ overlay: { zIndex: 1000 } }}\n      className=\"evidence-detail-modal\"\n      shouldCloseOnOverlayClick\n    >\n      {evidence ? (\n        <ModalWrapper>\n          <Header>\n            <h2>Evidence Detail</h2>\n            <Buttons>\n              {collectionsFC && collectionsFC({ id: evidence._id })}\n              <button title=\"Close\" type=\"button\" className=\"close-button\" onClick={onClose}>\n                &times;\n              </button>\n            </Buttons>\n          </Header>\n          <Content>\n            {evidence.imageUrl && (\n              <div className=\"media\">\n                <a href={evidence.imageUrl}>\n                  {embedImage(evidence)}\n                  <span>{evidence.imageUrl}</span>\n                </a>\n              </div>\n            )}\n            {evidence.videoUrl && (\n              <div className=\"media\">\n                {embedVideo(evidence)}\n                <a href={evidence.videoUrl} target=\"_blank\" rel=\"noreferrer\">\n                  {evidence.videoUrl}\n                </a>\n              </div>\n            )}\n            <table>\n              <tbody>\n                <tr>\n                  <th scope=\"row\"> </th>\n                  <td>\n                    <Button\n                      href={evidenceUpdateFormUrl(evidence)}\n                      target=\"_blank\"\n                      size=\"sm\"\n                      variant=\"outline-success\"\n                    >\n                      Update Evidence\n                    </Button>\n                  </td>\n                </tr>\n                <tr>\n                  <th scope=\"row\">Summary</th>\n                  <td>\n                    <ReactMarkdown>{evidence.summary || ''}</ReactMarkdown>\n                  </td>\n                </tr>\n                <tr>\n                  <th scope=\"row\">Tags</th>\n                  <td>\n                    {evidence.suspectTags &&\n                      evidence.suspectTags.map((label) => (\n                        <Tag\n                          key={`${evidence._id}-person-${label}`}\n                          id={`${evidence._id}-person-${label}`}\n                          label={label}\n                          color={colors.person}\n                          title={label}\n                        />\n                      ))}\n                    {evidence.otherTags &&\n                      evidence.otherTags.map((label) => (\n                        <Tag\n                          key={`${evidence._id}-other-${label}`}\n                          id={`${evidence._id}-other-${label}`}\n                          label={label}\n                          title={label}\n                        />\n                      ))}\n                  </td>\n                </tr>\n                <tr>\n                  <th scope=\"row\">Time</th>\n                  <td>{realTimeRangeFormatter(evidence.realTimeStart, evidence.realTimeEnd)}</td>\n                </tr>\n                {videoTimepointRow(evidence)}\n                <tr>\n                  <th scope=\"row\">Location</th>\n                  <td>\n                    <LocationLink latLng={evidence.location} name={evidence.locationName} />\n                  </td>\n                </tr>\n                <tr>\n                  <th scope=\"row\">Rationale</th>\n                  <td>\n                    <ReactMarkdown>{evidence.rationale || ''}</ReactMarkdown>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n            <Nav>\n              <button\n                type=\"button\"\n                disabled={!prevPath}\n                title=\"Previous\"\n                onClick={() => handleOnClick(prevPath)}\n              >\n                &laquo;\n              </button>\n              <button\n                type=\"button\"\n                disabled={!nextPath}\n                title=\"Next\"\n                onClick={() => handleOnClick(nextPath)}\n              >\n                &raquo;\n              </button>\n            </Nav>\n          </Content>\n        </ModalWrapper>\n      ) : (\n        <ModalWrapper>\n          <Header>\n            <h2>Evidence &apos;{detailId}&apos; not found</h2>\n            <Buttons>\n              <button title=\"Close\" type=\"button\" className=\"close-button\" onClick={onClose}>\n                &times;\n              </button>\n            </Buttons>\n          </Header>\n        </ModalWrapper>\n      )}\n    </Modal>\n  );\n}\n","import React from 'react';\n\nexport const HighlightContext = React.createContext({\n  highlight: '',\n  setHighlight: (id: string) => {\n    id.split(''); // fixes TS error when `id` isn't used :P\n  },\n});\n\nexport default {};\n","import qs from 'query-string';\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\n\nexport function usePageTitle(title: string) {\n  React.useEffect(() => {\n    const previousTitle = document.title;\n    document.title = title;\n    return () => {\n      document.title = previousTitle;\n    };\n  }, [title]);\n}\n\nexport function useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nexport const useDebouncedValue = (delay: number, value: any) => {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n};\n\ntype QueryState = Record<string, string | string[] | null | undefined>;\ntype QueryStateUpdater = (prevState: QueryState) => QueryState;\nexport const useQueryState = (): [QueryState, (updater: QueryStateUpdater) => void] => {\n  const history = useHistory();\n  const location = useLocation();\n\n  const query: QueryState = qs.parse(location.search);\n  const [queryState, setQueryState] = useState<QueryState>(query);\n\n  const debouncedQueryState = useDebouncedValue(300, queryState);\n  useEffect(() => {\n    history.push({ search: qs.stringify(debouncedQueryState) });\n  }, [debouncedQueryState]);\n\n  useEffect(() => {\n    const incomingQuery = location.search.replace(/^\\?/, '');\n    const expectedQuery = qs.stringify(debouncedQueryState);\n    // Detect external query string changes and update our state accordingly\n    if (incomingQuery !== expectedQuery) {\n      const nextQuery: QueryState = qs.parse(location.search);\n      setQueryState(nextQuery);\n    }\n  }, [location]);\n\n  const update = (updater: QueryStateUpdater) => {\n    const nextState = updater(queryState);\n    setQueryState(nextState);\n  };\n\n  return [queryState, update];\n};\n","import styled from 'styled-components';\n\nimport { padding, colors } from '../shared/constants';\n\nexport const MapWrapper = styled.div`\n  flex: 0 0 auto;\n  background-color: #ded;\n  border: 1px solid #9a9;\n  height: 300px;\n  width: 100%;\n  position: relative;\n\n  .pointer-events-none {\n    pointer-events: none;\n  }\n`;\n\nexport const MapSpinner = styled.div`\n  background: rgba(255, 255, 255, 0.8);\n  color: #000;\n  position: absolute;\n  top: 5px;\n  left: 5px;\n  padding: 5px 10px;\n  font-size: 0.9em;\n`;\n\nconst EVIDENCE_COLORS = {\n  photo: '#6699ff',\n  video: '#cc2266',\n  clip: 'orange',\n};\n\nexport const TimelineWrapper = styled.div`\n  flex: 0 0 auto;\n  height: 120px;\n  padding: ${padding.sm}px ${padding.lg}px;\n\n  overflow-x: hidden;\n\n  background: #111;\n  color: white;\n\n  &:hover .handle {\n    fill: #f0f0f0;\n  }\n\n  .selected-time {\n    margin-left: -${padding.sm}px;\n    margin-bottom: ${padding.sm}px;\n  }\n\n  .tick {\n    background-color: white;\n  }\n`;\n\nexport const HandleShape = styled.svg`\n  fill: #ddd;\n\n  &.disabled {\n    fill: #999;\n  }\n`;\n\nexport const TableWrapper = styled.div`\n  flex: 1;\n\n  .active {\n    box-shadow: inset 0 0 0 6px #ff0;\n  }\n\n  .table-row {\n    border-bottom: 1px solid ${colors.tableLines};\n\n    &.highlighted {\n      background-color: ${colors.activeFilter};\n    }\n  }\n\n  img {\n    min-height: 120px;\n    width: 100%;\n    background: #f0f0f0;\n  }\n\n  .thumbnail-wrapper {\n    position: relative;\n    font-size: 13px;\n    color: white;\n\n    img {\n      min-height: 120px;\n      width: 100%;\n      background: #333;\n      border: 3px solid black;\n\n      &.video {\n        border-color: ${EVIDENCE_COLORS.video};\n      }\n      &.clip {\n        border-color: ${EVIDENCE_COLORS.clip};\n      }\n      &.photo {\n        border-color: ${EVIDENCE_COLORS.photo};\n      }\n    }\n\n    .triangle {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      margin: auto;\n      background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDQ4IDQ4IiBmaWxsPSIjZmZmIj48cGF0aCBkPSJNMjQgNEMxMi45NSA0IDQgMTIuOTUgNCAyNHM4Ljk1IDIwIDIwIDIwIDIwLTguOTUgMjAtMjBTMzUuMDUgNCAyNCA0em0tNCAyOVYxNWwxMiA5LTEyIDl6Ii8+PC9zdmc+);\n      color: #fff;\n      background-size: 48px 48px;\n      height: 48px;\n      width: 48px;\n      opacity: 0.8;\n    }\n\n    .duration {\n      position: absolute;\n      bottom: 6px;\n      right: 6px;\n      opacity: 0.8;\n    }\n\n    .type {\n      position: absolute;\n      top: 6px;\n      left: 6px;\n      opacity: 0.8;\n    }\n  }\n\n  .tags-wrapper {\n    display: flex;\n    align-items: flex-start;\n    flex-wrap: wrap;\n    font-size: 13px;\n  }\n\n  .summary,\n  .time,\n  .location {\n    height: 100px;\n    white-space: normal;\n  }\n`;\n\nexport const NoResults = styled.div`\n  text-align: center;\n  padding: ${padding.lg}px;\n`;\n","/* eslint-disable import/no-unresolved */\n\nimport type { FeatureCollection, Point } from 'geojson';\nimport { LngLatBounds } from 'mapbox-gl';\nimport * as React from 'react';\n\nimport InteractiveMap, { Source, Layer, Marker, MapRef } from 'react-map-gl';\nimport type { LayerProps } from 'react-map-gl';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { PATHS } from '../Routes';\nimport { useQueryState, useDebouncedValue } from '../shared/hooks';\n\nimport { MapWrapper, MapSpinner } from './evidence-results-styled-components';\n\nconst capitolLatLng: [number, number] = [38.892, -77.02];\nconst defaultZoom: number = 13.5;\n\nconst evidenceLayerStyle: LayerProps = {\n  id: 'evidence',\n  type: 'circle',\n  paint: {\n    'circle-radius': 5,\n    'circle-color': ['get', 'color'],\n    'circle-stroke-width': 2,\n    'circle-stroke-color': '#000',\n    'circle-stroke-opacity': 0.3,\n  },\n};\nconst evidenceHoverLayerStyle: LayerProps = {\n  id: 'evidence-hover',\n  source: 'evidence',\n  type: 'circle',\n  paint: {\n    'circle-radius': 5,\n    'circle-color': '#fff',\n    'circle-stroke-width': 2,\n    'circle-stroke-color': '#000',\n    'circle-stroke-opacity': 0.4,\n  },\n};\n\nconst Tooltip = styled.div`\n  background-color: #fff;\n  padding: 4px 8px;\n  border-radius: 3px;\n  box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.4);\n  width: 180px;\n  overflow: hidden;\n  line-height: 1.4;\n  font-size: 12px;\n  margin-top: -5px;\n  margin-left: 10px;\n`;\n\ntype EvidenceWithLatLng = Evidence & { latLng: [number, number] };\n\n// https://visgl.github.io/react-map-gl/docs/api-reference/interactive-map#onviewportchange\ntype Viewport = {\n  latitude: number;\n  longitude: number;\n  zoom: number;\n};\n\ntype Props = {\n  evidence: Array<Evidence>;\n  highlight: string;\n  onHover: (id: string) => void;\n  onChangeBounds?: (bounds: LngLatBounds | null) => void;\n};\n\nconst EvidenceMapbox = ({ evidence, highlight, onHover, onChangeBounds }: Props) => {\n  const history = useHistory();\n  const location = useLocation();\n  const locatedEvidence = evidence.filter((item): item is EvidenceWithLatLng => !!item.latLng);\n\n  // Sort by start time, so that the gray markers land at the bottom\n  // and the later-in-the-day markers are on top.\n  locatedEvidence.sort((a, b) => +(a.realTimeStart || 0) - +(b.realTimeStart || 0));\n\n  const geojson: FeatureCollection<Point> = {\n    type: 'FeatureCollection',\n    features: locatedEvidence.map((item) => {\n      const [lat, lng] = item.latLng;\n      const coordinates: [number, number] = [lng, lat];\n      return {\n        type: 'Feature',\n        geometry: {\n          type: 'Point',\n          coordinates,\n        },\n        properties: {\n          id: item._id,\n          color: item.color,\n        },\n      };\n    }),\n  };\n\n  const [queryState, setQueryState] = useQueryState();\n\n  const parseFloatString = (value: string | string[] | null | undefined) =>\n    typeof value === 'string' ? parseFloat(value) : undefined;\n\n  const viewport: Viewport = {\n    latitude: parseFloatString(queryState.latitude) ?? capitolLatLng[0],\n    longitude: parseFloatString(queryState.longitude) ?? capitolLatLng[1],\n    zoom: parseFloatString(queryState.zoom) ?? defaultZoom,\n  };\n\n  const setViewport = (nextViewport: Viewport) => {\n    setQueryState((prevQueryState) => ({\n      ...prevQueryState,\n      latitude: nextViewport.latitude.toString(),\n      longitude: nextViewport.longitude.toString(),\n      zoom: nextViewport.zoom.toString(),\n    }));\n  };\n\n  const [hoveredEvidence, setHoveredEvidence] = React.useState<Evidence | undefined>();\n  const onMapHover = React.useCallback(\n    (event) => {\n      const feature = event.features && event.features[0];\n      const hoveredItem = evidence.find((item) => item._id === feature?.properties?.id);\n      onHover(hoveredItem?._id || '');\n      setHoveredEvidence(hoveredItem);\n    },\n    [evidence]\n  );\n  const onMapClick = React.useCallback(\n    (event) => {\n      const feature = event.features && event.features[0];\n      const clickedItem = evidence.find((item) => item._id === feature?.properties?.id);\n      if (clickedItem) {\n        history.push({ pathname: `${PATHS.evidence}/${clickedItem._id}`, search: location.search });\n      }\n    },\n    [evidence]\n  );\n  const hoverLayerFilter = React.useMemo(() => {\n    const id = hoveredEvidence?._id || highlight || '_none_';\n    return ['==', id, ['get', 'id']];\n  }, [hoveredEvidence, highlight]);\n\n  const [loading, setLoading] = React.useState<boolean>(false);\n  const mapRef = React.useRef<MapRef>(null);\n  const map = mapRef.current?.getMap();\n  const bounds = map?.getBounds();\n  const serializedBounds = JSON.stringify(bounds?.toArray()); // For useEffect dependency\n  const debouncedBounds = useDebouncedValue(300, serializedBounds);\n  React.useEffect(() => setLoading(true), [serializedBounds]);\n  React.useEffect(() => {\n    if (onChangeBounds && debouncedBounds) {\n      const deserializedBounds = LngLatBounds.convert(JSON.parse(debouncedBounds));\n      onChangeBounds(deserializedBounds);\n    }\n    return () => setLoading(false);\n  }, [debouncedBounds]);\n\n  return (\n    <MapWrapper>\n      <InteractiveMap\n        {...viewport}\n        width=\"100%\"\n        height=\"100%\"\n        onViewportChange={setViewport}\n        mapboxApiAccessToken=\"pk.eyJ1IjoibWlzdGFrZW5tdXN0YXJkIiwiYSI6ImNrbGVkbWtkdzFrOXEyenRrejVyb2Zzc20ifQ.LkFY7eWOE8ryEW_6Kj0f_Q\"\n        mapStyle=\"mapbox://styles/mapbox/satellite-v9\"\n        interactiveLayerIds={\n          evidenceLayerStyle.id && evidenceHoverLayerStyle.id\n            ? [evidenceLayerStyle.id, evidenceHoverLayerStyle.id]\n            : undefined\n        }\n        onHover={onMapHover}\n        onClick={onMapClick}\n        ref={mapRef}\n      >\n        <Source type=\"geojson\" data={geojson}>\n          <Layer {...evidenceLayerStyle} />\n          <Layer {...evidenceHoverLayerStyle} filter={hoverLayerFilter} />\n        </Source>\n        {hoveredEvidence && hoveredEvidence.latLng ? (\n          <Marker\n            latitude={hoveredEvidence.latLng[0]}\n            longitude={hoveredEvidence.latLng[1]}\n            className=\"pointer-events-none\"\n          >\n            {hoveredEvidence.summary ? <Tooltip>{hoveredEvidence.summary}</Tooltip> : null}\n          </Marker>\n        ) : null}\n      </InteractiveMap>\n      {loading && <MapSpinner>Updating...</MapSpinner>}\n    </MapWrapper>\n  );\n};\n\nexport default EvidenceMapbox;\n","/* eslint-ignore import/no-extraneous-dependencies */\n\nimport moment from 'moment-timezone';\nimport React from 'react';\nimport ReactMarkdown from 'react-markdown';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { LocationLink } from '../shared/LocationLink';\nimport Tag from '../shared/Tag';\n\nimport { colors } from '../shared/constants';\n\nconst isJan6Eastern = (date: Date): boolean => {\n  const m = moment(date);\n  return m.tz('America/New_York').format('YYYY-MM-DD') === '2021-01-06';\n};\n\nconst toEasternTimeString = (date: Date, forceIncludeDate: boolean = false): string => {\n  const m = moment(date);\n  const dateStr = m.tz('America/New_York').format('YYYY-MM-DD');\n  const timeStr = m.tz('America/New_York').format('h:mm A');\n  if (isJan6Eastern(date) && !forceIncludeDate) {\n    return timeStr;\n  } else {\n    return `${dateStr} ${timeStr}`;\n  }\n};\n\nconst toRealTimeFieldStr = (\n  realTimeStart: Date | undefined,\n  realTimeEnd: Date | undefined\n): string => {\n  if (!realTimeStart) {\n    return '?';\n  }\n  if (realTimeEnd) {\n    const alwaysIncludeDate = !isJan6Eastern(realTimeStart) || !isJan6Eastern(realTimeEnd);\n    return `${toEasternTimeString(realTimeStart, alwaysIncludeDate)} - ${toEasternTimeString(\n      realTimeEnd,\n      alwaysIncludeDate\n    )}`;\n  } else {\n    return toEasternTimeString(realTimeStart);\n  }\n};\n\ntype Props = {\n  data: Evidence;\n  isActive: boolean;\n  activate: () => void;\n};\n\nexport function ResultThumbnail({ cellData: data }: { cellData: Evidence }) {\n  const type = data.videoUrl ? 'video' : 'photo';\n  const formattedDuration =\n    data.videoStartTimepoint && data.videoEndTimepoint\n      ? data.videoEndTimepoint - data.videoStartTimepoint\n      : '?';\n\n  return (\n    <div className=\"thumbnail-wrapper\">\n      <img className={type} src={data.imageUrl || data.videoDetails?.thumbnailUrl} alt=\"\" />\n      <span className=\"type\">{type[0].toUpperCase() + type.slice(1)}</span>\n      {type === 'video' && (\n        <>\n          <span className=\"triangle\" />\n          <span className=\"duration\">{formattedDuration}</span>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport function ResultSummary({ cellData: data }: { cellData: Evidence }) {\n  const summary = data.summary || '';\n\n  return (\n    <div className=\"summary\">\n      <ReactMarkdown>{summary}</ReactMarkdown>\n    </div>\n  );\n}\n\nexport function ResultTags({ cellData: data }: { cellData: Evidence }) {\n  return (\n    <div className=\"tags-wrapper\">\n      {data.suspectTags &&\n        data.suspectTags.map((label) => (\n          <Tag\n            key={`${data._id}-person-${label}`}\n            id={`${data._id}-person-${label}`}\n            label={label}\n            color={colors.person}\n            title={label}\n          />\n        ))}\n      {data.otherTags &&\n        data.otherTags.map((label) => (\n          <Tag\n            key={`${data._id}-other-${label}`}\n            id={`${data._id}-other-${label}`}\n            label={label}\n            title={label}\n          />\n        ))}\n    </div>\n  );\n}\n\nexport function ResultTime({ cellData: data }: { cellData: Evidence }) {\n  const timeStr = toRealTimeFieldStr(data.realTimeStart, data.realTimeEnd);\n\n  return <span className=\"time\">{timeStr}</span>;\n}\n\nexport function ResultLocation({ cellData: data }: { cellData: Evidence }) {\n  if (data.location) {\n    return <LocationLink latLng={data.location} name={data.locationName} />;\n  } else {\n    return <span className=\"location\">?</span>;\n  }\n}\n","import React, { ReactElement } from 'react';\nimport 'react-virtualized/styles.css';\n\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { Column, Table, AutoSizer } from 'react-virtualized';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { ResultLocation, ResultSummary, ResultTags, ResultThumbnail, ResultTime } from './Result';\n\nimport { TableWrapper, NoResults } from './evidence-results-styled-components';\n\ntype Props = {\n  results: Evidence[];\n  highlight: string;\n  onHover: (id: string) => void;\n  getDetailPath: (id: string) => string;\n};\n\nfunction cellDataGetter({ rowData }: { rowData: any }): any {\n  // Be default, react-virtualized tries to pass the cell's render\n  // function just the data for that cell. To make our cell renderers\n  // simpler, we pass the full row of data (so we can easily have cells\n  // that show multiple fields of data)\n  return rowData;\n}\n\nfunction makeCellRenderer(\n  Component: React.ComponentType<{ cellData: Evidence }>\n): ({ cellData }: { cellData?: Evidence }) => ReactElement {\n  return function inner({ cellData }) {\n    if (!cellData) {\n      return <span />;\n    }\n\n    return <Component cellData={cellData} />;\n  };\n}\n\nconst ROW_HEIGHT = 150;\n\nconst EvidenceTable = ({ results, highlight, onHover, getDetailPath }: Props) => {\n  const history = useHistory();\n  const location = useLocation();\n  const handleOnClick = React.useCallback(\n    ({ index }) => {\n      history.push({ pathname: getDetailPath(results[index]._id), search: location.search });\n    },\n    [history, location, results]\n  );\n\n  return (\n    <TableWrapper>\n      <AutoSizer>\n        {({ height, width }) => (\n          <Table\n            height={height}\n            width={width}\n            headerHeight={40}\n            rowHeight={ROW_HEIGHT}\n            rowCount={results.length}\n            rowGetter={({ index }) => results[index]}\n            rowClassName={({ index }) =>\n              `table-row ${results[index]?._id === highlight ? 'highlighted' : ''}`\n            }\n            onRowClick={handleOnClick}\n            onRowMouseOver={({ index }) => onHover(results[index]?._id)}\n            onRowMouseOut={() => onHover('')}\n            noRowsRenderer={() => <NoResults>No results found.</NoResults>}\n          >\n            <Column\n              label=\"Thumbnail\"\n              dataKey=\"thumbnail\"\n              cellDataGetter={cellDataGetter}\n              cellRenderer={makeCellRenderer(ResultThumbnail)}\n              width={180}\n            />\n            <Column\n              label=\"Summary\"\n              dataKey=\"summary\"\n              cellDataGetter={cellDataGetter}\n              cellRenderer={makeCellRenderer(ResultSummary)}\n              width={360}\n              flexGrow={1}\n            />\n            <Column\n              label=\"Tags\"\n              dataKey=\"tags\"\n              cellDataGetter={cellDataGetter}\n              cellRenderer={makeCellRenderer(ResultTags)}\n              width={100}\n            />\n            <Column\n              label=\"Time\"\n              dataKey=\"time\"\n              cellDataGetter={cellDataGetter}\n              cellRenderer={makeCellRenderer(ResultTime)}\n              width={80}\n            />\n            <Column\n              label=\"Location\"\n              dataKey=\"location\"\n              cellDataGetter={cellDataGetter}\n              cellRenderer={makeCellRenderer(ResultLocation)}\n              width={144}\n            />\n          </Table>\n        )}\n      </AutoSizer>\n    </TableWrapper>\n  );\n};\n\nexport default EvidenceTable;\n","import React from 'react';\n\nimport { numberTimeFormatter } from '../shared/util';\n\nimport { HandleShape } from './evidence-results-styled-components';\n\nexport type Range = [number, number];\n\nexport interface RangePoint {\n  id: string;\n  value: number;\n  percent: number;\n}\n\nexport const RAIL_HEIGHT = 48;\n\n// *******************************************************\n// RAIL\n// *******************************************************\nconst railOuterStyle: React.CSSProperties = {\n  position: 'absolute',\n  width: '100%',\n  height: RAIL_HEIGHT,\n  cursor: 'pointer',\n};\n\nconst railInnerStyle: React.CSSProperties = {\n  position: 'absolute',\n  width: '100%',\n  height: RAIL_HEIGHT,\n  pointerEvents: 'none',\n  backgroundColor: '#555',\n};\n\ntype SliderRailProps = {\n  getRailProps: () => void;\n};\n\nexport function SliderRail({ getRailProps }: SliderRailProps) {\n  return (\n    <>\n      <div style={railOuterStyle} {...getRailProps()} />\n      <div style={railInnerStyle} />\n    </>\n  );\n}\n\n// *******************************************************\n// HANDLE COMPONENT\n// *******************************************************\ntype HandleProps = {\n  domain: Range;\n  handle: RangePoint;\n  getHandleProps: (id: string) => void;\n  disabled?: boolean;\n  isRight?: boolean;\n};\n\nexport function Handle({\n  domain: [min, max],\n  handle: { id, value, percent },\n  disabled,\n  isRight,\n  getHandleProps,\n}: HandleProps) {\n  return (\n    <>\n      <div\n        style={{\n          left: `${percent}%`,\n          position: 'absolute',\n          transform: 'translate(-50%, 0)',\n          WebkitTapHighlightColor: 'rgba(0,0,0,0)',\n          zIndex: 5,\n          width: 28,\n          height: 42,\n          cursor: 'move',\n          backgroundColor: 'none',\n        }}\n        {...getHandleProps(id)}\n      />\n      <div\n        role=\"slider\"\n        aria-label={`Handle at ${value}`}\n        aria-valuemin={min}\n        aria-valuemax={max}\n        aria-valuenow={value}\n        style={{\n          left: `${percent}%`,\n          position: 'absolute',\n          marginTop: -3,\n          transform: 'translate(-50%, -0)',\n          zIndex: 3,\n          width: 12,\n          height: RAIL_HEIGHT,\n        }}\n      >\n        <HandleShape\n          viewBox={`0 0 12 ${RAIL_HEIGHT + 6}`}\n          className={`handle ${id} ${disabled && 'disabled'}`}\n        >\n          {isRight ? (\n            <polygon\n              points={`0,0 12,0 12,${RAIL_HEIGHT + 6} 0,${\n                RAIL_HEIGHT + 6\n              } 0,${RAIL_HEIGHT} 6,${RAIL_HEIGHT} 6,6 0,6`}\n            />\n          ) : (\n            <polygon\n              points={`0,0 0,${RAIL_HEIGHT + 6} 12,${\n                RAIL_HEIGHT + 6\n              } 12,${RAIL_HEIGHT} 6,${RAIL_HEIGHT} 6,6 12,6 12,0`}\n            />\n          )}\n        </HandleShape>\n      </div>\n    </>\n  );\n}\n\n// *******************************************************\n// KEYBOARD HANDLE COMPONENT\n// Uses a button to allow keyboard events\n// *******************************************************\nexport function KeyboardHandle({\n  domain: [min, max],\n  handle: { id, value, percent },\n  disabled,\n  getHandleProps,\n}: HandleProps) {\n  return (\n    <button\n      type=\"button\"\n      role=\"slider\"\n      aria-valuemin={min}\n      aria-valuemax={max}\n      aria-valuenow={value}\n      style={{\n        left: `${percent}%`,\n        position: 'absolute',\n        transform: 'translate(-50%, 0)',\n        zIndex: 2,\n        width: 24,\n        height: RAIL_HEIGHT,\n        borderRadius: '50%',\n        boxShadow: '1px 1px 1px 1px rgba(0, 0, 0, 0.3)',\n        backgroundColor: disabled ? '#999' : '#ffc400',\n      }}\n      {...getHandleProps(id)}\n    />\n  );\n}\n\n// *******************************************************\n// TRACK COMPONENT\n// *******************************************************\ntype TrackProps = {\n  source: RangePoint;\n  target: RangePoint;\n  getTrackProps: () => void;\n  disabled?: boolean;\n};\n\nexport function Track({ source, target, getTrackProps, disabled }: TrackProps) {\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        height: RAIL_HEIGHT,\n        zIndex: 1,\n        backgroundColor: disabled ? '#555' : '#222',\n        borderRadius: 7,\n        left: `${source.percent}%`,\n        width: `${target.percent - source.percent}%`,\n      }}\n      {...getTrackProps()}\n    />\n  );\n}\n\n// *******************************************************\n// TICK COMPONENT\n// *******************************************************\ntype TickType = {\n  tick: RangePoint;\n  count: number;\n  format?: (value: number) => string;\n};\n\nexport function Tick({ tick }: TickType) {\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        left: `${tick.percent}%`,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        transform: 'translate(-50%, 0px)',\n      }}\n    >\n      <div\n        className=\"tick\"\n        style={{\n          marginTop: RAIL_HEIGHT,\n          width: 1,\n          height: 6,\n        }}\n      />\n      <div\n        style={{\n          fontSize: 10,\n        }}\n      >\n        {numberTimeFormatter(tick.value)}\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { PATHS } from '../../Routes';\nimport { HighlightContext } from '../../shared/contexts';\nimport { realTimeRangeFormatter } from '../../shared/util';\nimport { RAIL_HEIGHT } from '../TimelineHelpers';\n\nconst timelineTitle = (evidence: Evidence) => {\n  return `[${realTimeRangeFormatter(evidence.realTimeStart, evidence.realTimeEnd)}] ${\n    evidence.summary\n  }`;\n};\n\nconst Stripe = styled(Link)`\n  display: block;\n  position: absolute;\n\n  width: 2px;\n  height: ${RAIL_HEIGHT}px;\n\n  transform: translate(-50%, 0);\n  margin-top: 0;\n  z-index: 2;\n\n  cursor: pointer;\n\n  &:hover,\n  &.highlighted {\n    background-color: white !important;\n  }\n`;\n\ntype Props = {\n  evidence: Evidence;\n};\n\nconst EvidenceStripe = ({ evidence }: Props) => {\n  const location = useLocation();\n\n  return (\n    <HighlightContext.Consumer>\n      {({ highlight, setHighlight }) => (\n        <Stripe\n          to={{ pathname: `${PATHS.evidence}/${evidence._id}`, search: location.search }}\n          title={timelineTitle(evidence)}\n          style={{\n            left: `${(evidence.timelineStartPercent || 0) * 100}%`,\n            backgroundColor: evidence.color,\n          }}\n          className={highlight === evidence._id ? 'highlighted' : ''}\n          onMouseOver={() => setHighlight(evidence._id)}\n          onMouseOut={() => setHighlight('')}\n        />\n      )}\n    </HighlightContext.Consumer>\n  );\n};\n\nexport default React.memo(EvidenceStripe);\n","import React, { useState } from 'react';\nimport { Slider, Rail, Handles, Tracks, Ticks } from 'react-compound-slider';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { TIMELINE_DOMAIN_START, TIMELINE_DOMAIN_END } from '../../data';\nimport { numberTimeFormatter } from '../shared/util';\n\nimport { Range, SliderRail, Handle, Track, Tick } from './TimelineHelpers';\nimport { TimelineWrapper } from './evidence-results-styled-components';\nimport EvidenceStripe from './timeline/EvidenceStripe';\n\nconst sliderStyle = {\n  position: 'relative',\n  width: '100%',\n};\n\n// Returns min if (val < min), max if (val > max), and val otherwise.\nfunction clamp(val: number, min: number, max: number): number {\n  return Math.min(Math.max(val, min), max);\n}\n\ntype EvidenceTimelineProps = {\n  startEndTimes?: [Date, Date] | null;\n  onChangeTimes?: (newTimes: [Date, Date] | null) => void; // if none, timeline is stripes only\n  evidence: Evidence[];\n};\n\nexport default function EvidenceTimeline({\n  startEndTimes,\n  onChangeTimes,\n  evidence,\n}: EvidenceTimelineProps) {\n  // The parent component passes in the currently-selected time range. We also\n  // maintain this local state, which has the start/end values as you're dragging\n  // the sliders. Once the user releases the slider, we pass the new values up to\n  // the parent and discard this state.\n  const [draggingValues, setDraggingValues] = useState<[number, number] | null>(null);\n\n  const domain: Range = [TIMELINE_DOMAIN_START, TIMELINE_DOMAIN_END];\n  let values: Range;\n  if (draggingValues) {\n    values = draggingValues;\n  } else if (startEndTimes) {\n    values = [startEndTimes[0].getTime(), startEndTimes[1].getTime()];\n  } else {\n    values = [TIMELINE_DOMAIN_START, TIMELINE_DOMAIN_END];\n  }\n\n  function onChange(newValues: readonly number[]) {\n    if (onChangeTimes) {\n      if (newValues[0] === TIMELINE_DOMAIN_START && newValues[1] === TIMELINE_DOMAIN_END) {\n        onChangeTimes(null);\n      } else {\n        onChangeTimes([new Date(newValues[0]), new Date(newValues[1])]);\n      }\n    }\n  }\n\n  const tickValues = [];\n  let range = TIMELINE_DOMAIN_END - TIMELINE_DOMAIN_START;\n  while (range >= 0) {\n    tickValues.push(range + TIMELINE_DOMAIN_START);\n    range -= 60 * 60 * 1000; // 60 minutes between ticks\n  }\n\n  return (\n    <TimelineWrapper>\n      <div className=\"selected-time\">\n        {`${numberTimeFormatter(values[0])} - ${numberTimeFormatter(values[1])}`}\n      </div>\n      <Slider\n        mode={1}\n        step={5}\n        domain={domain}\n        reversed={false}\n        rootStyle={sliderStyle}\n        onUpdate={(newValues) => setDraggingValues([newValues[0], newValues[1]])}\n        onChange={onChange}\n        values={values}\n      >\n        <Rail>{({ getRailProps }) => <SliderRail getRailProps={getRailProps} />}</Rail>\n        {onChangeTimes && (\n          <Handles>\n            {({ handles, getHandleProps }) => (\n              <div className=\"slider-handles\">\n                {handles.map((handle) => (\n                  <Handle\n                    key={handle.id}\n                    handle={handle}\n                    domain={domain}\n                    getHandleProps={getHandleProps}\n                    isRight={handle.value > values[0]}\n                  />\n                ))}\n              </div>\n            )}\n          </Handles>\n        )}\n        {evidence.map((item) => (\n          <EvidenceStripe key={item._id} evidence={item} />\n        ))}\n        {onChangeTimes && (\n          <Tracks left={false} right={false}>\n            {({ tracks, getTrackProps }) => (\n              <div className=\"slider-tracks\">\n                {tracks.map(({ id, source, target }) => (\n                  <Track key={id} source={source} target={target} getTrackProps={getTrackProps} />\n                ))}\n              </div>\n            )}\n          </Tracks>\n        )}\n        <Ticks values={tickValues}>\n          {({ ticks }) => (\n            <div className=\"slider-ticks\">\n              {ticks.map((tick) => (\n                <Tick key={tick.id} tick={tick} count={ticks.length} />\n              ))}\n            </div>\n          )}\n        </Ticks>\n      </Slider>\n      <div>{`${numberTimeFormatter(values[0])} - ${numberTimeFormatter(values[1])}`}</div>\n    </TimelineWrapper>\n  );\n}\n","import type { LngLatBounds } from 'mapbox-gl';\nimport React from 'react';\nimport Modal from 'react-modal';\nimport { useParams, useHistory, useLocation, useRouteMatch } from 'react-router-dom';\n\nimport { Evidence } from '@jan6evidence/types';\n\nimport EvidenceDetail from '../EvidenceDetail';\nimport PageHeaderAndNav from '../PageHeaderAndNav';\nimport { HighlightContext } from '../shared/contexts';\nimport { debounce } from '../shared/util';\nimport {\n  EvidenceResultsWrapper,\n  EvidenceTableWrapper,\n  EvidenceCount,\n} from '../table-styled-components';\n\nimport EvidenceMapbox from './EvidenceMapbox';\nimport EvidenceTable from './EvidenceTable';\nimport EvidenceTimeline from './EvidenceTimeline';\n\nModal.setAppElement('#root');\n\nexport { EvidenceTable, EvidenceTimeline, EvidenceMapbox };\n\ntype StartEndTimes = [Date, Date] | null;\n\ntype Props = {\n  evidence: Evidence[];\n  timedEvidence: Evidence[];\n  startEndTimes?: StartEndTimes;\n  setStartEndTimes?: (se: StartEndTimes) => void;\n  title: string;\n  hideExplorerLink?: boolean;\n  rootPath: string;\n  getDetailPath: (id: string) => string;\n  setBounds?: (bounds: LngLatBounds | null) => void;\n  setExportView: (show: boolean) => void;\n  collectionsFC?: (props: { id?: string; location?: string }) => React.ReactNode;\n};\n\nconst EvidenceViewer = ({\n  evidence,\n  timedEvidence,\n  startEndTimes,\n  setStartEndTimes,\n  rootPath,\n  getDetailPath,\n  // setExportView,\n  setBounds,\n  collectionsFC,\n}: Props) => {\n  const [highlight, setHighlight] = React.useState<string>('');\n  const { detailId } = useParams<{ detailId?: string }>();\n  const history = useHistory();\n  const location = useLocation();\n\n  const closeModal = React.useCallback(() => {\n    history.push({ pathname: rootPath, search: location.search });\n  }, [history, location]);\n\n  const debouncedHighlight = React.useCallback(debounce(setHighlight, 100), []);\n\n  let prevEvidence: Evidence | undefined;\n  let nextEvidence: Evidence | undefined;\n  const detailEvidence = detailId\n    ? evidence.find((r, i) => {\n        if (r._id === detailId) {\n          prevEvidence = evidence[i - 1];\n          nextEvidence = evidence[i + 1];\n          return true;\n        }\n        return false;\n      })!\n    : { _id: '' };\n\n  return (\n    <EvidenceResultsWrapper>\n      <PageHeaderAndNav />\n      <HighlightContext.Provider value={{ highlight, setHighlight: debouncedHighlight }}>\n        <EvidenceMapbox\n          evidence={evidence}\n          onHover={debouncedHighlight}\n          highlight={highlight}\n          onChangeBounds={setBounds}\n        />\n        <EvidenceTimeline\n          startEndTimes={startEndTimes}\n          onChangeTimes={setStartEndTimes}\n          // We re-filter here, ignoring time time filter, so that we still show\n          // evidence on the timeline that isn't in the selected time range\n          evidence={timedEvidence}\n        />\n        <EvidenceCount>\n          {evidence.length} bit{evidence.length === 1 ? '' : 's'} of evidence\n          {/*\n          <a\n            href=\"export\"\n            onClick={(e) => {\n              e.preventDefault();\n              setExportView(true);\n            }}\n          >\n            Export\n          </a>\n          */}\n        </EvidenceCount>\n        <EvidenceTableWrapper>\n          <EvidenceTable\n            results={evidence}\n            highlight={highlight}\n            onHover={debouncedHighlight}\n            getDetailPath={getDetailPath}\n          />\n        </EvidenceTableWrapper>\n      </HighlightContext.Provider>\n      <EvidenceDetail\n        collectionsFC={collectionsFC}\n        detailId={detailId}\n        evidence={detailEvidence}\n        onClose={closeModal}\n        prevPath={prevEvidence ? getDetailPath(prevEvidence?._id) : ''}\n        nextPath={nextEvidence ? getDetailPath(nextEvidence?._id) : ''}\n      />\n    </EvidenceResultsWrapper>\n  );\n};\n\nexport default EvidenceViewer;\n","import React, { ReactElement } from 'react';\nimport 'react-virtualized/styles.css';\nimport ReactMarkdown from 'react-markdown';\nimport { Link } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { PATHS } from '../Routes';\n\nimport LocationLink from '../shared/LocationLink';\nimport { realTimeRangeFormatter, videoTimepointRangeFormatter } from '../shared/util';\n\nimport { ExportEvidenceTable, maybetwoColumnRow } from './EvidenceExportView';\n\nconst ExportEvidenceItem = ({ item }: { item: Evidence }) => {\n  const detailUrl = `${PATHS.evidence}/${item._id}`;\n  const allTags = (item.suspectTags || []).concat(item.otherTags || []);\n  return (\n    <ExportEvidenceTable>\n      {maybetwoColumnRow(true, 'Evidence ID', <Link to={detailUrl}>{item._id}</Link>)}\n      {maybetwoColumnRow(!!item.imageUrl, 'Image URL', <a href={item.imageUrl}>{item.imageUrl}</a>)}\n      {maybetwoColumnRow(!!item.videoUrl, 'Video URL', <a href={item.videoUrl}>{item.videoUrl}</a>)}\n      {maybetwoColumnRow(\n        item.videoStartTimepoint !== undefined,\n        'Video timepoint',\n        videoTimepointRangeFormatter(item.videoStartTimepoint, item.videoEndTimepoint)\n      )}\n      {maybetwoColumnRow(\n        !!item.realTimeStart,\n        'Local time',\n        realTimeRangeFormatter(item.realTimeStart, item.realTimeEnd)\n      )}\n      {maybetwoColumnRow(\n        !!(item.location || item.locationName),\n        'Location',\n        <LocationLink latLng={item.location} name={item.locationName} />\n      )}\n      {maybetwoColumnRow(allTags.length > 0, 'Tags', allTags.join(', '))}\n      {maybetwoColumnRow(\n        !!item.summary,\n        'Summary',\n        <ReactMarkdown>{item.summary || ''}</ReactMarkdown>\n      )}\n      {maybetwoColumnRow(\n        !!item.rationale,\n        'Rationale',\n        <ReactMarkdown>{item.rationale || ''}</ReactMarkdown>\n      )}\n    </ExportEvidenceTable>\n  );\n};\n\nconst EvidenceCopyableExport = ({ evidence }: { evidence: Evidence[] }) => {\n  return (\n    <div>\n      {evidence.map((ev) => (\n        <ExportEvidenceItem item={ev} />\n      ))}\n    </div>\n  );\n};\n\nexport default EvidenceCopyableExport;\n","import type { LngLatBounds } from 'mapbox-gl';\nimport React from 'react';\n\nimport styled from 'styled-components';\n\nimport { Evidence } from '@jan6evidence/types';\n\nimport { TagFilters, Toggles } from '../../types/TagFilters';\nimport PageHeaderAndNav from '../PageHeaderAndNav';\nimport { realTimeRangeFormatter } from '../shared/util';\nimport { AppWrapper } from '../table-styled-components';\n\nimport EvidenceCopyableExport from './EvidenceCopyableExport';\n\ntype Props = {\n  evidence: Evidence[];\n  tagFilters?: TagFilters;\n  keywords?: string[];\n  toggles: Toggles;\n  startEndTimes?: [Date, Date];\n  bounds?: LngLatBounds;\n  setExportView: (exportView: boolean) => void;\n};\n\nexport const maybetwoColumnRow = (condition: boolean, label: string, content: any) =>\n  condition ? (\n    <tr>\n      <th scope=\"row\">{label}</th>\n      <td>{content}</td>\n    </tr>\n  ) : null;\n\nexport const ExportDiv = styled.div`\n  width: 1100px;\n  padding: 30px;\n  margin-left: auto;\n  margin-right: auto;\n`;\n\nexport const ExportEvidenceTable = styled.table`\n  margin-bottom: 2em;\n  border-top: solid 1px #ccc;\n  font-size: 0.9em;\n  td,\n  th {\n    padding-top: 3px;\n    vertical-align: top;\n    text-overflow: ellipsis;\n  }\n  th {\n    text-align: right;\n    width: 200px;\n    padding-right: 1em;\n  }\n  td {\n    width: 800px;\n  }\n  p {\n    padding: 0px;\n    margin: 0px;\n  }\n`;\n\nconst EvidenceExportView = ({\n  evidence,\n  tagFilters,\n  keywords,\n  toggles,\n  startEndTimes,\n  //  setExportView,\n  bounds,\n}: Props) => {\n  return (\n    <AppWrapper>\n      <PageHeaderAndNav />\n      <ExportDiv>\n        <h2>Export Parameters</h2>\n        <ExportEvidenceTable style={{ borderTop: 'none' }}>\n          {maybetwoColumnRow(true, 'Exported at', new Date().toISOString())}\n          {maybetwoColumnRow(\n            (tagFilters?.suspect?.size || 0) > 0,\n            'Suspect tag filters',\n            Array.from(tagFilters?.suspect || []).join(', ')\n          )}\n          {maybetwoColumnRow(\n            (tagFilters?.otherTags?.size || 0) > 0,\n            'Other tag filters',\n            Array.from(tagFilters?.otherTags || []).join(', ')\n          )}\n          {maybetwoColumnRow(\n            (keywords?.length || 0) > 0 || false,\n            'Keywords',\n            keywords ? keywords.join(',') : null\n          )}\n          {maybetwoColumnRow(\n            !!startEndTimes,\n            'Time bounds',\n            startEndTimes ? realTimeRangeFormatter(startEndTimes[0], startEndTimes[1]) : null\n          )}\n          {maybetwoColumnRow(\n            !!bounds,\n            'Latitude',\n            bounds ? `${bounds.getSouth()} to ${bounds.getNorth()}` : null\n          )}\n          {maybetwoColumnRow(\n            !!bounds,\n            'Longitude',\n            bounds ? `${bounds.getWest()} to ${bounds.getEast()}` : null\n          )}\n          {maybetwoColumnRow(\n            !!toggles?.includeUnlocated,\n            '',\n            'Including evidence without location'\n          )}\n          {maybetwoColumnRow(\n            !!toggles?.includeUntimestamped,\n            '',\n            'Including evidence without time'\n          )}\n        </ExportEvidenceTable>\n        <h2>\n          {evidence.length} bit{evidence.length === 1 ? '' : 's'} of evidence\n        </h2>\n        <EvidenceCopyableExport evidence={evidence} />\n      </ExportDiv>\n    </AppWrapper>\n  );\n};\n\nexport default EvidenceExportView;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { PATHS } from '../Routes';\n\nconst MobileOverlay = () => {\n  const [open, setOpen] = React.useState(true);\n\n  return (\n    (open && (\n      <div\n        style={{\n          zIndex: 100,\n          position: 'absolute',\n          width: '100%',\n          height: '100vh',\n          background: 'rgba(255, 255, 255, 0.95)',\n          padding: '30px',\n        }}\n        className=\"d-sm-none\"\n      >\n        <h2>January 6 Evidence</h2>\n        <p>\n          You&rsquo;ll probably find the evidence explorer easier to use on a larger device or in a\n          bigger window.\n        </p>\n        <ul>\n          <li>\n            <Link\n              to={PATHS.evidence}\n              onClick={(event) => {\n                event.preventDefault();\n                setOpen(false);\n                return false;\n              }}\n            >\n              Take me to the evidence anyway\n            </Link>\n          </li>\n          <li>\n            <Link to={PATHS.suspects}>Persons of Interest</Link>\n          </li>\n          <li>\n            <Link to={PATHS.about}>About</Link>\n          </li>\n          <li>\n            <Link to={PATHS.resources}>Resources for investigators of the Capitol Attack</Link>\n          </li>\n        </ul>\n        <img\n          src=\"/documentation/explorer-overview.jpg\"\n          style={{ width: '100%', margin: '0px auto' }}\n          alt=\"Example explorer view\"\n        />\n      </div>\n    )) ||\n    null\n  );\n};\n\nexport default MobileOverlay;\n","import styled from 'styled-components';\n\nimport { colors, shadows, padding, widths } from '../shared/constants';\nimport { TextButton, LeftBox } from '../shared/mixins';\n\nexport const Box = styled.div`\n  ${LeftBox}\n\n  font-size: 12px;\n  line-height: 18px;\n\n  h4 {\n    font-size: 18px;\n    line-height: 24px;\n    padding-left: ${padding.sm}px;\n  }\n\n  h5 {\n    font-size: 15px;\n    line-height: 24px;\n  }\n\n  .btn-group-toggle {\n    flex: 1 1 auto;\n    max-height: 25vh;\n    overflow-y: auto;\n    overflow-x: hidden;\n    border-top: 1px solid ${colors.tableLines};\n    border-bottom: 1px solid ${colors.tableLines};\n\n    display: block;\n\n    > .btn {\n      font-size: 12px;\n      line-height: 12px;\n      text-align: left;\n      padding: ${padding.sm}px;\n      border-radius: 0;\n\n      color: black;\n      background-color: white;\n      border-color: ${colors.tableLines};\n\n      display: flex;\n      flex-direction: row;\n\n      &:hover {\n        background-color: #bbb;\n      }\n\n      &.active {\n        color: black;\n        background-color: ${colors.activeFilter};\n\n        &:hover {\n          background-color: ${colors.activeFilterHover};\n        }\n      }\n\n      &:first-child {\n        border-top: 0;\n      }\n\n      &.hidden {\n        display: none;\n      }\n\n      .label {\n        flex: 1;\n      }\n\n      .count {\n        color: gray;\n        font-style: italic;\n        width: 25px;\n      }\n    }\n  }\n\n  .choice-filter {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    z-index: 1;\n    border-bottom: 0;\n    border-color: ${colors.tableLines};\n    width: calc(100% + 1px);\n  }\n`;\n\nexport const BoxHeader = styled.div`\n  display: flex;\n  align-items: stretch;\n  margin-bottom: ${padding.md}px;\n\n  h4 {\n    flex: 1 1 auto;\n    margin-bottom: 0;\n  }\n\n  button {\n    ${TextButton}\n  }\n`;\n\nexport const Toggles = styled.div`\n  padding: ${padding.md}px ${padding.sm}px ${padding.sm}px ${padding.sm}px;\n`;\n\nexport const SectionHeader = styled.h5`\n  flex: 0 0 auto;\n  width: 100%;\n  text-align: left;\n\n  padding: ${padding.sm}px;\n  padding-bottom: 0;\n\n  display: flex;\n  align-items: center;\n`;\n\nexport const FilterPills = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  padding-left: ${padding.sm}px;\n\n  .time {\n    background: #beb;\n  }\n  .location {\n    background: white;\n  }\n  .suspect {\n    background: ${colors.person};\n  }\n  .type {\n    background: #bbe;\n  }\n`;\n","import React from 'react';\n\nimport type { TagFilters, TagFilterChoices, TagFilterChoice } from '../../types/TagFilters';\nimport Tag from '../shared/Tag';\n\nimport { FilterPills } from './filter-box-styled-components';\n\ntype Props = {\n  tagFilters: TagFilters;\n  choices: TagFilterChoices;\n  keywords: string[];\n  onDelete: (type: 'keywords' | keyof TagFilters, id: string) => void;\n};\n\nconst ActiveFilters = ({ tagFilters, choices, keywords, onDelete }: Props) => {\n  const tagFilterChoices = React.useMemo(() => {\n    const result: (TagFilterChoice & { type: keyof TagFilters })[] = [];\n    (Object.keys(tagFilters) as (keyof TagFilters)[]).forEach((filterKey) => {\n      const sectionFilters: Set<string> = tagFilters[filterKey];\n      const sectionChoices: TagFilterChoice[] | undefined = choices[filterKey];\n      if (sectionChoices) {\n        sectionFilters.forEach((id) => {\n          const match = sectionChoices.find((element) => element._id === id);\n          if (match) {\n            result.push({ ...match, type: filterKey });\n          }\n        });\n      }\n    });\n    return result;\n  }, [tagFilters, choices]);\n\n  const search = keywords.join(' ');\n\n  return (\n    <FilterPills>\n      {tagFilterChoices.map(({ _id, type, label }) => (\n        <Tag\n          key={`active-${_id}`}\n          id={_id}\n          className={type}\n          label={label}\n          title={`${type[0].toUpperCase() + type.slice(1)}: ${label}`}\n          onDelete={() => onDelete(type, _id)}\n        />\n      ))}\n      {search.length > 0 && (\n        <Tag\n          key=\"active-keywords\"\n          id=\"search\"\n          label={search}\n          className=\"keywords\"\n          title={`Keywords: ${search}`}\n          onDelete={() => onDelete('keywords', search)}\n        />\n      )}\n    </FilterPills>\n  );\n};\n\nexport default ActiveFilters;\n","import React from 'react';\nimport Form from 'react-bootstrap/Form';\n\nimport { SectionHeader } from './filter-box-styled-components';\n\ntype Props = {\n  onChange: (search: string) => void;\n  value: string;\n};\n\nconst KeywordSearch = ({ onChange, value }: Props) => {\n  return (\n    <>\n      <SectionHeader>Keywords</SectionHeader>\n      <Form.Control\n        type=\"text\"\n        placeholder=\"Search\"\n        onChange={(e) => onChange(e.target.value)}\n        value={value}\n        size=\"sm\"\n      />\n    </>\n  );\n};\n\nexport default KeywordSearch;\n","import React from 'react';\n\nimport { SectionHeader } from './filter-box-styled-components';\n\ntype Props = {\n  label?: string;\n  children: React.ReactNode;\n};\n\nconst Section = ({ children, label }: Props) => {\n  return (\n    <>\n      {label && <SectionHeader>{label}</SectionHeader>}\n      {children}\n    </>\n  );\n};\n\nexport default Section;\n","import classnames from 'classnames';\nimport React from 'react';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport Form from 'react-bootstrap/Form';\nimport ToggleButton from 'react-bootstrap/ToggleButton';\n\nimport type { TagFilterChoiceWithCount } from '../../types/TagFilters';\n\ntype Props = {\n  categoryId: string;\n  choices: TagFilterChoiceWithCount[];\n  choicesFilter: string;\n  setChoicesFilter: (str: string) => void;\n  selectedIds: Set<string>;\n  onChange: (choiceIds: Set<string>) => void;\n};\n\nconst TagFilterChoiceBox = ({\n  categoryId,\n  choices,\n  choicesFilter,\n  setChoicesFilter,\n  selectedIds,\n  onChange,\n}: Props) => {\n  const toggleSelection = (id: string) => {\n    const newSelected = new Set(selectedIds);\n    if (selectedIds.has(id)) {\n      newSelected.delete(id);\n    } else {\n      newSelected.add(id);\n    }\n    onChange(newSelected);\n  };\n\n  return (\n    <>\n      {choices.length > 8 && (\n        <Form.Control\n          type=\"text\"\n          placeholder=\"Filter...\"\n          onChange={(e) => setChoicesFilter(e.target.value)}\n          value={choicesFilter}\n          size=\"sm\"\n          className=\"choice-filter\"\n        />\n      )}\n      <ButtonGroup toggle vertical>\n        {choices.map((choice) => (\n          <ToggleButton\n            key={`${categoryId}-choice-${choice._id}`}\n            title={choice.label}\n            type=\"checkbox\"\n            variant=\"secondary\"\n            checked={selectedIds.has(choice._id)}\n            value=\"1\"\n            onChange={() => toggleSelection(choice._id)}\n            className={classnames({\n              hidden:\n                /* selectedIds.has(choice.id) || // TODO should chosen items disappear or go? */\n                !choice.label.toLowerCase().includes(choicesFilter.toLowerCase()),\n            })}\n          >\n            <div className=\"label\">{choice.label}</div>\n            <div className=\"count\">({choice.count})</div>\n          </ToggleButton>\n        ))}\n      </ButtonGroup>\n    </>\n  );\n};\n\nexport default TagFilterChoiceBox;\n","import React from 'react';\nimport Form from 'react-bootstrap/Form';\nimport { useHistory } from 'react-router-dom';\n\nimport type { TagFilters, TagFilterChoicesWithCount, Toggles } from '../../types/TagFilters';\n\nimport ActiveFilters from './ActiveFilters';\n\nimport KeywordSearch from './KeywordSearch';\nimport Section from './Section';\nimport TagFilterChoiceBox from './TagFilterChoiceBox';\nimport { Box, BoxHeader, Toggles as TogglesContainer } from './filter-box-styled-components';\n\ntype Props = {\n  keywords: string[];\n  tagFilters: TagFilters;\n  toggles: Toggles;\n  choices: TagFilterChoicesWithCount;\n  onKeywordsChanged: (newKeywords: string[]) => void;\n  onTagFilterChanged: <K extends keyof TagFilters>(key: K, newValue: TagFilters[K]) => void;\n  onToggleChanged: <K extends keyof Toggles>(key: K, newValue: Toggles[K]) => void;\n};\n\nconst removeOneFromSection = (section: Set<string>, id: string) => {\n  section.delete(id);\n  return section;\n};\n\nconst FilterBox = ({\n  keywords,\n  tagFilters,\n  toggles,\n  choices,\n  onKeywordsChanged,\n  onTagFilterChanged,\n  onToggleChanged,\n}: Props) => {\n  const history = useHistory();\n\n  const [suspectTagChoicesFilter, setSuspectTagChoicesFilter] = React.useState<string>('');\n  const [otherTagChoicesFilter, setOtherTagChoicesFilter] = React.useState<string>('');\n\n  const clearAll = () => {\n    setSuspectTagChoicesFilter('');\n    setOtherTagChoicesFilter('');\n    onTagFilterChanged('suspect', new Set());\n    onTagFilterChanged('otherTags', new Set());\n    onKeywordsChanged([]);\n\n    // The above should be sufficient to clear filters, but because successive\n    // query param updates are using stale query params, it will not clear\n    // correctly. Need to access a fresh copy of `useLocation` in `setValue`,\n    // but hooks cannot be calling inside.\n    history.push({ search: '' });\n  };\n\n  return (\n    <Box>\n      <BoxHeader>\n        <h4>Filters</h4>\n        <button type=\"button\" onClick={clearAll}>\n          Clear all\n        </button>\n      </BoxHeader>\n      <ActiveFilters\n        tagFilters={tagFilters}\n        choices={choices}\n        keywords={keywords}\n        onDelete={(type: 'keywords' | keyof TagFilters, id) =>\n          type === 'keywords'\n            ? onKeywordsChanged([])\n            : onTagFilterChanged(type, removeOneFromSection(tagFilters[type], id))\n        }\n      />\n      <TogglesContainer>\n        <Form.Switch\n          type=\"switch\"\n          id=\"include-untimestamped\"\n          label=\"Include evidence without a time\"\n          checked={toggles.includeUntimestamped}\n          onChange={(evt) => onToggleChanged('includeUntimestamped', evt.target.checked)}\n        />\n        <Form.Switch\n          type=\"switch\"\n          id=\"include-unlocated\"\n          label=\"Include evidence without a location\"\n          checked={toggles.includeUnlocated}\n          onChange={(evt) => onToggleChanged('includeUnlocated', evt.target.checked)}\n        />\n      </TogglesContainer>\n      <KeywordSearch\n        onChange={(search) => onKeywordsChanged(search.split(' '))}\n        value={keywords.join(' ')}\n      />\n\n      <Section label=\"Suspects\">\n        <TagFilterChoiceBox\n          categoryId=\"suspects\"\n          choices={choices.suspect}\n          choicesFilter={suspectTagChoicesFilter}\n          setChoicesFilter={setSuspectTagChoicesFilter}\n          selectedIds={tagFilters.suspect}\n          onChange={(params) => onTagFilterChanged('suspect', params)}\n        />\n      </Section>\n      <Section label=\"Other Tags\">\n        <TagFilterChoiceBox\n          categoryId=\"otherTags\"\n          choices={choices.otherTags}\n          choicesFilter={otherTagChoicesFilter}\n          setChoicesFilter={setOtherTagChoicesFilter}\n          selectedIds={tagFilters.otherTags}\n          onChange={(params) => onTagFilterChanged('otherTags', params)}\n        />\n      </Section>\n    </Box>\n  );\n};\n\nexport default FilterBox;\n","import type { LngLatBounds } from 'mapbox-gl';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport type {\n  TagFilterChoicesWithCount,\n  TagFilterChoiceWithCount,\n  TagFilters,\n  Toggles,\n} from '../../types/TagFilters';\n\nconst isItemInTimeRange = (args: {\n  itemStart: Date;\n  itemEnd?: Date;\n  rangeStart: Date;\n  rangeEnd: Date;\n}): boolean => {\n  const { itemStart, itemEnd, rangeStart, rangeEnd } = args;\n  // Use itemEnd if provided and after itemStart; otherwise treat item as instantaneous at itemStart.\n  const usableItemEnd = itemEnd && itemEnd > itemStart ? itemEnd : itemStart;\n  // Return true if any portion of the item's duration is in the range\n  return itemStart <= rangeEnd && usableItemEnd >= rangeStart;\n};\n\nconst doesEvidenceMatchKeywords = (evidence: Evidence, keywords: string[]): boolean => {\n  if (keywords.length === 0) {\n    return true;\n  }\n\n  return [\n    evidence.locationName,\n    ...(evidence.otherTags || []),\n    ...(evidence.suspectTags || []),\n    evidence.rationale,\n    evidence.summary,\n  ].some((itemField) => {\n    if (!itemField) {\n      return false;\n    }\n\n    return keywords.some(\n      (keyword) => itemField.toLocaleLowerCase().indexOf(keyword.toLocaleLowerCase()) >= 0\n    );\n  });\n};\n\nconst isEvidenceInBounds = (evidence: Evidence, bounds: LngLatBounds): boolean => {\n  const { lat, lng } = evidence.location!;\n  return (\n    lat >= bounds.getSouth() &&\n    lat <= bounds.getNorth() &&\n    lng >= bounds.getWest() &&\n    lng <= bounds.getEast()\n  );\n};\n\nexport default function filterEvidence(\n  evidence: Evidence[],\n  tagFilters: TagFilters,\n  rawKeywords: string[],\n  toggles: Toggles,\n  startEndTimes: [Date, Date] | null,\n  bounds: LngLatBounds | null\n): {\n  filteredEvidence: Evidence[];\n  timelineFilteredEvidence: Evidence[];\n  tagFilterChoices: TagFilterChoicesWithCount;\n} {\n  const filteredEvidence: Evidence[] = [];\n  const timelineFilteredEvidence: Evidence[] = [];\n\n  const allSuspects: { [label: string]: TagFilterChoiceWithCount } = {};\n  const allOtherTags: { [label: string]: TagFilterChoiceWithCount } = {};\n\n  // helper for adding items to the filter choices\n  function addTagFilterChoiceItem(\n    tagFilterChoiceMap: { [label: string]: TagFilterChoiceWithCount },\n    label: string\n  ) {\n    /* eslint-disable no-param-reassign */\n    if (!tagFilterChoiceMap[label]) {\n      tagFilterChoiceMap[label] = { _id: label, label, count: 0 };\n    }\n\n    tagFilterChoiceMap[label].count += 1;\n    /* eslint-enable no-param-reassign */\n  }\n\n  const keywords = rawKeywords.filter((s) => s);\n\n  evidence.forEach((item) => {\n    // Keywords and toggles affect everything -- so apply those first and short-circuit\n    // if the evidence doesn't match\n    if (!doesEvidenceMatchKeywords(item, keywords)) {\n      return;\n    }\n\n    if (!toggles.includeUntimestamped && !item.realTimeStart) {\n      return;\n    }\n\n    if (!toggles.includeUnlocated && !item.location) {\n      return;\n    }\n\n    // Compute which filters this item matches\n    let matchSuspects = true;\n    if (tagFilters.suspect.size > 0) {\n      if (!item.suspectTags) {\n        matchSuspects = false;\n      } else if (!item.suspectTags.some((tag) => tagFilters.suspect.has(tag))) {\n        matchSuspects = false;\n      }\n    }\n\n    let matchTags = true;\n    if (tagFilters.otherTags.size > 0) {\n      if (!item.otherTags) {\n        matchTags = false;\n      } else if (!item.otherTags.some((tag) => tagFilters.otherTags.has(tag))) {\n        matchTags = false;\n      }\n    }\n\n    let matchTimeline = true;\n    if (startEndTimes && item.realTimeStart) {\n      if (\n        !isItemInTimeRange({\n          itemStart: item.realTimeStart,\n          itemEnd: item.realTimeEnd,\n          rangeStart: startEndTimes[0],\n          rangeEnd: startEndTimes[1],\n        })\n      ) {\n        matchTimeline = false;\n      }\n    }\n\n    let matchBounds = true;\n    if (bounds && item.location) {\n      if (!isEvidenceInBounds(item, bounds)) {\n        matchBounds = false;\n      }\n    }\n\n    // If it matches all the filters, add it to the filtered evidence\n    if (matchSuspects && matchTags && matchTimeline && matchBounds) {\n      filteredEvidence.push(item);\n    }\n\n    // If it matches all the filters *ignoring timeline*, add it to the evidence\n    // for the timeline (the timeline shows evidence outside the timeline\n    // bounds)\n    if (matchSuspects && matchTags && matchBounds) {\n      timelineFilteredEvidence.push(item);\n    }\n\n    // Now, we need to compute the counts for the filter boxes. These filters\n    // are ORs, not ANDs. So the count for each filter is the number of pieces\n    // of evidence that match that specific filter item, *and* match the active\n    // filters for the other types of filters. For example, the count for the\n    // location filter \"The Ellipse\" is the number of pieces of evidence that\n    // are tagged with \"The Ellipse\", AND match all active suspect and tag\n    // filters.\n\n    if (matchTags && matchTimeline && matchBounds && item.suspectTags) {\n      item.suspectTags.forEach((tag) => addTagFilterChoiceItem(allSuspects, tag));\n    }\n\n    if (matchSuspects && matchTimeline && matchBounds && item.otherTags) {\n      item.otherTags.forEach((tag) => addTagFilterChoiceItem(allOtherTags, tag));\n    }\n  });\n\n  const tagFilterChoices = {\n    suspect: Object.values(allSuspects).sort((a, b) => (a.label < b.label ? -1 : 1)),\n    otherTags: Object.values(allOtherTags).sort((a, b) => (a.label < b.label ? -1 : 1)),\n  };\n\n  return { tagFilterChoices, filteredEvidence, timelineFilteredEvidence };\n}\n","import type { LngLatBounds } from 'mapbox-gl';\nimport React from 'react';\n\nimport type { Evidence } from '@jan6evidence/types';\n\nimport { TagFilters, Toggles } from '../types/TagFilters';\n\nimport EvidenceViewer from './EvidenceMain';\nimport EvidenceExportView from './EvidenceMain/EvidenceExportView';\nimport MobileOverlay from './EvidenceMain/EvidenceMobileOverlay';\nimport FilterBox from './FilterBox';\nimport filterEvidence from './FilterBox/filterEvidence';\nimport { PATHS } from './Routes';\nimport { usePageTitle, useQueryState } from './shared/hooks';\n\nconst toArray = (value: string | string[] | null | undefined): string[] => {\n  if (Array.isArray(value)) {\n    return value;\n  }\n  if (value == null) {\n    return [];\n  }\n  return [value];\n};\n\ninterface EvidenceAppProps {\n  evidence: Evidence[];\n  collectionsFC?: (props: { id?: string; location?: string }) => React.ReactNode;\n}\n\nconst EvidenceApp = (props: EvidenceAppProps) => {\n  usePageTitle('January 6 Evidence Explorer');\n\n  const [queryState, setQueryState] = useQueryState();\n\n  const tagFilters = {\n    suspect: new Set<string>(toArray(queryState.suspect)),\n    otherTags: new Set<string>(toArray(queryState.other_tags)),\n  };\n  const setTagFilters = <K extends keyof TagFilters>(key: K, newValue: TagFilters[K]): void => {\n    setQueryState((prevState) => {\n      const queryKey = key === 'otherTags' ? 'other_tags' : key;\n      return {\n        ...prevState,\n        [queryKey]: Array.from(newValue),\n      };\n    });\n  };\n\n  const keywords = toArray(queryState.keywords);\n  const setKeywords = (nextKeywords: string[]) => {\n    setQueryState((prevState) => ({\n      ...prevState,\n      keywords: nextKeywords,\n    }));\n  };\n\n  const QUERY_TRUE = 'true';\n  const QUERY_FALSE = 'false;';\n  const booleanFromQueryParam = (param: any, defaultValue: boolean): boolean =>\n    param ? param === QUERY_TRUE : defaultValue;\n\n  const toggles: Toggles = {\n    // default to true if no value set in query states\n    includeUntimestamped: booleanFromQueryParam(queryState.includeUntimestamped, true),\n    includeUnlocated: booleanFromQueryParam(queryState.includeUnlocated, true),\n  };\n  const setToggles = <K extends keyof Toggles>(toggleName: K, newValue: boolean): void => {\n    setQueryState((prevState) => ({\n      ...prevState,\n      [toggleName]: newValue ? QUERY_TRUE : QUERY_FALSE,\n    }));\n  };\n\n  const parsedStartEndTimes =\n    typeof queryState.start_end_times === 'string' ? queryState.start_end_times.split(',') : null;\n  const startEndTimes: [Date, Date] | null = parsedStartEndTimes\n    ? [\n        new Date(parseInt(parsedStartEndTimes[0], 10)),\n        new Date(parseInt(parsedStartEndTimes[1], 10)),\n      ]\n    : null;\n\n  const setStartEndTimes = (newTimes: [Date, Date] | null) => {\n    // eslint-disable-next-line camelcase\n    setQueryState(({ start_end_times, ...prevState }) => ({\n      ...prevState,\n      ...(newTimes\n        ? { start_end_times: [newTimes[0].getTime(), newTimes[1].getTime()].join(',') }\n        : {}),\n    }));\n  };\n\n  const [bounds, setBounds] = React.useState<LngLatBounds | null>(null);\n\n  const exportView: boolean = booleanFromQueryParam(queryState.exportView, false);\n  const setExportView = (newValue: boolean): void => {\n    setQueryState((prevState) => ({\n      ...prevState,\n      exportView: newValue ? QUERY_TRUE : undefined,\n    }));\n  };\n\n  const { filteredEvidence, timelineFilteredEvidence, tagFilterChoices } = filterEvidence(\n    props.evidence,\n    tagFilters,\n    keywords,\n    toggles,\n    startEndTimes,\n    bounds\n  );\n\n  return exportView ? (\n    <EvidenceExportView\n      evidence={filteredEvidence}\n      tagFilters={tagFilters}\n      keywords={keywords}\n      toggles={toggles}\n      startEndTimes={startEndTimes || undefined}\n      bounds={bounds || undefined}\n      setExportView={setExportView}\n    />\n  ) : (\n    <div>\n      <MobileOverlay />\n      <FilterBox\n        onTagFilterChanged={setTagFilters}\n        onKeywordsChanged={setKeywords}\n        tagFilters={tagFilters}\n        choices={tagFilterChoices}\n        keywords={keywords}\n        toggles={toggles}\n        onToggleChanged={(toggleName, newValue) => {\n          setToggles(toggleName, newValue);\n        }}\n      />\n      <EvidenceViewer\n        title=\"January 6 Evidence Explorer\"\n        evidence={filteredEvidence}\n        timedEvidence={timelineFilteredEvidence}\n        startEndTimes={startEndTimes}\n        setStartEndTimes={setStartEndTimes}\n        hideExplorerLink\n        rootPath={PATHS.evidence}\n        getDetailPath={(detailId) => `${PATHS.evidence}/${detailId}`}\n        setBounds={setBounds}\n        setExportView={setExportView}\n        collectionsFC={props.collectionsFC}\n      />\n    </div>\n  );\n};\n\nexport default EvidenceApp;\n","import React from 'react';\n\nimport { evidence } from '../data';\n\nimport EvidenceApp from './EvidenceApp';\n\nconst StaticEvidencePage = () => {\n  return <EvidenceApp evidence={evidence} />;\n};\n\nexport default StaticEvidencePage;\n","// scraped from https://www.fbi.gov/wanted/capitol-violence\nimport FBI_POI_LINKS from './fbi_poi_links.json';\n\ntype numToStrObj = { [k: number]: string };\n\nconst getFbiLinksByFbiNumber = (): numToStrObj => {\n  let result: numToStrObj = {};\n  FBI_POI_LINKS.forEach((link: string) => {\n    const regexMatch = link.match(/\\d+/);\n    if (regexMatch && regexMatch[0]) {\n      const num = parseInt(regexMatch[0], 10);\n      if (num && !result[num]) {\n        result[num] = link;\n      }\n    }\n  });\n  return result;\n};\n\nexport const fbiLinksByFbiNumber = getFbiLinksByFbiNumber();\n","export type TagDeclaration = {\n  mainTag: string;\n  alternateTags?: Array<string>;\n};\n\nexport class CanonicalTags {\n  private lookupTable: { [k: string]: string } = {};\n\n  warnings: Array<string> = [];\n\n  constructor(declarations: Array<TagDeclaration>) {\n    // loop through main tags first\n    declarations.forEach((dec) => this.addToStore(dec.mainTag, dec.mainTag));\n    // then loop through again to add the alternates\n    declarations.forEach((dec) =>\n      (dec.alternateTags || []).forEach((altTag) => this.addToStore(altTag, dec.mainTag))\n    );\n  }\n\n  logWarningsToConsole() {\n    /* eslint-disable-next-line no-console */\n    this.warnings.forEach((msg) => console.warn(msg));\n  }\n\n  lookup(key: string): string | undefined {\n    const cleanedKey = this.cleanLookupKey(key);\n    return this.lookupTable[cleanedKey];\n  }\n\n  private addToStore(key: string, mainTag: string) {\n    const currentValue = this.lookup(key);\n    if (currentValue && currentValue === mainTag) {\n      this.warnings.push(\n        `Already stored ${currentValue} as canonical form of ${key}, ignoring duplicate`\n      );\n      return;\n    }\n    if (currentValue && currentValue !== mainTag) {\n      this.warnings.push(\n        `Already stored ${currentValue} as canonical form of ${key}, ignoring new value ${mainTag}`\n      );\n      return;\n    }\n    const cleanedKey = this.cleanLookupKey(key);\n    // use canonical form of mainTag if one already exists\n    this.lookupTable[cleanedKey] = this.lookup(mainTag) || mainTag.trim();\n  }\n\n  private cleanLookupKey(key: string): string {\n    return key.trim().toLowerCase();\n  }\n}\n","export { fbiLinksByFbiNumber } from './fbi_links';\n\nimport suspectData from './suspects.json';\nimport nonSuspectHashtagData from './non-suspect-hashtags.json';\nimport { CanonicalTags } from '@jan6evidence/canonical_tags';\nimport { Suspect } from '@jan6evidence/types';\n\nconst toDate = (str: string | undefined): Date | undefined => {\n  if (!str) {\n    return undefined;\n  }\n  try {\n    return new Date(str);\n  } catch {\n    return undefined;\n  }\n};\n\nexport const suspects = suspectData.map(\n  (item): Suspect => {\n    const arrestDate = toDate(item.arrestDate);\n    return {\n      ...item,\n      arrestDate,\n    } as Suspect;\n  }\n);\n\nexport const getCanonicalSuspectTags = (suspects: Array<Suspect>): CanonicalTags => {\n  const tags = new CanonicalTags(\n    suspects.flatMap((s) =>\n      // ignore suspects without hashtags\n      s.primaryHashtag ? [{ mainTag: s.primaryHashtag, alternateTags: s.alternateHashtags }] : []\n    )\n  );\n  tags.logWarningsToConsole();\n  return tags;\n};\n\n// most callers will just want to use `canonicalSuspectTags`, but the suspect import script needs\n// to call the getCanonicalSuspectTags function directly.\nexport const canonicalSuspectTags = getCanonicalSuspectTags(suspects);\n\nexport const nonSuspectHashtags = nonSuspectHashtagData;\n\nexport const getCanonicalNonsuspectHashtag = (str: string): string | undefined => {\n  for (let i = 0; i < nonSuspectHashtags.length; i++) {\n    if (nonSuspectHashtags[i].topicName.toLowerCase() === str.toLowerCase().trim()) {\n      return nonSuspectHashtags[i].topicName;\n    }\n  }\n  return undefined;\n};\n","import React from 'react';\n\nimport styled from 'styled-components';\n\nimport { fbiLinksByFbiNumber } from '@jan6evidence/data';\nimport THUMBNAIL_FILENAMES from '@jan6evidence/data/thumbnail_filenames.json';\nimport { Suspect } from '@jan6evidence/types';\n\nconst SuspectCardDiv = styled.div`\n  padding: 0.25rem;\n  flex: auto;\n  min-width: 8rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 280px;\n  margin: 10px 5px;\n  vertical-align: top;\n`;\n\nconst SuspectThumbnailImg = styled.img`\n  width: auto;\n  height: 200px;\n  vertical-align: middle;\n  border: solid 1px #eee;\n`;\n\nconst OverviewContainerDiv = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n`;\n\nexport const SuspectThumbnail = ({ primaryHashtag }: { primaryHashtag: string | undefined }) => {\n  const filename = (THUMBNAIL_FILENAMES as any)[primaryHashtag || ''] || 'not_found.png';\n  const thumbnailSrcUrl = `/poi_thumbnails/${filename}`;\n  return <SuspectThumbnailImg src={thumbnailSrcUrl} alt={`${primaryHashtag} thumbnail image`} />;\n};\n\n// For now, point to TommyC's site. Replace with our own detail page once we have it!\nconst detailUrl = (suspect: Suspect): string =>\n  `https://jan6attack.com/individuals/${suspect.primaryHashtag?.toLowerCase()}/index.htm`;\n\nconst twitterSearchUrl = (suspect: Suspect): string =>\n  `https://twitter.com/search?q=${suspect.primaryHashtag}`;\n\nconst getFbiLink = (suspect: Suspect) => {\n  if (!suspect.fbiIdentifier) {\n    return null;\n  }\n  const fbiNumberMatch = suspect.fbiIdentifier.match(/\\d+/);\n  if (!fbiNumberMatch) {\n    return null;\n  }\n  const caption = `FBI: ${suspect.fbiIdentifier}`;\n  const fbiUrl = fbiLinksByFbiNumber[parseInt(fbiNumberMatch[0], 10)];\n  if (fbiUrl) {\n    return <a href={fbiUrl}>{caption}</a>;\n  } else {\n    return <span>{caption}</span>;\n  }\n};\n\nconst SuspectCard = ({ suspect }: { suspect: Suspect }) => {\n  if (!suspect.primaryHashtag) {\n    return null;\n  }\n  const fbiLink = getFbiLink(suspect);\n  return (\n    <SuspectCardDiv data-title={`suspect-${suspect._id}`}>\n      <a href={detailUrl(suspect)}>\n        <SuspectThumbnail primaryHashtag={suspect.primaryHashtag} />\n      </a>\n      <a href={twitterSearchUrl(suspect)}>#{suspect.primaryHashtag}</a>\n      {fbiLink || <span>&nbsp;</span>}\n    </SuspectCardDiv>\n  );\n};\n\nconst SuspectsGallery = ({ suspects }: { suspects: Array<Suspect> }) => {\n  return (\n    <OverviewContainerDiv>\n      {suspects.map((suspect) => (\n        <SuspectCard key={suspect._id} suspect={suspect} />\n      ))}\n    </OverviewContainerDiv>\n  );\n};\n\nexport default SuspectsGallery;\n","import styled from 'styled-components';\n\nimport { padding } from '../shared/constants';\n\nconst xlText = '20px';\nconst medText = '14px';\nconst smallText = '13px';\n\nexport const ROW_HEIGHT = 180;\n\nexport const CrimeCategories = styled.ul`\n  padding: 0;\n`;\n\nexport const CrimeCategory = styled.li`\n  list-style-type: none;\n  background: #eee;\n  padding: ${padding.xs}px ${padding.sm}px;\n  border-radius: ${padding.sm}px;\n  margin-bottom: ${padding.sm}px;\n  mix-blend-mode: darken;\n`;\n\nexport const HashtagCellWrapper = styled.td`\n  font-size: ${xlText};\n  .alternates {\n    font-size: ${smallText};\n    display: flex;\n    flex-wrap: wrap;\n\n    .alternate {\n      margin-right: 6px;\n    }\n  }\n`;\n\nexport const LinksCellWrapper = styled.td`\n  font-size: ${medText};\n`;\n\nexport const SummaryCellWrapper = styled.td`\n  font-size: ${medText};\n  p {\n    padding: 12px 0;\n    margin: 0;\n  }\n\n  p + p {\n    padding-top: 0;\n  }\n`;\n","import React from 'react';\n\nimport type { Suspect } from '@jan6evidence/types';\n\nimport PageHeaderAndNav from './PageHeaderAndNav';\nimport SuspectsGallery from './SuspectsGallery';\nimport SuspectsTable from './SuspectsTable';\nimport { usePageTitle } from './shared/hooks';\nimport { AppWrapper } from './table-styled-components';\n\ninterface SuspectsAppProps {\n  suspects: Suspect[];\n}\n\nconst SuspectsApp = (props: SuspectsAppProps) => {\n  usePageTitle('January 6 Persons of Interest');\n\n  return (\n    <AppWrapper>\n      <PageHeaderAndNav />\n      <div style={{ margin: '30px 30px 0px', maxWidth: '800px' }}>\n        <h2>Persons-of-Interest Gallery</h2>\n        <p style={{ fontSize: '0.9rem', marginBottom: '0px' }}>\n          Data from the{' '}\n          <a href=\"https://docs.google.com/spreadsheets/d/18NzncPJ-5oaYrDfq_VnjaSTLyY_vKaoSTgc6lznl9GU/edit#gid=0\">\n            Capitol Suspects Database\n          </a>\n          .\n        </p>\n      </div>\n      <SuspectsGallery suspects={props.suspects} />\n    </AppWrapper>\n  );\n};\n\nexport const SuspectsTableApp = (props: SuspectsAppProps) => {\n  usePageTitle('January 6 Persons of Interest');\n\n  return (\n    <AppWrapper>\n      <PageHeaderAndNav />\n      <SuspectsTable suspects={props.suspects} />\n    </AppWrapper>\n  );\n};\n\nexport default SuspectsApp;\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport type { Suspect } from '@jan6evidence/types';\n\nimport Categories from './Categories';\n\nimport { LinksCellWrapper, SummaryCellWrapper, HashtagCellWrapper } from './row-styled-components';\n\nconst SuspectPhoto = styled.img`\n  max-width: 100px;\n  max-height: 100px;\n`;\n\ntype Props = {\n  data: Suspect;\n};\n\nconst ImageCell = ({ data }: Props) => {\n  if (!data.primaryPhotoUrl) {\n    return <td />;\n  }\n\n  const regexMatch = data.primaryPhotoUrl?.match(/https:\\/\\/drive.google.com\\/file\\/d\\/(\\w+)\\//);\n\n  let photoURL = data.primaryPhotoUrl;\n  if (regexMatch) {\n    photoURL = `https://drive.google.com/uc?export=view&id=${regexMatch[1]}`;\n  }\n\n  return (\n    <td>\n      <a href={photoURL} target=\"_blank\" rel=\"noopener noreferrer\">\n        <SuspectPhoto src={photoURL} alt=\"\" />\n      </a>\n    </td>\n  );\n};\n\nconst HashtagLink = ({ hashtag }: { hashtag: string | undefined }) => {\n  if (!hashtag) {\n    return <span>-</span>;\n  }\n  let formattedHashtag = hashtag;\n  if (!formattedHashtag.startsWith('#')) {\n    formattedHashtag = `#${hashtag}`;\n  }\n\n  return (\n    <a\n      href={`https://twitter.com/search?q=${encodeURIComponent(formattedHashtag)}`}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      {hashtag}\n    </a>\n  );\n};\n\nconst HashtagCell = ({ data }: Props) => (\n  <HashtagCellWrapper>\n    <HashtagLink hashtag={data.primaryHashtag} />\n    {data.alternateHashtags.length > 0 && (\n      <p className=\"alternates\">\n        {data.alternateHashtags.map((hashtag) => (\n          <span className=\"alternate\">\n            <HashtagLink hashtag={hashtag} />\n          </span>\n        ))}\n      </p>\n    )}\n  </HashtagCellWrapper>\n);\n\nconst LinksCell = ({ data }: Props) => {\n  const links = [\n    {\n      label: 'Composites',\n      url: data.compositeURL,\n    },\n    {\n      label: 'Files',\n      url: data.filesUrl,\n    },\n  ].filter(({ url }) => url);\n\n  return (\n    <LinksCellWrapper>\n      {links.map(({ label, url }) => (\n        <p key={label}>\n          <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n            {label}\n          </a>\n        </p>\n      ))}\n    </LinksCellWrapper>\n  );\n};\n\nconst hasSuspectTag = (\n  { data }: Props,\n  { type, name }: { type: string; name: string }\n): boolean => {\n  return data.otherTags.some((tag) => tag.type === type && tag.name === name);\n};\n\nconst TagsCell = ({ data }: Props) => {\n  const tags = [\n    {\n      present: !!data.category,\n      id: 'category',\n      name: data.category!,\n      color: '#ccc',\n    },\n    {\n      present: hasSuspectTag({ data }, { type: 'behavior', name: 'Violence' }),\n      id: 'violent',\n      name: 'Violence',\n      color: '#dd4b4b',\n    },\n    {\n      present: hasSuspectTag({ data }, { type: 'behavior', name: 'Vandalism' }),\n      id: 'vandalism',\n      name: 'Vandalism',\n      color: '#ffba5f',\n    },\n    // {\n    //   present: data.isOrganizer,\n    //   id: 'organizer',\n    //   name: 'Organizer',\n    //   color: '#ced62a',\n    // },\n    {\n      present: hasSuspectTag({ data }, { type: 'equipment', name: 'EarpieceOrRadio' }),\n      id: 'earpiece',\n      name: 'Earpiece / Radio',\n      color: '#bec4ff',\n    },\n    {\n      present: hasSuspectTag({ data }, { type: 'equipment', name: 'HelmetOrArmor' }),\n      id: 'helmet',\n      name: 'Helmet / Armor',\n      color: '#9084ff',\n    },\n  ];\n\n  return (\n    <td>\n      <Categories id={data._id} data={tags} />\n    </td>\n  );\n};\n\nconst TwitterUserLink = ({ username }: { username: string }) => {\n  let formattedUsername = username;\n  if (formattedUsername.startsWith('@')) {\n    formattedUsername = username.slice(1);\n  }\n\n  return (\n    <a\n      href={`https://twitter.com/${encodeURIComponent(formattedUsername)}`}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      {username}\n    </a>\n  );\n};\n\nconst ProfileLeadsCell = ({ data }: Props) => {\n  return (\n    <td>\n      {data.profileLeads.map((lead) => (\n        <p key={lead}>\n          <TwitterUserLink username={lead} />\n        </p>\n      ))}\n    </td>\n  );\n};\n\nconst SummaryCell = ({ data }: Props) => {\n  const sections = [\n    { header: 'Brief summary of observed actions', body: data.actionsSummary },\n    { header: 'Appearance notes', body: data.appearanceSummary },\n    { header: 'Associated with', body: data.associates.join(', ') },\n  ].filter(({ body }) => body);\n\n  return (\n    <SummaryCellWrapper>\n      {sections.map(({ header, body }) => (\n        <p key={header}>\n          <strong>{header}</strong>\n          <br />\n          {body}\n        </p>\n      ))}\n    </SummaryCellWrapper>\n  );\n};\n\n// TODO differentiate by cell type based on columnIndex\nconst Row = ({ data }: Props) => (\n  <tr data-title={`suspect-${data._id}`}>\n    <ImageCell data={data} />\n    <HashtagCell data={data} />\n    <LinksCell data={data} />\n    <TagsCell data={data} />\n    <td>{data.fbiIdentifier}</td>\n    <td>{data.caseStatus}</td>\n    <ProfileLeadsCell data={data} />\n    <SummaryCell data={data} />\n  </tr>\n);\n\nexport default Row;\n","import React from 'react';\n\nimport { suspects } from '@jan6evidence/data';\n\nimport SuspectsApp from './SuspectsApp';\n\nconst StaticSuspectsApp = () => {\n  return <SuspectsApp suspects={suspects} />;\n};\n\nexport default StaticSuspectsApp;\n","import React from 'react';\nimport { Redirect, Route, Switch } from 'react-router';\n\nimport AboutPage from './AboutPage';\nimport Error404Page from './Error404Page';\nimport OtherResourcesPage from './OtherResourcesPage';\nimport StaticEvidencePage from './StaticEvidencePage';\nimport StaticSuspectsApp from './StaticSuspectsApp';\n\nexport const PATHS = {\n  evidence: '/e',\n  collections: '/c',\n  suspects: '/gallery',\n  suspectsTable: '/poi_table',\n  about: '/about',\n  resources: '/resources',\n};\n\nfunction Routes() {\n  return (\n    <Switch>\n      <Route exact path=\"/\">\n        <Redirect to={PATHS.evidence} />\n      </Route>\n      <Route path={PATHS.about} component={AboutPage} />\n      <Route path={PATHS.resources} component={OtherResourcesPage} />\n      <Route path={PATHS.suspects} component={StaticSuspectsApp} />\n      {/* deprecated: <Route path={PATHS.suspectsTable} component={SuspectsTableApp} /> */}\n      <Route path={PATHS.evidence} exact component={StaticEvidencePage} />\n      <Route path={`${PATHS.evidence}/:detailId`} component={StaticEvidencePage} />\n      <Route component={Error404Page} />\n    </Switch>\n  );\n}\n\nexport default Routes;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\n\nimport './index.css';\nimport Routes from './ui/Routes';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <Routes />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}